;/*FB_PKG_DELIM*/

/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("ms-2.1.1",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){var e=1e3,t=e*60,n=t*60,r=n*24,o=r*7,a=r*365.25;l.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return i(e);if(n==="number"&&isNaN(e)===!1)return t.long?u(e):s(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function i(i){if(i=String(i),!(i.length>100)){var l=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(l){var s=parseFloat(l[1]),u=(l[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"weeks":case"week":case"w":return s*o;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*t;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function s(o){var a=Math.abs(o);return a>=r?Math.round(o/r)+"d":a>=n?Math.round(o/n)+"h":a>=t?Math.round(o/t)+"m":a>=e?Math.round(o/e)+"s":o+"ms"}function u(o){var a=Math.abs(o);return a>=r?c(o,a,r,"day"):a>=n?c(o,a,n,"hour"):a>=t?c(o,a,t,"minute"):a>=e?c(o,a,e,"second"):o+" ms"}function c(e,t,n,r){var o=t>=n*1.5;return Math.round(e/n)+" "+r+(o?"s":"")}}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("debug-4.1.1",["ms-2.1.1","supports-color-5.5.0"],(function(t,n,r,o,a,i){"use strict";function e(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var l=e(n("ms-2.1.1")),s=e(n("supports-color-5.5.0")),u={},c={exports:u};function d(){function e(e){n.debug=n,n.default=n,n.coerce=c,n.disable=i,n.enable=a,n.enabled=s,n.humanize=l(),Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={};function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}n.selectColor=t;function n(e){var a;function i(){var e=arguments;if(i.enabled){var t=i,r=Number(new Date),o=r-(a||r);t.diff=o,t.prev=a,t.curr=r,a=r,e[0]=n.coerce(e[0]),typeof e[0]!="string"&&e.unshift("%O");var l=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,function(r,o){if(r==="%%")return r;l++;var a=n.formatters[o];if(typeof a=="function"){var i=e[l];r=a.call(t,i),e.splice(l,1),l--}return r}),n.formatArgs.call(t,e);var s=t.log||n.log;s.apply(t,e)}}return i.namespace=e,i.enabled=n.enabled(e),i.useColors=n.useColors(),i.color=t(e),i.destroy=r,i.extend=o,typeof n.init=="function"&&n.init(i),n.instances.push(i),i}function r(){var e=n.instances.indexOf(this);return e!==-1?(n.instances.splice(e,1),!0):!1}function o(e,t){var r=n(this.namespace+(typeof t=="undefined"?":":t)+e);return r.log=this.log,r}function a(e){n.save(e),n.names=[],n.skips=[];var t,r=(typeof e=="string"?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&(e=r[t].replace(/\*/g,".*?"),e[0]==="-"?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var a=n.instances[t];a.enabled=n.enabled(a.namespace)}}function i(){var e=[].join(",");return n.enable(""),e}function s(e){if(e[e.length-1]==="*")return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function c(e){return e instanceof Error?e.stack||e.message:e}return n.enable(n.load()),n}c.exports=e}var m=!1;function p(){return m||(m=!0,d()),c.exports}var _={},f={exports:_};function g(){_.log=n,_.formatArgs=t,_.save=r,_.load=o,_.useColors=e,_.storage=a(),_.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function t(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+f.exports.humanize(this.diff),!!this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){e!=="%%"&&(n++,e==="%c"&&(r=n))}),e.splice(r,0,t)}}function n(){return typeof console=="object"&&console.log&&console.log.apply(console,arguments)}function r(e){try{e?_.storage.setItem("debug",e):_.storage.removeItem("debug")}catch(e){}}function o(){var e;try{e=_.storage.getItem("debug")}catch(e){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function a(){try{return localStorage}catch(e){}}f.exports=p()(_);var i=f.exports.formatters;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}var h=!1;function y(){return h||(h=!0,g()),f.exports}var C={},b={exports:C};function v(){var e={};C.init=u,C.log=a,C.formatArgs=r,C.save=i,C.load=l,C.useColors=n,C.colors=[6,2,3,4,5,1];try{var t=s();t&&(t.stderr||t).level>=2&&(C.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}C.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),r=process.env[t];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),e[n]=r,e},{});function n(){return"colors"in C.inspectOpts?!!C.inspectOpts.colors:!1}function r(e){var t=this.namespace,n=this.useColors;if(n){var r=this.color,a="\x1B[3"+(r<8?r:"8;5;"+r),i=a+";1m$"+t+"\x1B[0m";e[0]=i+e[0].split("\n").join("\n"+i),e.push(a+"m+"+b.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=o()+t+" "+e[0]}function o(){return C.inspectOpts.hideDate?"":new Date().toISOString()+" "}function a(){return process.stderr.write(e.format.apply(e,arguments)+"\n")}function i(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function l(){return process.env.DEBUG}function u(e){e.inspectOpts={};for(var t=Object.keys(C.inspectOpts),n=0;n<t.length;n++)e.inspectOpts[t[n]]=C.inspectOpts[t[n]]}b.exports=p()(C);var c=b.exports.formatters;c.o=function(t){return this.inspectOpts.colors=this.useColors,e.inspect(t,this.inspectOpts).replace(/\s*\n\s*/g," ")},c.O=function(t){return this.inspectOpts.colors=this.useColors,e.inspect(t,this.inspectOpts)}}var S=!1;function R(){return S||(S=!0,v()),b.exports}var L={},E={exports:L};function k(){typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?E.exports=y():E.exports=R()}var I=!1;function T(){return I||(I=!0,k()),E.exports}function D(e){switch(e){case void 0:return T()}}a.exports=D}),null);
__d("DebugStub",["debug-4.1.1"],(function(t,n,r,o,a,i){a.exports=n("debug-4.1.1")()}),null);
__d("FalcoAppUniverse",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({FACEBOOK:1,INSTAGRAM:2,OCULUS:3}),l=e;i.default=l}),66);
__d("Queue",[],(function(t,n,r,o,a,i){var e={},l=(function(){function t(e){this._timeout=null,this._interval=(e==null?void 0:e.interval)||0,this._processor=e==null?void 0:e.processor,this._queue=[],this._stopped=!0}var n=t.prototype;return n._dispatch=function(t){var e=this;if(t===void 0&&(t=!1),!(this._stopped||this._queue.length===0)){var n=this._processor;if(n==null)throw this._stopped=!0,new Error("No processor available");var r=this._interval;if(r!=null)n.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return e._dispatch()},r);else for(;this._queue.length;)n.call(this,this._queue.shift())}},n.enqueue=function(t){return this._processor&&!this._stopped?this._processor(t):this._queue.push(t),this},n.start=function(t){return t&&(this._processor=t),this._stopped=!1,this._dispatch(),this},n.isStarted=function(){return!this._stopped},n.dispatch=function(){this._dispatch(!0)},n.stop=function(t){return this._stopped=!0,t&&this._timeout!=null&&clearTimeout(this._timeout),this},n.merge=function(t,n){if(n){var e;(e=this._queue).unshift.apply(e,t._queue)}else{var r;(r=this._queue).push.apply(r,t._queue)}return t._queue=[],this._dispatch(),this},n.getLength=function(){return this._queue.length},t.get=function(r,o){var n;return r in e?n=e[r]:n=e[r]=new t(o),n},t.exists=function(n){return n in e},t.remove=function(n){return delete e[n]},t})();i.default=l}),66);
__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","ExecutionEnvironment","FalcoAppUniverse","FalcoUtils","ODS","PersistedQueue","Queue","WebSession","performanceAbsoluteNow","promiseDone","requireDeferredForDisplay","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=r("requireDeferredForDisplay")("TransportSelectingClientSingletonConditional").__setRef("FalcoLoggerTransports"),g=5*1024,h=(e=(m||(m=r("AnalyticsCoreData"))).max_delay_br_queue)!=null?e:60*1e3,y=(s=(m||(m=r("AnalyticsCoreData"))).max_delay_br_queue_immediate)!=null?s:1e3,C=(u=(m||(m=r("AnalyticsCoreData"))).max_delay_br_init_not_complete)!=null?u:1e3,b="falco:",v=new(r("Queue")),S=5e3,R=6e4,L=r("uuidv4")(),E="ods_web_batch",k=new Map,I=new Set,T=new Set,D=o("FalcoUtils").getTaggedBitmap(38),x=(c=r("FalcoAppUniverse").cast((m||(m=r("AnalyticsCoreData"))).app_universe))!=null?c:1,$=[],P=0,N=null,M=!1,w=!1,A=!1,F=!0,O=!1,B=!1,W=Date.now()-R,q=1,U=C>h?C:h,V=C;de();for(var H of(G=(m||(m=r("AnalyticsCoreData"))).stateful_events_list_for_br)!=null?G:[]){var G;I.add(H)}for(var z of(j=(m||(m=r("AnalyticsCoreData"))).stateless_non_fb_events_for_br)!=null?j:[]){var j;T.add(z)}function K(){return(m||(m=r("AnalyticsCoreData"))).enable_bladerunner&&!(_||(_=r("ExecutionEnvironment"))).isInWorker}function Q(e,t){o("FalcoUtils").bumpODSMetrics(t.item.name,"event.info.streaming.batched",1);var n=t.item.extra.length;P+n>g&&(clearTimeout(N),X()),$.push([e,t]),P+=n}function X(){N=null,M=!1;var e=$;re("event.info.streaming.batch_processing",e.map(function(e){return e[1].item})),B?v.enqueue(function(t){return t.log(e.map(function(e){return e[1].item}),function(t){if(!t){Y(e,"event.info.banzai_fallback");return}J(e,t,"event.info.streaming.enqueued")})}):Y(e,"event.non_critical_failure.streaming_init_not_complete"),$=[],P=0}function Y(e,t){var n=function(){var e,n=a[0],i=a[1],l=i.item;if(o("FalcoUtils").bumpODSMetrics(l.name,t,1),l.identity||(l.identity=(m||(m=r("AnalyticsCoreData"))).identity),(e=l.logCritical)!=null&&e)ae.logCritical([l],function(e){return n.markItem(i,e)});else{var s;(s=l.logImmediate)!=null&&s?ae.logImmediately([l],function(e){return n.markItem(i,e)}):ae.log([l],function(e){return n.markItem(i,e)})}};for(var a of e)n()}function J(e,t,n){for(var r of e){var a=r[0],i=r[1];o("FalcoUtils").bumpODSMetrics(i.item.name,n,1),a.markItem(i,t)}}function Z(e){return{events:e.map(function(e){return{name:e.name,extra:e.extra,rate:e.policy.r,time:e.time/1e3,tag:0,tags:e.tags,shouldAddState:e.shouldAddState,identity:te(e.identity),expTags:e.exptTags,sessionID:e.sessionId,deviceID:e.deviceId}})}}function ee(e){var t,n,o,a={deviceId:(m||(m=r("AnalyticsCoreData"))).device_id,familyDeviceId:null,osBuildNumber:null,sessionId:e,appId:m.app_id,appVersion:(t=(m||(m=r("AnalyticsCoreData"))).app_version)!=null?t:null,bundleId:null,consentState:null,identity:null,pushPhase:m.push_phase};return((n=(o=(m||(m=r("AnalyticsCoreData"))).stateful_events_list_for_br)==null?void 0:o.length)!=null?n:0)>0&&(a.ambientState=(m||(m=r("AnalyticsCoreData"))).state_for_br),a.identity=te(m.identity),Object.freeze(a)}function te(e){var t=e==null?void 0:e.claim,n=t!=null?[t]:[];if(x===2||x===3){var r=e==null?void 0:e.appScopedIdentity;if(r!==void 0)return{appScopedIdentity:{uid:r,identifier:r,claims:n}}}else{var o=e==null?void 0:e.fbIdentity;if(o!==void 0)return{facebookIdentity:{actorId:o.actorId,accountId:o.accountId,claims:n}}}return null}function ne(e,t){for(var n of e){var a,i,l,s=(l={},l.e=n.extra,l.r=n.policy.r,l.d=(a=n.deviceId)!=null?a:(m||(m=r("AnalyticsCoreData"))).device_id,l.s=(i=n.sessionId)!=null?i:o("WebSession").getId(),l.t=n.time,l.a=n.appVersion,l);n.privacyContext&&(s.p=n.privacyContext),n.tags!=null&&(s.b=n.tags);var u=n.identity;u&&(s.id=u),r("Banzai").post(b+n.name,s,t)}re("event.uploaded",e)}function re(e,t){for(var n of t)n.name!==E&&o("FalcoUtils").bumpODSMetrics(n.name,e,1)}function oe(e,t){var n="falco.fabric.www."+(m||(m=r("AnalyticsCoreData"))).push_phase;(d||(d=o("ODS"))).bumpEntityKey(1344,n,e,t)}var ae={log:function(t,n){re("event.info.banzai.log.upload_processing",t),ne(t,r("Banzai").BASIC),n(!0)},logImmediately:function(t,n){re("event.info.banzai.log_immediately.upload_processing",t),ne(t,r("Banzai").VITAL),n(!0)},logCritical:function(t,n){re("event.info.banzai.log_critical.upload_processing",t),ne(t,{signal:!0,retry:!0}),n(!0)}};function ie(e){de();var t=le(e,"banzai_data_loss","log"),n=le(e,"banzai_data_loss","logImmediately"),o=le(e,"banzai_data_loss","logCritical"),a=le(e,"bladerunner_data_loss",""),i=le(e,"bladerunner_data_loss","logCritical");if(oe("js.br_data_loss.posted."+e,1),B&&F)try{v.enqueue(function(t){return t.log([a],function(t){if(!t){oe("js.br.transport_failure."+e,1),ae.logCritical([i],function(t){oe("js.br.failure_fallback_success_callback."+e,1)});return}oe("js.br.success_callback."+e,1)})})}catch(t){oe("js.br.error_enqueueing."+e,1),ae.logCritical([i],function(t){oe("js.br.enqueuing_fallback_success_callback."+e,1)})}else F||oe("js.br.failed."+e,1),B||oe("js.br.init_not_complete."+e,1),ae.logCritical([i],function(t){oe("js.br.init_fallback_success_callback."+e,1)});ne([t],r("Banzai").BASIC),ne([n],r("Banzai").VITAL),ne([o],{signal:!0,retry:!0})}function le(e,t,n){return{name:t,time:(p||(p=r("performanceAbsoluteNow")))(),policy:{r:1},extra:JSON.stringify({event_index:e,falco_js_connection_id:L,logging_mode:n,logging_flow_flag:"original_flow"}),appVersion:(m||(m=r("AnalyticsCoreData"))).app_version}}function se(){W+S<Date.now()&&(ie(q),W=Date.now(),q++)}function ue(){window.setTimeout(function(){se(),q<=40&&ue()},R)}function ce(e){v.start(function(t){return t({log:function(n,o){re("event.info.streaming.queue_processing",n);var t=JSON.stringify(Z(n));e?(m||(m=r("AnalyticsCoreData"))).enable_ack?r("promiseDone")(e.amendWithAck(t),function(e){e?(re("event.streamed.with_ack",n),re("event.uploaded",n)):re("event.non_critical_failure.streaming.ack_failed",n),o(e)},function(){re("event.non_critical_failure.streaming.ack_rejected",n),o(!1)}):(e.amendWithoutAck(t),re("event.streamed.without_ack",n),re("event.uploaded",n)):(re("event.non_critical_error.streaming.stream_not_available",n),o(!1))},logImmediately:function(t,n){this.log(t,n)},logCritical:function(t,n){this.log(t,n)}})})}function de(){w||(B=!1,K()&&(f.onReady(function(e){if(!e){F=!1,O=!0,v.start(function(e){return e(ae)});return}var t=e,n,a={onTermination:function(t){t.message==="Stream closed"?(v.stop(!0),w=!1):(o("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.rejected",1),F=!1,v.start(function(e){return e(ae)}))},onFlowStatus:function(){}};r("promiseDone")(t.requestStream({method:"Falco"},JSON.stringify(ee(o("WebSession").getId())),a,{requestId:""}).then(function(e){n=e,ce(n),B=!0,U=h,V=y}).catch(function(e){o("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.failed",1),v.stop(!0),w=!1}))}),w=!0))}function me(e){var t,n=e.name;if(!K()||!F)return!1;if(I.has(n)||e.policy.s!==1&&((t=(m||(m=r("AnalyticsCoreData"))).br_stateful_migration_on)!=null&&t)){var a;return e.shouldAddState=!0,e.tags=o("FalcoUtils").xorBitmap((a=e.tags)!=null?a:[0,0],D),!0}if(x!==1&&(m||(m=r("AnalyticsCoreData"))).enable_non_fb_br_stateless_by_default!==!0&&!T.has(n))return!1;if(e.policy.s===1){var i;return e.tags=o("FalcoUtils").xorBitmap((i=e.tags)!=null?i:[0,0],D),!0}return!1}function pe(e){if(e==="")return null;if(k.has(e))return k.get(e);var t={claim:""},n=e.split("^#");if(n.length>=4){var r=n[0],o=n[1],a=n[2],i=n[3];a!==""?t={appScopedIdentity:a,claim:i}:r!==""&&(t={fbIdentity:{accountId:r,actorId:o},claim:i}),k.set(e,t)}return t}function _e(){if(A)return;A=!0,r("PersistedQueue").setHandler("falco_queue_log",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){me(n.item)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log",1),de(),N==null&&(N=setTimeout(X,U)),i&&!e(a)&&(n.item.identity=i),Q(t,n)):(i?n.item.identity=i:n.item.identity=(m||(m=r("AnalyticsCoreData"))).identity,ae.log([n.item],function(e){return t.markItem(n,e)}))})(n)}),r("PersistedQueue").setHandler("falco_queue_immediately",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){me(n.item)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log_immediately",1),de(),(N==null||!M)&&(clearTimeout(N),N=setTimeout(X,V),M=!0),n.item.logImmediate=!0,i&&!e(a)&&(n.item.identity=i),Q(t,n),r("PersistedQueue").isPersistenceAllowed()||(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.streaming_no_persistence.log_immediately",1),X())):(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.banzai.log_immediately",1),i?n.item.identity=i:n.item.identity=(m||(m=r("AnalyticsCoreData"))).identity,ae.logImmediately([n.item],function(e){return t.markItem(n,e)}))})(n)}),r("PersistedQueue").setHandler("falco_queue_critical",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){var l=n.item;me(l)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log_critical",1),de(),l.logCritical=!0,B?(i&&!e(a)&&(l.identity=i),v.enqueue(function(e){return e.logCritical([l],function(e){if(!e){l.identity||(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity),Y([[t,n]],"event.info.banzai_fallback.log_critical");return}J([[t,n]],e,"event.uploaded")})})):(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity,Y([[t,n]],"event.non_critical_failure.streaming_init_not_complete.log_critical"))):(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity,o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.banzai.log_critical",1),ae.logCritical([l],function(e){return t.markItem(n,e)}))})(n)}),(m||(m=r("AnalyticsCoreData"))).enable_dataloss_timer&&(de(),se(),ue());function e(e){try{var t=o("FalcoUtils").identityToString((m||(m=r("AnalyticsCoreData"))).identity);return e===t}catch(e){return(d||(d=o("ODS"))).bumpEntityKey(1344,"js.br.identity.check","exception.when.comparing.with.current.user.identity",1),!0}}}l.attach=_e}),98);
__d("JsSelfProfilerIdleProfilerSitevarConfig.experimental",["cr:19549"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:19549")}),98);
__d("JsSelfProfilerIdleProfilerSitevarConfigJSModuleWrapper",["JsSelfProfilerIdleProfilerSitevarConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("JsSelfProfilerIdleProfilerSitevarConfig")}),98);
__d("JsSelfProfilerIdleTraceRunner",["JsSelfProfilerIdleProfilerSitevarConfig.experimental","Promise","QPLEvent","Random","VisibilityListener","WebLoom","asyncToGeneratorRuntime","cr:13597","performanceAbsoluteNow","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(u||(u=o("QPLEvent"))).getMarkerId(r("qpl")._(45088770,"466")),p=0,_=m+"_"+p;function f(e,t){return Math.floor(r("Random").random()*(t-e))+e}function g(e){return Math.floor(e*-Math.log(r("Random").random()))}function h(e){return new(s||(s=n("Promise")))(function(t){return void window.setTimeout(t,e)})}function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){if(n("cr:13597")==null){var i=new Error("JSSP Idle Trace initialized but JSSP was disabled.");throw i.stack,i}t>0&&(yield h(t));var l=(e||(e=r("performanceAbsoluteNow")))();r("WebLoom").startTrace(_,d,l,new Set([n("cr:13597").loomProviderId])),yield h(a);var s=e(),u=o("VisibilityListener").getHiddenTime(l,s);r("WebLoom").endTrace(_,s,{qpl_action:2,hidden:u!=null&&u>0})}),C.apply(this,arguments)}function b(){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var e=r("JsSelfProfilerIdleProfilerSitevarConfig.experimental").PAUSE_FOR,t=r("JsSelfProfilerIdleProfilerSitevarConfig.experimental").RUN_FOR,n=r("JsSelfProfilerIdleProfilerSitevarConfig.experimental").REPEAT,o=f(n.min,n.max),a=0;a<o;a++){var i=f(e.min,e.max),l=f(t.min,t.max);yield y(i*1e3,l*1e3)}}),v.apply(this,arguments)}function S(){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var e,t,n,o=(e=r("qex")._("274"))!=null?e:r("JsSelfProfilerIdleProfilerSitevarConfig.experimental").EXP_INTERVAL_MS.val,a=(t=r("qex")._("290"))!=null?t:r("JsSelfProfilerIdleProfilerSitevarConfig.experimental").EXP_RUN_FOR_MS.val,i=(n=r("qex")._("977"))!=null?n:r("JsSelfProfilerIdleProfilerSitevarConfig.experimental").EXP_REPEAT.val,l=0;l<i;l++){var s=g(o);yield y(s,a)}}),R.apply(this,arguments)}var L={init:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(n("cr:13597")==null){var t=new Error("JSSP Idle Trace initialized but JSSP was disabled.");throw t.stack,t}if(n("cr:13597").isSupported()&&c!==!0){var o=r("JsSelfProfilerIdleProfilerSitevarConfig.experimental").DISTRIBUTION,a=r("JsSelfProfilerIdleProfilerSitevarConfig.experimental").CONFIGURED_DISTRIBUTION;switch(d={type:"QPL",qpl_marker_id:String(m),qpl_instance_key:p,sample_rate:1,trace_policy:e},c=!0,a.val){case o.uniform:yield b();break;case o.exponential:yield S();break}}});function t(t){return e.apply(this,arguments)}return t})()},E=L;l.default=E}),98);
__d("LogJsspStatsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("6181"),s=o("FalcoLoggerInternal").create("log_jssp_stats",e),u=s;l.default=u}),98);
__d("TransportSelectingClientSingletonConditional",["cr:710"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:710")}),98);
__d("WAConcurrentIterate",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r,o){for(var a=[],i=[],l=0,s=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(;l<t;){var e=l;l++,i[e]=yield r(e)}});return function(){return e.apply(this,arguments)}})(),u=Math.min(t,o),c=0;c<u;c++)a.push(s());return(e||(e=n("Promise"))).all(a).then(function(){return i})}i.concurrentIterate=l}),66);
__d("WADirectPath",["WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e="0_0_0_.enc";function s(e){return e}function u(t){return t==null?o("WAResultOrError").makeError("direct-path-undefined"):t===""?o("WAResultOrError").makeError("direct-path-empty"):t.includes(e)?o("WAResultOrError").makeError("direct-path-corrupted"):o("WAResultOrError").makeResult(t)}l.unsafeCastToDirectPath=s,l.validateDirectPath=u}),98);
__d("WAFlowsActionHandlerTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({INIT:"INIT",DATA_EXCHANGE:"data_exchange",EXTERNAL_DATA_EXCHANGE:"external_data_exchange",NAVIGATE:"navigate",UPDATE_DATA:"update_data",COPY_TEXT:"copy_text",DOWNLOAD_RESPONSES:"download_responses",OPEN_URL:"open_url",COMPLETE:"complete",WELJ_FLOW_LOADING:"@welj/flow_loading",TERMINATE_FLOW:"@welj/terminate_flow",WELJ_SHOW_SCREEN_ERROR:"@welj/screen_error",WELJ_SHOPPING_CART_QUANTITY:"@welj/shopping_cart_quantity",FLOWJ_SHOPPING_UPDATE_CART_ITEM:"@flowj/shopping_update_cart_item",FLOWJ_SHOPPING_CATEGORY_UPDATE:"@flowj/shopping_category_update",FLOWJ_SHOPPING_UPDATE_CART_COUPON:"@flowj/shopping_update_cart_coupon",FLOWJ_SHOPPING_CATALOG_ITEM_UPDATE:"@flowj/shopping_catalog_item_id_update",FLOWJ_SHOPPING_UPDATE_SOURCE:"@welj/shopping_update_source",WELJ_SHOW_OVERLAY:"@welj/show_overlay",WELJ_SHOW_NAVBAR_CONTEXT_MENU:"@welj/show_navbar_context_menu",WELJ_CATEGORY_LIST_BACK:"@welj/category_list_back",WELJ_IS_SCROLLING:"@welj/is_scrolling",WELJ_SHOPPING_LAST_PAGE_CALL:"@welj/shopping_last_page_call",WELJ_SHOW_DATE_PICKER_PANEL:"@welj/show_date_picker_panel",WELJ_NAV_BAR_CONFIG:"@welj/nav_bar_config",WELJ_UPDATE_FORM_DATA:"@welj/update_form_data",WELJ_RESTORE_STATE:"@welj/restore_state",WELJ_UPDATE_EXTERNAL_DATA:"@welj/update_external_data",WELJ_UPDATE_3P_OR_NAVIGATE_DATA:"@welj/update_3p_or_navigate_data",WELJ_UPDATE_FORM_TRANSPILER_PROPS:"@welj/update_form_transpiler_props",FLOWJ_UPDATE_MEDIA_UPLOAD_DETAILS:"@flowj/update_media_upload_details",WELJ_IS_BACKWARD_NAVIGATION:"@welj/is_backward_navigation",SHOW_ERROR_OVERLAY:"@welj/show_error_overlay",HIDE_ERROR_OVERLAY:"@welj/hide_error_overlay",FLOWJ_SHOPPING_OFFSITE_CHECKOUT_UPDATE_LINKOUT_URLS:"@flowj/shopping_offsite_checkout_update_linkout_urls",TOGGLE_CALENDAR_PICKER:"@welj/toggle_calendar_picker",FLOWJ_SHOPPING_MM_UPDATE_ITEM_DETAIL_DATA:"@flowj/shopping_mm_update_item_detail_data",FLOWJ_SHOPPING_OFFSITE_CHECKOUT_UPDATE_DISCLOSURE:"@flowj/shopping_offsite_checkout_update_disclosure",FLOWJ_SHOPPING_OFFSITE_CHECKOUT_SHOW_DISCLOSURE:"@flowj/shopping_offsite_checkout_show_disclosure",FLOWJ_SHOPPING_INTEGRATED_SHOPPING_UPDATE_STATE:"@flowj/shopping_integrated_shopping_update_state",FLOWJ_SHOPPING_UPDATE_CART_AMOUNT:"@flowj/shopping_update_cart_amount"}),l=n("$InternalEnum").Mirrored(["CLOSE_OVERLAY","CLOSE_NAVBAR_CONTEXT_MENU","CLOSE_FLOW","CATEGORY_LIST_BACK"]);i.WELJActionType=e,i.NavBarBackButtonAction=l}),66);
__d("WAHashUtils",["WABase64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function s(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function u(e){return e}function c(e){return e}function d(e){return""+e.slice(0,3)}l.toPlaintextHash=e,l.toCiphertextHash=s,l.stringToPlaintextHash=u,l.toHashedPlaintextHash=c,l.sanitisePlaintextHash=d}),98);
__d("WAMediaEntryData.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.internalSpec={fileSha256:[1,(e=o("WAProtoConst")).TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64],serverMediaType:[6,e.TYPES.STRING],uploadToken:[7,e.TYPES.BYTES],validatedTimestamp:[8,e.TYPES.BYTES],sidecar:[9,e.TYPES.BYTES],objectId:[10,e.TYPES.STRING],fbid:[11,e.TYPES.STRING],downloadableThumbnail:[12,e.TYPES.MESSAGE,c],handle:[13,e.TYPES.STRING],filename:[14,e.TYPES.STRING],progressiveJpegDetails:[15,e.TYPES.MESSAGE,u],size:[16,e.TYPES.INT64],lastDownloadAttemptTimestamp:[17,e.TYPES.INT64]},u.internalSpec={scanLengths:[1,e.FLAGS.REPEATED|e.TYPES.UINT32],sidecar:[2,e.TYPES.BYTES]},c.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING]},l.MediaEntrySpec=s,l.MediaEntry$ProgressiveJpegDetailsSpec=u,l.MediaEntry$DownloadableThumbnailSpec=c}),98);
__d("WAProgressiveJpegGetScanOffsets",["WAProgressiveJpegMarkers","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("WATagsLogger").TAGS(["media","progressiveJpegUtils"]);function p(t){if(m.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["starting"]))),!_(t))return m.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Not a JPEG image"]))),[];var n=[],r=2,a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA",i=null,l=0,p=!1,y=!1,C=!1;function b(){C=!1,m.DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Scan found at offset ",""])),r-1),n.push(r-1)}for(;r<t.byteLength;){if(i=t[r],p)return m.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Ending marker found before end of image"]))),[];switch(a){case"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA":i===o("WAProgressiveJpegMarkers").MARKER_PREFIX&&(a="READ_MARKER_SECOND_BYTE");break;case"READ_MARKER_SECOND_BYTE":if(i===o("WAProgressiveJpegMarkers").MARKER_PREFIX)a="READ_MARKER_SECOND_BYTE";else if(i===o("WAProgressiveJpegMarkers").MARKER_ESCAPE_BYTE)a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";else if(i===o("WAProgressiveJpegMarkers").MARKERS.EOI)p=!0,C&&b();else{if(!y&&g(i))return m.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Non-progressive JPEG marker found"]))),[];f(i)?(y=!0,a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA"):(C&&b(),i===o("WAProgressiveJpegMarkers").MARKERS.SOS&&(C=!0),h(i)?a="READ_SIZE_FIRST_BYTE":a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA")}break;case"READ_SIZE_FIRST_BYTE":a="READ_SIZE_SECOND_BYTE";break;case"READ_SIZE_SECOND_BYTE":r+=l*256,r+=i,r-=2,a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";break}r+=1,l=i}return n}function _(e){return!(e.byteLength<=2||e[0]!==o("WAProgressiveJpegMarkers").MARKER_PREFIX||e[1]!==o("WAProgressiveJpegMarkers").MARKERS.SOF2&&e[1]!==o("WAProgressiveJpegMarkers").MARKERS.SOI)}function f(e){return e===o("WAProgressiveJpegMarkers").MARKERS.SOF2||e===o("WAProgressiveJpegMarkers").MARKERS.SOF6||e===o("WAProgressiveJpegMarkers").MARKERS.SOF10||e===o("WAProgressiveJpegMarkers").MARKERS.SOF14}function g(e){return e===o("WAProgressiveJpegMarkers").MARKERS.SOF0||e===o("WAProgressiveJpegMarkers").MARKERS.SOF1||e===o("WAProgressiveJpegMarkers").MARKERS.SOF3||e===o("WAProgressiveJpegMarkers").MARKERS.SOF5||e===o("WAProgressiveJpegMarkers").MARKERS.SOF7||e===o("WAProgressiveJpegMarkers").MARKERS.JPG||e===o("WAProgressiveJpegMarkers").MARKERS.SOF9||e===o("WAProgressiveJpegMarkers").MARKERS.SOF11||e===o("WAProgressiveJpegMarkers").MARKERS.SOF13||e===o("WAProgressiveJpegMarkers").MARKERS.SOF15}function h(e){return e===o("WAProgressiveJpegMarkers").MARKERS.TEM||e>=o("WAProgressiveJpegMarkers").MARKERS.RST0&&e<=o("WAProgressiveJpegMarkers").MARKERS.RST7?!1:e!==o("WAProgressiveJpegMarkers").MARKERS.EOI&&e!==o("WAProgressiveJpegMarkers").MARKERS.SOI}l.getProgressiveJpegScanOffsets=p}),98);
__d("WAProgressiveJpegGetScanLengths",["WAProgressiveJpegGetScanOffsets"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("WAProgressiveJpegGetScanOffsets").getProgressiveJpegScanOffsets(e);return u(t)}function s(e){return e}function u(e){var t=[],n=0;for(var r of e)t.push(r-n),n=r;return t}l.getProgressiveJpegScanLengths=e,l.asProgressiveJpegScanLength=s}),98);
__d("WAMediaUtils",["WACryptoDependencies","WADirectPath","WALongInt","WAMediaEntryData.pb","WAProgressiveJpegGetScanLengths","WAResultOrError","WAServerMediaType","WATimeUtils","decodeProtobuf","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){"use strict";var e=["$$unknownFieldCount","directPath","objectId"],s=["serverMediaType","mediaKey","mediaKeyTimestamp","uploadToken","downloadableThumbnail","progressiveJpegDetails","size","lastDownloadAttemptTimestamp","sidecar","directPath","objectId"];function u(){var e=new Uint8Array(32);return o("WACryptoDependencies").getCrypto().getRandomValues(e),e.buffer}function c(e){return e}function d(){return u()}function m(e){return e}function p(e){return e}function _(e){return e}function f(e){return e}function g(e,t){var n=o("decodeProtobuf").decodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,t),r=n.fileSha256,a=n.mediaKey,i=n.fileEncSha256,l=n.directPath,s=n.mediaKeyTimestamp,u=n.sidecar,c=n.objectId,d=n.fbid,m=n.serverMediaType,_=n.downloadableThumbnail,f=n.filename,g=n.progressiveJpegDetails,h=n.size,y=o("WADirectPath").validateDirectPath(l);return{fileSha256:r,mediaKey:a,fileEncSha256:i,directPath:y.success?y.value:null,mediaKeyTimestamp:o("WALongInt").maybeNumberOrThrowIfTooLarge(s),sidecar:u&&u,objectId:c,fbid:d,downloadableThumbnail:_==null?void 0:{directPath:_.directPath,fileEncSha256:_.fileEncSha256,fileSha256:_.fileSha256,mediaKey:_.mediaKey,mediaKeyTimestamp:o("WALongInt").maybeNumberOrThrowIfTooLarge(_.mediaKeyTimestamp),objectId:_.objectId},serverMediaType:m,filename:f,progressiveJpegDetails:g&&L(g),size:h==null?void 0:o("WALongInt").numberOrThrowIfTooLarge(h)}}function h(e){var t=e.fileSha256,n=e.fileEncSha256,r=e.mediaKey,a=e.directPath,i=e.mediaKeyTimestamp,l=e.serverMediaType,s=e.objectId,u=e.fbid,c=e.downloadableThumbnail,d=e.filename,m=e.progressiveJpegDetails,p=e.size,_=o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,{fileSha256:t,fileEncSha256:n,mediaKey:r,directPath:a,mediaKeyTimestamp:i,serverMediaType:l,objectId:s,fbid:u,downloadableThumbnail:c,filename:d,progressiveJpegDetails:m,size:p});return _.readByteArrayView()}function y(e){return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,e).readByteArrayView()}function C(e,t){return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers.extends({},e,{directPath:t})).readByteArrayView()}function b(e,t){return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers.extends({},e,{downloadableThumbnail:babelHelpers.extends({},e.downloadableThumbnail,{directPath:t})})).readByteArrayView()}function v(e,t){var n=babelHelpers.extends({},e,{fbid:t});return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,n).readByteArrayView()}function S(e,t){var n=babelHelpers.extends({},e,{objectId:t});return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,n).readByteArrayView()}function R(t){if(t==null)return null;var n=t.$$unknownFieldCount,r=t.directPath,a=t.objectId,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=o("WADirectPath").validateDirectPath(r);return babelHelpers.extends({},i,{directPath:l.success?l.value:null,objectId:a,mediaKey:t.mediaKey&&t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp==null?null:o("WATimeUtils").castToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(t.mediaKeyTimestamp))})}function L(e){return e==null||e.scanLengths==null||e.sidecar==null?null:{sidecar:e.sidecar,scanLengths:e.scanLengths.map(function(e){return o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(o("WALongInt").numberOrThrowIfTooLarge(e))})}}function E(e){var t=o("decodeProtobuf").decodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,e),n=t.serverMediaType,r=t.mediaKey,a=t.mediaKeyTimestamp,i=t.uploadToken,l=t.downloadableThumbnail,u=t.progressiveJpegDetails,d=t.size,p=t.lastDownloadAttemptTimestamp,_=t.sidecar,f=t.directPath,g=t.objectId,h=babelHelpers.objectWithoutPropertiesLoose(t,s),y=null;u!=null&&u.scanLengths!=null&&u.sidecar!=null&&(y={sidecar:u.sidecar,scanLengths:u.scanLengths.map(function(e){return o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(o("WALongInt").numberOrThrowIfTooLarge(e))})});var C=o("WADirectPath").validateDirectPath(f);return babelHelpers.extends({},h,{objectId:g,directPath:C.success?C.value:void 0,sidecar:_,serverMediaType:n==null?null:o("WAServerMediaType").castToServerMediaType(n),mediaKey:r&&r,mediaKeyTimestamp:a==null?null:o("WATimeUtils").castToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(a)),uploadToken:i&&i,progressiveJpegDetails:y,downloadableThumbnail:l&&R(l),size:o("WALongInt").maybeNumberOrThrowIfTooLarge(d),lastDownloadAttemptTimestamp:p==null?null:o("WATimeUtils").castToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(p))})}function k(e){var t=e.directPath,n=e.fileEncSha256,r=e.fileSha256,a=e.mediaKey,i=e.serverMediaType;return a==null?o("WAResultOrError").makeError("media-entry-invalid-media-key"):t==null?o("WAResultOrError").makeError("media-entry-invalid-direct-path"):n==null?o("WAResultOrError").makeError("media-entry-invalid-file-enc-sha256"):r==null?o("WAResultOrError").makeError("media-entry-invalid-file-sha256"):i==null?o("WAResultOrError").makeError("media-entry-invalid-server-media-type"):o("WAResultOrError").makeResult(babelHelpers.extends({},e,{directPath:t,fileEncSha256:n,fileSha256:r,mediaKey:a,serverMediaType:i}))}function I(e){var t=e.directPath,n=e.fileEncSha256,r=e.fileSha256,a=e.mediaKey,i=[];return a==null?i.push("media-entry-invalid-media-key"):t==null?i.push("media-entry-invalid-direct-path"):n==null?i.push("media-entry-invalid-file-enc-sha256"):r==null&&i.push("media-entry-invalid-file-sha256"),a!=null&&t!=null&&n!=null&&r!=null?o("WAResultOrError").makeResult(babelHelpers.extends({},e,{directPath:t,fileEncSha256:n,fileSha256:r,mediaKey:a})):o("WAResultOrError").makeError(i)}function T(e){var t="image/jpeg";switch(e){case"image":t="image/jpeg";break;case"ptt":t="audio/wav";break;case"video":t="video/mp4";break;case"gif":t="image/gif";break;case"sticker":t="image/webp";break;case"preview":t="image/jpeg";break;case"document":t="application/octet-stream";break;case"xma-image":t="image/jpeg";break;default:throw r("err")("Unsupported server media type: "+e)}return t}var D=function(){return"TransformStream"in self};l.createMediaKey=u,l.castToMediaKey=c,l.createUploadToken=d,l.castToUploadToken=m,l.castToStreamingSidecar=p,l.stringToDeliveryObjectId=_,l.stringToBackupEntFbid=f,l.mediaEntryDataToRawData=g,l.rawDataToMediaEntry=h,l.encodeMediaEntryForUpload=y,l.encodeMediaEntryWithUpdatedPath=C,l.encodeMediaEntryDownloadableThumbnailWithUpdatedPath=b,l.encodeMediaEntryWithUpdatedFbid=v,l.encodeMediaEntryWithUpdatedObjectId=S,l.convertMediaDownloadableThumbnailToDownloadableThumbnail=R,l.decodeMediaEntryData=E,l.validateDecodedMediaEntryForDownload=k,l.validateDownloadableThumbnailForDownload=I,l.getMimeTypeFromServerMediaType=T,l.isTransformStreamSupported=D}),98);
__d("WAMediaCryptoSidecar",["WAConcurrentIterate","WACryptoHmac","WAMediaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==="video"}var s=16,u=10,c=64*1024;function d(e,t,n){n===void 0&&(n=1);var r=t.buffer.byteLength,a=Math.ceil((r-s)/c),i=new Uint8Array(u*a);return o("WAConcurrentIterate").concurrentIterate(a,function(n){var r=n*c,a=r+s+c,l=t.subarray(r,a);return o("WACryptoHmac").sign(e,l).then(function(e){var t=new Uint8Array(e,0,u);i.set(t,n*u)})},n).then(function(){return o("WAMediaUtils").castToStreamingSidecar(i.buffer)})}l.shouldHaveStreamingSidecar=e,l.calculateStreamingSidecar=d}),98);
__d("WAMediaHkdfInfo",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case"document":return"WhatsApp Document Keys";case"image":case"sticker":case"xma-image":return"WhatsApp Image Keys";case"video":case"gif":return"WhatsApp Video Keys";case"audio":case"ptt":return"WhatsApp Audio Keys";case"md-app-state":return"WhatsApp App State Keys";case"md-msg-hist":return"WhatsApp History Keys";default:throw r("err")("getMediaHkdfInfo: unexpected media type "+e)}}function s(){return"Messenger Preview Keys"}l.getMediaHkdfInfo=e,l.getPreviewMediaHkdfInfo=s}),98);
__d("WAMediaCrypto",["Promise","WABinary","WACryptoAesCbc","WACryptoDependencies","WACryptoHkdf","WACryptoHmac","WACryptoSha256","WACryptoUtils","WACustomError","WAHashUtils","WALogger","WAMediaCryptoSidecar","WAMediaHkdfInfo","WATagsLogger","WATypedArraysConcat","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("WATagsLogger").TAGS(["WAMediaCrypto"]),m=o("WACustomError").customError("HmacValidationError",!1),p=new Uint8Array([2,2]);function _(e,t){return o("WACryptoHkdf").extractAndExpand(new Uint8Array(e),t,112).then(function(e){return{iv:new Uint8Array(e,0,16),cipherKey:new Uint8Array(e,16,32),hmacKey:new Uint8Array(e,48,32),refKey:new Uint8Array(e,80,32)}})}function f(e,t){var n=o("WAMediaHkdfInfo").getMediaHkdfInfo(t);return _(e,n)}function g(e){var t=o("WAMediaHkdfInfo").getPreviewMediaHkdfInfo();return _(e,t)}function h(e){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=new Map,r=yield g(e);t.set("preview",r);var o=["document","image","video","audio","md-app-state","md-msg-hist"];return yield(c||(c=n("Promise"))).all(o.map(function(n){return f(e,n).then(function(e){t.set(n,e)})})),t}),y.apply(this,arguments)}function C(e){switch(e){case"image":case"video":return e;default:return null}}var b=16,v=16,S=10,R=64*1024;function L(e,t,n,r,o){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,a,i){var l=new(o("WABinary")).Binary;l.ensureCapacity(v+a.byteLength+b+S),l.writeByteArray(t);for(var s=new(o("WACryptoAesCbc")).AesCbcStream(l,"encrypt",e,t),u=0,d=u+R;d<a.byteLength;){var m=a.slice(u,d);yield s.append(new Uint8Array(m)),u=d,d+=R}var p=yield a.slice(u);yield s.finalize(new Uint8Array(p));var _=l.peek(function(e){return e.readByteArrayView()}),f=yield o("WACryptoHmac").encodeKeySha256(r),g=yield o("WACryptoHmac").sign(f,_);l.writeByteArray(new Uint8Array(g,0,S));var h=l.readByteArrayView(),y=h.subarray(v),C=yield(c||(c=n("Promise"))).all([o("WACryptoDependencies").getCrypto().subtle.digest("SHA-256",y),o("WAMediaCryptoSidecar").shouldHaveStreamingSidecar(i)?o("WAMediaCryptoSidecar").calculateStreamingSidecar(f,h):void 0]),L=C[0],E=C[1];return{ciphertext:y,ciphertextHash:L,sidecar:E,ivCiphertext:_,ivCiphertextHmac:h}}),E.apply(this,arguments)}function k(e,t,n){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("WACryptoHmac").encodeKeySha256(e),a=o("WABinary").Binary.build(t,n).readByteArrayView();return o("WACryptoHmac").sign(r,a)}),I.apply(this,arguments)}function T(e,t,n,r,o){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a){if(!(10<=a.length&&a.length<=32))throw new m("Bad hmac size "+a.length);var i=o("WABinary").Binary.build(t,n).readByteArrayView(),l=yield o("WACryptoHmac").hmacSha256(r,i).then(function(e){return new Uint8Array(e)}),s=l.slice(0,a.length);if(!M(s,a))throw new m("hmacAndDecrypt hmac mismatch");var u=yield o("WACryptoAesCbc").aesCbcDecrypt(e,t,n),c=yield o("WACryptoDependencies").getCrypto().subtle.digest("SHA-256",u);return{plaintextHash:o("WAHashUtils").toPlaintextHash(c),plaintext:u}}),D.apply(this,arguments)}function x(e,t,n,r,a){if(!(10<=a.length&&a.length<=32))throw new m("Bad hmac size "+a.length);var i=o("WATypedArraysConcat").concatTypedArrays(Uint8Array,[t,n]);return o("WACryptoHmac").hmacSha256(r,i,a.length).then(function(e){return new Uint8Array(e)}).then(function(e){if(!o("WACryptoUtils").uint8ArraysEqual(e,a))throw new m("hmacAndDecrypt hmac mismatch")}).then(function(){var e=n.byteLength%b===S;return e===!0?n.subarray(0,-10):n}).then(function(n){return $(e,t,n)})}function $(e,t,n){var r=n.subarray(-b);return o("WACryptoAesCbc").aesCbcEncrypt(e,p,r).then(function(e){return e.slice(v)}).then(function(e){return o("WABinary").Binary.build(n,e).readByteArrayView()}).then(function(n){return o("WACryptoAesCbc").aesCbcDecrypt(e,t,n)}).then(function(e){return new Uint8Array(e,0,e.byteLength-p.byteLength)}).then(function(e){return{plaintext:e,nextIv:r}})}function P(e,t,n,r,o,a){return N.apply(this,arguments)}function N(){return N=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i,l,c){l>c.scanLengths.length&&d.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["decryptPartialChunks targetScan greater length of scanLength array"])));var m=Math.min(l,c.scanLengths.length);if(m<1)throw d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unable to decrypt partial due to invalid target scan"]))),r("err")("Unable to decrypt partial due to invalid target scan");for(var p=new(o("WABinary")).Binary,_=[],f=0;f<m;f++)_.push(new Uint8Array(c.sidecar,f*10,10));for(var g=0,h=n,y=0,C=0;C<m;C++){o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Processing scan ",""])),C);var b=c.alignedScanLengths[C],v=g+b,S=a.subarray(g,v),R=yield x(t,h,S,i,_[C]),L=R.plaintext,E=R.nextIv;p.write(L),g+=b,h=E,y+=c.scanLengths[C]}var k=p.readBuffer(y),I=yield o("WACryptoSha256").sha256(k);return{plaintextHash:o("WAHashUtils").toPlaintextHash(I),plaintext:k}}),N.apply(this,arguments)}function M(e,t){if(e.length!==t.length)return!1;for(var n=1,r=e.length,o=0;o<r;o++)n&=e[o]===t[o]?1:0;return n!==0}l.HmacValidationError=m,l.DEFAULT_PADDING=p,l.computeMediaKeys=f,l.computeMediaKeysForPreview=g,l.deprecated_getAllCommonComputedMediaKeys=h,l.convertServerMediaTypeToPreviewMediaType=C,l.CBC_BLOCK_SIZE=b,l.IV_LENGTH=v,l.HMAC_LENGTH=S,l.encryptAndHmac=L,l.hmacCiphertext=k,l.hmacAndDecrypt=T,l.hmacAndDecryptPartial=x,l.decryptPartialChunks=P}),98);
__d("WAPttComposerOpusRecorder",["$InternalEnum","Promise","WAGetUserMedia","WANullthrows","WAOpusRecorderWorkerClient","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s={bitRate:16e3,bufferLength:4096,numberOfChannels:1,encoderSampleRate:16e3,maxBuffersPerPage:40,encoderApplication:2048,encoderFrameSize:20,streamOptions:{optional:[],mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}}},u=n("$InternalEnum").Mirrored(["INACTIVE","RECORDING","PAUSED","STOPPED"]),c=(function(){function t(t){var o=this;if(this._duration=0,this._recordedPages=[],this._state=u.INACTIVE,this._isFirstBuffer=!1,this._requestCount=0,this._pendingFlushResolvers=new Map,this._handleEncoderMessage=function(e){var t=e.data;switch(t.message){case"page":o._storePage(t.page);break;case"flushed":o._handleFlushed(t.requestId);break;default:throw r("err")("Invalid message event type: "+t.message)}},!m())throw r("err")("Recording is not supported in this browser");this._createStream=t.createStream,this._onDuration=t.onDuration,this._onPause=t.onPause,this._onResume=t.onResume,this._onStart=t.onStart,this._onStop=t.onStop,this._handlePage=t.onPage,this._completeRecordingPromise=new(e||(e=n("Promise")))(function(e){o._resolveCompleteRecordingPromise=e}),this._audioContext=new AudioContext,this._encoderNode=this._audioContext.createScriptProcessor(s.bufferLength,s.numberOfChannels,s.numberOfChannels),this._encoderNode.onaudioprocess=function(e){o._encodeBuffers(e.inputBuffer)},this._monitorNode=this._audioContext.createGain()}var a=t.prototype;return a.getState=function(){return this._state},a.start=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e,t;switch(this._state){case u.RECORDING:return!0;case u.STOPPED:return!1;case u.PAUSED:return this.resume();case u.INACTIVE:break}this._recordedPages=[],this._isFirstBuffer=!0,this._duration=0;var n=o("WAOpusRecorderWorkerClient").getOpusEncoderWorker();this._encoder=n,n.addEventListener("message",this._handleEncoderMessage);var r=yield this._startRecording();return r?((e=this._onStart)==null||e.call(this),(t=this._onDuration)==null||t.call(this,this._duration),n.postMessage({command:"encode-init",config:babelHelpers.extends({},s,{originalSampleRate:this._audioContext.sampleRate})}),this._encoderNode.connect(this._audioContext.destination),!0):!1});function t(){return e.apply(this,arguments)}return t})(),a.stop=function(){var e,t;this._state!==u.STOPPED&&(this._state=u.STOPPED,(e=this._recordingAbortController)==null||e.abort(),this._audioContext.close&&this._audioContext.close(),this._monitorNode.disconnect(),this._encoderNode.disconnect(),(t=this._encoder)==null||t.postMessage({command:"encode-done"}))},a.pause=function(){var e,t;this._state===u.RECORDING&&(this._state=u.PAUSED,(e=this._recordingAbortController)==null||e.abort(),(t=this._onPause)==null||t.call(this))},a.resume=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;switch(this._state){case u.RECORDING:return!0;case u.STOPPED:return!1;case u.INACTIVE:throw r("err")("Attempting to resume recording that hasn't started");case u.PAUSED:break}var t=yield this._startRecording();return t?((e=this._onResume)==null||e.call(this),!0):!1});function t(){return e.apply(this,arguments)}return t})(),a.getDuration=function(){return this._duration},a.getMonitorNode=function(){return this._monitorNode},a._encodeBuffers=function(t){var e;if(this._isFirstBuffer){this._isFirstBuffer=!1;return}if(this._state===u.RECORDING){for(var n=[],o=0;o<t.numberOfChannels;o++)n[o]=t.getChannelData(o);var a=r("WANullthrows")(this._encoder);a.postMessage({command:"encode",buffers:n}),this._duration+=t.duration,(e=this._onDuration)==null||e.call(this,this._duration)}},a._getNextRequestId=function(){return this._requestCount++,this._requestCount},a._startRecording=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){this._state=u.RECORDING,this._recordingAbortController=new AbortController;var e=yield p(this._createStream,this._audioContext,[this._encoderNode,this._monitorNode],this._recordingAbortController.signal);return e?!0:(this.stop(),!1)});function t(){return e.apply(this,arguments)}return t})(),a._storePage=function(t){var e;if(this._recordedPages.push(t),t[5]&4){var n,o;(n=this._handlePage)==null||n.call(this,t,!0);var a=r("WANullthrows")(this._encoder);a.removeEventListener("message",this._handleEncoderMessage),this._resolveCompleteRecordingPromise(d(this._recordedPages)),this._recordedPages=[],(o=this._onStop)==null||o.call(this);return}(e=this._handlePage)==null||e.call(this,t,!1)},a._handleFlushed=function(t){var e=r("WANullthrows")(this._pendingFlushResolvers.get(t));this._pendingFlushResolvers.delete(t),e(d(this._recordedPages))},a.getPartialRecording=function(){var t=this,o=this._getNextRequestId(),a=new(e||(e=n("Promise")))(function(e){t._pendingFlushResolvers.set(o,e)}),i=r("WANullthrows")(this._encoder);return i.postMessage({command:"flush",requestId:o}),a},a.getCompleteRecording=function(){return this._completeRecordingPromise},t})();function d(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;for(var o of e)n.set(o,r),r+=o.length;return new Blob([n],{type:"audio/ogg; codecs=opus"})}function m(){return!!(window.AudioContext&&o("WAGetUserMedia").getUserMedia)}function p(e,t,n,r){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var o=yield e(r);if(r.aborted||o==null)return!1;var a=t.createMediaStreamSource(o);return n.forEach(function(e){a.connect(e)}),r.addEventListener("abort",function(){o.getTracks().forEach(function(e){e.stop()}),a.disconnect()},{once:!0}),!0}),_.apply(this,arguments)}l.OpusRecorderState=u,l.OpusRecorder=c}),98);
__d("WAPttComposerRecorderPollableTimer",[],(function(t,n,r,o,a,i){var e=(function(){function e(){}var t=e.prototype;return t.start=function(){this.$1=Date.now()},t.stop=function(){this.$2=Date.now()},t.pause=function(){this.stop()},t.resume=function(){this.$1=Date.now()-this.getTime(),this.$2=null},t.getTime=function(){var e,t=this.$1;if(t==null)return 0;var n=(e=this.$2)!=null?e:Date.now();return n-t},e})();i.default=e}),66);
__d("WAPttComposerWaveformRecorder",["WANullthrows","WAPttComposerRecorderPollableTimer","WAPttComposerScaleWaveform","WAStartAnimationLoop"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){var n=this;this.$2=new(r("WAPttComposerRecorderPollableTimer")),this.$3=[],this.$4=[],this.$5=0,this.$10=function(){n.$5=Math.max(n.$5,n.$11());var e=n.$3.length/n.$1,t=Math.floor((n.getDuration()-e)*n.$1);if(t!==0){for(var r=0;r<t;r++)n.$3.push(n.$5);n.$5=0}},this.$12=0,this.$7=s(e),e.connect(this.$7),this.$1=t}var t=e.prototype;return t.start=function(){this.$2.start(),this.$9()},t.stop=function(){var e;this.$2.stop(),(e=this.$6)==null||e.call(this)},t.pause=function(){var e;this.$2.pause(),(e=this.$6)==null||e.call(this)},t.resume=function(){this.$2.resume(),this.$9()},t.$9=function(){this.$6=o("WAStartAnimationLoop").startAnimationLoop(this.$10)},t.$11=function(){var e,t=r("WANullthrows")(this.$7);this.$8=(e=this.$8)!=null?e:new Uint8Array(t.frequencyBinCount);var n=this.$8;return t.getByteFrequencyData(n),Math.max.apply(Math,Array.from(n))/255},t.commitSamples=function(t){var e=Math.floor(t*this.$1),n=e-this.$4.length,o=this.$3.length-this.$12;if(!(n===0||o===0)){var a=this.$3.slice(this.$12,this.$3.length),i=r("WAPttComposerScaleWaveform")(a,n);for(var l of i)this.$4.push(l);this.$12=this.$3.length}},t.getSamples=function(){return this.$3},t.getDuration=function(){var e,t=(e=this.$2.getTime())!=null?e:0;return t/1e3},t.getCorrectedSamples=function(){return this.$4},e})();function s(e){var t=e.context.createAnalyser();return t.fftSize=32,t.smoothingTimeConstant=0,t.minDecibels=-60,t.maxDecibels=-10,t}l.default=e}),98);
__d("WAPttComposerRecorder",["WAPttComposerOpusRecorder","WAPttComposerWaveformRecorder","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){var t=this;this._handleOpusRecorderDuration=function(){t._waveformRecorder.commitSamples(t.getDuration()),t._onDuration==null||t._onDuration(t.getDuration())},this._onDuration=e.onDuration,this._opusRecorder=new(o("WAPttComposerOpusRecorder")).OpusRecorder({createStream:e.createStream,onDuration:this._handleOpusRecorderDuration,onPage:function(n,r){e.onPage==null||e.onPage(n,r)}}),this._waveformRecorder=new(r("WAPttComposerWaveformRecorder"))(this._opusRecorder.getMonitorNode(),e.waveformSampleRate)}var t=e.prototype;return t.start=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield this._opusRecorder.start();return e?(this._waveformRecorder.start(),!0):!1});function t(){return e.apply(this,arguments)}return t})(),t.stop=function(){this._opusRecorder.stop(),this._waveformRecorder.stop()},t.pause=function(){this._opusRecorder.pause(),this._waveformRecorder.pause()},t.resume=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield this._opusRecorder.resume();return e?(this._waveformRecorder.resume(),!0):!1});function t(){return e.apply(this,arguments)}return t})(),t.getDuration=function(){return this._opusRecorder.getDuration()},t.getPreciseDuration=function(){var e;return(e=this._waveformRecorder.getDuration())!=null?e:0},t.getLiveWaveformSamples=function(){return this._waveformRecorder.getSamples()},t.getCorrectedWaveformSamples=function(){return this._waveformRecorder.getCorrectedSamples()},t.getPartialRecording=function(){return this._opusRecorder.getPartialRecording()},t.getCompleteRecording=function(){return this._opusRecorder.getCompleteRecording()},e})();l.default=e}),98);
__d("WAWebAIAgentEnableAIReplyUtils",["WAWebAiAgentAutoReplyControlMutation","WAWebBizAiMuteUnmuteErrorDrawer.react","WAWebModalManager","WAWebProtobufsE2E.pb","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react"));function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{e.setAttempToEnableAi(!0);var t=yield o("WAWebAiAgentAutoReplyControlMutation").changeAiReplyStatus(e.id,"ENABLED");t.isSuccess?e.setCapiThreadControl(o("WAWebProtobufsE2E.pb").Message$CloudAPIThreadControlNotification$CloudAPIThreadControl.CONTROL_TAKEN):o("WAWebModalManager").ModalManager.open(s.jsx(r("WAWebBizAiMuteUnmuteErrorDrawer.react"),{}))}catch(e){o("WAWebModalManager").ModalManager.open(s.jsx(r("WAWebBizAiMuteUnmuteErrorDrawer.react"),{}))}e.setAttempToEnableAi(!1)}),c.apply(this,arguments)}l.enableAiReply=u}),98);
__d("WAWebAbPropsBridgeApi",["WAWebCmd"],(function(t,n,r,o,a,i,l){var e={addAbPropsUpdateListener:function(t){o("WAWebCmd").Cmd.on("on_ab_props_update",t)}};l.AbPropsBridgeApi=e}),98);
__d("WAWebMsgAckBridge",["Promise","WALogger","WAWebAck","WAWebMsgInfoCollection","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r=new Map;if(t.length===1){var a=yield o("WAWebMsgInfoCollection").MsgInfoCollection.find(t[0].id);r.set(t[0].id.toString(),a)}else r=yield o("WAWebMsgInfoCollection").MsgInfoCollection.findManyAndUpdate(t.map(function(e){return e.id}));var i=new Map;return yield(c||(c=n("Promise"))).all(t.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=r.get(t.id.toString());if(!n)return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getHighestAcks: no orphan ack found for ",""])),t.id),null;var a=null,l=null;if(n.playedRemaining===0&&n.played.length!==0?(l=o("WAWebAck").ACK.PLAYED,a=n.played):n.readRemaining===0&&n.read.length!==0?(l=o("WAWebAck").ACK.READ,a=n.read):n.deliveryRemaining===0&&n.delivery.length!==0&&(l=o("WAWebAck").ACK.RECEIVED,a=n.delivery),l==null||a==null)return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["getHighestAcks: orphan ack has 0 receipt for ",""])),t.id),null;o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["getHighestAcks: orphan ack "," for ",""])),l,t.id),i.set(t.id.toString(),{ack:l,t:Math.max.apply(Math,a.map(function(e){return e.t})),to:t.to,from:t.from})});return function(e){return t.apply(this,arguments)}})())),i}),m.apply(this,arguments)}l.getHighestAcks=d}),98);
__d("WAWebAckMsgAction",["WALogger","WAWebBackendApi","WAWebMessageReceiptBatcher","WAWebMsgAckBridge","WAWebMsgCollection","WAWebWid","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(!(t.latestEditMsgKey&&!t.latestEditMsgKey.equals(e))){var a=n.ack,i=n.t,l=e.remote;t.updateAck(a),r("WAWebWid").isUser(l)&&(yield o("WAWebBackendApi").frontendSendAndReceive("updateMsgInfo",{updates:[{msgKey:t.id,ack:a,participant:l,ts:i}]}))}}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches();var a=t.map(function(t){var n,r=(n=o("WAWebMsgCollection").MsgCollection.get(t))!=null?n:o("WAWebMsgCollection").MsgCollection.getByEditMsgKey(t);return r||(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["processOrphanReadReceipts: skip for msgId: ",""])),String(t)),null)}).filter(Boolean),i=yield o("WAWebMsgAckBridge").getHighestAcks(a);a.forEach((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{var t=i.get(e.id.toString());return!t||t.ack===e.ack?void 0:c(e.id,e,t)}catch(e){r("gkx")("26258")?o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed: processOrphanReadReceipts failed!"]))):o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]))).devConsole(e).sendLogs("processOrphanReadReceipts failed")}});return function(t){return e.apply(this,arguments)}})())}),p.apply(this,arguments)}l.updateMsgAck=c,l.processOrphanReadReceipts=m}),98);
__d("WAWebAdEntryPointsConfigurationAction",["Promise","WAWebAdEntryPointsConfigurationModel"],(function(t,n,r,o,a,i,l){var e;function s(t){return o("WAWebAdEntryPointsConfigurationModel").notifyAdEntryPointsConfigurationLoaded(t),t.type==="success"?o("WAWebAdEntryPointsConfigurationModel").setAdEntryPointsConfiguration({entryPoints:t.entryPoints,locale:t.locale}):t.type==="recovery-required"?o("WAWebAdEntryPointsConfigurationModel").setAdEntryPointsConfiguration("failed-to-load-recovery-required"):(t.type,t.expiredConfiguration!=null&&o("WAWebAdEntryPointsConfigurationModel").setAdEntryPointsConfiguration({entryPoints:t.expiredConfiguration,locale:t.locale})),(e||(e=n("Promise"))).resolve()}l.loadedAdEntryPointsConfiguration=s}),98);
__d("WAWebCommentAction",["WAAbortError","WALogger","WAWebChatCollection","WAWebCommentCollection","WAWebMsgType","WAWebNotificationBackend"],(function(t,n,r,o,a,i,l){var e;function s(e){return!e.read&&e.parentMsgKey.fromMe&&!e.id.fromMe}function u(e,t){var n=[],r=t?[].concat(t):[];for(var a of e)switch(a.type){case o("WAWebMsgType").MSG_TYPE.REVOKED:n.push(o("WAWebCommentCollection").createCommentModelFromRevoke(a)),a.protocolMessageKey!=null&&r.push(a.protocolMessageKey);break;case o("WAWebMsgType").MSG_TYPE.CIPHERTEXT:n.push(o("WAWebCommentCollection").createCommentModelFromPlaceholder(a));break;case o("WAWebMsgType").MSG_TYPE.COMMENT:n.push(o("WAWebCommentCollection").createCommentModel(a))}o("WAWebCommentCollection").CommentCollection.remove(r),o("WAWebCommentCollection").CommentCollection.set(n,{remove:!1})}function c(e){for(var t of e){var n=t.id,r=t.t;if(n!=null){var a=o("WAWebChatCollection").ChatCollection.get(n);if(a!=null){var i;a.t=r,a.unreadCount=(i=t.unreadCount)!=null?i:a.unreadCount}}}}function d(t,n){for(var r of t)s(r)&&o("WAWebNotificationBackend").showCommentNotification(r).catch(o("WAAbortError").catchAbort(function(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Comments] Aborted notification ",""])),t)}));for(var a of n)o("WAWebNotificationBackend").removeCommentNotification(a)}l.upsertCommentModelCollection=u,l.updateChatToLatest=c,l.handleCommentNotification=d}),98);
__d("WAWebDeleteExpiredPinsJob",["WALogger","WAWebAddonDeleteMsgs","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(t){return o("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("deleteExpiredPins",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield o("WAWebAddonDeleteMsgs").deleteAddonMsgsByParentKeys({parentMsgKeys:t})}catch(t){throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Expired pins deletion failed"]))),t}})).waitUntilCompleted()}l.deleteExpiredPins=s}),98);
__d("WAWebPinMessageAction",["WALogger","WANullthrows","WAWebDeleteExpiredPinsJob","WAWebMsgGetters","WAWebPinInChatCollection","WAWebPinMsgConstants","WAWebPinMsgGatingUtils","WAWebProtobufsE2E.pb","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e){return e===o("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.PIN_FOR_ALL?o("WAWebPinMsgConstants").PIN_STATE.PIN:e===o("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.UNPIN_FOR_ALL?o("WAWebPinMsgConstants").PIN_STATE.UNPIN:o("WAWebPinMsgConstants").PIN_STATE.INVALID}function c(e){var t=r("WANullthrows")(o("WAWebMsgGetters").getSender(e)),n={msgKey:e.id,parentMsgKey:r("WANullthrows")(e.pinParentKey),senderTimestampMs:r("WANullthrows")(e.pinSenderTimestampMs),sender:o("WAWebWidFactory").asUserWidOrThrow(t),pinType:u(e.pinMessageType),pinExpiryDuration:e.pinExpiryDuration,t:e.t,chatId:o("WAWebWidFactory").asChatWid(e.id.remote),ack:e.ack,read:o("WAWebUserPrefsMeUser").isMeAccount(t)};return n}function d(e,t){var n=new Map,r=[];for(var a of e){var i=c(a);if(i!=null){r.push(i);var l=i.msgKey.remote;n.has(l.toString())||n.set(l.toString(),o("WAWebWidFactory").asChatWid(l))}}var s=r.map(function(e){return babelHelpers.extends({id:o("WAWebPinInChatCollection").getPinInChatId(e.parentMsgKey)},e)});o("WAWebPinInChatCollection").PinInChatCollection.add(s,{merge:!0});var u=[];for(var d of t){var m=o("WAWebPinInChatCollection").PinInChatCollection.getByMsgKey(d);if(m!=null){u.push(m.parentMsgKey);var p=m.msgKey.remote;n.has(p.toString())||n.set(p.toString(),o("WAWebWidFactory").asChatWid(p))}}u.length&&o("WAWebPinInChatCollection").PinInChatCollection.remove(u.map(o("WAWebPinInChatCollection").getPinInChatId));for(var _ of n.values())o("WAWebPinInChatCollection").PinInChatCollection.byChatId(_).filter(function(e){return e.pinType===o("WAWebPinMsgConstants").PIN_STATE.PIN}).sort(function(e,t){return t.senderTimestampMs-e.senderTimestampMs}).slice(o("WAWebPinMsgGatingUtils").getMaxPins()).forEach(function(e){e.pinType=o("WAWebPinMsgConstants").PIN_STATE.UNPIN});return r}function m(e){var t=[],n=[];for(var r of e)o("WAWebPinInChatCollection").isPinExpired(r)?n.push(r.parentMsgKey):t.push(r);return{validPins:t,expiredPinParentKeys:n}}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=m(t),r=n.validPins,a=n.expiredPinParentKeys;if(a.length>0)try{yield o("WAWebDeleteExpiredPinsJob").deleteExpiredPins(a.map(function(e){return e.toString()})),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["deleteExpiredPins Success"]))),a.forEach(function(e){return o("WAWebPinInChatCollection").PinInChatCollection.deleteByParentMessageKey(e)})}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["deleteExpiredPins: error deleting expired pins from DB: ",""])),e)}return r}),_.apply(this,arguments)}l.craftPinMessage=c,l.updatePinCollection=d,l.checkPinExpiration=m,l.seekAndDestroyExpiredPins=p}),98);
__d("WAWebPollsUpsertVotesModelCollectionMsgAction",["WAAbortError","WAAckLevel","WALogger","WAWebAddonGatingUtils","WAWebAddonHydrationUtils","WAWebFrontendMsgGetters","WAWebMaxPerGroup","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgType","WAWebNotificationBackend","WAWebNotificationHelpers","WAWebPollsGatingUtils","WAWebPollsGetVoteKey","WAWebPollsPollVoteCollection","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","lodash"],(function(t,n,r,o,a,i,l){var e,s,u;function c(t,a,i){i===void 0&&(i=!0);var l=o("WAWebMaxPerGroup").maxPerGroup(t,function(e){return e.senderTimestampMs},o("WAWebPollsGetVoteKey").getVoteKey),c=(a||[]).map(function(e){return o("WAWebPollsPollVoteCollection").PollVoteCollection.getByMsgKey(e)}).filter(Boolean),d=[];for(var m of l){var p=o("WAWebPollsPollVoteCollection").PollVoteCollection.getForParentAddressingModeInsensitive([m.parentMsgKey]),_=p[0],f=_.getVoteFromSenderAddressingModeInsensitive(m.sender);if(f!=null&&(f.senderTimestampMs>m.senderTimestampMs||f.msgKey.equals(m.msgKey))){o("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(o("WAWebMsgType").MSG_TYPE.POLL_UPDATE)&&f.ack!==m.ack&&(f.ack=m.ack,f.isSendFailure=m.ack===o("WAAckLevel").ACK.FAILED);continue}f!=null&&c.push(f),d.push(o("WAWebPollsPollVoteCollection").createPollVoteModel(babelHelpers.extends({},m,{isSendFailure:i&&m.ack===o("WAAckLevel").ACK.CLOCK&&o("WAWebUserPrefsMeUser").isMeAccount(m.sender)})))}d.length>0&&o("WAWebPollsPollVoteCollection").PollVoteCollection.add(d),c.length>0&&o("WAWebPollsPollVoteCollection").PollVoteCollection.remove(c),o("WAWebPollsGatingUtils").arePollsNotificationsEnabled()&&n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!(i||o("WAWebNotificationHelpers").isOfflineResumeInProgress())){var n=r("lodash").uniqBy(t.filter(function(e){return!o("WAWebUserPrefsMeUser").isMeAccount(e.sender)}).map(function(e){return e.parentMsgKey}),String),a=[],l=yield o("WAWebMsgCollection").MsgCollection.hydrateOrGetMessages(Array.from(n,String)),c=function*(n){if(!o("WAWebMsgGetters").getIsSentByMe(n))return 1;var e=o("WAWebFrontendMsgGetters").getAsPollCreation(n);if(e==null&&n.type===o("WAWebMsgType").MSG_TYPE.CIPHERTEXT){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["rehydrated poll create msg from the db"])));var r=yield o("WAWebMsgCollection").MsgCollection.getMessagesById([n.id.toString()]),i=r.messages;e=o("WAWebFrontendMsgGetters").getAsPollCreation(i[0])}if(e==null){var l=t.filter(function(e){return e.parentMsgKey.equals(n.id)}).map(function(e){return e.msgKey.toString()}).join(", ");o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[upsertVotesModelCollection][notifications] Msg "," is not a pollCreationMsg, votes ",""])),n.id,l).sendLogs("msg-type-"+n.type+"-not-poll-creation-msg")}else a.push(e)};for(var d of l)yield*c(d);yield o("WAWebAddonHydrationUtils").hydrateAddons({ids:n,hydrationType:o("WAWebMsgType").MSG_TYPE.POLL_UPDATE});for(var m of a){var p=o("WAWebPollsPollVoteCollection").PollVoteCollection.getForParentAddressingModeInsensitive([m.id]),_=p[0];_.getUnreadCount()>0&&o("WAWebNotificationBackend").showPollVoteNotification(m).catch(o("WAAbortError").catchAbort(function(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Polls] Aborted notification ",""])),t)}))}}})()}l.upsertVotesModelCollection=c}),98);
__d("WAWebUpsertEventResponsesModelCollectionAction",["WAAckLevel","WANullthrows","WAWebEventResponseCollection","WAWebLidMigrationUtils","WAWebMsgGetters","WAWebPrepareEventResponsesToUpsert","WAWebUserPrefsMeUser","WAWebWid"],(function(t,n,r,o,a,i,l){function e(e,t){var n=(t||[]).map(function(e){return o("WAWebEventResponseCollection").EventResponseCollection.get(e)}).filter(Boolean),a=[],i=o("WAWebPrepareEventResponsesToUpsert").getNewestEventResponses(e);i.forEach(function(e){var t=r("WANullthrows")(o("WAWebMsgGetters").getSender(e)),i=o("WAWebEventResponseCollection").EventResponseCollection.byParent(e.parentMsgKey).findFirst(function(e){var n=e.sender;return r("WAWebWid").equals.apply(r("WAWebWid"),o("WAWebLidMigrationUtils").toCommonAddressingMode(n,t))});i!=null&&!i.id.equals(e.id)&&n.push(i),a.push(o("WAWebEventResponseCollection").createEventResponseModel(babelHelpers.extends({},e,{isSendFailure:e.ack!=null&&e.ack<o("WAAckLevel").ACK.CLOCK&&o("WAWebUserPrefsMeUser").isMeAccount(t)})))}),a.length>0&&o("WAWebEventResponseCollection").EventResponseCollection.add(a,{merge:!0}),n.length>0&&o("WAWebEventResponseCollection").EventResponseCollection.remove(n)}l.upsertEventResponsesModelCollection=e}),98);
__d("WAWebAddOnsBridgeApi",["WAWebAddOnsUpdateSendStatesAction","WAWebCommentAction","WAWebMarkAddOnsAsReadAction","WAWebPinMessageAction","WAWebPollsPollVoteCollection","WAWebPollsUpsertVotesModelCollectionMsgAction","WAWebReactionsMsgAction","WAWebUpsertEventResponsesModelCollectionAction"],(function(t,n,r,o,a,i,l){var e={updateAddOnCollectionAcks:function(t){var e=t.updatesByType;o("WAWebAddOnsUpdateSendStatesAction").updateAddOnCollectionsSendStatesAction(e)},upsertVotesModelCollection:function(t){var e=t.votes,n=t.votesToRemove,r=t.restoredFromDb;o("WAWebPollsUpsertVotesModelCollectionMsgAction").upsertVotesModelCollection(e,n,r)},markAddOnsAsReadUi:function(t){var e=t.updatedMsgKeys;o("WAWebMarkAddOnsAsReadAction").markAddOnsAsReadUiAction(e)},updatePinCollection:function(t){var e=t.msgs,n=t.removeMsgs;return o("WAWebPinMessageAction").updatePinCollection(e,n)},hasPollVotesInCollection:function(t){var e=t.msgKeys;return e.map(function(e){return!!o("WAWebPollsPollVoteCollection").PollVoteCollection.getByMsgKey(e)})},handleCommentNotification:function(t){var e=t.comments,n=t.revokes;o("WAWebCommentAction").handleCommentNotification(e,n)},upsertEventResponsesModelCollection:function(t){var e=t.eventResponses,n=t.eventResponsesToRemove;return o("WAWebUpsertEventResponsesModelCollectionAction").upsertEventResponsesModelCollection(e,n)},upsertCommentModelCollection:function(t){var e=t.comments,n=t.commentsToRemove;return o("WAWebCommentAction").upsertCommentModelCollection(e,n)},handleReactionNotification:function(t){var e=t.reactions;o("WAWebReactionsMsgAction").handleReactionNotification(e)}};l.AddOnsBridgeApi=e}),98);
__d("WAWebAiThreadCell.react",["WAWebCellV2.react","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react"));function u(e){var t=e.thread,n=e.onClick;return s.jsx(o("WAWebCellV2.react").CellV2,{onClick:n,colorScheme:"default",size:"large",border:"bottom-partial",primary:t.title})}u.displayName=u.name+" [from "+i.id+"]",l.WAWebAiThreadCell=u}),98);
__d("useWAWebAiThreads",["WAWebAiThreadCollection","react","useWAWebListener"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useMemo,c=s.useState;function d(e){var t=u(function(){return e.aiThreads==null?new(o("WAWebAiThreadCollection")).AiThreadCollection:e.aiThreads},[e.aiThreads]),n=c(t.toArray()),r=n[0],a=n[1];return o("useWAWebListener").useListener(t,["add","remove","change","reset"],function(){a(t.toArray())}),r}l.default=d}),98);
__d("WAWebAiThreadList.react",["WAWebAiThreadCell.react","WAWebFlatList.react","WAWebFlatListContainer.react","WAWebFlatListController","react","useWAWebAiThreads"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).useMemo,d=o("WAWebFlatList.react").FlatListFactory(),m=function(t){return t.map(function(e){return{itemKey:e.id.toString(),thread:e}})};function p(e){var t=e.onThreadClick,n=e.chat,a=c(function(){return new(r("WAWebFlatListController"))},[]),i=r("useWAWebAiThreads")(n),l=c(function(){return m(i)},[i]);return u.jsx(r("WAWebFlatListContainer.react"),{flatListControllers:[a],children:u.jsx(d,{className_DONOTUSE:"aiThreadList",flatListController:a,direction:"vertical",data:l,handleKeyboardNavigation:!0,tabIndex:-1,role:"list",renderItem:function(n){var e=n.thread;return u.jsx(o("WAWebAiThreadCell.react").WAWebAiThreadCell,{thread:e,onClick:function(){return t==null?void 0:t(e)}})}})})}p.displayName=p.name+" [from "+i.id+"]",l.WAWebAiThreadList=p}),98);
__d("WAWebAnimationGroupItem.react",["react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react"));function u(e){var t=e.children,n=e.ref;return s.jsx("div",{ref:n,children:t})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("WAWebAppRatingModalLoadable",["JSResourceForInteraction","WAWebAppRatingCommonFbt","WAWebFbtCommon","WAWebLazyLoadedRetriable","WAWebLoadable","WAWebLoadingConfirmPopup.react","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebAppRatingModal.react").__setRef("WAWebAppRatingModalLoadable").load();return e}),"AppRatingModal"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(r("WAWebLoadingConfirmPopup.react"),{title:o("WAWebAppRatingCommonFbt").getModalTitle(),okText:r("WAWebFbtCommon")("Submit"),error:!!t.error})}});l.WAWebAppRatingModalLoadable=c}),98);
__d("WAWebWamEnumCloseTypeEnum",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUBMITTED:1,CLOSED:2});i.CLOSE_TYPE_ENUM=e}),66);
__d("WAWebWamEnumSourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NAVBAR:1,SETTINGS:2,CONTEXTUAL:3});i.SOURCE_TYPE=e}),66);
__d("WAWebWebAppRateAndReviewDialogShownWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCloseTypeEnum","WAWebWamEnumSourceType"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({WebAppRateAndReviewDialogShown:[6788,{reviewDialogAction:[1,o("WAWebWamEnumCloseTypeEnum").CLOSE_TYPE_ENUM],reviewSource:[2,o("WAWebWamEnumSourceType").SOURCE_TYPE]},[1,1,1],"regular"]},{WebAppRateAndReviewDialogShown:[]});l.WebAppRateAndReviewDialogShownWamEvent=e}),98);
__d("WAWebAppRatingWamLogger",["WAWebWamEnumCloseTypeEnum","WAWebWamEnumSourceType","WAWebWebAppRateAndReviewDialogShownWamEvent"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WAWebWamEnumSourceType").SOURCE_TYPE.CONTEXTUAL;t==="navbar"?n=o("WAWebWamEnumSourceType").SOURCE_TYPE.NAVBAR:t==="settings"&&(n=o("WAWebWamEnumSourceType").SOURCE_TYPE.SETTINGS);var r=e==="submitted"?o("WAWebWamEnumCloseTypeEnum").CLOSE_TYPE_ENUM.SUBMITTED:o("WAWebWamEnumCloseTypeEnum").CLOSE_TYPE_ENUM.CLOSED;new(o("WAWebWebAppRateAndReviewDialogShownWamEvent")).WebAppRateAndReviewDialogShownWamEvent({reviewDialogAction:r,reviewSource:n}).commit()}l.logAppRatingDialogAction=e}),98);
__d("WAWebAppRatingDialogTrigger",["WALogger","WAWebABProps","WAWebAppRatingActiveUsageDays","WAWebAppRatingModalLoadable","WAWebAppRatingWamLogger","WAWebClock","WAWebModalManager","WAWebNux","WAWebUserPrefsNuxPreferences","gkx","react"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g=f||(f=r("react"));function h(e){var t=function(){o("WAWebAppRatingWamLogger").logAppRatingDialogAction("closed",e)},n=function(){o("WAWebAppRatingWamLogger").logAppRatingDialogAction("submitted",e)};o("WAWebModalManager").ModalManager.open(g.jsx(o("WAWebAppRatingModalLoadable").WAWebAppRatingModalLoadable,{onCancel:t,onSubmit:n}))}function y(){var t=o("WAWebAppRatingActiveUsageDays").getActiveUsageDaysSinceDialogOpened(),n=o("WAWebABProps").getABPropConfigValue("rnr_min_days_user_active"),r=o("WAWebABProps").getABPropConfigValue("rnr_days_cooldown");if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["App Rating Dialog - Usage check: active_days=",", min_required=",", cooldown=",""])),t,n,r),t<n)return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["App Rating Dialog - User hasn't met minimum active days requirement ("," < ",")"])),t,n),!1;var a=o("WAWebUserPrefsNuxPreferences").getNuxAcknowledgedTimestamp(o("WAWebNux").NuxSyncKey.LAST_DATE_DIALOG_OPENED);if(a!=null){var i=o("WAWebClock").Clock.getServerTimeMs(),l=Math.floor((i-a)/(1e3*60*60*24));if(l<r)return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["App Rating Dialog - Still in cooldown period ("," < "," days)"])),l,r),!1}return!0}function C(){if(!o("WAWebABProps").getABPropConfigValue("web_rating_and_review_contextual_prompt_enabled")){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["App Rating Dialog - Feature disabled via ABprop"])));return}if(r("gkx")("4112")){o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["App Rating Dialog - Feature disabled on Windows"])));return}o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["App Rating Dialog - Checking if should trigger rating dialog"]))),y()?(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["App Rating Dialog - All conditions met! Showing contextual dialog."]))),h("contextual")):o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["App Rating Dialog - Conditions not met, not showing dialog"])))}l.showAppRatingDialog=h,l.checkAndTriggerAppRatingDialog=C}),98);
__d("WAWebAttachMenuPopupItem.react",["WAWebDropdownItem.react","WAWebFlex.react","WAWebL10N","WAWebNoop","WAWebPopoverContext.react","WAWebTag.react","WAWebTooltip.react","WAWebUISpacing","react","stylex"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=r("react")),d=(e||(e=o("react"))).useRef,m={container:{cursor:"x1ypdohk",height:"x1vqgdyp",$$css:!0},icon:{minWidth:"xt4ypqs",$$css:!0},disabled:{opacity:"xbyyjgo",cursor:"x1h6gzvc",$$css:!0}};function p(e){var t=e.action,n=e.testid,a=e.icon,i=e.text,l=e.children,u=e.disabled,p=e.tooltipIfDisabled,_=e.showcase,f=_===void 0?!1:_,g=o("WAWebPopoverContext.react").useWAWebPopoverControllerRef(),h=d(null),y;if(u===!0&&p!=null&&h!=null){var C=c.jsx(o("WAWebTooltip.react").WAWebHoverTooltip,{targetRef:h,alignment:r("WAWebL10N").isRTL()?o("WAWebTooltip.react").PopoverAlignment.End:o("WAWebTooltip.react").PopoverAlignment.Start,position:o("WAWebTooltip.react").PopoverPosition.Bottom,buffer:8,children:p});y=c.jsx(o("WAWebPopoverContext.react").WAWebPopoverController,{targetRef:h,popover:C,controllerRef:g})}return c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props([o("WAWebUISpacing").uiMargin.horiz8,u===!0&&m.disabled]),{ref:h,children:c.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:u===!0?r("WAWebNoop"):t,disabled:u,type:"attach-menu-popup",children:c.jsxs(o("WAWebFlex.react").FlexRow,{align:"center",xstyle:[m.container,o("WAWebUISpacing").uiMargin.start8,o("WAWebUISpacing").uiMargin.end32],children:[c.jsx(o("WAWebFlex.react").FlexRow,{justify:"center",xstyle:[m.icon,o("WAWebUISpacing").uiMargin.end12],children:a}),c.jsx("span",{className:"xdod15v x14ug900 x6ikm8r x10wlt62 xlyipyv xuxw1ft",children:i}),l,f?c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(o("WAWebUISpacing").uiMargin.start8),{children:c.jsx(o("WAWebTag.react").Tag,{theme:o("WAWebTag.react").TagTheme.PrimaryPill,children:c.jsx("span",{children:"New"})})})):void 0,y]})})}))}p.displayName=p.name+" [from "+i.id+"]",l.AttachMenuPopupItem=p}),98);
__d("WAWebAttachMenuStrings",["fbt","WAWebBizGatingUtils"],(function(t,n,r,o,a,i,l,s){var e=function(){return s._(/*BTDS*/"Camera")},u=function(){return s._(/*BTDS*/"Catalog")},c=function(){return s._(/*BTDS*/"Contact")},d=function(){return s._(/*BTDS*/"Document")},m=function(){return o("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?s._(/*BTDS*/"Charge"):s._(/*BTDS*/"Order")},p=function(){return s._(/*BTDS*/"Photos & videos")},_=function(){return s._(/*BTDS*/"Photos")},f=function(){return s._(/*BTDS*/"Videos")},g=function(){return s._(/*BTDS*/"Poll")},h=function(){return s._(/*BTDS*/"Quick replies")},y=function(){return s._(/*BTDS*/"New sticker")},C=function(){return s._(/*BTDS*/"Audio")},b=function(){return s._(/*BTDS*/"Event")},v=function(){return s._(/*BTDS*/"Question")};l.CameraText=e,l.CatalogText=u,l.ContactText=c,l.DocumentText=d,l.OrderText=m,l.PhotosAndVideosText=p,l.PhotosText=_,l.VideosText=f,l.PollText=g,l.QuickRepliesText=h,l.StickerMakerText=y,l.AudioText=C,l.EventText=b,l.QuestionText=v}),226);
__d("WAWebWamEnumActionThreadTypeType",[],(function(t,n,r,o,a,i){var e=Object.freeze({GROUP_CHAT:1,P2P_THREAD:2,MESSAGE_YOURSELF:3,META_AI:4,TO_CHARACTER:5,TO_UGC:6});i.ACTION_THREAD_TYPE_TYPE=e}),66);
__d("WAWebWamEnumAttachmentTrayActionTargetType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ATTACHMENT_TRAY:1,DOCUMENT:2,CAMERA:3,CAMERA_LIBRARY:4,GALLERY:5,PHOTO_AND_VIDEO_LIBRARY:6,AUDIO:7,LOCATION:8,CONTACT:9,POLL:10,PAYMENT:11,SHOP:12,ORDER:13,CATALOG:14,QUICK_REPLY:15,STICKER_MAKER:16,IMAGINE_EDIT:17,EVENT_CREATION:18,CALL_LINK_CREATION:19,SHARE_UPI_QR:20,MUSIC:21});i.ATTACHMENT_TRAY_ACTION_TARGET_TYPE=e}),66);
__d("WAWebWamEnumAttachmentTrayActionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CLICK:1,SEND:2,CANCEL:3});i.ATTACHMENT_TRAY_ACTION_TYPE=e}),66);
__d("WAWebWamEnumSendMediaTypeType",[],(function(t,n,r,o,a,i){var e=Object.freeze({PHOTO:1,VIDEO:2,MIXED:3});i.SEND_MEDIA_TYPE_TYPE=e}),66);
__d("WAWebAttachmentTrayActionsWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumActionThreadTypeType","WAWebWamEnumAttachmentTrayActionTargetType","WAWebWamEnumAttachmentTrayActionType","WAWebWamEnumClientGroupSizeBucket","WAWebWamEnumSendMediaTypeType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({AttachmentTrayActions:[3980,{actionDurationMs:[1,e.TYPES.INTEGER],actionThreadType:[9,o("WAWebWamEnumActionThreadTypeType").ACTION_THREAD_TYPE_TYPE],attachmentTrayAction:[2,o("WAWebWamEnumAttachmentTrayActionType").ATTACHMENT_TRAY_ACTION_TYPE],attachmentTrayActionTarget:[3,o("WAWebWamEnumAttachmentTrayActionTargetType").ATTACHMENT_TRAY_ACTION_TARGET_TYPE],groupSizeBucket:[4,o("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET],isAGroup:[5,e.TYPES.BOOLEAN],isSuccessful:[6,e.TYPES.BOOLEAN],sendMediaType:[7,o("WAWebWamEnumSendMediaTypeType").SEND_MEDIA_TYPE_TYPE],sendTime:[8,e.TYPES.INTEGER]},[1,1,1],"regular"]},{AttachmentTrayActions:[]});l.AttachmentTrayActionsWamEvent=s}),98);
__d("WAWebAttachmentMenuLogger",["$InternalEnum","WANullthrows","WAWebABProps","WAWebAttachmentTrayActionsWamEvent","WAWebChatGetters","WAWebWamEnumAttachmentTrayActionTargetType","WAWebWamEnumAttachmentTrayActionType","WAWebWamNumberToClientGroupSizeBucket"],(function(t,n,r,o,a,i,l){var e=n("$InternalEnum").Mirrored(["OPEN","CLOSE"]),s=n("$InternalEnum").Mirrored(["SEND","CANCEL"]),u=(function(){function t(){this.$1=null}var n=t.prototype;return n.logAttachmentMenuOpen=function(n){var t=new(o("WAWebAttachmentTrayActionsWamEvent")).AttachmentTrayActionsWamEvent(babelHelpers.extends({},c(e.OPEN,n),{actionDurationMs:0}));this.$2(),p()&&t.commit()},n.logAttachmentMenuClose=function(n){var t=new(o("WAWebAttachmentTrayActionsWamEvent")).AttachmentTrayActionsWamEvent(babelHelpers.extends({},c(e.CLOSE,n),{actionDurationMs:this.$3()}));this.$2(),p()&&t.commit()},n.logAttachMenuClick=function(t,n){var e=new(o("WAWebAttachmentTrayActionsWamEvent")).AttachmentTrayActionsWamEvent(babelHelpers.extends({attachmentTrayActionTarget:n,attachmentTrayAction:o("WAWebWamEnumAttachmentTrayActionType").ATTACHMENT_TRAY_ACTION_TYPE.CLICK},m(t),{actionDurationMs:this.$3()}));this.$2(),p()&&e.commit()},n.logAttachmentSend=function(t,n){var e=new(o("WAWebAttachmentTrayActionsWamEvent")).AttachmentTrayActionsWamEvent(babelHelpers.extends({},d(s.SEND,n,t),{actionDurationMs:this.$3()}));this.$2(),p()&&e.commit()},n.logAttachmentCancel=function(t,n){var e=new(o("WAWebAttachmentTrayActionsWamEvent")).AttachmentTrayActionsWamEvent(babelHelpers.extends({},d(s.CANCEL,n,t),{actionDurationMs:this.$3()}));this.$2(),p()&&e.commit()},n.$2=function(){this.$1=Date.now()},n.$3=function(){return Date.now()-r("WANullthrows")(this.$1)},t})();function c(t,n){return babelHelpers.extends({attachmentTrayActionTarget:o("WAWebWamEnumAttachmentTrayActionTargetType").ATTACHMENT_TRAY_ACTION_TARGET_TYPE.ATTACHMENT_TRAY,attachmentTrayAction:t===e.OPEN?o("WAWebWamEnumAttachmentTrayActionType").ATTACHMENT_TRAY_ACTION_TYPE.CLICK:o("WAWebWamEnumAttachmentTrayActionType").ATTACHMENT_TRAY_ACTION_TYPE.CANCEL},m(n))}function d(e,t,n){return babelHelpers.extends({attachmentTrayActionTarget:t,attachmentTrayAction:e===s.SEND?o("WAWebWamEnumAttachmentTrayActionType").ATTACHMENT_TRAY_ACTION_TYPE.SEND:o("WAWebWamEnumAttachmentTrayActionType").ATTACHMENT_TRAY_ACTION_TYPE.CANCEL},m(n))}function m(e){return{isAGroup:o("WAWebChatGetters").getIsGroup(e),groupSizeBucket:o("WAWebChatGetters").getIsGroup(e)?r("WAWebWamNumberToClientGroupSizeBucket")(e.getParticipantCount()):void 0}}function p(){return o("WAWebABProps").getABPropConfigValue("attachment_tray_logging_enabled")}var _=new u;l.AttachmentMenuTarget=o("WAWebWamEnumAttachmentTrayActionTargetType").ATTACHMENT_TRAY_ACTION_TARGET_TYPE,l.AttachmentMenuLogger=_}),98);
__d("WAWebIcHeadphonesFilledIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="ic-headphones-filled";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p,height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{fill:"currentColor",d:"M7 21H5c-.55 0-1.02-.2-1.41-.59-.4-.39-.59-.86-.59-1.41v-7c0-1.25.24-2.42.71-3.51A9.15 9.15 0 0 1 8.5 3.7 8.7 8.7 0 0 1 12 3a8.7 8.7 0 0 1 3.51.71A9.15 9.15 0 0 1 20.3 8.5 8.7 8.7 0 0 1 21 12v7c0 .55-.2 1.02-.59 1.41-.39.4-.86.59-1.41.59h-2c-.55 0-1.02-.2-1.41-.59-.4-.39-.59-.86-.59-1.41v-4c0-.55.2-1.02.59-1.41.39-.4.86-.59 1.41-.59h2v-1c0-1.95-.68-3.6-2.04-4.96A6.75 6.75 0 0 0 12 5c-1.95 0-3.6.68-4.96 2.04A6.75 6.75 0 0 0 5 12v1h2c.55 0 1.02.2 1.41.59.4.39.59.86.59 1.41v4c0 .55-.2 1.02-.59 1.41-.39.4-.86.59-1.41.59Z"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.IcHeadphonesFilledIcon=m}),98);
__d("WAWebAttachMenuPopupItemAudio.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachmentMenuLogger","WAWebFilePicker.react","WAWebIcHeadphonesFilledIcon.react","WAWebMimeTypes","WAWebPrepareMessageSendingAction","react"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).useRef,d={icon:{color:"x10wjepd",$$css:!0}};function m(e){var t=e.chat,n=e.dismissMenu,a=e.multiple,i=e.onMediaPick,l=c(),s=function(n){return n.preventDefault(),l.current!=null?(l.current.open(),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(t),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.AUDIO),!1):!0},m=function(t){var e;if(!t){n();return}t.preventDefault();var r=Array.from((e=t.target.files)!=null?e:[]);n(),r.length&&i(r.map(function(e){return{file:e}}))};return u.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:s,icon:u.jsx(o("WAWebIcHeadphonesFilledIcon.react").IcHeadphonesFilledIcon,{height:24,width:24,iconXstyle:d.icon}),text:o("WAWebAttachMenuStrings").AudioText(),children:u.jsx(r("WAWebFilePicker.react"),{ref:l,mimes:o("WAWebMimeTypes").AUDIO_MIMES,onChange:m,multiple:a})})}m.displayName=m.name+" [from "+i.id+"]",l.AttachMenuPopupItemAudio=m}),98);
__d("WAWebCameraFilledRefreshedIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="camera-filled-refreshed";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M12 17.5C13.25 17.5 14.3125 17.0625 15.1875 16.1875C16.0625 15.3125 16.5 14.25 16.5 13C16.5 11.75 16.0625 10.6875 15.1875 9.8125C14.3125 8.9375 13.25 8.5 12 8.5C10.75 8.5 9.6875 8.9375 8.8125 9.8125C7.9375 10.6875 7.5 11.75 7.5 13C7.5 14.25 7.9375 15.3125 8.8125 16.1875C9.6875 17.0625 10.75 17.5 12 17.5ZM12 15.5C11.3 15.5 10.7083 15.2583 10.225 14.775C9.74167 14.2917 9.5 13.7 9.5 13C9.5 12.3 9.74167 11.7083 10.225 11.225C10.7083 10.7417 11.3 10.5 12 10.5C12.7 10.5 13.2917 10.7417 13.775 11.225C14.2583 11.7083 14.5 12.3 14.5 13C14.5 13.7 14.2583 14.2917 13.775 14.775C13.2917 15.2583 12.7 15.5 12 15.5ZM4 21C3.45 21 2.97917 20.8042 2.5875 20.4125C2.19583 20.0208 2 19.55 2 19V7C2 6.45 2.19583 5.97917 2.5875 5.5875C2.97917 5.19583 3.45 5 4 5H7.15L8.4 3.65C8.58333 3.45 8.80417 3.29167 9.0625 3.175C9.32083 3.05833 9.59167 3 9.875 3H14.125C14.4083 3 14.6792 3.05833 14.9375 3.175C15.1958 3.29167 15.4167 3.45 15.6 3.65L16.85 5H20C20.55 5 21.0208 5.19583 21.4125 5.5875C21.8042 5.97917 22 6.45 22 7V19C22 19.55 21.8042 20.0208 21.4125 20.4125C21.0208 20.8042 20.55 21 20 21H4Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.CameraFilledRefreshedIcon=m}),98);
__d("WAWebAttachMenuPopupItemCamera.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachmentMenuLogger","WAWebCameraFilledRefreshedIcon.react","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={refreshedIcon:{color:"x1cbnkk4",$$css:!0}};function c(e){var t=e.chat,n=e.onCaptureClick,r=function(){return n(),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.CAMERA),!0};return s.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:r,icon:s.jsx(o("WAWebCameraFilledRefreshedIcon.react").CameraFilledRefreshedIcon,{iconXstyle:u.refreshedIcon}),text:o("WAWebAttachMenuStrings").CameraText()})}c.displayName=c.name+" [from "+i.id+"]",l.AttachMenuPopupItemCamera=c}),98);
__d("WAWebAttachProductModalLoadable",["fbt","JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadingModal.react","asyncToGeneratorRuntime","react","react-loadable"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react")),c=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebBizAttachProductModal.react").__setRef("WAWebAttachProductModalLoadable").load();return e}),"AttachProductModal"),d=r("react-loadable")({loader:c,loading:function(t){return u.jsx(r("WAWebLoadingModal.react"),{title:s._(/*BTDS*/"Send products"),error:!!t.error})}});l.requireBundle=c,l.AttachProductModalLoadable=d}),226);
__d("WAWebAttachMenuPopupItemCatalog.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachProductModalLoadable","WAWebAttachmentMenuLogger","WAWebModalManager","WAWebPrepareMessageSendingAction","WAWebProductCatalogLogEvents","WAWebProductCatalogMetaLinkingGatingUtils","WAWebProductCatalogSession","WAWebStorefrontFilledIcon.react","WAWebUtilsLogQplEvents","react","useLazyRef"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={icon:{color:"x1bzzifw",$$css:!0}};function c(e){var t=e.chat,n=e.disabled,a=r("useLazyRef")(function(){return new(o("WAWebProductCatalogSession")).ProductCatalogSession}),i=function(n){n.preventDefault();var e=a.current.toString();return e==null||(o("WAWebProductCatalogLogEvents").logCatalogAttachmentButtonClick(e),o("WAWebUtilsLogQplEvents").qplStartCatalogView("Attachment"),o("WAWebModalManager").ModalManager.open(s.jsx(o("WAWebAttachProductModalLoadable").AttachProductModalLoadable,{chat:t,sessionId:e,onSend:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.CATALOG)},onCancel:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.CATALOG)}})),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(t),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.CATALOG)),!0},l=s.jsx(o("WAWebStorefrontFilledIcon.react").StorefrontFilledIcon,{iconXstyle:u.icon});return s.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:i,icon:l,text:o("WAWebAttachMenuStrings").CatalogText(),disabled:n,tooltipIfDisabled:n===!0?o("WAWebProductCatalogMetaLinkingGatingUtils").getDisabledMetaLinkedCatalogTooltipText():null})}c.displayName=c.name+" [from "+i.id+"]",l.AttachMenuPopupItemCatalog=c}),98);
__d("WAWebAttachVcardsFlowLoadable",["fbt","JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadingModal.react","asyncToGeneratorRuntime","react","react-loadable"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react")),c=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebAttachVcardsFlow.react").__setRef("WAWebAttachVcardsFlowLoadable").load();return e}),"AttachVcardsFlow"),d=r("react-loadable")({loader:c,loading:function(t){return u.jsx(r("WAWebLoadingModal.react"),{title:s._(/*BTDS*/"Send contacts"),error:!!t.error})}});l.requireBundle=c,l.AttachVcardsFlowLoadable=d}),226);
__d("WAWebPersonFilledRefreshedIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="person-filled-refreshed";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M12 11C10.7625 11 9.70312 10.5594 8.82188 9.67813C7.94063 8.79688 7.5 7.7375 7.5 6.5C7.5 5.2625 7.94063 4.20312 8.82188 3.32188C9.70312 2.44063 10.7625 2 12 2C13.2375 2 14.2969 2.44063 15.1781 3.32188C16.0594 4.20312 16.5 5.2625 16.5 6.5C16.5 7.7375 16.0594 8.79688 15.1781 9.67813C14.2969 10.5594 13.2375 11 12 11ZM5.25 21C4.63125 21 4.10156 20.7797 3.66094 20.3391C3.22031 19.8984 3 19.3687 3 18.75V17.85C3 17.2125 3.16406 16.6266 3.49219 16.0922C3.82031 15.5578 4.25625 15.15 4.8 14.8688C5.9625 14.2875 7.14375 13.8516 8.34375 13.5609C9.54375 13.2703 10.7625 13.125 12 13.125C13.2375 13.125 14.4563 13.2703 15.6562 13.5609C16.8562 13.8516 18.0375 14.2875 19.2 14.8688C19.7438 15.15 20.1797 15.5578 20.5078 16.0922C20.8359 16.6266 21 17.2125 21 17.85V18.75C21 19.3687 20.7797 19.8984 20.3391 20.3391C19.8984 20.7797 19.3687 21 18.75 21H5.25Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.PersonFilledRefreshedIcon=m}),98);
__d("WAWebAttachMenuPopupItemContacts.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachVcardsFlowLoadable","WAWebAttachmentMenuLogger","WAWebModalManager","WAWebPersonFilledRefreshedIcon.react","WAWebPrepareMessageSendingAction","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={refreshedIcon:{color:"x19hyexh",$$css:!0}};function c(e){var t=e.chat,n=e.onMenuComplete,r=function(r){return r.preventDefault(),o("WAWebModalManager").ModalManager.open(s.jsx(o("WAWebAttachVcardsFlowLoadable").AttachVcardsFlowLoadable,{chat:t,onCancel:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.CONTACT)},onContactsSent:function(){n==null||n(!0),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.CONTACT)}})),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(t),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.CONTACT),!0};return s.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:r,icon:s.jsx(o("WAWebPersonFilledRefreshedIcon.react").PersonFilledRefreshedIcon,{iconXstyle:u.refreshedIcon}),text:o("WAWebAttachMenuStrings").ContactText()})}c.displayName=c.name+" [from "+i.id+"]",l.AttachMenuPopupItemContacts=c}),98);
__d("WAWebDocumentFilledRefreshedIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="document-filled-refreshed";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M9 18H15C15.2833 18 15.5208 17.9042 15.7125 17.7125C15.9042 17.5208 16 17.2833 16 17C16 16.7167 15.9042 16.4792 15.7125 16.2875C15.5208 16.0958 15.2833 16 15 16H9C8.71667 16 8.47917 16.0958 8.2875 16.2875C8.09583 16.4792 8 16.7167 8 17C8 17.2833 8.09583 17.5208 8.2875 17.7125C8.47917 17.9042 8.71667 18 9 18ZM9 14H15C15.2833 14 15.5208 13.9042 15.7125 13.7125C15.9042 13.5208 16 13.2833 16 13C16 12.7167 15.9042 12.4792 15.7125 12.2875C15.5208 12.0958 15.2833 12 15 12H9C8.71667 12 8.47917 12.0958 8.2875 12.2875C8.09583 12.4792 8 12.7167 8 13C8 13.2833 8.09583 13.5208 8.2875 13.7125C8.47917 13.9042 8.71667 14 9 14ZM6 22C5.45 22 4.97917 21.8042 4.5875 21.4125C4.19583 21.0208 4 20.55 4 20V4C4 3.45 4.19583 2.97917 4.5875 2.5875C4.97917 2.19583 5.45 2 6 2H13.175C13.4417 2 13.6958 2.05 13.9375 2.15C14.1792 2.25 14.3917 2.39167 14.575 2.575L19.425 7.425C19.6083 7.60833 19.75 7.82083 19.85 8.0625C19.95 8.30417 20 8.55833 20 8.825V20C20 20.55 19.8042 21.0208 19.4125 21.4125C19.0208 21.8042 18.55 22 18 22H6ZM13 8C13 8.28333 13.0958 8.52083 13.2875 8.7125C13.4792 8.90417 13.7167 9 14 9H18L13 4V8Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.DocumentFilledRefreshedIcon=m}),98);
__d("WAWebAttachMenuPopupItemDocuments.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachmentMenuLogger","WAWebDocumentFilledRefreshedIcon.react","WAWebFilePicker.react","WAWebFileUtils","WAWebMimeTypes","WAWebPrepareMessageSendingAction","react"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).useRef,d={refreshedIcon:{color:"x19mqsdy",$$css:!0}};function m(e){var t=e.chat,n=e.dismissMenu,a=e.onDocumentPick,i=c(),l=function(n){return n.preventDefault(),i.current?(i.current.open(),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(t),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.DOCUMENT),!1):!0},s=function(t){t.stopPropagation();var e=t.target.files==null?[]:Array.from(t.target.files);if(n(),!!e.length){var r=e.map(function(e){return{file:e,type:o("WAWebFileUtils").FILETYPE.DOCUMENT}});a(r)}};return u.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:l,icon:u.jsx(o("WAWebDocumentFilledRefreshedIcon.react").DocumentFilledRefreshedIcon,{iconXstyle:d.refreshedIcon}),text:o("WAWebAttachMenuStrings").DocumentText(),children:u.jsx(r("WAWebFilePicker.react"),{ref:i,mimes:o("WAWebMimeTypes").DOC_MIMES,onChange:s})})}m.displayName=m.name+" [from "+i.id+"]",l.AttachMenuPopupItemDocuments=m}),98);
__d("WAWebAttachMenuPopupItemEvents",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebCalendarFilledRefreshedIcon.react","WAWebEventsCreateEventModalFlow.react","WAWebModalManager","WAWebPrepareMessageSendingAction","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u={icon:{color:"xvzgjlx",$$css:!0}};function c(e){var t=e.chat;function n(e){return e.preventDefault(),o("WAWebModalManager").ModalManager.open(s.jsx(r("WAWebEventsCreateEventModalFlow.react"),{preselectedChat:t}),{blockClose:!0}),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(t),!0}return s.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:n,icon:s.jsx(o("WAWebCalendarFilledRefreshedIcon.react").CalendarFilledRefreshedIcon,{iconXstyle:u.icon}),text:o("WAWebAttachMenuStrings").EventText()})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("WAWebReceiptRefreshedFilledIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="receipt-refreshed-filled";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M3 21.4V2.59995C3 2.48328 3.05 2.40412 3.15 2.36245C3.25 2.32078 3.34167 2.34162 3.425 2.42495L4.15 3.14995C4.25 3.24995 4.36667 3.29995 4.5 3.29995C4.63333 3.29995 4.75 3.24995 4.85 3.14995L5.65 2.34995C5.75 2.24995 5.86667 2.19995 6 2.19995C6.13333 2.19995 6.25 2.24995 6.35 2.34995L7.15 3.14995C7.25 3.24995 7.36667 3.29995 7.5 3.29995C7.63333 3.29995 7.75 3.24995 7.85 3.14995L8.65 2.34995C8.75 2.24995 8.86667 2.19995 9 2.19995C9.13333 2.19995 9.25 2.24995 9.35 2.34995L10.15 3.14995C10.25 3.24995 10.3667 3.29995 10.5 3.29995C10.6333 3.29995 10.75 3.24995 10.85 3.14995L11.65 2.34995C11.75 2.24995 11.8667 2.19995 12 2.19995C12.1333 2.19995 12.25 2.24995 12.35 2.34995L13.15 3.14995C13.25 3.24995 13.3667 3.29995 13.5 3.29995C13.6333 3.29995 13.75 3.24995 13.85 3.14995L14.65 2.34995C14.75 2.24995 14.8667 2.19995 15 2.19995C15.1333 2.19995 15.25 2.24995 15.35 2.34995L16.15 3.14995C16.25 3.24995 16.3667 3.29995 16.5 3.29995C16.6333 3.29995 16.75 3.24995 16.85 3.14995L17.65 2.34995C17.75 2.24995 17.8667 2.19995 18 2.19995C18.1333 2.19995 18.25 2.24995 18.35 2.34995L19.15 3.14995C19.25 3.24995 19.3667 3.29995 19.5 3.29995C19.6333 3.29995 19.75 3.24995 19.85 3.14995L20.575 2.42495C20.6583 2.34162 20.75 2.32078 20.85 2.36245C20.95 2.40412 21 2.48328 21 2.59995V21.4C21 21.5166 20.95 21.5958 20.85 21.6375C20.75 21.6791 20.6583 21.6583 20.575 21.575L19.85 20.85C19.75 20.75 19.6333 20.7 19.5 20.7C19.3667 20.7 19.25 20.75 19.15 20.85L18.35 21.65C18.25 21.75 18.1333 21.8 18 21.8C17.8667 21.8 17.75 21.75 17.65 21.65L16.85 20.85C16.75 20.75 16.6333 20.7 16.5 20.7C16.3667 20.7 16.25 20.75 16.15 20.85L15.35 21.65C15.25 21.75 15.1333 21.8 15 21.8C14.8667 21.8 14.75 21.75 14.65 21.65L13.85 20.85C13.75 20.75 13.6333 20.7 13.5 20.7C13.3667 20.7 13.25 20.75 13.15 20.85L12.35 21.65C12.25 21.75 12.1333 21.8 12 21.8C11.8667 21.8 11.75 21.75 11.65 21.65L10.85 20.85C10.75 20.75 10.6333 20.7 10.5 20.7C10.3667 20.7 10.25 20.75 10.15 20.85L9.35 21.65C9.25 21.75 9.13333 21.8 9 21.8C8.86667 21.8 8.75 21.75 8.65 21.65L7.85 20.85C7.75 20.75 7.63333 20.7 7.5 20.7C7.36667 20.7 7.25 20.75 7.15 20.85L6.35 21.65C6.25 21.75 6.13333 21.8 6 21.8C5.86667 21.8 5.75 21.75 5.65 21.65L4.85 20.85C4.75 20.75 4.63333 20.7 4.5 20.7C4.36667 20.7 4.25 20.75 4.15 20.85L3.425 21.575C3.34167 21.6583 3.25 21.6791 3.15 21.6375C3.05 21.5958 3 21.5166 3 21.4ZM7 17H17C17.2833 17 17.5208 16.9041 17.7125 16.7125C17.9042 16.5208 18 16.2833 18 16C18 15.7166 17.9042 15.4791 17.7125 15.2875C17.5208 15.0958 17.2833 15 17 15H7C6.71667 15 6.47917 15.0958 6.2875 15.2875C6.09583 15.4791 6 15.7166 6 16C6 16.2833 6.09583 16.5208 6.2875 16.7125C6.47917 16.9041 6.71667 17 7 17ZM7 13H17C17.2833 13 17.5208 12.9041 17.7125 12.7125C17.9042 12.5208 18 12.2833 18 12C18 11.7166 17.9042 11.4791 17.7125 11.2875C17.5208 11.0958 17.2833 11 17 11H7C6.71667 11 6.47917 11.0958 6.2875 11.2875C6.09583 11.4791 6 11.7166 6 12C6 12.2833 6.09583 12.5208 6.2875 12.7125C6.47917 12.9041 6.71667 13 7 13ZM7 8.99995H17C17.2833 8.99995 17.5208 8.90412 17.7125 8.71245C17.9042 8.52078 18 8.28328 18 7.99995C18 7.71662 17.9042 7.47912 17.7125 7.28745C17.5208 7.09578 17.2833 6.99995 17 6.99995H7C6.71667 6.99995 6.47917 7.09578 6.2875 7.28745C6.09583 7.47912 6 7.71662 6 7.99995C6 8.28328 6.09583 8.52078 6.2875 8.71245C6.47917 8.90412 6.71667 8.99995 7 8.99995Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.ReceiptRefreshedFilledIcon=m}),98);
__d("WAWebAttachMenuPopupItemOrders.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachmentMenuLogger","WAWebBizEntryPoint","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebDrawerManager","WAWebModalManager","WAWebOrderCreationFlowLoadable","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderExpansionNotSupportedPopup.react","WAWebOrdersExpansionUtils","WAWebReceiptRefreshedFilledIcon.react","WAWebSmbDataSharingOptInModalDialog","WAWebUserPrefsMeUser","WAWebWamEnumOrderDetailsCreationAction","WAWebWamEnumSmbDataSharingConsentScreenEntryPoint","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={icon:{color:"x1ydg37e",$$css:!0},opacityOverride:{opacity:"xuzhngd",$$css:!0}};function c(e){var t=e.chat,n=function(){new(o("WAWebOrderDetailsActionsSmbWamEvent")).OrderDetailsActionsSmbWamEvent({orderDetailsCreationAction:o("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.CLICK_ORDER_FROM_ICON_MENU,actionCategory:String(r("WAWebOrderDetailsActionCategory").ORDER_DETAILS_CREATION),orderDetailEntryPoint:String(r("WAWebBizEntryPoint").MERCHANT_INITIATED),hasCatalog:o("WAWebBusinessProfileUtils").hasCatalog(o("WAWebBusinessProfileCollection").BusinessProfileCollection.get(o("WAWebUserPrefsMeUser").getMePnUserOrThrow()))}).commit();var e=function(){o("WAWebDrawerManager").DrawerManager.openDrawerRight(s.jsx(r("WAWebOrderCreationFlowLoadable"),{entryPoint:r("WAWebBizEntryPoint").MERCHANT_INITIATED,chat:t,onSend:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.ORDER)},onCancel:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.ORDER)}}),{transition:"slide-left"}),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.ORDER)};return r("WAWebSmbDataSharingOptInModalDialog").maybeShowOrderDataSharingDialog(t,e,o("WAWebWamEnumSmbDataSharingConsentScreenEntryPoint").SMB_DATA_SHARING_CONSENT_SCREEN_ENTRY_POINT.NEW_ORDER),!0},a=!o("WAWebOrdersExpansionUtils").isOrderExpansionEnabled()&&o("WAWebOrdersExpansionUtils").isSellerCountrySameAsBuyer(t)||o("WAWebOrdersExpansionUtils").isContactCountrySupported(t);a||(n=function(){return o("WAWebModalManager").ModalManager.open(s.jsx(r("WAWebOrderExpansionNotSupportedPopup.react"),{chat:t})),!1});var i=s.jsx(o("WAWebReceiptRefreshedFilledIcon.react").ReceiptRefreshedFilledIcon,{iconXstyle:[u.icon,!a&&u.opacityOverride]});return s.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:n,icon:i,text:o("WAWebAttachMenuStrings").OrderText()})}c.displayName=c.name+" [from "+i.id+"]",l.AttachMenuPopupItemOrders=c}),98);
__d("WAWebMediaFilledRefreshedIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="media-filled-refreshed";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M13.25 12.5L12.1 11C12 10.8667 11.8667 10.8 11.7 10.8C11.5333 10.8 11.4 10.8667 11.3 11L9.625 13.2C9.49167 13.3667 9.47083 13.5417 9.5625 13.725C9.65417 13.9083 9.80833 14 10.025 14H17.975C18.1917 14 18.3458 13.9083 18.4375 13.725C18.5292 13.5417 18.5083 13.3667 18.375 13.2L15.95 10.025C15.85 9.89167 15.7167 9.825 15.55 9.825C15.3833 9.825 15.25 9.89167 15.15 10.025L13.25 12.5ZM8 18C7.45 18 6.97917 17.8042 6.5875 17.4125C6.19583 17.0208 6 16.55 6 16V4C6 3.45 6.19583 2.97917 6.5875 2.5875C6.97917 2.19583 7.45 2 8 2H20C20.55 2 21.0208 2.19583 21.4125 2.5875C21.8042 2.97917 22 3.45 22 4V16C22 16.55 21.8042 17.0208 21.4125 17.4125C21.0208 17.8042 20.55 18 20 18H8ZM4 22C3.45 22 2.97917 21.8042 2.5875 21.4125C2.19583 21.0208 2 20.55 2 20V7C2 6.71667 2.09583 6.47917 2.2875 6.2875C2.47917 6.09583 2.71667 6 3 6C3.28333 6 3.52083 6.09583 3.7125 6.2875C3.90417 6.47917 4 6.71667 4 7V20H17C17.2833 20 17.5208 20.0958 17.7125 20.2875C17.9042 20.4792 18 20.7167 18 21C18 21.2833 17.9042 21.5208 17.7125 21.7125C17.5208 21.9042 17.2833 22 17 22H4Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.MediaFilledRefreshedIcon=m}),98);
__d("WAWebAttachMenuPopupItemPhotos.react",["$InternalEnum","WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachmentMenuLogger","WAWebFilePicker.react","WAWebMediaFilledRefreshedIcon.react","WAWebMimeTypes","WAWebPrepareMessageSendingAction","react"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).useRef,d={refreshedIcon:{color:"xihbb3s",$$css:!0}},m=n("$InternalEnum").Mirrored(["PHOTOS","VIDEOS","PHOTOS_AND_VIDEOS"]);function p(e){var t=e.chat,n=e.dismissMenu,a=e.mediaSelectionType,i=e.multiple,l=e.onMediaPick,s=c(),p=function(n){return n.preventDefault(),s.current!=null?(s.current.open(),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(t),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.PHOTO_AND_VIDEO_LIBRARY),!1):!0},_=function(t){var e;if(!t){n();return}t.stopPropagation();var r=Array.from((e=t.target.files)!=null?e:[]);n(),r.length&&l(r.map(function(e){return{file:e}}))},f,g=[];switch(a){case m.PHOTOS:g.push(o("WAWebMimeTypes").IMAGE_MIMES),f=o("WAWebAttachMenuStrings").PhotosText();break;case m.VIDEOS:g.push(o("WAWebMimeTypes").VIDEO_MIMES),f=o("WAWebAttachMenuStrings").VideosText();break;default:g.push(o("WAWebMimeTypes").IMAGE_MIMES,o("WAWebMimeTypes").VIDEO_MIMES),f=o("WAWebAttachMenuStrings").PhotosAndVideosText();break}return u.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:p,icon:u.jsx(o("WAWebMediaFilledRefreshedIcon.react").MediaFilledRefreshedIcon,{iconXstyle:d.refreshedIcon}),text:f,children:u.jsx(r("WAWebFilePicker.react"),{ref:s,mimes:g.join(","),onChange:_,multiple:i})})}p.displayName=p.name+" [from "+i.id+"]",l.MediaSelectionType=m,l.AttachMenuPopupItemPhotos=p}),98);
__d("WAWebPollRefreshedIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="poll-refreshed";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M4 18C4 17.45 4.19583 16.9792 4.5875 16.5875C4.97917 16.1958 5.45 16 6 16H10C10.55 16 11.0208 16.1958 11.4125 16.5875C11.8042 16.9792 12 17.45 12 18C12 18.55 11.8042 19.0208 11.4125 19.4125C11.0208 19.8042 10.55 20 10 20H6C5.45 20 4.97917 19.8042 4.5875 19.4125C4.19583 19.0208 4 18.55 4 18ZM4 12C4 11.45 4.19583 10.9792 4.5875 10.5875C4.97917 10.1958 5.45 10 6 10H18C18.55 10 19.0208 10.1958 19.4125 10.5875C19.8042 10.9792 20 11.45 20 12C20 12.55 19.8042 13.0208 19.4125 13.4125C19.0208 13.8042 18.55 14 18 14H6C5.45 14 4.97917 13.8042 4.5875 13.4125C4.19583 13.0208 4 12.55 4 12ZM4 6C4 5.45 4.19583 4.97917 4.5875 4.5875C4.97917 4.19583 5.45 4 6 4L14 4C14.55 4 15.0208 4.19583 15.4125 4.5875C15.8042 4.97917 16 5.45 16 6C16 6.55 15.8042 7.02083 15.4125 7.4125C15.0208 7.80417 14.55 8 14 8H6C5.45 8 4.97917 7.80417 4.5875 7.4125C4.19583 7.02083 4 6.55 4 6Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.PollRefreshedIcon=m}),98);
__d("WAWebPollAttachMediaViewLoadable.react",["JSResourceForInteraction","WAWebLazyLoadLoading.react","WAWebLazyLoadedRetriable","WAWebLoadable","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebPollAttachMediaView.react").__setRef("WAWebPollAttachMediaViewLoadable.react").load();return e.PollAttachMediaView}),"PollAttachMediaView"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(r("WAWebLazyLoadLoading.react"),{error:!!t.error})}});l.PollAttachMediaViewLoadable=c}),98);
__d("WAWebPollAttachMediaPicker.react",["fbt","WALogger","WAWebAttachMediaCollection","WAWebFilePicker.react","WAWebMimeTypes","WAWebModalManager","WAWebPollAttachMediaViewLoadable.react","WAWebPollsGatingUtils","WAWebToast.react","WAWebToastManager","WAWebWamEnumMediaPickerOriginType","react","useWAWebUIM"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=r("react"));function d(t){var n=t.mediaPickerRef,a=t.chat,i=t.getComposeBoxEditorRef,l=t.options,u=t.question,d=t.allowMultipleMedia,m=t.activeOptionIndex,p=function(n){var t=n.attachments,p=n.onSend,_=n.onCancel,f=new(r("WAWebAttachMediaCollection"))({chatParticipantCount:a.getParticipantCount()}),g=o("WAWebPollsGatingUtils").getMaxPollOptionCount();t&&t.length>0?(f.processAttachmentsForChat(t,o("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.POLL_CREATION,a,g,function(){t.length>g&&o("WAWebToastManager").ToastManager.open(c.jsx(o("WAWebToast.react").Toast,{msg:s._(/*BTDS*/"Can't add more than {max number of media} photos.",[s._param("max number of media",g)])}))}),m!=null&&!d?f.forEach(function(e){var t;e.updateCaption((t=l[m])==null?void 0:t.name)}):f.forEach(function(e,t){var n;e.updateCaption((n=l[t])==null?void 0:n.name)})):o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["PollAttachMediaPicker: receive empty attachments"])));var h=c.jsx(o("WAWebPollAttachMediaViewLoadable.react").PollAttachMediaViewLoadable,{chat:a,onSend:p,onCancel:_,mediaCollection:f,getComposeBoxEditorRef:i,question:u,options:l,allowMultipleMedia:d,activeOptionIndex:m});o("WAWebModalManager").ModalManager.openMedia(h,{transition:"menu"})},_=r("useWAWebUIM")(),f=function(){_==null||_.requestDismiss()},g=function(t){var e;if(!t){f();return}t.stopPropagation();var n=Array.from((e=t.target.files)!=null?e:[]);f(),n.length&&p({attachments:n.map(function(e){return{file:e}})})};return c.jsx(r("WAWebFilePicker.react"),{ref:n,mimes:o("WAWebMimeTypes").IMAGE_MIMES,onChange:g,multiple:d})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("WAWebPollsOptionInput",["fbt","WAWebDragIconWrapper.react","WAWebImageRefreshedIcon.react","WAWebImg.react","WAWebPollsGatingUtils","WAWebRichTextField.react","WAWebSvgComponentBase","WAWebUISpacing","WAWebUnstyledButton.react","WAWebXAltIcon.react","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react")),c={photoPreview:{width:"x15yg21f",height:"xnnlda6",borderStartStartRadius:"xyi3aci",borderStartEndRadius:"xwf5gio",borderEndEndRadius:"x1p453bz",borderEndStartRadius:"x1suzm8a",justifyContent:"xl56j7k",alignItems:"x6s0dn4",display:"x78zum5",backgroundColor:"x1h3rtpe",flexShrink:"x2lah0s",objectFit:"xl1xv1r",$$css:!0},deleteBtn:{position:"x10l6tqk",zIndex:"x11uqc5h",color:"x17t9dm2",opacity:"xg01cxk",transition:"xid8q7e",":hover_opacity":"x1o7uuvo",$$css:!0},deleteIcon:{stroke:"x1c8i944",strokeWidth:"x1ns0lul",$$css:!0}};function d(e){var t=e.chat,n=e.error,a=e.image,i=e.initialText,l=e.isPhotoPoll,c=l===void 0?!1:l,d=e.onChange,p=e.onDeletePhoto,_=e.onDragThumbMouseDown,f=e.onInputBlur,g=e.onInputFocus,h=e.onPhotoIconClick,y=e.onPhotoThumbnailClick,C=e.onTextInputRef,b=e.testid,v=o("WAWebPollsGatingUtils").isPhotoPollSenderEnabled(t)?s._(/*BTDS*/"Add text or photo"):s._(/*BTDS*/"Add text");return u.jsxs("div",{className:"xh8yej3 x78zum5 x1q0g3np x6s0dn4",children:[u.jsx("div",{className:"xh8yej3 x78zum5 x6s0dn4",children:u.jsx("div",{className:"xh8yej3",children:u.jsx(o("WAWebRichTextField.react").RichTextField,{ref:function(t){C(t)},onPhotoIconClick:h,testid:void 0,hideFloatingLabel:!0,showRemaining:!0,emojiBtnPosition:"side",photoBtnPosition:o("WAWebPollsGatingUtils").isPhotoPollSenderEnabled(t)&&!c?"side":"none",textFormatEnabled:!0,value:i,error:n!=null?n:void 0,maxLength:o("WAWebPollsGatingUtils").getMaxPollOptionLength(),maxCodeUnits:o("WAWebPollsGatingUtils").getMaxPollOptionLengthForIncomingMessages(),placeholder:v,onChange:function(t){var e=t.text;return d(e)},onDragThumbMouseDown:_,onFocus:g,onBlur:f,showDraggableIcon:c})})}),c?u.jsxs(u.Fragment,{children:[u.jsx(m,{image:a,onDeletePhoto:p,onClick:y}),u.jsx("div",{className:"xlese2p",children:u.jsx(r("WAWebDragIconWrapper.react"),{onDragThumbMouseDown:_})})]}):null]})}d.displayName=d.name+" [from "+i.id+"]";function m(e){var t=e.image,n=e.onClick,a=e.onDeletePhoto;return u.jsxs("div",{children:[(t==null?void 0:t.preview)&&u.jsx(r("WAWebUnstyledButton.react"),{role:"button",xstyle:[c.deleteBtn,o("WAWebUISpacing").uiMargin.start48,o("WAWebUISpacing").uiMargin.bottom48],onClick:a,children:u.jsx(o("WAWebXAltIcon.react").XAltIcon,{xstyle:c.deleteIcon})}),u.jsx(r("WAWebUnstyledButton.react"),{xstyle:[c.photoPreview,o("WAWebUISpacing").uiMargin.start16],onClick:n,children:t!=null&&t.preview?u.jsx(r("WAWebImg.react"),{src:t==null?void 0:t.preview,alt:"",className:"x15yg21f xnnlda6 xyi3aci xwf5gio x1p453bz x1suzm8a xl56j7k x6s0dn4 x78zum5 x1h3rtpe x2lah0s xl1xv1r"}):u.jsx(o("WAWebImageRefreshedIcon.react").ImageRefreshedIcon,{DEPRECATED_color:o("WAWebSvgComponentBase").DEPRECATED_SvgColorProp.GRAY,width:15,height:15})})]})}m.displayName=m.name+" [from "+i.id+"]",l.default=d}),226);
__d("WAWebPollsOrderableList",["WANullthrows","react","useLazyRef","useWAWebDebouncedCallback","useWAWebListener"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useEffect,m=u.useRef,p=u.useState;function _(e){var t=e.items,n=e.renderItem,a=e.onReordered,i=m(null),l=r("useLazyRef")(function(){return new Map}),s=m(0),u=p(),d=u[0],_=u[1],h=p(null),y=h[0],C=h[1],b=p(null),v=b[0],S=b[1],R=p(null),L=R[0],E=R[1],k=L!=null,I=L==null||v==null||d==null?t:f({items:L,draggedItemKey:y,getItemHeight:function(t){var e,n;return(e=(n=d.get(t.key))==null?void 0:n.height)!=null?e:0},dragPosition:v}),T=function(t){var e=i.current;if(e==null)return null;var n=l.current,r=n.get(t);if(r==null)return null;var o=e.getBoundingClientRect().y,a=r.getBoundingClientRect();return{clientTop:a.top,startTop:a.top-o,height:a.height}},D=function(){var e=new Map;for(var n of t)e.set(n.key,T(n.key));_(e)},x=function(t){var e=i.current;if(e!=null){var n=t.clientY-e.getBoundingClientRect().y;S(n)}};o("useWAWebListener").useListener(y==null?null:document,"mousemove",x);var $=r("useWAWebDebouncedCallback")(function(){E(null),_(null)},300),P=function(n,r){var e;if(L==null){var o=(e=T(n))==null?void 0:e.clientTop;o!=null&&(s.current=o-r.clientY,D(),C(n),E(t))}};o("useWAWebListener").useListener(y==null?null:document,"mouseup",function(e){$(),a(I),C(null),S(null)}),g(y!=null);var N=null,M=0,w=0;if(d!=null){N=new Map;var A=0;for(var F of I){var O=d.get(F.key);if(O!=null){var B=A;N.set(F.key,B),M=B,A+=O.height}}}var W=(L!=null?L:t).map(function(e,t){var o=d==null?void 0:d.get(e.key),a;if(e.key===y&&v!=null){var i,u=r("WANullthrows")(o==null?void 0:o.startTop),m=(i=s.current)!=null?i:0,p=Math.min(Math.max(w,v+m),M);a=p-u}else{var _,f=o==null?void 0:o.startTop,g=(_=N)==null?void 0:_.get(e.key);a=!k||g==null||f==null?0:g-f}return c.jsx("div",{ref:function(n){n==null?l.current.delete(e.key):l.current.set(e.key,n)},className:{0:"xh8yej3",1:"xh8yej3 x11xpdln x13dflua xz4gly6"}[!!(y!==e.key&&k)<<0],style:{transform:"translateY("+a+"px)"},children:n({item:e,startDrag:P,index:t})},e.key)});return c.jsx("div",{ref:i,className:"x78zum5 xdt5ytf",children:W})}_.displayName=_.name+" [from "+i.id+"]";function f(e){var t=e.items,n=e.draggedItemKey,r=e.getItemHeight,o=e.dragPosition,a=n!=null?t.find(function(e){return e.key===n}):null;if(a==null||o==null)return t;var i=[].concat(t),l=i.findIndex(function(e){return e.key===n});i.splice(l,1);var s=0,u=0,c=0;for(var d of t){o>s&&(c=u);var m=r(d);s+=m,u++}return i.splice(c,0,a),i}function g(e){d(function(){if(e){var t=document,n=t.body;if(n!=null){var r=document.createElement("div");return r.className="xi9pz9s xixxii4 x13vifvy x1o0tod xh8yej3 x5yr21d x1lfen1e",n.appendChild(r),function(){r.remove()}}}},[e])}l.default=_}),98);
__d("WAWebPollsCreatePollModal",["fbt","WANullthrows","WAWebAttachMediaCollection","WAWebAttachmentMenuLogger","WAWebBizBotTosUtils","WAWebChatGetters","WAWebConfirmPopup.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebFrontendChatGetters","WAWebKeyboardHotKeys.react","WAWebModal.react","WAWebModalManager","WAWebNewsletterGatingUtils","WAWebNewsletterWamoSubMessageType","WAWebNewsletterWamoSubMessageTypePopup.react","WAWebNewsletterWamoSubUtils","WAWebPollAttachMediaPicker.react","WAWebPollAttachMediaViewLoadable.react","WAWebPollOptionsRenderUtils","WAWebPollsActionsMetricUtils","WAWebPollsGatingUtils","WAWebPollsOptionInput","WAWebPollsOrderableList","WAWebPollsSendPollCreationMsgAction","WAWebRichTextField.react","WAWebRound.react","WAWebToast.react","WAWebToastManager","WAWebUISpacing","WAWebWdsIcSendFilledIcon.react","WDSSwitch.react","asyncToGeneratorRuntime","react","stylex","useLazyRef","useWAWebChatValues","useWAWebOnUnmount","useWAWebUIM"],(function(t,n,r,o,a,i,l,s){var e,u,c,d=c||(c=o("react")),m=e||(e=r("react")),p=d.useCallback,_=d.useEffect,f=d.useLayoutEffect,g=d.useMemo,h=d.useRef,y=d.useState,C=25,b={bodyContainer:{boxSizing:"x9f619",width:"x1esq4s8",paddingInlineStart:"xvahy20",paddingInlineEnd:"x1a4sjiy",display:"x78zum5",flexDirection:"xdt5ytf",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},sectionTitle:{fontSize:"xlm9qay",fontWeight:"xk50ysn",$$css:!0},createPollButtonContainer:{width:"xh8yej3",display:"x78zum5",justifyContent:"x13a6bvl",height:"xwvwv9b",backgroundColor:"x1jn9dgz",$$css:!0},optionsContainer:{overflowY:"x1odjw0f",$$css:!0},drawer:{backgroundColor:"x1280gxy",marginInlineStart:"x137kccz",width:"x14n2pz4",$$css:!0},sendButton:{transform:"x1cb1t30",marginInlineEnd:"x1wcu8vx",transitionProperty:"xs2xxs2",transitionDuration:"x1d8287x",$$css:!0},sendButtonRefreshed:{color:"x1pse0pq",backgroundColor:"xfn3atn",$$css:!0},singleOptionContainer:{display:"x78zum5",alignItems:"x6s0dn4",width:"xh8yej3",fontSize:"x1jchvi3",lineHeight:"xdod15v",$$css:!0},singleOptionLabel:{width:"xh8yej3",display:"x1rg5ohu",cursor:"x1ypdohk",$$css:!0}};function v(e){var t,a=e.chat,i=e.getComposeBoxEditorRef,l=e.initialOptions,c=e.initialQuestion,d=e.onSend,C=r("useLazyRef")(function(){var e,t;return o("WAWebPollsGatingUtils").isPrefillPollQuestionEnabled()&&(e=(t=i())==null||(t=t.getTextContent())==null?void 0:t.substring(0,o("WAWebPollsGatingUtils").getMaxPollNameLength()))!=null?e:""}).current,v=y(C),S=v[0],R=v[1],L=y(!1),E=L[0],k=L[1],I=h(),T=y(void 0),D=T[0],x=T[1],$=y(!1),P=$[0],N=$[1],M=y(!1),w=M[0],A=M[1],F=y(null),O=F[0],B=F[1],W=(t=o("useWAWebChatValues").useOptionalChatValues(a.id,[o("WAWebChatGetters").getIsNewsletter,o("WAWebFrontendChatGetters").getNewsletterMetadata]))!=null?t:[!1,null],q=W[0],U=W[1],V=o("WAWebPollsGatingUtils").getMaxPollOptionCount(),H=y(function(){return o("WAWebPollOptionsRenderUtils").formatOptions(l!=null?l:[],{maxOptionsCount:V})}),G=H[0],z=H[1],j=h(new Map),K=h(null),Q=h(),X=r("useWAWebUIM")(),Y=p(function(e,t){z(o("WAWebPollOptionsRenderUtils").formatOptions(e,{maxOptionsCount:V,focusedKey:t}))},[V]);_(function(){o("WAWebPollsActionsMetricUtils").commitPollOpenCreationModal(a)},[]);var J=h(),Z=h(G.length);f(function(){var e=K.current,t=Z.current,n=G.findIndex(function(e){return e.key===J.current});e!=null&&t<G.length&&n===G.length-2&&G[G.length-1].name===""&&e.scroll({top:e.scrollHeight,behavior:"smooth"}),Z.current=G.length},[G]);var ee=function(t){var e=t.text;R(e)},te=G.some(function(e){return e.image!=null}),ne=g(function(){return o("WAWebPollOptionsRenderUtils").validateOptions(G)},[G]);_(function(){a.isComposingPoll=S.length>0||G.some(function(e){return e.name.length>0})},[a,S,G]),r("useWAWebOnUnmount")(function(){a.isComposingPoll=!1});var re=G[V-2],oe=G[V-1],ae=G.length===V&&!o("WAWebPollOptionsRenderUtils").isEmptyAfterTrimming(re)&&o("WAWebPollOptionsRenderUtils").isEmptyAfterTrimming(oe),ie=h(),le=function(t){t===void 0&&(t=!1),o("WAWebModalManager").ModalManager.close(),t&&o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(a,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.POLL)},se=S!==""||G.some(function(e){return e.name!==""||e.image}),ue=function(){se&&o("WAWebPollsGatingUtils").isPollsCancellationPromptEnabled()?N(!0):le(!0)},ce=function(){se&&o("WAWebPollsGatingUtils").isPollsCancellationPromptEnabled()?P||N(!0):le(!0)},de=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t;A(!0),le(!1),yield o("WAWebBizBotTosUtils").maybeShowBizBot1pTos(a);var n=G.filter(function(e){return!o("WAWebPollOptionsRenderUtils").isEmptyAfterTrimming(e)}),l={name:S,selectableOptionsCount:E?1:0},s=te?babelHelpers.extends({},l,{contentType:"IMAGE",options:n.map(function(e){var t=e.name,n=e.image;return{name:t,image:r("WANullthrows")(n)}}),pollType:"POLL"}):babelHelpers.extends({},l,{contentType:"TEXT",options:n.map(function(e){var t=e.name;return{name:t}}),pollType:"POLL"});o("WAWebPollsSendPollCreationMsgAction").sendPollCreation({poll:s,chat:a,quotedMsg:o("WAWebPollsGatingUtils").arePollsFastFollowsEnabled()?a.composeQuotedMsg:null,isWamoSub:e===o("WAWebNewsletterWamoSubMessageType").NewsletterWamoSubMessageType.WamoSub}),a.composeQuotedMsg=null,a.setComposeContents({}),(t=i())==null||t.reset(),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(a,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.POLL)});return function(n){return e.apply(this,arguments)}})(),me=function(){if(q&&o("WAWebNewsletterWamoSubUtils").newsletterSupportsSubscriptions(U)&&Q.current&&o("WAWebNewsletterGatingUtils").isWamoSubCreatorExperienceSupported()){var e=function(t){de(t)};B({popupAnchorEl:Q.current,handleSelect:e})}else de();d==null||d()},pe=function(){var e=o("WAWebPollOptionsRenderUtils").validatePoll({question:S,options:G,isPhotoPoll:te});if(e!=null){o("WAWebToastManager").ToastManager.open(m.jsx(o("WAWebToast.react").Toast,{msg:e}));return}me()},_e=g(function(){return{chat:a,getComposeBoxEditorRef:i,options:G}},[a,i,G]),fe=p(function(e,t){var n=[].concat(G);n[e]=babelHelpers.extends({},G[e],{image:void 0}),Y(n,t)},[G,Y]),ge=p(function(e){var t=G[e],n=babelHelpers.extends({question:S,allowMultipleMedia:!1,activeOptionIndex:e},_e);if(t.image){var i=t.image,l=new(r("WAWebAttachMediaCollection"))({chatParticipantCount:a.getParticipantCount()});l.add(i),l.forEach(function(e){e.updateCaption(t.name)}),l.setActive(i),X==null||X.requestDismiss();var s=m.jsx(o("WAWebPollAttachMediaViewLoadable.react").PollAttachMediaViewLoadable,babelHelpers.extends({mediaCollection:l},n));o("WAWebModalManager").ModalManager.openMedia(s,{transition:"menu"})}else{var u;x(e),(u=I.current)==null||u.open()}},[a,_e,G,S,X]);return m.jsxs(o("WAWebKeyboardHotKeys.react").HotKeys,{handlers:{esc:function(t){t.stopPropagation(),ue()}},children:[m.jsx(o("WAWebModal.react").Modal,{type:o("WAWebModal.react").ModalTheme.Tower,testid:void 0,onOverlayClick:ce,children:m.jsxs(r("WAWebDrawer.react"),{xstyle:b.drawer,children:[m.jsx(o("WAWebDrawerHeader.react").DrawerHeader,{title:s._(/*BTDS*/"Create poll"),type:o("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.POPUP,onCancel:ue}),m.jsx(r("WAWebDrawerBody.react"),{children:m.jsxs("div",babelHelpers.extends({},(u||(u=r("stylex"))).props(b.bodyContainer,o("WAWebUISpacing").uiPadding.top32),{children:[m.jsx("span",{className:"xlm9qay xk50ysn",children:s._(/*BTDS*/"Question")}),m.jsx(o("WAWebRichTextField.react").RichTextField,{ref:ie,testid:void 0,focusOnMount:!0,hideFloatingLabel:!0,showRemaining:!0,emojiBtnPosition:"side",textFormatEnabled:!0,value:c!=null?c:C,maxLength:o("WAWebPollsGatingUtils").getMaxPollNameLength(),maxVisibleLines:5,maxCodeUnits:o("WAWebPollsGatingUtils").getMaxPollNameLengthForIncomingMessages(),onChange:ee,placeholder:s._(/*BTDS*/"Ask question")}),m.jsx("span",babelHelpers.extends({},u.props(b.sectionTitle,o("WAWebUISpacing").uiMargin.top25),{children:s._(/*BTDS*/"Options")})),m.jsx("div",babelHelpers.extends({ref:K},u.props(b.optionsContainer,o("WAWebUISpacing").uiMargin.top2,o("WAWebUISpacing").uiMargin.bottom10),{children:m.jsx(r("WAWebPollsOrderableList"),{items:G,onReordered:Y,renderItem:function(t){var e=t.startDrag,n=t.item,o=t.index;return m.jsx(r("WAWebPollsOptionInput"),{chat:a,onPhotoThumbnailClick:function(){ge(o)},onPhotoIconClick:function(){var e;return(e=I.current)==null?void 0:e.open()},initialText:n.name,error:ne.get(n.key),testid:void 0,onTextInputRef:function(t){t?j.current.set(n.key,t):j.current.delete(n.key)},isPhotoPoll:te,onChange:function(t){var e=[].concat(G);e[o]=babelHelpers.extends({},n,{name:t}),Y(e,n.key)},onDeletePhoto:function(){fe(o,n.key)},onDragThumbMouseDown:function(r){r.button===0&&e(n.key,r)},onInputFocus:function(){J.current=n.key},onInputBlur:function(){J.current=null},image:n.image})}})})),m.jsx("h3",{"data-testid":void 0,className:{0:"x1nxh6w3",1:"x1nxh6w3 xlshs6z"}[!ae<<0],children:s._(/*BTDS*/"You can add one more option.")}),o("WAWebPollsGatingUtils").isSingleOptionPollsSendingEnabled(a.id)&&m.jsxs("div",babelHelpers.extends({},(u||(u=r("stylex"))).props(b.singleOptionContainer,o("WAWebUISpacing").uiPadding.bottom20),{children:[m.jsx("label",babelHelpers.extends({htmlFor:"polls-single-option-switch"},(u||(u=r("stylex"))).props(b.singleOptionLabel,o("WAWebUISpacing").uiPadding.vert4),{children:s._(/*BTDS*/"Allow multiple answers")})),m.jsx(r("WDSSwitch.react"),{id:"polls-single-option-switch",value:!E,onChange:function(){k(!E)},testid:void 0})]}))]}))}),m.jsx("div",babelHelpers.extends({},u.props(b.createPollButtonContainer,o("WAWebUISpacing").uiMargin.top30),{children:m.jsxs(o("WAWebRound.react").Round,{ref:Q,xstyle:[b.sendButton,b.sendButtonRefreshed],theme:o("WAWebRound.react").RoundTheme.DrawerFooter,large:!0,onClick:pe,disabled:ne.size!==0||w,label:s._(/*BTDS*/"Send"),testid:void 0,children:[m.jsx(o("WAWebWdsIcSendFilledIcon.react").WdsIcSendFilledIcon,{width:28,directional:!0})," "]})})),O!=null&&m.jsx(r("WAWebNewsletterWamoSubMessageTypePopup.react"),{handleSelect:O.handleSelect,popupAnchorEl:O.popupAnchorEl,onDismiss:function(){return B(null)}})]})}),o("WAWebPollsGatingUtils").isPollsCancellationPromptEnabled()&&P&&m.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{cancelButtonType:"warning-secondary",title:s._(/*BTDS*/"Leave poll?"),okText:s._(/*BTDS*/"Keep editing"),onOK:function(){var e;N(!1),(e=ie.current)==null||e.restoreFocus()},cancelText:s._(/*BTDS*/"Leave"),onCancel:function(){le(!0)},onOverlayClick:ce,children:s._(/*BTDS*/"Your edits won't be saved.")}),m.jsx(r("WAWebPollAttachMediaPicker.react"),{mediaPickerRef:I,chat:a,options:G,getComposeBoxEditorRef:i,question:S,allowMultipleMedia:!te,activeOptionIndex:D!=null?D:void 0})]})}v.displayName=v.name+" [from "+i.id+"]",l.CreatePollModal=v}),226);
__d("WAWebAttachMenuPopupItemPolls.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachmentMenuLogger","WAWebModalManager","WAWebPollRefreshedIcon.react","WAWebPollsCreatePollModal","WAWebPollsGatingUtils","WAWebPrepareMessageSendingAction","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={refreshedIcon:{color:"xxeg2eo",$$css:!0}};function c(e){var t=e.chat,n=e.getComposeBoxEditorRef;return s.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:function(r){return r.preventDefault(),o("WAWebModalManager").ModalManager.open(s.jsx(o("WAWebPollsCreatePollModal").CreatePollModal,{chat:t,getComposeBoxEditorRef:n}),{blockClose:o("WAWebPollsGatingUtils").isPollsCancellationPromptEnabled()}),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(t),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.POLL),!0},icon:s.jsx(o("WAWebPollRefreshedIcon.react").PollRefreshedIcon,{iconXstyle:u.refreshedIcon}),text:o("WAWebAttachMenuStrings").PollText()})}c.displayName=c.name+" [from "+i.id+"]",l.AttachMenuPopupItemPolls=c}),98);
__d("WAWebQuestionsInputModalLoadable",["fbt","JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadingModal.react","WAWebModal.react","asyncToGeneratorRuntime","react","react-loadable"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react")),c=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebQuestionsInputModal.react").__setRef("WAWebQuestionsInputModalLoadable").load();return e.QuestionsInputModal}),"QuestionsInputModal"),d=r("react-loadable")({loader:c,loading:function(t){return u.jsx(r("WAWebLoadingModal.react"),{theme:o("WAWebModal.react").ModalTheme.Questions,title:s._(/*BTDS*/"Question input modal"),error:!!t.error})}});l.QuestionsInputModalLoadable=d}),226);
__d("WAWebAttachMenuPopupItemQuestion.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebIcHelpFilledIcon.react","WAWebModalManager","WAWebPrepareMessageSendingAction","WAWebQuestions.flow","WAWebQuestionsInputModalLoadable","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={icon:{color:"x11i6shi",$$css:!0}};function c(e){var t=e.chat,n=e.getComposeBoxEditorRef;return s.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:function(r){return r.preventDefault(),o("WAWebModalManager").ModalManager.open(s.jsx(o("WAWebQuestionsInputModalLoadable").QuestionsInputModalLoadable,{chat:t,getComposeBoxEditorRef:n,questionType:o("WAWebQuestions.flow").QuestionType.Question})),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(t),!0},icon:s.jsx(o("WAWebIcHelpFilledIcon.react").IcHelpFilledIcon,{xstyle:u.icon}),text:o("WAWebAttachMenuStrings").QuestionText()})}c.displayName=c.name+" [from "+i.id+"]",l.AttachMenuPopupItemQuestions=c}),98);
__d("WAWebBoltFilledIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="bolt-filled";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M8.99997 15H5.89997C5.49997 15 5.20414 14.8209 5.01247 14.4625C4.8208 14.1042 4.84164 13.7584 5.07497 13.425L12.55 2.67503C12.7166 2.44169 12.9333 2.27919 13.2 2.18753C13.4666 2.09586 13.7416 2.10003 14.025 2.20003C14.3083 2.30003 14.5166 2.47503 14.65 2.72503C14.7833 2.97503 14.8333 3.24169 14.8 3.52503L14 10H17.875C18.3083 10 18.6125 10.1917 18.7875 10.575C18.9625 10.9584 18.9083 11.3167 18.625 11.65L10.4 21.5C10.2166 21.7167 9.99164 21.8584 9.72497 21.925C9.4583 21.9917 9.19997 21.9667 8.94997 21.85C8.69997 21.7334 8.50414 21.5542 8.36247 21.3125C8.2208 21.0709 8.16664 20.8084 8.19997 20.525L8.99997 15Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.BoltFilledIcon=m}),98);
__d("WAWebAttachMenuPopupItemQuickReplies.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachmentMenuLogger","WAWebBoltFilledIcon.react","WAWebComposeBoxActions","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={icon:{color:"x1ev1nr0",$$css:!0}};function c(e){var t=e.chat,n=function(n){return n.preventDefault(),o("WAWebComposeBoxActions").ComposeBoxActions.toggleQuickReplies(),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.QUICK_REPLY),!0},r=s.jsx(o("WAWebBoltFilledIcon.react").BoltFilledIcon,{iconXstyle:u.icon});return s.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:n,icon:r,text:o("WAWebAttachMenuStrings").QuickRepliesText()})}c.displayName=c.name+" [from "+i.id+"]",l.AttachMenuPopupItemQuickReplies=c}),98);
__d("WAWebStickerCreateFilledRefreshedIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="sticker-create-filled-refreshed";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{opacity:.9,fillRule:"evenodd",clipRule:"evenodd",d:"M14 21.6814C15.0541 21.3509 16.024 20.7715 16.8221 19.9799L19.8489 16.9776C20.8807 15.9542 21.5742 14.6537 21.8569 13.25H18C15.7909 13.25 14 15.0409 14 17.25V21.6814ZM12 22H9.27273C5.25611 22 2 18.7439 2 14.7273V9.27273C2 5.25611 5.25611 2 9.27273 2H14.7273C18.7439 2 22 5.25611 22 9.27273V11.25H18C14.6863 11.25 12 13.9363 12 17.25V22ZM9 5C8.44772 5 8 5.44772 8 6V8H6C5.44772 8 5 8.44772 5 9C5 9.55229 5.44772 10 6 10H8V12C8 12.5523 8.44772 13 9 13C9.55228 13 10 12.5523 10 12V10H12C12.5523 10 13 9.55228 13 9C13 8.44772 12.5523 8 12 8H10V6C10 5.44772 9.55228 5 9 5Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.StickerCreateFilledRefreshedIcon=m}),98);
__d("WAWebAttachMenuPopupItemStickers.react",["WAWebAttachMenuPopupItem.react","WAWebAttachMenuStrings","WAWebAttachmentMenuLogger","WAWebFilePicker.react","WAWebMimeTypes","WAWebPrepareMessageSendingAction","WAWebStickerCreateFilledRefreshedIcon.react","WAWebWamEnumWebcStickerMakerEventNameType","WAWebWebcStickerMakerEventsWamEvent","react"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).useRef,d={refreshedIcon:{color:"x1w53qhl",$$css:!0}};function m(e){var t=e.chat,n=e.dismissMenu,a=e.onMediaPick,i=c(),l=function(n){n.preventDefault();var e=i.current;return e&&(new(o("WAWebWebcStickerMakerEventsWamEvent")).WebcStickerMakerEventsWamEvent({stickerMakerEventName:o("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.STICKER_MAKER_BUTTON_TAP}).commit(),e.open(),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(t),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachMenuClick(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.STICKER_MAKER)),!1},s=function(t){if(!t){n();return}t.stopPropagation();var e=t.target.files==null?[]:Array.from(t.target.files);n(),e.length&&(new(o("WAWebWebcStickerMakerEventsWamEvent")).WebcStickerMakerEventsWamEvent({stickerMakerEventName:o("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_UPLOADED}).commit(),a(e.map(function(e){return{file:e,stickerMaker:!0}})))};return u.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:l,icon:u.jsx(o("WAWebStickerCreateFilledRefreshedIcon.react").StickerCreateFilledRefreshedIcon,{iconXstyle:d.refreshedIcon}),text:o("WAWebAttachMenuStrings").StickerMakerText(),children:u.jsx(r("WAWebFilePicker.react"),{ref:i,mimes:o("WAWebMimeTypes").IMAGE_MIMES,onChange:s,multiple:!1})})}m.displayName=m.name+" [from "+i.id+"]",l.AttachMenuPopupItemStickers=m}),98);
__d("WAWebSendPaymentRequestFlowLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadingModal.react","asyncToGeneratorRuntime","react","react-loadable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebSendPaymentRequestFlow.react").__setRef("WAWebSendPaymentRequestFlowLoadable").load();return e}),"SendPaymentRequestFlow"),c=r("react-loadable")({loader:u,loading:function(t){return s.jsx(r("WAWebLoadingModal.react"),{error:!!t.error})}});l.requireBundle=u,l.SendPaymentRequestFlowLoadable=c}),98);
__d("WAWebSendPixConfirmModalLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","WAWebLoadingModal.react","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebSendPixConfirmModal.react").__setRef("WAWebSendPixConfirmModalLoadable").load();return e.WAWebSendPixConfirmModal}),"WAWebSendPixConfirmModal"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(r("WAWebLoadingModal.react"),{error:!!t.error})}});l.WAWebSendPixConfirmModalLoadable=c}),98);
__d("WAWebAttachMenuPopupPix.react",["PixPaymentRequestFeature","WAWebAttachMenuPopupItem.react","WAWebBizOrderDetailsParams","WAWebBusinessAddPixModalLoadable","WAWebModalManager","WAWebPixLogoIcon.react","WAWebSendPaymentRequestFlowLoadable","WAWebSendPixConfirmModalLoadable","WAWebUserPrefsCustomPaymentMethods","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={iconBackground:{opacity:"xg01cxk",$$css:!0},iconPrimary:{fill:"xfifr3o",$$css:!0}},c={shiftLeft:{transform:"x1gz8ohu",$$css:!0}},d=s.jsx(o("WAWebPixLogoIcon.react").PixLogoIcon,{height:24,width:24,iconXstyle:c.shiftLeft,innerStyles:{background:u.iconBackground,primary:u.iconPrimary}});function m(e){var t=e.chat,n=function(){var e=o("WAWebUserPrefsCustomPaymentMethods").getPIX(),n=e!=null;return o("PixPaymentRequestFeature").shouldOpenPaymentRequestFlow(t)?o("WAWebModalManager").ModalManager.open(s.jsx(o("WAWebSendPaymentRequestFlowLoadable").SendPaymentRequestFlowLoadable,{chat:t,previousScreen:"chat",referral:"chat_attachment"}),{transition:"modal-flow"}):n&&e?o("WAWebModalManager").ModalManager.open(s.jsx(o("WAWebSendPixConfirmModalLoadable").WAWebSendPixConfirmModalLoadable,{chat:t,pixData:e,previousScreenName:"chat",referral:"chat_attachment",orderReferral:o("WAWebBizOrderDetailsParams").OrderReferral.CHAT_ATTACHMENT})):o("WAWebModalManager").ModalManager.open(s.jsx(o("WAWebBusinessAddPixModalLoadable").WAWebBizPaymentsBrazilAddPixModalLoadable,{previousScreen:"chat",referral:"chat_attachment"})),!0};return s.jsx(o("WAWebAttachMenuPopupItem.react").AttachMenuPopupItem,{testid:void 0,action:n,icon:d,text:"Pix"})}m.displayName=m.name+" [from "+i.id+"]",l.AttachMenuPopupItemPix=m}),98);
__d("WAWebAttachMenuUtils",["WAWebBizGatingUtils","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebChatGetters","WAWebConnModel","WAWebContactGetters","WAWebL10NCountryCodes","WAWebLidMigrationUtils","WAWebLinkedCatalogHelper","WAWebProductCatalogMetaLinkingGatingUtils","WAWebUserPrefsMeUser"],(function(t,n,r,o,a,i,l){function e(e){if(o("WAWebChatGetters").getIsNewsletter(e))return!1;var t=o("WAWebBusinessProfileCollection").BusinessProfileCollection.get(o("WAWebUserPrefsMeUser").getMePnUserOrThrow());return!(!c()||o("WAWebBizGatingUtils").blockCatalogCreationECommerceComplianceIndia(t)||o("WAWebProductCatalogMetaLinkingGatingUtils").shouldDisableCatalogDueToMetaLinkingForSelf())}function s(){return o("WAWebProductCatalogMetaLinkingGatingUtils").shouldShowMetaLinkedDisabledCatalogTooltipForSelf()}function u(e){if(!o("WAWebConnModel").Conn.isSMB||o("WAWebChatGetters").getIsGroup(e)||o("WAWebChatGetters").getIsNewsletter(e)||o("WAWebLinkedCatalogHelper").shouldHideComponentForSMBLinkedCatalog())return!1;if(o("WAWebBizGatingUtils").orderDetailsCustomItemEnabled())return!0;var t=o("WAWebBusinessProfileCollection").BusinessProfileCollection.get(o("WAWebUserPrefsMeUser").getMePnUserOrThrow());return o("WAWebBizGatingUtils").orderDetailsFromCatalogEnabled()&&o("WAWebBusinessProfileUtils").hasCatalog(t)}function c(){if(!o("WAWebConnModel").Conn.isSMB)return!1;var e=o("WAWebBusinessProfileCollection").BusinessProfileCollection.get(o("WAWebUserPrefsMeUser").getMePnUserOrThrow());return!o("WAWebBusinessProfileUtils").hasShop(e)}function d(e){var t=o("WAWebLidMigrationUtils").toPn(e.contact.id),n=o("WAWebL10NCountryCodes").getCountryShortcodeByPhone(t==null?void 0:t.user);return!(!o("WAWebConnModel").Conn.isSMB||o("WAWebChatGetters").getIsGroup(e)||o("WAWebContactGetters").getIsMe(e.contact)||n!=="BR"||e.contact.isEnterprise)}l.shouldShowCatalogOption=e,l.shouldShowDisabledCatalogOption=s,l.canSendOrder=u,l.canSendPix=d}),98);
__d("WAWebPixFeature",["WAWebMobilePlatforms","WAWebPrimaryFeaturesModel"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebPrimaryFeaturesModel").PrimaryFeatures.customPaymentMethodsSyncSupport}l.isPixEnabled=e}),98);
__d("WAWebPixAttachmentTrayFeature",["WAWebABProps","WAWebAddEditPixFeature","WAWebConnModel","WAWebContactGetters","WAWebGetMessageChatTypeFromWid","WAWebPaymentsChat","WAWebPaymentsConstants","WAWebPixFeature","WAWebPixQuickReplyFeature","WAWebWamEnumMessageChatType"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebABProps").getABPropConfigValue("payments_br_pix_web_attachment_tray")}function s(t){if(!o("WAWebConnModel").Conn.isSMB||o("WAWebContactGetters").getIsMe(t.contact)||t.contact.isEnterprise||!o("WAWebPixFeature").isPixEnabled()||!o("WAWebAddEditPixFeature").isAddEditPixEnabled()||!e())return!1;var n=o("WAWebGetMessageChatTypeFromWid").getMessageChatTypeFromWid(t.id);return n===o("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE.INDIVIDUAL?o("WAWebPaymentsChat").doesUserHaveCountryPhoneNumber(t.id,o("WAWebPaymentsConstants").BRAZIL_COUNTRY_CODE):n===o("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE.GROUP?o("WAWebPixQuickReplyFeature").showPixQuickReplyInAttachmentTrayForGroups(t):!1}l.shouldShowPixInAttachmentTray=s}),98);
__d("WAWebAttachMenuPopup.react",["WAWebAttachMenuPopupItemAudio.react","WAWebAttachMenuPopupItemCamera.react","WAWebAttachMenuPopupItemCatalog.react","WAWebAttachMenuPopupItemContacts.react","WAWebAttachMenuPopupItemDocuments.react","WAWebAttachMenuPopupItemEvents","WAWebAttachMenuPopupItemOrders.react","WAWebAttachMenuPopupItemPhotos.react","WAWebAttachMenuPopupItemPolls.react","WAWebAttachMenuPopupItemQuestion.react","WAWebAttachMenuPopupItemQuickReplies.react","WAWebAttachMenuPopupItemStickers.react","WAWebAttachMenuPopupPix.react","WAWebAttachMenuUtils","WAWebAttachmentMenuLogger","WAWebBizGatingUtils","WAWebChatGetters","WAWebCmd","WAWebContactGetters","WAWebMediaGatingUtils","WAWebModalManager","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebPixAttachmentTrayFeature","WAWebQuestions.flow","WAWebQuestionsGatingUtils","WAWebUISpacing","WAWebWamEnumMediaPickerOriginType","react","stylex","useWAWebChatValues","useWAWebUIM"],(function(t,n,r,o,a,i,l){var e,s,u=e||(e=r("react"));function c(e){var t=e.chat,n=e.getComposeBoxEditorRef,a=e.getComposeContents,i=e.onMenuComplete,l=e.questionReplyQuotedMessage,s=e.questionType,c=o("useWAWebChatValues").useChatValues(t.id,[o("WAWebChatGetters").getIsNewsletter]),d=c[0],p=r("useWAWebUIM")(),_=function(){p==null||p.requestDismiss()},f=function(n){var e=n.attachments,r=n.sendAsSticker,u=r===void 0?!1:r,c=n.onSend,d=n.onCancel;o("WAWebCmd").Cmd.attachMediaDrawer({chat:t,attachments:e,fileOrigin:o("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,initCaption:a==null?void 0:a(),onComplete:function(t,n){i(t,n)},onSend:c,onCancel:d,sendAsSticker:u,isQuestion:s===o("WAWebQuestions.flow").QuestionType.Question,questionReplyQuotedMessage:l})},g=o("WAWebAttachMenuUtils").shouldShowDisabledCatalogOption(),h=o("WAWebAttachMenuUtils").shouldShowCatalogOption(t),y=o("WAWebBizGatingUtils").canSendQuickReplyInChat(t),C=o("WAWebAttachMenuUtils").canSendOrder(t)&&!o("WAWebContactGetters").getIsMe(t.contact),b=h||y||C,v=o("WAWebMediaGatingUtils").getSupportedMediaTypesForChat(t),S=[];if(s==null){v.has(o("WAWebMsgType").MSG_TYPE.DOCUMENT)&&S.push(u.jsx(o("WAWebAttachMenuPopupItemDocuments.react").AttachMenuPopupItemDocuments,{chat:t,dismissMenu:_,onDocumentPick:function(n){f({attachments:n,onSend:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.DOCUMENT)},onCancel:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.DOCUMENT)}})}})),S.push(u.jsx(o("WAWebAttachMenuPopupItemPhotos.react").AttachMenuPopupItemPhotos,{chat:t,dismissMenu:_,multiple:o("WAWebMediaGatingUtils").supportsMultipleUploads(t.id),onMediaPick:function(n){f({attachments:n,onSend:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.PHOTO_AND_VIDEO_LIBRARY)},onCancel:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.PHOTO_AND_VIDEO_LIBRARY)}})},mediaSelectionType:o("WAWebAttachMenuPopupItemPhotos.react").MediaSelectionType.PHOTOS_AND_VIDEOS})),S.push(u.jsx(o("WAWebAttachMenuPopupItemCamera.react").AttachMenuPopupItemCamera,{chat:t,onCaptureClick:function(){o("WAWebCmd").Cmd.openCaptureMedia({onMenuComplete:i})}})),o("WAWebQuestionsGatingUtils").isQuestionSenderEnabled(t)&&S.push(u.jsx(o("WAWebAttachMenuPopupItemQuestion.react").AttachMenuPopupItemQuestions,{chat:t,getComposeBoxEditorRef:n})),(d&&o("WAWebNewsletterGatingUtils").isNewsletterAudioFileSendingEnabled()||!d)&&S.push(u.jsx(o("WAWebAttachMenuPopupItemAudio.react").AttachMenuPopupItemAudio,{chat:t,dismissMenu:_,multiple:o("WAWebMediaGatingUtils").supportsMultipleUploads(t.id),onMediaPick:function(n){f({attachments:n,onSend:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.AUDIO)},onCancel:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.AUDIO)}})}})),d||S.push(u.jsx(o("WAWebAttachMenuPopupItemContacts.react").AttachMenuPopupItemContacts,{chat:t,onMenuComplete:i})),t.canSendPolls()&&S.push(u.jsx(o("WAWebAttachMenuPopupItemPolls.react").AttachMenuPopupItemPolls,{chat:t,getComposeBoxEditorRef:n}));var R=v.has(o("WAWebMsgType").MSG_TYPE.STICKER)?u.jsx(o("WAWebAttachMenuPopupItemStickers.react").AttachMenuPopupItemStickers,{chat:t,dismissMenu:_,onMediaPick:function(n){f({attachments:n,sendAsSticker:!0,onSend:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.STICKER_MAKER)},onCancel:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.STICKER_MAKER)}})}}):null,L=o("WAWebChatGetters").getIsGroup(t)||o("WAWebChatGetters").getIsUser(t)?u.jsx(r("WAWebAttachMenuPopupItemEvents"),{chat:t}):null;S.push([L,R])}else{var E=o("WAWebQuestionsGatingUtils").getEnabledAttachmentTypesForQuestionType(s,t),k;E.has(o("WAWebMsgType").MSG_TYPE.IMAGE)?E.has(o("WAWebMsgType").MSG_TYPE.VIDEO)?k=o("WAWebAttachMenuPopupItemPhotos.react").MediaSelectionType.PHOTOS_AND_VIDEOS:k=o("WAWebAttachMenuPopupItemPhotos.react").MediaSelectionType.PHOTOS:E.has(o("WAWebMsgType").MSG_TYPE.VIDEO)&&(k=o("WAWebAttachMenuPopupItemPhotos.react").MediaSelectionType.VIDEOS),k!=null&&S.push(u.jsx(o("WAWebAttachMenuPopupItemPhotos.react").AttachMenuPopupItemPhotos,{chat:t,dismissMenu:_,multiple:!1,onMediaPick:function(n){o("WAWebModalManager").ModalManager.close(),f({attachments:n,onSend:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.PHOTO_AND_VIDEO_LIBRARY)},onCancel:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(t,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.PHOTO_AND_VIDEO_LIBRARY)}})},mediaSelectionType:k})),E.has(o("WAWebMsgType").MSG_TYPE.IMAGE)&&S.push(u.jsx(o("WAWebAttachMenuPopupItemCamera.react").AttachMenuPopupItemCamera,{chat:t,onCaptureClick:function(){o("WAWebCmd").Cmd.openCaptureMedia({onMenuComplete:i,questionType:s,questionReplyQuotedMessage:l})}}))}return u.jsxs("div",{children:[S,b&&u.jsx(m,{}),o("WAWebPixAttachmentTrayFeature").shouldShowPixInAttachmentTray(t)&&u.jsx(o("WAWebAttachMenuPopupPix.react").AttachMenuPopupItemPix,{chat:t}),h&&u.jsx(o("WAWebAttachMenuPopupItemCatalog.react").AttachMenuPopupItemCatalog,{chat:t,disabled:g}),y&&u.jsx(o("WAWebAttachMenuPopupItemQuickReplies.react").AttachMenuPopupItemQuickReplies,{chat:t}),C&&u.jsx(o("WAWebAttachMenuPopupItemOrders.react").AttachMenuPopupItemOrders,{chat:t})]})}c.displayName=c.name+" [from "+i.id+"]";var d={divider:{height:"xjm9jq1",backgroundColor:"xfw0ycb",$$css:!0}};function m(){return u.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(d.divider,o("WAWebUISpacing").uiMargin.top3,o("WAWebUISpacing").uiMargin.bottom4)))}m.displayName=m.name+" [from "+i.id+"]",l.AttachMenuPopup=c}),98);
__d("WAWebAttachMenuBarItem.react",["fbt","WAWebAttachMenuPopup.react","WAWebAttachmentMenuLogger","WAWebCmd","WAWebDrawerManager","WAWebDropdown.react","WAWebPlusRoundedIcon.react","WAWebStateUtils","WAWebSvgButton.react","WAWebTabOrder","WAWebUISpacing","WAWebUim","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebUseBusinessProfile.react","WAWebVelocityTransitionGroup","WDSMenuBarItem.react","react","useWAWebABPropConfigValue","useWAWebListener"],(function(t,n,r,o,a,i,l,s){var e=["ref"],u,c,d=c||(c=o("react")),m=u||(u=r("react")),p=d.useImperativeHandle,_=d.useRef,f=d.useState,g={button:{display:"x78zum5",width:"xh8yej3",height:"x5yr21d",alignItems:"x6s0dn4",justifyContent:"xl56j7k",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",transition:"xlkovuz",color:"x14ug900",":active_transition":"x16j0l1c",$$css:!0},hoverBg:{":hover_backgroundColor":"x1ubxc9n",$$css:!0},activeButton:{backgroundColor:"x4wrhlh",$$css:!0},icon:{transitionProperty:"x11xpdln",transitionDuration:"x1d8287x",transitionTimingFunction:"x1h4ghdb",$$css:!0},rotateIcon:{transform:"x11t6m9b",$$css:!0}};function h(t){var n=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=a.chat,l=a.iconWidth,u=l===void 0?30:l,c=a.questionType,d=a.questionReplyQuotedMessage,h=_(null),y=f(null),C=y[0],b=y[1];o("WAWebUseBusinessProfile.react").useBusinessProfile(i.id,["isBizBot3p"]);var v=o("useWAWebABPropConfigValue").useABPropConfigValue("wds_web_button"),S=function(t){o("WAWebDrawerManager").DrawerManager.existsDrawerMid().then(function(e){e&&t.preventDefault()})},R=function(t){t&&S(t),h.current&&b({menu:m.jsx(o("WAWebAttachMenuPopup.react").AttachMenuPopup,{chat:o("WAWebStateUtils").unproxy(i),getComposeContents:a.getComposeContents,getComposeBoxEditorRef:a.getComposeBoxEditorRef,onMenuComplete:a.onMenuComplete,questionType:c,questionReplyQuotedMessage:d}),dirY:o("WAWebDropdown.react").DirY.TOP,dirX:o("WAWebDropdown.react").DirX.CENTER,type:o("WAWebDropdown.react").MenuType.AttachMenuPopup,flipOnRTL:!0,testid:"attach-menu-popup",anchor:h.current,offsetY:-25}),o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentMenuOpen(i)};p(n,function(){return{open:function(){R()}}});var L=function(t){t===o("WAWebUim").DismissReason.UIM_INTERACTION&&o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentMenuClose(i),b(null)};o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"close_context_menu",L);var E=o("WAWebPlusRoundedIcon.react").PlusRoundedIcon,k=!!C,I=[g.button,o("WAWebUISpacing").uiPadding.all8,k&&g.activeButton,g.hoverBg],T=[g.icon,k&&g.rotateIcon];return v?m.jsx(r("WDSMenuBarItem.react"),{ref:h,onClick:function(){o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentMenuOpen(i)},icon:E,tabOrder:o("WAWebTabOrder").TAB_ORDER.COMPOSE_BOX_ATTACH_BUTTON,title:s._(/*BTDS*/"Attach"),testid:void 0,dropdownMenu:{menu:m.jsx(o("WAWebAttachMenuPopup.react").AttachMenuPopup,{chat:o("WAWebStateUtils").unproxy(i),getComposeContents:a.getComposeContents,getComposeBoxEditorRef:a.getComposeBoxEditorRef,onMenuComplete:a.onMenuComplete,questionType:c,questionReplyQuotedMessage:d}),dirY:o("WAWebDropdown.react").DirY.TOP,dirX:o("WAWebDropdown.react").DirX.CENTER,type:o("WAWebDropdown.react").MenuType.AttachMenuPopup,flipOnRTL:!0,testid:"attach-menu-popup",offsetY:-25,offsetX:10}}):m.jsxs(m.Fragment,{children:[m.jsx(r("WAWebSvgButton.react"),{containerRef:h,onClick:R,Icon:E,iconXstyle:T,width:u,dataTab:o("WAWebTabOrder").TAB_ORDER.COMPOSE_BOX_ATTACH_BUTTON,xstyle:I,title:s._(/*BTDS*/"Attach"),testid:void 0,"aria-haspopup":"menu","aria-expanded":k}),m.jsx(r("WAWebVelocityTransitionGroup"),{transitionName:"dropdown",children:C?m.jsx(o("WAWebUimUie.react").UIE,{displayName:"AttachMenuPopup",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:L,children:m.jsx(r("WAWebUimUieMenu.react"),{contextMenu:C})}):null})]})}h.displayName=h.name+" [from "+i.id+"]",l.default=h}),226);
__d("WAWebBIzLabelReorderAction",["WALogger","WAWebBizGatingUtils","WAWebLabelCollection"],(function(t,n,r,o,a,i,l){var e,s,u=function(n){if(!o("WAWebBizGatingUtils").isLabelReorderingSyncFromPrimaryEnabled()){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Label] reorderLabelsAction: label reordering is not enabled"])));return}var t=!1;n.forEach(function(e,n){var r=o("WAWebLabelCollection").LabelCollection.get(String(e));r&&r.orderIndex!==n&&(r.orderIndex=n,t=!0)}),t&&(o("WAWebLabelCollection").LabelCollection.trigger("reorder"),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[Label] reorderLabelsAction: updated LabelCollection with new label positions"]))).devConsole(n))};l.reorderLabelsAction=u}),98);
__d("WAWebBizAiBridgeApi",["WALogger","WAWebChatCollection","WAWebLidMigrationUtils","WAWebWidFactory"],(function(t,n,r,o,a,i,l){var e,s,u={updateChatCapiThreadControl:function(n){var t=n.consumerPhoneNumber,r=n.consumerLid,a=n.status;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Biz AI] WAWebBizAiBridgeApi: updateChatCapiThreadControl, status: ",""])),a);var i=null,l=r!=null?o("WAWebWidFactory").createUserWidOrThrow(r,"lid"):null,u=t!=null?o("WAWebWidFactory").createUserWidOrThrow(t):null;if(l!=null&&(i=o("WAWebChatCollection").ChatCollection.get(l)),i==null&&u!=null&&(i=o("WAWebChatCollection").ChatCollection.get(u)),i==null&&u==null){var c=l!=null?o("WAWebLidMigrationUtils").toPn(l):null;i=c!=null?o("WAWebChatCollection").ChatCollection.get(c):null}else if(i==null&&l==null){var d=u!=null?o("WAWebLidMigrationUtils").toLid(u):null;i=d!=null?o("WAWebChatCollection").ChatCollection.get(d):null}i!=null?i.setCapiThreadControl(a):o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[Biz AI] WAWebBizAiBridgeApi: updateChatCapiThreadControl: chat not found"]))).sendLogs("maiba-thread-control-chat-not-found")}};l.BizAiBridgeApi=u}),98);
__d("WAWebBizCreateBizStateChangeNotificationMsgsAction",["Promise","WALogger","WAWebChatCollection","WAWebContactSystemMsg","WAWebHandleSingleMsg","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebPrivacyModeSystemMsg","WAWebUserPrefsNotifications"],(function(t,n,r,o,a,i,l){var e,s,u;function c(t,r,a,i){i===void 0&&(i=!0);var l=p(r),c=p(a),_=o("WAWebLidMigrationUtils").toLid(t),f;if(i&&o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()&&_!=null){if(f=o("WAWebChatCollection").ChatCollection.getChatByAccountLid(_),f==null)return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[createBizStateChangeNotificationMsgs] Migrated client cannot find chat using lid"]))),(u||(u=n("Promise"))).resolve()}else if(f=o("WAWebChatCollection").ChatCollection.get(t),f==null)return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[createBizStateChangeNotificationMsgs] Cannot find chat"]))),(u||(u=n("Promise"))).resolve();var g=f.id,h=[m(g,l,c),d(g,l,c)].filter(Boolean);return h.map(function(e){if(e!=null)return o("WAWebHandleSingleMsg").handleSingleMsg({chatId:g,newMsg:e,handleSingleMsgOrigin:"bizStateChangeNotification"})}),(u||(u=n("Promise"))).resolve()}function d(e,t,n){if(o("WAWebUserPrefsNotifications").getGlobalSecurityNotifications()===!0&&t===o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE&&n!==o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE)return o("WAWebContactSystemMsg").genEncryptNotificationMsg(e,"e2e_identity_unavailable")}function m(e,t,n){if(t!==n)switch(n){case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE:return o("WAWebContactSystemMsg").genEncryptNotificationMsg(e,"encrypt_now");case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.BSP:return o("WAWebContactSystemMsg").genNonE2ENotificationMsg(e,"biz_privacy_mode_to_bsp");case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.FB:return o("WAWebContactSystemMsg").genNonE2ENotificationMsg(e,"biz_privacy_mode_to_fb");case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.HOSTED_GROUP:return o("WAWebContactSystemMsg").genNonE2ENotificationMsg(e,"is_capi_hosted_group")}}function p(e){return o("WAWebPrivacyModeSystemMsg").getReducedPrivacyMode(e.isBusiness?e.privacyMode:null)}l.createBizStateChangeNotificationMsgs=c}),98);
__d("WAWebQueryCtwaContextJob",["WABase64","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","WAWebCtwaAGMUtils","WAWebProtobufsE2E.pb","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e;function s(t){var n=t&&t.maybeAttrString("code"),r=t&&t.maybeAttrString("text");o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getCtwaContext error: code "," text ",""])),n,r)}var u=new(r("WADeprecatedWapParser"))("ctwaContext",function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("context");if(e.hasChild("error"))throw s(e.child("error")),r("err")("invalid response");var n={sourceUrl:t.child("source").child("url").contentString(),sourceId:t.child("source").child("id").contentString(),sourceType:t.child("source").child("type").contentString()};t.hasChild("headline")&&(n.title=t.child("headline").contentString()),t.hasChild("body")&&(n.description=t.child("body").contentString()),t.hasChild("thumbnail")&&(t.child("thumbnail").hasChild("url")&&(n.thumbnailUrl=t.child("thumbnail").child("url").contentString()),t.child("thumbnail").hasChild("bytes")&&(n.thumbnail=o("WABase64").encodeB64(t.child("thumbnail").child("bytes").contentBytes())),t.hasChild("video")?(n.mediaUrl=t.child("video").child("url").contentString(),n.mediaType=o("WAWebProtobufsE2E.pb").ContextInfo$ExternalAdReplyInfo$MediaType.VIDEO):n.mediaType=o("WAWebProtobufsE2E.pb").ContextInfo$ExternalAdReplyInfo$MediaType.IMAGE);var a=t.maybeChild("sourceApp");a!=null&&(n.sourceApp=a.contentString());var i=o("WAWebCtwaAGMUtils").isWamoAGMIntegrationEnabled(n.sourceApp);if(i){t.hasChild("greetingMessageBody")&&(n.greetingMessageBody=t.child("greetingMessageBody").contentString()),t.hasChild("automatedGreetingMessageShown")&&(n.automatedGreetingMessageShown=t.child("automatedGreetingMessageShown").contentString()==="true");var l=t.maybeChild("ctaPayload");l!=null&&(n.ctaPayload=l.contentString());var u=t.maybeChild("originalImageUrl");u!=null&&(n.originalImageUrl=u.contentString())}return n});function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a,i=o("WAWebWidFactory").createWid(e).toString({legacy:!0}),l=(a=o("WAWap")).wap("iq",{xmlns:"fb:thrift_iq",id:a.generateId(),type:"get",to:a.S_WHATSAPP_NET,smax_id:a.SMAX_ID(r("WAWapDeprecatedSmaxID").CtwaGetContext)},a.wap("account_number",null,i),a.wap("code",null,t),a.wap("expected_source_url",null,n)),s=yield o("WADeprecatedSendIq").deprecatedSendIq(l,u);if(s.success)return s.result;throw new(o("WAWebBackendErrors")).ServerStatusCodeError(s.errorCode)}),d.apply(this,arguments)}l.default=c}),98);
__d("WAWebBizQueryCtwaContextBridge",["Promise","WAWebQueryCtwaContextJob","err"],(function(t,n,r,o,a,i,l){var e;function s(t){var o=t.phone,a=t.sourceUrl,i=t.context;if(o==null||o===""||a==null||a===""||i==null||i==="")return(e||(e=n("Promise"))).reject(r("err")("Invalid params passed to fetchCtwaContextData"));var l=r("WAWebQueryCtwaContextJob")(o,i,a);return l}l.fetchCtwaContextData=s}),98);
__d("WAWebBizQuickRepliesDrawerLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadingDrawer.react","asyncToGeneratorRuntime","react","react-loadable"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebBizQuickRepliesDrawer.react").__setRef("WAWebBizQuickRepliesDrawerLoadable").load();return e}),"WAWebBizQuickRepliesDrawer"),c=r("react-loadable")({loader:u,loading:function(t){return s.jsx(r("WAWebLoadingDrawer.react"),{error:!!t.error})}});l.WAWebBizQuickRepliesDrawerLoadable=c}),98);
__d("WAWebBizSmbTosModal.react",["fbt","WALogger","WAWebConfirmPopup.react","WAWebConnModel","WAWebModalManager","WAWebSmbLearnMore.react","WAWebSocketModel","react","useWAWebListener","vulture"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=r("react"));function d(){r("vulture")("xih5WpfVAJMeDiuzgf5dWD0of_I=");var t=s._(/*BTDS*/"We are updating our WhatsApp Business Terms of Service. Agree to our new Terms on your phone to continue using WhatsApp Business."),n=function(){o("WAWebConnModel").Conn.smbTos||o("WAWebModalManager").ModalManager.close()};o("useWAWebListener").useListener(o("WAWebConnModel").Conn,"change:smbTos",n);var a=function(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["SMB: terms of service modal, user clicked logout"]))),o("WAWebModalManager").ModalManager.close(),o("WAWebSocketModel").Socket.logout()},i=s._(/*BTDS*/"Log out"),l=a;return c.jsxs(o("WAWebConfirmPopup.react").ConfirmPopup,{onOK:l,okText:i,children:[t,"\xA0",c.jsx(r("WAWebSmbLearnMore.react"),{})]})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("WAWebBlocklistBridgeApi",["WAWebBlocklistCollection"],(function(t,n,r,o,a,i,l){var e={replaceBlocklist:function(t){var e=t.wids;o("WAWebBlocklistCollection").BlocklistCollection.replaceAllWith(e)}};l.BlocklistBridgeApi=e}),98);
__d("WAWebBotCommandSuggestionResult.scss",["cx"],(function(t,n,r,o,a,i,l,s){var e={result:"_aopp"},u=e;l.default=u}),98);
__d("WAWebBotCommandSuggestionResult.react",["WAWebBotCommandSuggestionResult.scss","WAWebBotCommandSuggestions.react","WAWebClassnames","WAWebDetailImage.react","WAWebEmojiText.react","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react"));function u(e){var t,n=e.command,a=e.query,i=e.selected,l=e.imageWid,u=e.onMouseDown,c=e.onMouseEnter,d=e.onMouseUp,m=n.name,p=n.description,_=m.slice(0,a.length),f=m.slice(a.length);return s.jsxs("div",{className:o("WAWebClassnames").classnamesConvertMeToStylexPlease((t={},t[r("WAWebBotCommandSuggestionResult.scss").result]=!0,t),{0:"x78zum5 x6s0dn4 x1qx5ct2 xyamay9 xl3akx1 x1l90r2v x11ahuha x6ikm8r x10wlt62 x1f6kntn xhslqc4 xlyipyv xuxw1ft xxymvpz",1:"x78zum5 x6s0dn4 x1qx5ct2 xyamay9 xl3akx1 x1l90r2v x11ahuha x6ikm8r x10wlt62 x1f6kntn xhslqc4 xlyipyv xuxw1ft xxymvpz x1ru9bj0"}[!!i<<0]),onMouseDown:u,onMouseUp:d,onMouseEnter:c,children:[l!=null&&s.jsx("div",{className:"x17pgkn5 xav9cv8 x1sa5p1d",children:s.jsx(o("WAWebDetailImage.react").DetailImage,{id:l,size:32})}),s.jsx(o("WAWebEmojiText.react").EmojiText,{className:"xyqdw3p x14ug900",text:o("WAWebBotCommandSuggestions.react").QUERY_TRIGGER}),s.jsx(o("WAWebEmojiText.react").EmojiText,{className:"xyqdw3p x117nqv4 x1v5yvga",text:_}),s.jsx(o("WAWebEmojiText.react").EmojiText,{className:"xyqdw3p x14ug900",text:f}),s.jsx(o("WAWebEmojiText.react").EmojiText,{className:"xyqdw3p x1hm9lzh xhslqc4 x1yc453h",testid:void 0,ellipsify:!0,text:p})]})}u.displayName=u.name+" [from "+i.id+"]",l.BotCommandResult=u}),98);
__d("WAWebBotCommandSuggestions.react",["Lexical","WAWebBotCommandSuggestionResult.react","WAWebBotProfileGetters","WAWebLexicalUtils","WAWebListSuggestionsPanel.react","WAWebUseBotProfileValues","react","useWAWebLexicalTypeAhead","useWAWebModelValues"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useEffect,m=u.useMemo,p=u.useState,_="/",f=52,g=25;function h(e){var t,n=e.editor,r=e.kind,a=e.metaBotId,i=o("useWAWebModelValues").useOptionalModelValues(e.businessProfile,["id","commands"]),l=o("WAWebUseBotProfileValues").useOptionalBotProfileValues(a,[o("WAWebBotProfileGetters").getCommands]),s=l[0],u=(t=i==null?void 0:i.commands)!=null?t:s,h=a!=null?a:i==null?void 0:i.id,C=o("useWAWebLexicalTypeAhead").useTypeAhead(n,_,{boundary:!0,maxQueryLength:g}),b=C.query,v=C.replaceQuery,S=C.omitQuery,R=p(function(){return y(n)}),L=R[0],E=R[1];d(function(){return n.registerUpdateListener(function(){E(y(n))})},[n]);var k=function(t,n){return c.jsx(o("WAWebBotCommandSuggestionResult.react").BotCommandResult,{command:t.command,query:t.query,selected:n,imageWid:h},t.itemKey)},I=function(t){var e=t.command;v(""+_+e.name+" ")},T=function(){S()},D=m(function(){return b==null||!u||L?null:u.filter(function(e){return e.name.toLowerCase().startsWith(b.toLowerCase())}).map(function(e,t){return{height:f,itemKey:e.name,contentKey:b,index:t,command:e,query:b,selectable:!0}})},[b,u,L]);return c.jsx(o("WAWebListSuggestionsPanel.react").ListSuggestionsPanel,{kind:r,editor:n,items:D,renderItem:k,onSelect:I,onDismiss:T})}h.displayName=h.name+" [from "+i.id+"]";function y(e){return e.getEditorState().read(function(){for(var e of o("WAWebLexicalUtils").textNodesIterator(o("Lexical").$getRoot())){var t;if((t=e.getStyle())!=null&&t.includes("bot-command-text"))return!0}return!1})}l.QUERY_TRIGGER=_,l.BotCommandSuggestions=h}),98);
__d("WAWebBotSuggestions.react",["WAWebBotProfileGetters","WAWebUISpacing","WAWebUseBotProfileValues","WAWebUseBusinessProfile.react","react","stylex"],(function(t,n,r,o,a,i,l){var e,s,u=e||(e=r("react")),c={container:{display:"x78zum5",position:"x10l6tqk",bottom:"xmgkm54",maxHeight:"x1nu74zi",overflowX:"x14aock7",whiteSpace:"xuxw1ft",width:"x19sv2k2",$$css:!0},pill:{fontSize:"x1f6kntn",lineHeight:"xdod15v",borderStartStartRadius:"x12l2aii",borderStartEndRadius:"x1mbk4o",borderEndEndRadius:"x14vvt0a",borderEndStartRadius:"x1w3ol1v",fontWeight:"xk50ysn",backgroundColor:"x1w7vc3g",cursor:"x1ypdohk",$$css:!0},emoji:{display:"x1rg5ohu",$$css:!0}};function d(e){var t=e.id,n=e.onPromptSelect,a=o("WAWebUseBusinessProfile.react").useBusinessProfile(t,["prompts"]),i=o("WAWebUseBotProfileValues").useOptionalBotProfileValues(t,[o("WAWebBotProfileGetters").getPrompts]),l=i[0],d=l!=null?l:a==null?void 0:a.prompts;return d==null||d.length===0?null:u.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(c.container,o("WAWebUISpacing").uiPadding.vert8,o("WAWebUISpacing").uiPadding.horiz20),{children:d.map(function(e){return u.jsx(m,{prompt:e,onClick:function(){n(e.text)}},e.text)})}))}d.displayName=d.name+" [from "+i.id+"]";function m(e){var t=e.onClick,n=e.prompt;return u.jsxs("div",babelHelpers.extends({onClick:t},(s||(s=r("stylex"))).props(c.pill,o("WAWebUISpacing").uiPadding.vert8,o("WAWebUISpacing").uiPadding.start12,o("WAWebUISpacing").uiPadding.end16,o("WAWebUISpacing").uiMargin.horiz4),{children:[u.jsx("span",babelHelpers.extends({},s.props(c.emoji,o("WAWebUISpacing").uiMargin.end4),{children:n.emoji})),u.jsx("span",{children:n.text})]}))}m.displayName=m.name+" [from "+i.id+"]",l.default=d}),98);
__d("WAWebLabelChatHeaderButton.react",["fbt","WAWebHeader.react","WAWebIcLabelFilledIcon.react","WAWebLabelCollection","WAWebLabelGetters","WAWebLabelOutlineIcon.react","WAWebLabelStackIcon.react","WAWebLabels.react","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebUnstyledButton.react","WDSIconIcArrowDropDown.react","WDSText.react","react","useWAWebListener"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.useMemo,p=c.useRef,_=c.useState,f={button:{alignItems:"x6s0dn4",backgroundColor:"x1280gxy",borderTopColor:"xnj1f2r",borderInlineEndColor:"x2uibgs",borderBottomColor:"xkveyfu",borderInlineStartColor:"x12llq9",borderStartStartRadius:"x12ol6y4",borderStartEndRadius:"x180vkcf",borderEndEndRadius:"x1khw62d",borderEndStartRadius:"x709u02",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",cursor:"x1ypdohk",display:"x78zum5",columnGap:"x1s70e7g",paddingTop:"x889kno",paddingBottom:"x1a8lsjc",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,":hover_backgroundColor":"x1ubxc9n",$$css:!0},icon:{color:"x14ug900",height:"x1qx5ct2",width:"xw4jnvo",$$css:!0},labelStackIcon:{position:"x10l6tqk",top:"xs7f9wi",$$css:!0}};function g(e){if(e.length===0)return{primaryLabel:null,secondaryLabel:null};var t=e.map(function(e){return parseInt(e,10)}).filter(function(e){return!Number.isNaN(e)}),n;t.length>=2?(t.sort(function(e,t){return t-e}),n=t.map(function(e){return e.toString()})):n=e;var r=n[0],a=o("WAWebLabelCollection").LabelCollection.get(r),i={id:r,model:a,color:a?o("WAWebLabelGetters").getHexColor(a):null},l=null;if(n.length>=2){var s=n[1],u=o("WAWebLabelCollection").LabelCollection.get(s);l={id:s,model:u,color:u?o("WAWebLabelGetters").getHexColor(u):null}}return{primaryLabel:i,secondaryLabel:l}}function h(e){var t=e.chat,n=p(null),a=_(null),i=a[0],l=a[1],u=_(null),c=u[0],h=u[1],y=_(0),C=y[0],b=y[1];o("useWAWebListener").useListener(o("WAWebLabelCollection").LabelCollection,"all",function(){b(function(e){return e+1})});var v=m(function(){if(!t.labels||t.labels.length===0)return null;if(t.labels.length===1){var e=t.labels[0],n=o("WAWebLabelCollection").LabelCollection.get(e);return n?{name:n.name,labelId:e}:null}return{count:t.labels.length}},[t.labels]),S=function(t){var e=g(t),n=e.primaryLabel,r=e.secondaryLabel;return d.jsxs("div",{className:"x1qx5ct2 x1n2onr6 xw4jnvo x7g7pl8 x1qfufaz",children:[d.jsx(o("WAWebIcLabelFilledIcon.react").IcLabelFilledIcon,{width:18,height:18,style:(n==null?void 0:n.color)!=null?{color:n.color}:{},xstyle:f.labelStackIcon}),d.jsx(o("WAWebLabelStackIcon.react").LabelStackIcon,{width:18,height:18,style:(r==null?void 0:r.color)!=null?{color:r.color}:{},xstyle:f.labelStackIcon})]})},R=function(){return(v==null?void 0:v.name)!=null?v.name:(v==null?void 0:v.count)!=null?s._(/*BTDS*/"{labelCount} selected",[s._param("labelCount",v.count)]):s._(/*BTDS*/"Label chat")},L=function(){return(v==null?void 0:v.labelId)!=null?d.jsx(o("WAWebLabels.react").Labels,{labels:[v.labelId],showName:!1}):(v==null?void 0:v.count)!=null&&t.labels!=null?S(t.labels):d.jsx(o("WAWebLabelOutlineIcon.react").LabelOutlineIcon,{iconXstyle:f.icon})},E=function(){h(null)},k=function(r){if(r.preventDefault(),r.stopPropagation(),t)if(c!=null)E();else{var e=babelHelpers.extends({},o("WAWebHeader.react").createLabelsDropdownMenu(t),{anchor:i,anchorRef:n});h(e)}},I;return c!=null&&(I=d.jsx(o("WAWebUimUie.react").UIE,{displayName:"LabelChatDropdownMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:E,children:d.jsx(r("WAWebUimUieMenu.react"),{contextMenu:c})})),d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:l,children:d.jsxs(r("WAWebUnstyledButton.react"),{ref:n,xstyle:f.button,onClick:k,"aria-label":s._(/*BTDS*/"Label chat"),children:[L(),d.jsx(r("WDSText.react"),{type:"Body2Emphasized",textAlign:"center",colorName:"contentDefault",children:R()}),d.jsx(r("WDSIconIcArrowDropDown.react"),{iconXstyle:f.icon})]})}),I]})}h.displayName=h.name+" [from "+i.id+"]",l.getLabelStackInfo=g,l.LabelChatHeaderButton=h}),226);
__d("WAWebConversationMenus",["fbt","WAWebBizGatingUtils","WAWebBizManageLabelModal.react","WAWebChatAssignmentLogEvents.flow","WAWebChatAssignmentUtils","WAWebChatAssignmentWithContainerIcon.react","WAWebChatContextMenuItemEditList.react","WAWebChatContextMenuItemLock.react","WAWebChatEphemerality","WAWebChatGroupUtils","WAWebCheckRefreshedIcon.react","WAWebClearRefreshedIcon.react","WAWebCloseCircleRefreshedIcon.react","WAWebCmd","WAWebCopyRefreshedIcon.react","WAWebCopyUtils","WAWebDeleteMenuItem.react","WAWebDisappearingMessagesRefreshedIcon.react","WAWebDropdownItem.react","WAWebDropdownItemSeparator.react","WAWebEnvironment","WAWebFavoriteRefreshedIcon.react","WAWebGroupType","WAWebHeader.react","WAWebInboxFiltersGatingUtils","WAWebInfoRefreshedIcon.react","WAWebL10NHelpers","WAWebLabelOutlineIcon.react","WAWebLeaveCommunityModal.react","WAWebListsGatingUtils","WAWebMobilePlatforms","WAWebModalManager","WAWebMuteMenuItem.react","WAWebSpamConstants","WAWebStateUtils","WAWebSuspendedGroupUtils","WAWebUnfavoriteRefreshedIcon.react","WAWebWamEnumEphemeralSettingEntryPointType","WAWebWamEnumFavoritesUpdateEntryPoint","cr:23149","gkx","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){if(o("WAWebChatGroupUtils").isGroupExitExperienceEnabledForChat(e))o("WAWebSuspendedGroupUtils").openLeaveAndReportGroupModal(e,o("WAWebSpamConstants").SpamFlow.GroupOverflowMenuLeaveReportUpsell);else{var t,n=(t=e.groupMetadata)==null?void 0:t.getParentGroupChat();n!=null&&o("WAWebChatGroupUtils").isCommunityAnnouncementGroup(e)?o("WAWebModalManager").ModalManager.open(u.jsx(r("WAWebLeaveCommunityModal.react"),{chat:n})):o("WAWebCmd").Cmd.deleteOrExitChat(e)}}function d(e,t,a){var i,l,d=[],m=function(){o("WAWebCmd").Cmd.ephemeralDrawer(o("WAWebStateUtils").unproxy(e),!1,o("WAWebWamEnumEphemeralSettingEntryPointType").EPHEMERAL_SETTING_ENTRY_POINT_TYPE.CHAT_OVERFLOW)};if(o("WAWebChatAssignmentUtils").canAssignChats()&&(d.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){o("WAWebCmd").Cmd.assignChat(e,o("WAWebChatAssignmentLogEvents.flow").ChatAssignmentEntryPointType.CONVERSATION_MENU)},icon:u.jsx(o("WAWebChatAssignmentWithContainerIcon.react").ChatAssignmentWithContainerIcon,{}),children:s._(/*BTDS*/"Assign chat")},"assignChat")),d.push(u.jsx(o("WAWebDropdownItemSeparator.react").DropdownItemSeparator,{}))),d.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.chatInfoDrawer(e)},icon:u.jsx(o("WAWebInfoRefreshedIcon.react").InfoRefreshedIcon,{}),children:((i=e.groupMetadata)==null?void 0:i.groupType)===o("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP?s._(/*BTDS*/"Announcements info"):s._(/*BTDS*/"Group info")},"info")),d.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:t,icon:u.jsx(o("WAWebCheckRefreshedIcon.react").CheckRefreshedIcon,{}),children:s._(/*BTDS*/"Select messages")},"select")),o("WAWebMobilePlatforms").isSMB()&&o("WAWebBizGatingUtils").isCTWAChatHeaderLabelEntryPointEnabled()&&r("WAWebEnvironment").isWindows&&!r("WAWebEnvironment").isGuest&&o("WAWebHeader.react").isCommunityRelatedChat(e)&&e.canSend&&d.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){o("WAWebModalManager").ModalManager.open(u.jsx(r("WAWebBizManageLabelModal.react"),{modelsToUpdate:[e],onCancel:function(){return o("WAWebModalManager").ModalManager.close()},onLabelUpdateComplete:function(){return o("WAWebModalManager").ModalManager.close()},entryPoint:null}))},icon:u.jsx(o("WAWebLabelOutlineIcon.react").LabelOutlineIcon,{}),children:s._(/*BTDS*/"Label chat")},"label-chat")),e.mute.canMute()&&d.push(u.jsx(r("WAWebMuteMenuItem.react"),{onMute:function(n){return o("WAWebCmd").Cmd.muteChat(e,n)},mute:e.mute,chat:e},"mute")),o("WAWebChatEphemerality").shouldShowEphemeralSetting(e)&&(l=e.groupMetadata)!=null&&l.canSetEphemeralSetting()&&d.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:m,icon:u.jsx(o("WAWebDisappearingMessagesRefreshedIcon.react").DisappearingMessagesRefreshedIcon,{}),children:s._(/*BTDS*/"Disappearing messages")},"disappearingMessages")),d.push(u.jsx(r("WAWebChatContextMenuItemLock.react"),{chat:e},"Lock")),e.canToggleFavorite()&&o("WAWebInboxFiltersGatingUtils").inboxFavoritesEnabled()){var p,_;e.isFavorite?(_=o("WAWebL10NHelpers").isUsingSupportedBritishEnglishLocale()?s._(/*BTDS*/"Remove from favourites"):s._(/*BTDS*/"Remove from favorites"),p=u.jsx(o("WAWebUnfavoriteRefreshedIcon.react").UnfavoriteRefreshedIcon,{})):(_=o("WAWebL10NHelpers").isUsingSupportedBritishEnglishLocale()?s._(/*BTDS*/"Add to favourites"):s._(/*BTDS*/"Add to favorites"),p=u.jsx(o("WAWebFavoriteRefreshedIcon.react").FavoriteRefreshedIcon,{})),d.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.favoriteChat(e,!e.isFavorite,o("WAWebWamEnumFavoritesUpdateEntryPoint").FAVORITES_UPDATE_ENTRY_POINT.CHAT_HEADER_CONTEXT_MENU)},icon:p,children:_},"favorite"))}o("WAWebListsGatingUtils").isListsEnabled()&&d.push(u.jsx(r("WAWebChatContextMenuItemEditList.react"),{chat:e,displayContext:"chat-header"})),o("WAWebCopyUtils").canCopySelection()&&a!=null&&d.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:function(){o("WAWebCopyUtils").copySelection(a)},icon:u.jsx(o("WAWebCopyRefreshedIcon.react").CopyRefreshedIcon,{}),children:s._(/*BTDS*/"Copy selection")})),d.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.closeChat(e)},icon:u.jsx(o("WAWebCloseCircleRefreshedIcon.react").CloseCircleRefreshedIcon,{}),children:s._(/*BTDS*/"Close chat")},"close")),d.push(u.jsx(o("WAWebDropdownItemSeparator.react").DropdownItemSeparator,{})),d.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.clearChat(e)},icon:u.jsx(o("WAWebClearRefreshedIcon.react").ClearRefreshedIcon,{}),theme:o("WAWebDropdownItem.react").DropdownItemThemeType.Negative,children:s._(/*BTDS*/"Clear chat")},"clear"));var f=function(){c(e)};return d.push(u.jsx(r("WAWebDeleteMenuItem.react"),{onDeleteOrExit:f,chat:e},"delete")),n("cr:23149")==null||n("cr:23149").addDevItemsToMenu(d,e),d}function m(e,t){var n=[];return n.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.chatInfoDrawer(e)},icon:u.jsx(o("WAWebInfoRefreshedIcon.react").InfoRefreshedIcon,{}),children:s._(/*BTDS*/"Broadcast list info")},"info")),n.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:t,icon:u.jsx(o("WAWebCheckRefreshedIcon.react").CheckRefreshedIcon,{}),children:s._(/*BTDS*/"Select messages")},"select")),r("gkx")("26258")||n.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.closeChat(e)},icon:u.jsx(o("WAWebCloseCircleRefreshedIcon.react").CloseCircleRefreshedIcon,{}),children:s._(/*BTDS*/"Close chat")},"close")),n.push(u.jsx(o("WAWebDropdownItemSeparator.react").DropdownItemSeparator,{})),n.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.clearChat(e)},icon:u.jsx(o("WAWebClearRefreshedIcon.react").ClearRefreshedIcon,{}),children:s._(/*BTDS*/"Clear chat")},"clear")),n.push(u.jsx(r("WAWebDeleteMenuItem.react"),{onDeleteOrExit:function(){return o("WAWebCmd").Cmd.deleteOrExitChat(e)},chat:e},"delete")),n}function p(e,t){var r=[];return r.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:t,icon:u.jsx(o("WAWebCheckRefreshedIcon.react").CheckRefreshedIcon,{}),children:s._(/*BTDS*/"Select messages")},"select")),r.push(u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.closeChat(e)},icon:u.jsx(o("WAWebCloseCircleRefreshedIcon.react").CloseCircleRefreshedIcon,{}),children:s._(/*BTDS*/"Close chat")},"close")),n("cr:23149")==null||n("cr:23149").addDevItemsToMenu(r,e),r}l.handleDeleteOrExitChat=c,l.groupMenu=d,l.broadcastMenu=m,l.hybridMenu=p}),226);
__d("WAWebBroadcastMenuDropdown.react",["WAWebConversationMenus","WAWebDropdown.react","react"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u=s||(s=r("react"));function c(t){var n=t.ref,r=babelHelpers.objectWithoutPropertiesLoose(t,e),a=r.chat,i=r.onSelectMessages,l=r.toContextMenuManager,s=l===void 0?!1:l,c=o("WAWebConversationMenus").broadcastMenu(a,i);return s?u.jsx("div",{ref:n,children:c}):u.jsx(o("WAWebDropdown.react").Dropdown,{ref:n,type:o("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:o("WAWebDropdown.react").DirX.LEFT,children:c},"BroadcastMenuDropdown")}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("WAWebGroupMenuDropdown.react",["WATimeUtils","WAWebChatThreadLogging","WAWebConversationMenus","WAWebDropdown.react","react"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u,c=u||(u=r("react")),d=(s||(s=o("react"))).useEffect;function m(t){var n=t.ref,r=babelHelpers.objectWithoutPropertiesLoose(t,e),a=r.chat,i=r.onSelectMessages;d(function(){o("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"chatOverflowClicks",ts:o("WATimeUtils").unixTime(),chatId:a.id}])},[a.id]);var l=o("WAWebConversationMenus").groupMenu(a,i);return r.toContextMenuManager?c.jsx("div",{ref:n,children:l}):c.jsx(o("WAWebDropdown.react").Dropdown,{ref:n,type:o("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:o("WAWebDropdown.react").DirX.LEFT,testid:void 0,children:l},"GroupMenuDropdown")}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WAWebChatAssignmentNux.react",["fbt","WAWebChatAssignmentLogEvents","WAWebNux","WAWebTooltip.react","WAWebUseIsFeatureEnabled","WAWebUserPrefsStore","react","useWAWebNux"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react")),c=u.useCallback,d=u.useEffect,m=u.useMemo,p=u.useState;function _(e){var t=e.chat,n=e.targetRef,a=r("useWAWebNux")(o("WAWebNux").NUX.CHAT_ASSIGNMENT),i=a[0],l=a[1],u=p(!0),_=u[0],f=u[1],g=r("WAWebUseIsFeatureEnabled")("MD_EXTENSION"),h=o("WAWebTooltip.react").useTooltip({alignment:o("WAWebTooltip.react").PopoverAlignment.End,element:s._(/*BTDS*/"Assign chat to a linked device"),onClick:function(){y(),f(!1)},position:o("WAWebTooltip.react").PopoverPosition.Bottom,target:n}),y=h.hideTooltip,C=h.showTooltip,b=h.tooltip,v=m(function(){return r("WAWebUserPrefsStore").getUser("chat_assignment_agent_has_assigned_chats")},[]),S=c(function(){y(),f(!1)},[y]),R=i&&_&&g&&t.assignedAgent==null&&v==null;return d(function(){R&&b==null&&n.current!=null&&(C(),l(),o("WAWebChatAssignmentLogEvents").logNuxShown(t))},[R,b,n,C,S,l,t]),b}l.default=_}),226);
__d("WAWebChatSearchMessageCell.react",["WATypeUtils","WAWebChatCell.react","WAWebChatLastMsg.react","WAWebChatMessageSearch","WAWebChatTimestamp.react","WAWebDomScroll","WAWebFocusIndicator","WAWebFocusTracer","WAWebFrontendMsgGetters","WAWebKeyboardHotKeys.react","WAWebMsgGetters","WAWebMsgType","WAWebStateUtils","react","useWAWebListener","useWAWebMsgValues"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useRef,m=u.useState;function p(e){var t,n,a=e.msg,i=e.author,l=e.onClick,s=o("useWAWebMsgValues").useMsgValues(e.msg.id,[(t=o("WAWebMsgGetters")).getId,t.getIsSentByMe,(n=o("WAWebFrontendMsgGetters")).getSenderObj,n.getRtl,n.getDir,t.getType,t.getT]),u=s[0],p=s[1],_=s[2],f=s[3],g=s[4],h=s[5],y=s[6],C=n.getChat(a),b=d(null),v=d(null),S=m(function(){return e.active?e.active.value===a:!1}),R=S[0],L=S[1],E=function(t,n){if(t==="focus"){var e=v.current;r("WAWebFocusTracer").focus(e),n&&e&&o("WAWebDomScroll").scrollIntoViewIfNeeded(e)}L(!!t)};o("useWAWebListener").useListener(e.active,u.toString(),E);var k=function(t){if(o("WATypeUtils").isFunction(l)){var e,n=o("WAWebChatMessageSearch").getSearchContext(C,o("WAWebStateUtils").unproxy(a).id);((e=n.msg)==null?void 0:e.type)!==o("WAWebMsgType").MSG_TYPE.ALBUM&&(n.msg=a),l(t,C,n,a)}},I=function(t){t.preventDefault(),t.stopPropagation(),r("WAWebFocusIndicator").shouldIndicateFocus(),k(t)},T=function(t){var e;(e=b.current)==null||e.indicateFocus()},D=function(){return!1},x=c.jsx(r("WAWebChatTimestamp.react"),{msg:a}),$=c.jsx(r("WAWebChatLastMsg.react"),{msg:a.safe(),msgType:"Search",author:i,searchQuery:e.searchText!=null?[e.searchText]:[]}),P={enter:I};return c.jsx(o("WAWebKeyboardHotKeys.react").HotKeys,{handlers:P,onFocus:T,ref:v,children:c.jsx(r("WAWebChatCell.react"),{ref:b,contextEnabled:D,theme:"chat-search",active:!!R,primaryDetail:x,secondary:$,primary:void 0,onClick:k})})}p.displayName=p.name+" [from "+i.id+"]",l.Message=p}),98);
__d("WAWebChatSearchMessageWithAuthorCell.react",["WAWebChatSearchMessageCell.react","WAWebFrontendContactGetters","WAWebFrontendMsgGetters","WAWebMsgGetters","react","useWAWebContactValues","useWAWebMsgValues"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react"));function u(e){var t=o("useWAWebMsgValues").useMsgValues(e.msg.id,[o("WAWebMsgGetters").getId]),n=t[0],r=o("WAWebFrontendMsgGetters").getChat(e.msg),a=o("useWAWebContactValues").useContactValues(e.contact.id,[o("WAWebFrontendContactGetters").getFormattedShortName]),i=a[0];return s.jsx(o("WAWebChatSearchMessageCell.react").Message,{msg:e.msg,chat:r,author:i,searchText:e.searchText,onClick:e.onClick,active:e.active},n.toString())}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("WAWebChatSearchMessageList.react",["WAWebChatSearchMessageCell.react","WAWebChatSearchMessageWithAuthorCell.react","WAWebCmd","WAWebColumnChangeDispatch","WAWebComposeBoxActions","WAWebFindChatAction","WAWebFlatList.react","WAWebFrontendMsgGetters","WAWebKeyboardHotKeys.react","WAWebMsgGetters","WAWebTabOrder","react","useWAWebUIM"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u,c=u||(u=o("react")),d=s||(s=r("react")),m=c.useEffect,p=c.useImperativeHandle,_=c.useRef,f=o("WAWebFlatList.react").FlatListFactory();function g(e){var t=e.msg,n=e.onClick,a=e.searchText,i=e.selection;return o("WAWebMsgGetters").getSender(t)&&o("WAWebMsgGetters").getIsGroupMsg(t)&&!o("WAWebMsgGetters").getIsNotification(t)&&!o("WAWebMsgGetters").getIsSentByMe(t)?d.jsx(r("WAWebChatSearchMessageWithAuthorCell.react"),{contact:t.senderObj,msg:t,chat:o("WAWebFrontendMsgGetters").getChat(t),searchText:a,onClick:n,active:i},t.id.toString()):d.jsx(o("WAWebChatSearchMessageCell.react").Message,{msg:t,chat:o("WAWebFrontendMsgGetters").getChat(t),searchText:a,onClick:n,active:i},t.id.toString())}g.displayName=g.name+" [from "+i.id+"]";function h(t){var n=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=a.selection,l=a.ftsResult,s=a.searchText,u=a.onFocusSearch,c=r("useWAWebUIM")(),h=_(null),y=function(t,n,r,a){t.preventDefault(),t.stopPropagation(),o("WAWebFindChatAction").findExistingChat(n.id,"chatSearchMessageList").then(function(e){o("WAWebColumnChangeDispatch").Column.column===2&&(c==null||c.requestDismiss()),o("WAWebComposeBoxActions").ComposeBoxActions.focus(e),o("WAWebCmd").Cmd.openChatAt({chat:e,msgContext:r,onSuccess:{mediaMsgToOpenInMediaViewer:a}})})},C=function(){return l||[]},b=function(){i.reset(!0)},v=function(){i.setFirst(!0)},S=function(t){t.target===h.current&&(i.index<0?v():i.reset(!0))},R=function(t){t&&(t.preventDefault(),t.stopPropagation());var e=i.next();i.index!==e&&i.setNext(!0)},L=function(t){t&&(t.stopPropagation(),t.preventDefault());var e=i.prev();e>-1?i.setPrev(!0):u()},E=function(){return l.map(function(e){return{itemKey:e.id.toString(),msg:e}})};m(function(){i.init(C())},[]),p(n,function(){return{focusFirst:v,restoreFocus:b}});var k={down:function(t){return R(t)},up:function(t){return L(t)}};return d.jsx(o("WAWebKeyboardHotKeys.react").HotKeys,{handlers:k,onFocus:S,"data-tab":o("WAWebTabOrder").TAB_ORDER.CHAT_SEARCH_MSG_LIST,ref:h,children:d.jsx(f,{flatListController:a.flatListController,direction:"vertical",data:E(),renderItem:function(t){var e=t.msg;return d.jsx(g,{msg:e,selection:i,searchText:s,onClick:y})},forceConsistentRenderCount:!1})})}h.displayName=h.name+" [from "+i.id+"]",l.default=h}),98);
__d("WAWebDatePicker.react",["fbt","WAWebL10N","WAWebUseIsKeyboardUser","react","react-calendar"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t=e.maxDate,o=e.minDate,a=e.onDateSelected,i=r("WAWebUseIsKeyboardUser")(),l=i.isKeyboardUser,c=n("react-calendar").default;return u.jsx("div",babelHelpers.extends({},{0:{className:"xf2fit4 xiovny x1cjocb7 x1f0q22a x1iw8phr x1artvld xk4snr5 x1yge3xe xwi11h5 x15kmrvl x13l4fp2 xmfynt6 x1s22pda x1bdrdso x1hn2ltd x1f29xdi x7mj1lt xlg206x x1x04ifz x1my61ml x9vq33b x15tm2r9 x1yo9fk x17rrl5 xdgu6y7 x1jzmftk x1xhbldp xqikpf9 xc078lw x6wgh2k xf5t2sd xw4zml3 xhtlxvv xra6te8 x1e4ppt3 xt1hvkr xaockbu x1oe3wxx x1wq4j50 x4b1xh0 x1g3j6ey x61llzd x15kiiuk x8aj355 x13q2vvg x15i2d7n x7tggq xea0sh4 x71ozu2 x1upy338 xsnudpq xd7iu77 xp1nbbt xtgu96i xl48d2a x1347meo x1m8pmxx x5b4mxb x1pqbnpz x1cyavp5 xq3m9y7 xauqw0m x3qhu2d x2g8o02 x8reosc x1waxneg xczrsgi x1s05kqo xrir6dd x1fb7ar5 xmjkznz xcwe0hv xreu8v3 x1pt6kp6 x14zv3ms x19qw5la x1u43kwp x1ayfghy x615f3y x4tpv1n x1xwpm45 xkcj4v7 x1r6agxi xfloiof x1sg89e8 x1f30zej xbqj7c7 x12psqrc xudkme9 x1j4d9d8 x13ypgyl x1uqvoj0 x19ejreq x9ik1rf xhel1k7 xenizgk x12psr53 ximcf6e x1gz4fmc xh6vca6"},1:{className:"xf2fit4 xiovny x1cjocb7 x1f0q22a x1iw8phr x1artvld xk4snr5 x1yge3xe xwi11h5 x15kmrvl x13l4fp2 xmfynt6 x1s22pda x1bdrdso x1hn2ltd x1f29xdi x7mj1lt xlg206x x1x04ifz x1my61ml x9vq33b x15tm2r9 x1yo9fk x17rrl5 xdgu6y7 x1jzmftk x1xhbldp xqikpf9 xc078lw x6wgh2k xf5t2sd xw4zml3 xhtlxvv xra6te8 x1e4ppt3 xt1hvkr xaockbu x1oe3wxx x1wq4j50 x4b1xh0 x1g3j6ey x61llzd x15kiiuk x8aj355 x13q2vvg x15i2d7n x7tggq xea0sh4 x71ozu2 x1upy338 xsnudpq xd7iu77 xp1nbbt xtgu96i xl48d2a x1347meo x1m8pmxx x5b4mxb x1pqbnpz x1cyavp5 xq3m9y7 xauqw0m x3qhu2d x2g8o02 x8reosc x1waxneg xczrsgi x1s05kqo xrir6dd x1fb7ar5 xmjkznz xcwe0hv xreu8v3 x1pt6kp6 x14zv3ms x19qw5la x1u43kwp x1ayfghy x615f3y x4tpv1n x1xwpm45 xu5icey x3hg60a x1cef9ng x1nr6lf7 xkcj4v7 x1r6agxi xfloiof x1sg89e8 x1f30zej xbqj7c7 x12psqrc xudkme9 x1j4d9d8 x13ypgyl x1uqvoj0 x19ejreq x9ik1rf xhel1k7 xenizgk x12psr53 ximcf6e x1gz4fmc xh6vca6"}}[!!l<<0],{children:u.jsx(c,{locale:r("WAWebL10N").getFullLocale(),maxDate:t,minDate:o,minDetail:"month",nextAriaLabel:s._(/*BTDS*/"Next month").toString(),onClickDay:a,prevAriaLabel:s._(/*BTDS*/"Previous month").toString()})}))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),226);
__d("WAWebDatePickerContainer.react",["WAWebDatePicker.react","WAWebKeyboardRotateFocusModal.react","WAWebUserPrefsHistorySync","react","useWAWebFocusOnMount"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={overrideRotateFocusStyles:{position:"x1rv4328",$$css:!0}};function c(e){var t=e.onDateSelected,n=o("WAWebUserPrefsHistorySync").getHistorySyncEarliestDate()*1e3,a=new Date,i=new Date(n),l=r("useWAWebFocusOnMount")();return s.jsx(r("WAWebKeyboardRotateFocusModal.react"),{xstyle:u.overrideRotateFocusStyles,children:s.jsx("div",{ref:l,tabIndex:-1,className:"xtlo18s xg7h5cd x1sr759z x1xn7y0n x1uxb8k9 x1vmbcc8 x16xm01d x16w0wmm",children:s.jsx(r("WAWebDatePicker.react"),{maxDate:a,minDate:i,onDateSelected:t})})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("WAWebDBSearchByDate",["WAWebDBMessageStoreUtils","WAWebDBMessageUtils","WAWebSchemaMessage","WAWebViewMode.flow","WAWebViewModeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e=1;function s(e,t,n,r,o){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i){var l=o("WAWebDBMessageUtils").craftMessageRangeIndex(t,a,!1,n),s=o("WAWebDBMessageUtils").craftMessageRangeIndex(t,a,!1,r),u=yield o("WAWebSchemaMessage").getMessageTable().between(["messageRangeIndex"],l,s,{lowerInclusive:!0,upperInclusive:!0,reverse:i,limit:e},function(e){return!o("WAWebViewModeUtils").isViewModeVisibleInSurface(o("WAWebViewMode.flow").ViewModeSurface.SEARCH,e.viewMode)||!o("WAWebDBMessageStoreUtils").shouldRenderInUI(e,void 0)});return u[0]}),u.apply(this,arguments)}l.getClosestMessageBetweenDates=s}),98);
__d("WAWebSearchByDateUtils",["WALogger","WAWebDBSearchByDate","WAWebMsgKey","WAWebUserPrefsHistorySync","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e){return Math.floor(e/1e3)}function c(e,t,n){var o=null;return e!=null&&t!=null?n?o=e.t>=t.t?e.id:t.id:o=e.t<=t.t?e.id:t.id:e?o=e.id:t&&(o=t.id),o!=null?r("WAWebMsgKey").fromString(o):null}function d(e,t,n,r){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=yield o("WAWebDBSearchByDate").getClosestMessageBetweenDates(e,t,n,!0,r),i=yield o("WAWebDBSearchByDate").getClosestMessageBetweenDates(e,t,n,!1,r);return c(a,i,r)}),m.apply(this,arguments)}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=u(n.getTime()),a=o("WAWebUserPrefsHistorySync").getHistorySyncEarliestDate()*1e3,i=new Date().getTime(),l=yield d(t,r,i,!1);if(l!=null)return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getClosestMessageFromDate found message in after search of date"]))),l;var c=yield d(t,a,r,!0);return c!=null&&o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["getClosestMessageFromDate found message in before search of date"]))),c}),_.apply(this,arguments)}l.fromMillisecondsToSeconds=u,l.getClosestMessageFromDate=p}),98);
__d("WAWebSearchByTypeAndDateGatingUtils",["WAWebABProps"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebABProps").getABPropConfigValue("web_search_by_date_enabled")}l.searchByDateEnabled=e}),98);
__d("WAWebChatSearchDrawer.react",["fbt","Promise","WAAbortError","WAFtsIsSearchQueryEligibleForMessageSearch","WALogger","WAPromiseRaceAbort","WAShiftTimer","WAWebBackendErrors","WAWebChatGetters","WAWebChatListSearch.react","WAWebChatMessageSearch","WAWebChatSearchMessageList.react","WAWebCmd","WAWebComposeBoxActions","WAWebContactGetters","WAWebDatePickerContainer.react","WAWebDesktopUpsellPlatformAwareHooks","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDropdown.react","WAWebEmptyState.react","WAWebFlatList.react","WAWebFlatListController","WAWebFlex.react","WAWebFocusIndicator","WAWebFocusTracer","WAWebFrontendConstants","WAWebFrontendMsgGetters","WAWebFtsConstants","WAWebFtsMsgsCollection","WAWebHistorySyncComponents.react","WAWebKeyboardHotKeys.react","WAWebMsgCollection","WAWebNonEmptyString","WAWebNoop","WAWebSearchByDateUtils","WAWebSearchByTypeAndDateGatingUtils","WAWebSingleSelection","WAWebSpinner.react","WAWebUISpacing","WAWebUimUie.react","WAWebUimUieMenu.react","asyncToGeneratorRuntime","react","useLazyRef","useWAWebDebouncedCallback","useWAWebForceUpdate","useWAWebListener","useWAWebUIM","useWAWebUnmountSignal"],(function(t,n,r,o,a,i,l,s){var e,u=["ref"],c,d,m,p=m||(m=o("react")),_=d||(d=r("react")),f=p.useEffect,g=p.useMemo,h=p.useRef,y=p.useState,C={flexNone:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",flexBasis:"xdl72j9",$$css:!0}};function b(e){var t=e.chat,n=e.resultsUnavailable,a=e.searching,i=e.searchText,l=(i||"").trim();return r("WAFtsIsSearchQueryEligibleForMessageSearch")(l)?a?_.jsx(o("WAWebEmptyState.react").SearchingMessages,{}):n?_.jsx(o("WAWebEmptyState.react").SearchMessagesUnavailable,{}):_.jsx(o("WAWebEmptyState.react").SearchMessages,{}):o("WAWebEmptyState.react").BeforeSearchMessages(t.title(),o("WAWebChatGetters").getIsGroup(t),o("WAWebContactGetters").getIsMe(t.contact))}b.displayName=b.name+" [from "+i.id+"]";function v(t){"use no forget";var a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,u),l=i.chat,d=o("useWAWebForceUpdate").useForceUpdateDONOTUSE(),m=r("useWAWebUIM")(),p=r("useWAWebUnmountSignal")(),v=y(""),S=v[0],R=v[1],L=y(!1),E=L[0],k=L[1],I=y(!1),T=I[0],D=I[1],x=y(null),$=x[0],P=x[1],N=g(function(){return new(r("WAWebFlatListController"))},[]),M=g(function(){return new(r("WAWebFtsMsgsCollection"))(l)},[l]),w=h(null),A=g(function(){return new(r("WAWebSingleSelection"))([],function(e){return e.id.toString()})},[]),F=h(!1),O=h({}),B=h(null),W=h(null),q=h(null),U=h(null),V=r("useLazyRef")(function(){return new(o("WAShiftTimer")).ShiftTimer(function(){var e=O.current;e.searchText!==void 0&&R(e.searchText),e.searching!==void 0&&k(e.searching),e.resultsUnavailable!==void 0&&D(e.resultsUnavailable),O.current={}})}),H=function(t,n){n===void 0&&(n=75),Object.assign(O.current,t),t.searching===!0?V.current.debounce(0):V.current.debounce(n)},G=function(t){return t==null||!(t.scrollTop+o("WAWebFrontendConstants").SCROLL_FUDGE>t.scrollHeight-t.clientHeight)?!1:!(!M.hasMoreMsgs||F.current||E||M.searchPromise||!r("WAFtsIsSearchQueryEligibleForMessageSearch")((S||"").trim()))},z=function(){var e=O.current;if("searching"in e){var t;return(t=e.searching)!=null?t:!1}return E},j=function(t){var e;t.repeat||B.current&&(w.current&&!w.current.cursorIsAtEnd()||(t.preventDefault(),t.stopPropagation(),r("WAWebFocusIndicator").shouldIndicateFocus(),(e=B.current)==null||e.focusFirst()))},K=function(t){t.preventDefault();var e=M.head();if(e){var n=o("WAWebFrontendMsgGetters").getChat(e),r=o("WAWebChatMessageSearch").getSearchContext(n,e.id);o("WAWebComposeBoxActions").ComposeBoxActions.focus(n),o("WAWebCmd").Cmd.openChatAt({chat:n,msgContext:r})}},Q=function(){r("WAWebFocusIndicator").shouldIndicateFocus(),r("WAWebFocusTracer").focus(w.current)},X=function(){m==null||m.requestDismiss()},Y=function(t){r("WAWebFocusIndicator").maybeIndicateFocus(W.current)},J=function(){return Math.round(window.innerHeight/o("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT)+1},Z=r("useWAWebDebouncedCallback")(function(){var e;F.current=!1;var t=(S||"").trim();if(r("WAFtsIsSearchQueryEligibleForMessageSearch")(t)){(e=U.current)==null||e.abort(),U.current=new AbortController;var a=U.current.signal,i=(c||(c=n("Promise"))).resolve().then(function(){z()||H({searching:!0})}).then(function(){return M.search({chat:l,count:J(),searchTerm:t})});q.current=r("WAPromiseRaceAbort")(i,a).then(function(e){if(p.aborted)throw new(o("WAAbortError")).AbortError;e&&!e.canceled&&t===S.trim()&&H({searching:!1,resultsUnavailable:!1})}).catch(o("WAAbortError").catchAbort(r("WAWebNoop"))).finally(function(){q.current=void 0,U.current=void 0}).catch(function(e){F.current||H({searching:!1,resultsUnavailable:e instanceof o("WAWebBackendErrors").E404})})}},o("WAWebFtsConstants").FTS_TYPING_DELAY),ee=function(){var e;Z.cancel(),M.resetSearch(),M.delete(),(e=U.current)==null||e.abort(),F.current=!1,R(""),k(!1)},te=function(t){var e=t.trim();if(r("WAFtsIsSearchQueryEligibleForMessageSearch")(e))Z(),F.current=!0,E||H({searching:!0});else{var n;Z.cancel(),M.resetSearch(),M.delete(),(n=U.current)==null||n.abort(),F.current=!1,E&&H({searching:!1,resultsUnavailable:!1})}},ne=function(t){if(!t){ee();return}if(t!==S){var e={searchText:t,resultsUnavailable:!1};te(t),R(t),H(e)}},re=function(t){G(t.currentTarget)&&(Z(),F.current=!0)};f(function(){return function(){var e;Z.cancel(),M.delete(!0),(e=U.current)==null||e.abort(),V.current.cancel()}},[]),o("useWAWebListener").useListener(M,["bulk_remove"],d);var oe=o("WAWebDesktopUpsellPlatformAwareHooks").useWAWebDesktopUpsellAbPropCheck("search_results"),ae=o("WAWebDesktopUpsellPlatformAwareHooks").useWAWebDesktopUpsellPlatformCheck(),ie=oe&&ae,le=M.toArray(),se=le.length?null:_.jsx(b,{chat:l,searchText:S,searching:E,resultsUnavailable:T});if(se==null){var ue=S?o("WAWebNonEmptyString").asMaybeNonEmptyString(S.trim()):null;se=_.jsx(r("WAWebChatSearchMessageList.react"),{ref:B,flatListController:N,isSearching:!!ue,searchText:ue,ftsResult:le,selection:A,onFocusSearch:Q})}var ce={down:j},de=E&&le.length?_.jsx(o("WAWebFlex.react").FlexRow,{justify:"center",xstyle:[C.flexNone,o("WAWebUISpacing").uiPadding.vert24],children:_.jsx(o("WAWebSpinner.react").Spinner,{stroke:6,size:24})}):null,me,pe=(S||"").trim();ie!==!0&&r("WAFtsIsSearchQueryEligibleForMessageSearch")(pe)&&(me=_.jsx(o("WAWebHistorySyncComponents.react").HistorySyncChatSearchIncompletePlaceholder,{}));var _e=o("WAWebSearchByTypeAndDateGatingUtils").searchByDateEnabled(),fe=function(){P(null)},ge=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield o("WAWebSearchByDateUtils").getClosestMessageFromDate(l.id.toString(),t);if(fe(),n){var r,a=o("WAWebMsgCollection").MsgCollection.get(n.toString()),i=o("WAWebChatMessageSearch").getSearchContext(l,(r=a==null?void 0:a.id)!=null?r:n);i.highlightMentionMsg=!0,i.enableAnimation=!1,i&&o("WAWebCmd").Cmd.openChatAt({chat:l,msgContext:i})}else o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[SBTD] Message not found for getClosestMessageFromDate"]))),o("WAWebCmd").Cmd.openChatBottom({chat:l})});return function(n){return t.apply(this,arguments)}})(),he=function(){var e,t=(e=w.current)==null?void 0:e.getCalendarElementRef();P({dirY:o("WAWebDropdown.react").DirY.TOP,dirX:o("WAWebDropdown.react").DirX.CENTER,type:o("WAWebDropdown.react").MenuType.DatePicker,menu:_.jsx(r("WAWebDatePickerContainer.react"),{onDateSelected:function(t){ge(t)}}),flipOnRTL:!0,anchor:t==null?void 0:t.current})},ye=$?_.jsx(o("WAWebUimUie.react").UIE,{displayName:"DatePicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:fe,children:_.jsx(r("WAWebUimUieMenu.react"),{contextMenu:$})}):null;return _.jsxs(r("WAWebDrawer.react"),{ref:a,children:[_.jsx(o("WAWebDrawerHeader.react").DrawerHeader,{title:s._(/*BTDS*/"Search messages"),type:o("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:X}),_.jsx(o("WAWebKeyboardHotKeys.react").HotKeys,{handlers:ce,onFocus:Y,ref:W,className:"x16w0wmm x1c4vz4f x2lah0s xdl72j9",children:_.jsx(o("WAWebChatListSearch.react").ListSearch,{ref:w,type:o("WAWebChatListSearch.react").ListSearchType.CHAT_MSG_SEARCH,onSearch:ne,onEnter:K,loading:E,focusOnMount:!0,showJumpToDateButton:_e,onJumpToDateButtonClicked:he})}),ye,_.jsxs(r("WAWebDrawerBody.react"),{flatListControllers:[N],className:"x1vjfegm x78zum5 xdt5ytf x1iyjqo2 x1odjw0f x1280gxy",onScroll:re,id:"pane-side",children:[se,de,me]})]},"search-modal")}v.displayName=v.name+" [from "+i.id+"]",l.default=v}),226);
__d("WAWebShopIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="shop";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),version:"1.1",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M11.9071327,2 C14.0034625,2 15.2227003,3.16428094 15.43674,5.27247106 L15.9324472,5.27272727 C17.9567472,5.27272727 19.6573296,6.79482129 19.8808762,8.80674021 L20.7899671,16.9885584 C21.0322623,19.1692155 19.4609095,21.1334065 17.2802524,21.3757017 C17.1345745,21.3918882 16.9881125,21.4 16.8415381,21.4 L6.97272727,21.4 C4.77865058,21.4 3,19.6213494 3,17.4272727 C3,17.2806983 3.00811182,17.1342363 3.02429825,16.9885584 L3.93338916,8.80674021 C4.14948416,6.86188526 5.7457871,5.37474446 7.68050995,5.27776269 L7.88181818,5.27272727 L8.37752533,5.27247106 C8.59156505,3.16428094 9.81080288,2 11.9071327,2 Z M15.9324472,6.67272727 L7.88181818,6.67272727 L7.71207742,6.67826233 C6.47693062,6.7590403 5.46330025,7.71507958 5.32482639,8.96134435 L4.41573548,17.1431625 C4.40525319,17.2375031 4.4,17.3323516 4.4,17.4272727 C4.4,18.8481508 5.55184923,20 6.97272727,20 L16.8415381,20 C16.9364592,20 17.0313077,19.9947468 17.1256483,19.9842645 C18.5378359,19.8273548 19.5554396,18.5553501 19.3985299,17.1431625 L18.489439,8.96134435 C18.3446708,7.65843118 17.2433783,6.67272727 15.9324472,6.67272727 Z M14.7555208,8.54553713 L14.8506156,8.55002336 C15.2346916,8.59412138 15.5102982,8.94122503 15.4662002,9.32530107 C15.2082527,11.571921 13.9710827,12.8090909 11.9071327,12.8090909 C9.84318262,12.8090909 8.6060127,11.571921 8.34806513,9.32530107 C8.30396711,8.94122503 8.57957375,8.59412138 8.96364979,8.55002336 C9.34772583,8.50592534 9.69482948,8.78153199 9.7389275,9.16560802 C9.91936771,10.7371699 10.5912887,11.4090909 11.9071327,11.4090909 C13.2229767,11.4090909 13.8948976,10.7371699 14.0753379,9.16560802 C14.1120862,8.84554466 14.3592551,8.60080726 14.6628902,8.55363847 L14.7555208,8.54553713 Z M11.9071327,3.4 C10.6172322,3.4 9.94591364,3.96060645 9.78307298,5.27122352 L14.0311924,5.27122352 C13.8683517,3.96060645 13.1970332,3.4 11.9071327,3.4 Z",fill:"currentColor",fillRule:"nonzero"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.ShopIcon=m}),98);
__d("WAWebCommerceButton.react",["fbt","WAWebBizGatingUtils","WAWebBusinessProfileCollection","WAWebBusinessProfileTypes","WAWebBusinessProfileUtils","WAWebDrawerManager","WAWebMenuBar.react","WAWebProductCatalogContext","WAWebProductCatalogSession","WAWebProductDetailsFlowLoadable","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebShopIcon.react","WAWebStorefrontIcon.react","WAWebTabOrder","WAWebWamEnumBizPlatform","WAWebWamEnumCatalogEntryPoint","WDSMenuBarItem.react","react","useWAWebABPropConfigValue","useWAWebUIM"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t,n,a=e.chat,i=e.disabled,l=r("useWAWebUIM")(),c=a.contact.businessProfile,d=o("useWAWebABPropConfigValue").useABPropConfigValue("wds_web_button");if(o("WAWebBusinessProfileUtils").hasShop(c)){if(o("WAWebBizGatingUtils").bannedShopsEnabled()&&o("WAWebBusinessProfileUtils").isShopBanned(c))return null;var m=function(t){t==null||t.preventDefault(),o("WAWebBusinessProfileUtils").goToShop(a.contact.businessProfile)},p;return d?p=u.jsx(r("WDSMenuBarItem.react"),{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:o("WAWebShopIcon.react").ShopIcon,title:s._(/*BTDS*/"Shop"),onClick:m,disabled:i}):p=u.jsx(o("WAWebMenuBar.react").MenuBarItem,{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:u.jsx(o("WAWebShopIcon.react").ShopIcon,{}),title:s._(/*BTDS*/"Shop"),onClick:m,disabled:i}),p}if(c!=null&&c.isCatalogDisabledDueToMetaLinking)return null;if((c==null||(t=c.profileOptions)==null?void 0:t.commerceExperience)===o("WAWebBusinessProfileTypes").CommerceExperienceTypes.CATALOG||(c==null||(n=c.profileOptions)==null?void 0:n.commerceExperience)===o("WAWebBusinessProfileTypes").CommerceExperienceTypes.META_CATALOG&&o("WAWebBizGatingUtils").isCatalogVariantsViewingEnabled()||(c==null?void 0:c.catalogStatus)===o("WAWebBusinessProfileCollection").CATALOG_EXISTS){var _=function(t){t==null||t.preventDefault(),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:"ChatHeader"}}});var e=o("WAWebProductCatalogContext").buildProductCatalogContext(new(o("WAWebProductCatalogSession")).ProductCatalogSession,o("WAWebWamEnumBizPlatform").BIZ_PLATFORM.SMB,o("WAWebWamEnumCatalogEntryPoint").CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_CHAT),n=a.contact.id;o("WAWebDrawerManager").DrawerManager.openDrawerRight(u.jsx(o("WAWebProductDetailsFlowLoadable").ProductDetailsFlowLoadable,{chat:a,catalogOwnerJid:n.toJid()}),{transition:"slide-left",uim:l,newDrawerContext:e})},f;return d?f=u.jsx(r("WDSMenuBarItem.react"),{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:o("WAWebStorefrontIcon.react").StorefrontIcon,title:s._(/*BTDS*/"Catalog"),onClick:_,disabled:i}):f=u.jsx(o("WAWebMenuBar.react").MenuBarItem,{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:u.jsx(o("WAWebStorefrontIcon.react").StorefrontIcon,{}),title:s._(/*BTDS*/"Catalog"),onClick:_,disabled:i}),f}return null}c.displayName=c.name+" [from "+i.id+"]",l.CommerceButton=c}),226);
__d("WAWebDebugConvertToLidChatModal.react",["WAWebApiContact","WAWebCmd","WAWebComposeBoxActions","WAWebConfirmPopup.react","WAWebDeleteChatAction","WAWebDevOnlyBadge.react","WAWebDropdownItem.react","WAWebFindChatAction","WAWebModalManager","WAWebToast.react","WAWebToastManager","WAWebWidFactory","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react"));function u(e){var t=e.chat;return s.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,addSpacing:!0,action:function(){c(t)},children:s.jsx(o("WAWebDevOnlyBadge.react").DevOnlyBadge,{label:"Convert to LID chat"})},"convertToLid")}u.displayName=u.name+" [from "+i.id+"]";function c(e){o("WAWebModalManager").ModalManager.open(s.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{okText:"Yes",cancelText:"No",onCancel:function(){o("WAWebModalManager").ModalManager.close()},onOK:function(){o("WAWebModalManager").ModalManager.close(),d(e)},children:"'Warning! This will DELETE your existing chat along with all message history and convert it to a new LID-based chat. Do you want to proceed?'"}))}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebApiContact").getCurrentLid(o("WAWebWidFactory").asUserWidOrThrow(e.id));if(t==null){o("WAWebToastManager").ToastManager.open(s.jsx(o("WAWebToast.react").Toast,{msg:"Unable to convert to lid chat: no lid found for "+e.id.toString()}));return}yield o("WAWebDeleteChatAction").sendDelete(e);var n=yield o("WAWebFindChatAction").findOrCreateLatestChat(t,"debugConvertToLidChat"),r=n.chat;yield o("WAWebCmd").Cmd.openChatBottom({chat:r}),o("WAWebComposeBoxActions").ComposeBoxActions.focus(r)}),m.apply(this,arguments)}l.DebugConvertToLid=u}),98);
__d("WAWebContactMenuDropdown.react",["fbt","WATimeUtils","WAWebAIAgentEnableAIReplyUtils","WAWebAddUserIcon.react","WAWebAiSignalIcon.react","WAWebBizAiAgentStatusUtils","WAWebBizGatingUtils","WAWebBlockContactUtils","WAWebBlockContants","WAWebBlockRefreshedIcon.react","WAWebCalendarFilledRefreshedIcon.react","WAWebChatAssignmentLogEvents.flow","WAWebChatAssignmentWithContainerIcon.react","WAWebChatContextMenuItemEditList.react","WAWebChatContextMenuItemLock.react","WAWebChatEphemerality","WAWebChatGetters","WAWebChatThreadLogging","WAWebCheckRefreshedIcon.react","WAWebClearRefreshedIcon.react","WAWebCloseCircleRefreshedIcon.react","WAWebCmd","WAWebContactGetters","WAWebCopyRefreshedIcon.react","WAWebCopyUtils","WAWebDebugConvertToLidChatModal.react","WAWebDeleteMenuItem.react","WAWebDevOnlyBadge.react","WAWebDisappearingMessagesRefreshedIcon.react","WAWebDropdown.react","WAWebDropdownItem.react","WAWebDropdownItemSeparator.react","WAWebFavoriteRefreshedIcon.react","WAWebFrontendChatGetters","WAWebFrontendContactGetters","WAWebHeartIconCustom","WAWebHeartSlashIcon.react","WAWebInboxFiltersGatingUtils","WAWebInfoRefreshedIcon.react","WAWebL10NHelpers","WAWebLinkRefreshedIcon.react","WAWebListsGatingUtils","WAWebMessageLogQplEvents","WAWebModalManager","WAWebMuteMenuItem.react","WAWebProtobufsE2E.pb","WAWebReportContactPopup.react","WAWebSendNonMessageDataRequest","WAWebSpamConstants","WAWebStateUtils","WAWebStreamModel","WAWebSyncGatingUtils","WAWebThumbsDownRefreshedIcon.react","WAWebUnfavoriteRefreshedIcon.react","WAWebUseIsFeatureEnabled","WAWebVoipCallsTabScheduleCallModal.react","WAWebVoipCreateCallLinksPopupLoadable.react","WAWebVoipNewGroupCallContactPicker.react","WAWebWamEnumEphemeralSettingEntryPointType","WAWebWamEnumFavoritesUpdateEntryPoint","WAWebWamEnumPsaMessageRemoveEntryPoint","gkx","react","useWAWebABPropConfigValue","useWAWebChatValues","useWAWebContactValues","useWAWebForceUpdate","useWAWebListener"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.useEffect,p=c.useRef,_={aiIconXstyle:{color:"xhslqc4",$$css:!0}};function f(e){"use no forget";var t,n,a,i=e.chat,l=e.onSelectMessages,u=e.enableChatThreadLogging,c=o("useWAWebForceUpdate").useForceUpdateDONOTUSE(),f=o("useWAWebChatValues").useChatValues(e.chat.id,[(t=o("WAWebChatGetters")).getIsPSA,(n=o("WAWebFrontendChatGetters")).getMute,t.getId,n.getContact,n.getPromises,t.getIsNewsletter,n.getIsParentGroup,t.getIsUser,t.getTcToken,t.getTcTokenTimestamp,n.getMsgs,n.getIsFavorite]),g=f[0],h=f[1],y=f[2],C=f[3],b=f[4],v=f[5],S=f[6],R=f[7],L=f[8],E=f[9],k=f[10],I=f[11],T=o("useWAWebContactValues").useContactValues(i.contact.id,[(a=o("WAWebContactGetters")).getId,a.getIsBusiness,a.getName,o("WAWebFrontendContactGetters").getIsContactBlocked,a.getIsMe,a.getIsMyContact]),D=T[0],x=T[1],$=T[2],P=T[3],N=T[4],M=T[5],w=o("useWAWebABPropConfigValue").useABPropConfigValue("enable_unified_call_buttons_in_chat"),A=o("useWAWebABPropConfigValue").useABPropConfigValue("unified_calling_entry_point_desktop_type"),F=p(null);o("useWAWebListener").useListener(o("WAWebStreamModel").Stream,"change:displayInfo",c),m(function(){u===!0&&o("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"chatOverflowClicks",ts:o("WATimeUtils").unixTime(),chatId:y}])},[u,y]);var O=r("WAWebUseIsFeatureEnabled")("MD_EXTENSION"),B=function(){o("WAWebModalManager").ModalManager.open(d.jsx(o("WAWebReportContactPopup.react").ReportContactPopupV2,{chat:i,spamFlow:o("WAWebSpamConstants").SpamFlow.OverflowMenuReport}))},W=function(){o("WAWebCmd").Cmd.ephemeralDrawer(o("WAWebStateUtils").unproxy(e.chat),!1,o("WAWebWamEnumEphemeralSettingEntryPointType").EPHEMERAL_SETTING_ENTRY_POINT_TYPE.CHAT_OVERFLOW)},q=function(){var t=[];o("WAWebBizAiAgentStatusUtils").isChatEligibleForAiAgent(i)&&t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){o("WAWebAIAgentEnableAIReplyUtils").enableAiReply(i)},icon:d.jsx(o("WAWebAiSignalIcon.react").AiSignalIcon,{height:20,width:20,iconXstyle:_.aiIconXstyle}),children:s._(/*BTDS*/"AI replies")},"aiReplies")),O&&t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){o("WAWebCmd").Cmd.assignChat(i,o("WAWebChatAssignmentLogEvents.flow").ChatAssignmentEntryPointType.CONVERSATION_MENU)},icon:d.jsx(o("WAWebChatAssignmentWithContainerIcon.react").ChatAssignmentWithContainerIcon,{}),children:s._(/*BTDS*/"Assign chat")},"assignChat"));var n=o("WAWebBizAiAgentStatusUtils").isChatEligibleForAiAgent(i)||O;n&&t.push(d.jsx(o("WAWebDropdownItemSeparator.react").DropdownItemSeparator,{}));var a=d.jsx(o("WAWebInfoRefreshedIcon.react").InfoRefreshedIcon,{});if(g||t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:function(){x&&o("WAWebMessageLogQplEvents").qplStartProfileView("ToolsMenu"),o("WAWebCmd").Cmd.chatInfoDrawer(i)},testid:void 0,icon:a,children:s._(/*BTDS*/"Contact info")},"info")),x&&o("WAWebBizGatingUtils").canSeeECommerceComplianceIndiaSoftEnforcement(D)&&t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.merchantDetailsDrawer(D)},icon:a,children:s._(/*BTDS*/"Business details")},"merchantDetails")),t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:l,icon:d.jsx(o("WAWebCheckRefreshedIcon.react").CheckRefreshedIcon,{}),children:s._(/*BTDS*/"Select messages")},"select")),h.canMute()&&t.push(d.jsx(r("WAWebMuteMenuItem.react"),{onMute:function(t){g?o("WAWebCmd").Cmd.muteChatFromEntryPoint(i,t,3):o("WAWebCmd").Cmd.muteChat(i,t)},mute:h,chat:i},"mute")),o("WAWebChatEphemerality").shouldShowEphemeralSetting(e.chat)&&t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:W,icon:d.jsx(o("WAWebDisappearingMessagesRefreshedIcon.react").DisappearingMessagesRefreshedIcon,{}),children:s._(/*BTDS*/"Disappearing messages")},"disappearingMessages")),t.push(d.jsx(r("WAWebChatContextMenuItemLock.react"),{chat:i},"Lock")),i.canToggleFavorite()&&o("WAWebInboxFiltersGatingUtils").inboxFavoritesEnabled()){var u,c;I?(c=o("WAWebL10NHelpers").isUsingSupportedBritishEnglishLocale()?s._(/*BTDS*/"Remove from favourites"):s._(/*BTDS*/"Remove from favorites"),u=d.jsx(o("WAWebUnfavoriteRefreshedIcon.react").UnfavoriteRefreshedIcon,{})):(c=o("WAWebL10NHelpers").isUsingSupportedBritishEnglishLocale()?s._(/*BTDS*/"Add to favourites"):s._(/*BTDS*/"Add to favorites"),u=d.jsx(o("WAWebFavoriteRefreshedIcon.react").FavoriteRefreshedIcon,{})),t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.favoriteChat(i,!I,o("WAWebWamEnumFavoritesUpdateEntryPoint").FAVORITES_UPDATE_ENTRY_POINT.CHAT_HEADER_CONTEXT_MENU)},icon:u,children:c},"favorite"))}o("WAWebListsGatingUtils").isListsEnabled()&&t.push(d.jsx(r("WAWebChatContextMenuItemEditList.react"),{chat:i,displayContext:"chat-header"}));var m=e.container;if(o("WAWebCopyUtils").canCopySelection()&&m!=null&&t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:function(){o("WAWebCopyUtils").copySelection(m)},icon:d.jsx(o("WAWebCopyRefreshedIcon.react").CopyRefreshedIcon,{}),children:s._(/*BTDS*/"Copy selection")})),t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.closeChat(i)},icon:d.jsx(o("WAWebCloseCircleRefreshedIcon.react").CloseCircleRefreshedIcon,{}),children:s._(/*BTDS*/"Close chat")},"close")),w&&A===1&&(t.push(d.jsx(o("WAWebDropdownItemSeparator.react").DropdownItemSeparator,{})),t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){o("WAWebModalManager").ModalManager.open(d.jsx(o("WAWebVoipCreateCallLinksPopupLoadable.react").WAWebVoipCreateCallLinksPopupLoadable,{targetChat:i}))},icon:d.jsx(o("WAWebLinkRefreshedIcon.react").LinkRefreshedIcon,{}),children:s._(/*BTDS*/"Send call link")},"send-call-link")),t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebVoipCallsTabScheduleCallModal.react").handleScheduleCallForChat(i)},icon:d.jsx(o("WAWebCalendarFilledRefreshedIcon.react").CalendarFilledRefreshedIcon,{}),children:s._(/*BTDS*/"Schedule call")},"schedule-call")),t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){o("WAWebModalManager").ModalManager.open(d.jsx(r("WAWebVoipNewGroupCallContactPicker.react"),{chat:i}))},icon:d.jsx(o("WAWebAddUserIcon.react").AddUserIcon,{}),children:s._(/*BTDS*/"New group call")},"new-group-call"))),t.push(d.jsx(o("WAWebDropdownItemSeparator.react").DropdownItemSeparator,{})),N||(!g&&!y.isBot()&&t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:B,icon:d.jsx(o("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}),theme:o("WAWebDropdownItem.react").DropdownItemThemeType.Negative,children:s._(/*BTDS*/"Report")},"report")),y.isBot()||t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:P?function(){return o("WAWebBlockContactUtils").handleUnblock(i.contact,o("WAWebBlockContants").BlockEntryPoint.OverflowMenuBlock)}:function(){return o("WAWebBlockContactUtils").handleBlock(i,o("WAWebBlockContants").BlockEntryPoint.OverflowMenuBlock)},icon:d.jsx(o("WAWebBlockRefreshedIcon.react").BlockRefreshedIcon,{}),theme:P?void 0:o("WAWebDropdownItem.react").DropdownItemThemeType.Negative,children:P?s._(/*BTDS*/"Unblock"):s._(/*BTDS*/"Block")},"block"))),t.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return o("WAWebCmd").Cmd.clearChat(i)},icon:d.jsx(o("WAWebClearRefreshedIcon.react").ClearRefreshedIcon,{}),theme:o("WAWebDropdownItem.react").DropdownItemThemeType.Negative,children:s._(/*BTDS*/"Clear chat")},"clear")),t.push(d.jsx(r("WAWebDeleteMenuItem.react"),{onDeleteOrExit:function(){return o("WAWebCmd").Cmd.deleteOrExitChatFromEntryPoint(i,o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CONVERSATION)},chat:i},"delete")),!r("gkx")("26258")){var p=o("WAWebFrontendChatGetters").getKind(i);t.push.apply(t,o("WAWebDevOnlyBadge.react").getDEVChatMenuOptions(y,p)),y.isRegularUser()&&t.push(d.jsx(o("WAWebDebugConvertToLidChatModal.react").DebugConvertToLid,{chat:i},"convertToLid"))}return t};return e.toContextMenuManager?d.jsx("div",{ref:F,"data-testid":void 0,children:q()}):d.jsx(o("WAWebDropdown.react").Dropdown,{ref:function(t){F.current=t},type:o("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:o("WAWebDropdown.react").DirX.LEFT,testid:void 0,children:q()},"ContactMenuDropdown")}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),226);
__d("WAWebDesktopUpsellCallingUnavailable.react",["fbt","WANullthrows","WAWebDesktopUpsellCallingUnavailablePopover.react","WAWebDesktopUpsellUtils","WAWebDropdownV2.react","WAWebFlex.react","WAWebIcChevronDownMenuIcon.react","WAWebPopover.react","WAWebTabOrder","WAWebUISpacing","WAWebUnstyledButton.react","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebVideoCallRefreshedIcon.react","WDSFocusStateStyles","WDSTooltip.react","react","stylex","useWAWebABPropConfigValue","useWAWebFocusState"],(function(t,n,r,o,a,i,l,s){var e,u,c,d=c||(c=o("react")),m=e||(e=r("react")),p=d.useEffect,_=d.useRef,f={menuBarBtnContainer:{display:"x78zum5",position:"x1n2onr6",height:"x5yr21d",borderStartStartRadius:"x1ekkm8c",borderStartEndRadius:"x1143rjc",borderEndEndRadius:"xum4auv",borderEndStartRadius:"xj21bgg",transitionProperty:"x15406qy",transitionDuration:"x1d8287x",transitionTimingFunction:"xwji4o3","@media screen and (max-width: 720px)_paddingTop":"xj8bxqt","@media screen and (max-width: 720px)_paddingInlineEnd":"xe3rdy5","@media screen and (max-width: 720px)_paddingBottom":"xpbnuc5","@media screen and (max-width: 720px)_paddingInlineStart":"x1gzssx3","@media screen and (max-width: 720px)_marginTop":"x86at4b","@media screen and (max-width: 720px)_marginInlineEnd":"x1ua388o","@media screen and (max-width: 720px)_marginBottom":"x1ad89wd","@media screen and (max-width: 720px)_marginInlineStart":"x1rs47hk",$$css:!0},hoverBg:{":hover_backgroundColor":"x17gydlx",$$css:!0},videoCallIconGroup:{color:"x14ug900",$$css:!0},videoCallBtnShaded:{backgroundColor:"x4wrhlh",$$css:!0},suppressFocus:{":focus_outline":"x1uvtmcs",":focus_boxShadow":"xr9r2s9",$$css:!0}};function g(e){var t=e.isGroupCall,n=t===void 0?!1:t,a=o("WAWebDesktopUpsellUtils").getUserDesktopOs(),i=r("useWAWebFocusState")(),l=i[0],c=i[1],d=_(null),g=o("WAWebDropdownV2.react").useDropdownV2({target:d,alignment:o("WAWebPopover.react").PopoverAlignment.End,position:o("WAWebPopover.react").PopoverPosition.Bottom,buffer:6,material:!0,children:m.jsx(r("WAWebDesktopUpsellCallingUnavailablePopover.react"),{userDesktopOs:r("WANullthrows")(a),isGroupCall:n})}),y=g.popover,C=g.popoverIsVisible;p(function(){C&&h()},[C]);var b=s._(/*BTDS*/"Get the app for calling"),v=o("WAWebVideoCallRefreshedIcon.react").VideoCallRefreshedIcon,S=o("WAWebIcChevronDownMenuIcon.react").IcChevronDownMenuIcon,R=o("useWAWebABPropConfigValue").useABPropConfigValue("wds_web_tooltip"),L=m.jsx("div",babelHelpers.extends({},(u||(u=r("stylex"))).props(f.menuBarBtnContainer,o("WAWebUISpacing").uiMargin.start10,o("WAWebUISpacing").uiPadding.horiz10,o("WAWebUISpacing").uiPadding.top8,o("WAWebUISpacing").uiPadding.bottom5,c&&o("WDSFocusStateStyles").WDSFocusStateStyles.genericFocusPersistent,C&&f.videoCallBtnShaded,f.hoverBg,o("WAWebUISpacing").uiPadding.end6,o("WAWebUISpacing").uiPadding.bottom8),{ref:d,children:m.jsxs(r("WAWebUnstyledButton.react"),{title:R?void 0:b,"aria-label":b,ref:l,dataTab:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,xstyle:f.suppressFocus,children:[m.jsxs(o("WAWebFlex.react").FlexRow,{align:"center",justify:"center",xstyle:f.videoCallIconGroup,children:[m.jsx(v,{xstyle:!1}),m.jsx(S,{height:20,xstyle:o("WAWebUISpacing").uiMargin.start4})]}),y]})}));return R?m.jsx(r("WDSTooltip.react"),{label:b,children:L}):L}g.displayName=g.name+" [from "+i.id+"]";function h(){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.DESKTOP_UPSELL_USER_HAS_CLICKED_CALL_MODAL,!0)}l.default=g}),226);
__d("WAWebGroupSubtitle.react",["fbt","WAChatState","WALogger","WAWebChatAssignmentLogEvents","WAWebChatCollection","WAWebChatSubtitleText","WAWebCurrentUser","WAWebElevatedPushNamesFlag","WAWebFrontendContactGetters","WAWebGroupQueryJob","WAWebGroupType","WAWebHostedGroupUtils","WAWebParticipantsList.react","WAWebPresenceEnum","WAWebTypingIndicatorGatingUtils","react","useWAWebModelValues"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m,p=m||(m=r("react")),_=(d||(d=o("react"))).useEffect;function f(t){var n=t.assignmentSubtitle,a=t.chatId,i=t.chatstate,l=t.groupMetadata,d=t.location,m=t.placeholder,f=t.presence;o("useWAWebModelValues").useModelValues(i,["id","type","deny","t"]);var g=o("useWAWebModelValues").useModelValues(l,["announce","participants","groupType","size","id","hasCapi","isCag"]),h=o("useWAWebModelValues").useModelValues(f,["forceDisplay","withholdDisplayStage"]),y=function(){return g.groupType===o("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&g.participants.iAmMember()&&!g.participants.iAmAdmin()};_(function(){y()&&g.isCag&&g.id.isGroup()&&!g.size&&o("WAWebGroupQueryJob").queryAndUpdateGroupMetadataById({id:g.id}).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[CAG][Group Subtitle] Error: "," \n",""],["[CAG][Group Subtitle] Error: "," \\n",""])),t.message,t.stack),o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[CAG][Group Subtitle] Failed to query group metadata for CAG"]))).sendLogs("failed-to-query-group-metadata-for-cag"),o("WAWebCurrentUser").isEmployee()&&o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[CAG] Failed to query group metadata "," isCAG="," isGroup=",""])),g.id.toString(),g.isCag,g.id.isGroup())})},[]),_(function(){n!=null&&h.withholdDisplayStage===o("WAWebPresenceEnum").WithholdDisplayStage.ChatAssignment&&o("WAWebChatAssignmentLogEvents").logChatStatusTickerShown(a)},[a,h.withholdDisplayStage,n]);var C=o("WAWebElevatedPushNamesFlag").elevatedPushNamesM2Enabled(o("WAWebChatCollection").ChatCollection.get(a)),b=function(){if(g.groupType===o("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)return{text:s._(/*BTDS*/"Announcements")};var e=(i.type===o("WAChatState").ACTIVE_CHAT_STATE_TYPE.TYPING||i.type===o("WAChatState").ACTIVE_CHAT_STATE_TYPE.RECORDING_AUDIO)&&o("WAWebTypingIndicatorGatingUtils").isTypingIndicatorMessageBubbleEnabled(a);return e===!0?null:h.getGroupSubtitleText({elevatedPushNamesEnabled:C})},v,S,R=!1;if(h.withholdDisplayStage===o("WAWebPresenceEnum").WithholdDisplayStage.CommunityName){var L,E=o("WAWebChatCollection").ChatCollection.get(a),k=E==null||(L=E.groupMetadata)==null?void 0:L.getParentGroupChat(),I=k==null?void 0:k.contact,T=I!=null?o("WAWebFrontendContactGetters").getFormattedName(I):null;v=s._(/*BTDS*/"{community}",[s._param("community",T)])}else if(h.withholdDisplayStage===o("WAWebPresenceEnum").WithholdDisplayStage.OnlyAdminsCanSend)v=s._(/*BTDS*/"Only admins can send messages");else if(o("WAWebHostedGroupUtils").isWAHostedGroupEnabled()&&g.hasCapi===!0)v=n;else if(h.withholdDisplayStage===o("WAWebPresenceEnum").WithholdDisplayStage.E2EE)v=o("WAWebChatSubtitleText").e2eChatSubtitleText(),R=!0;else if(h.withholdDisplayStage===o("WAWebPresenceEnum").WithholdDisplayStage.Info)v=m;else if(n!=null&&h.withholdDisplayStage===o("WAWebPresenceEnum").WithholdDisplayStage.ChatAssignment)v=n;else{var D=b();D!=null&&(v=D.text,S=D.ariaLabel)}return p.jsx(r("WAWebParticipantsList.react"),{groupMetadata:g,overridingText:v,placeholder:m,ariaLabel:S,location:d,showLockIcon:R})}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),226);
__d("WAWebLabelsDropdown.react",["WASmaxInBizSettingsEnums","WAWebCTWADataSharingModel","WAWebCheckBox.react","WAWebCustomLabels3pdSignalUtils","WAWebDropdownItem.react","WAWebLabelCollection","WAWebLabelEventWamEvent","WAWebLabels.react","WAWebListUtils","WAWebNoop","WAWebSmb3pdConversionSignalAction","WAWebSmbMarkAsXLabelAction","WAWebWamEnumLabelOperations","WAWebWamEnumLabelTargets","react"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useCallback,m=u.useEffect,p=u.useMemo,_=u.useRef,f=u.useState,g={labelIcon:{height:"xxk0z11",width:"xvy4d1p",marginTop:"xav9cv8",$$css:!0}};function h(e){var t=e.chat,n=p(function(){var e=[].concat(o("WAWebLabelCollection").LabelCollection.getModelsArray());return o("WAWebListUtils").sortLabels(e),e},[]),a=p(function(){var e=new Set(t.labels||[]),r={};return n.forEach(function(t){r[t.id]=e.has(t.id)}),r},[t.labels,n]),i=f(a),l=i[0],s=i[1],u=o("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===o("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE.true,h=_(a),y=_(l),C=_(new Set);m(function(){y.current=l},[l]),m(function(){var e=h.current,n=C.current;return function(){var r=[],a=new Set([].concat(Object.keys(e),Object.keys(y.current)));if(a.forEach(function(t){var n=e[t]||!1,o=y.current[t]||!1;n!==o&&r.push({id:t,type:o?"add":"remove"})}),r.length>0&&o("WAWebLabelCollection").LabelCollection.addOrRemoveLabels(r,[t]),n.size>0){var i=Array.from(n);o("WAWebSmbMarkAsXLabelAction").logLabelSignalForModels([t],i,u),o("WAWebSmb3pdConversionSignalAction").log3pdConversionSignalForChatsOrMessages([t],i,u),o("WAWebCustomLabels3pdSignalUtils").processCustomLabels3pdSignals(i,[t],u)}}},[t,u]);var b=d(function(e){var n=l[e]||!1,r=!n;s(function(t){var n;return babelHelpers.extends({},t,(n={},n[e]=r,n))});var a=[{id:e,type:r?"add":"remove"}];o("WAWebLabelCollection").LabelCollection.addOrRemoveLabelsMD(a,[t]);var i=new(o("WAWebLabelEventWamEvent")).LabelEventWamEvent({labelOperation:r?o("WAWebWamEnumLabelOperations").LABEL_OPERATIONS.ADD:o("WAWebWamEnumLabelOperations").LABEL_OPERATIONS.DELETE,labelTarget:o("WAWebWamEnumLabelTargets").LABEL_TARGETS.CONTACT,labelOperationEntryPoint:"chat_header"});i.commit(),r?C.current.add(e):C.current.delete(e)},[l,t]),v=n.map(function(e){var t=l[e.id]||!1;return c.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(){return b(e.id),!1},children:c.jsxs("div",{className:"x6s0dn4 x9f619 x78zum5 x193iq5w x6ikm8r x10wlt62 x16ovd2e xde1mab x12xbjc7 x1iw51ew",children:[c.jsx("div",{className:"x2i0jwv x6ikm8r x10wlt62 x1jchvi3 xjb2p0i xo1l8bm x17mssa0 x1ic7a3i xav9cv8",children:c.jsx(o("WAWebLabels.react").Labels,{labels:[e.id],showName:!0,theme:"label-filter",iconXstyle:g.labelIcon})}),c.jsx("div",{className:"x1uvdrpn",children:c.jsx(o("WAWebCheckBox.react").CheckBox,{checked:t,onChange:r("WAWebNoop")})})]})},"label_item_"+e.id)});return c.jsx("div",{className:"xuyqlj2 x1odjw0f",children:v})}h.displayName=h.name+" [from "+i.id+"]",l.WAWebLabelsDropdown=h}),98);
__d("WAWebNewsletterChatMenuDropdown.react",["fbt","WAWebCheckRefreshedIcon.react","WAWebCloseCircleRefreshedIcon.react","WAWebCmd","WAWebDrawerManager","WAWebDropdown.react","WAWebDropdownItem.react","WAWebDropdownItemSeparator.react","WAWebExitRefreshedIcon.react","WAWebInfoFlowLoadable","WAWebInfoFlowStep","WAWebInfoRefreshedIcon.react","WAWebModalManager","WAWebNewsletterMembershipUtil","WAWebReportNewsletterPopup.react","WAWebSettingsRefreshedIcon.react","WAWebSpamConstants","WAWebStateUtils","WAWebThumbsDownRefreshedIcon.react","WAWebUnfollowNewsletterConfirmationModal.react","WAWebWamEnumChannelEventSurface","react"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.useCallback,p=c.useRef;function _(e){var t,n,a,i=e.chat,l=e.onSelectMessages,u=e.toContextMenuManager,c=p(null),_=i.newsletterMetadata,f=m(function(){o("WAWebModalManager").ModalManager.open(d.jsx(r("WAWebReportNewsletterPopup.react"),{chat:i,spamFlow:o("WAWebSpamConstants").SpamFlow.OverflowMenuReport}))},[i]),g=m(function(){o("WAWebCmd").Cmd.chatInfoDrawer(i)},[i]),h=m(function(){o("WAWebCmd").Cmd.closeChat(i)},[i]),y=m(function(){o("WAWebModalManager").ModalManager.open(d.jsx(o("WAWebUnfollowNewsletterConfirmationModal.react").UnfollowNewsletterConfirmationModal,{chat:o("WAWebStateUtils").unproxy(i),loggingOptions:{eventSurface:o("WAWebWamEnumChannelEventSurface").CHANNEL_EVENT_SURFACE.CHANNEL_THREAD}}))},[i]),C=m(function(){o("WAWebDrawerManager").DrawerManager.openDrawerRight(d.jsx(o("WAWebInfoFlowLoadable").InfoFlowLoadable,{chat:i,initialStep:o("WAWebInfoFlowStep").InfoFlowStep.NewsletterSettings}))},[i]),b=o("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(i==null?void 0:i.newsletterMetadata)&&!((t=i.newsletterMetadata)!=null&&t.isSuspendedOrTerminated)?d.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:C,testid:void 0,icon:d.jsx(o("WAWebSettingsRefreshedIcon.react").SettingsRefreshedIcon,{}),children:s._(/*BTDS*/"Channel settings")},"newsletter-overflow-menu-newsletter-settings"):null,v=(n=i.newsletterMetadata)!=null&&n.isSuspendedOrTerminated?null:d.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:l,icon:d.jsx(o("WAWebCheckRefreshedIcon.react").CheckRefreshedIcon,{}),children:s._(/*BTDS*/"Select updates")},"newsletter-overflow-menu-select-messages"),S=(a=i.newsletterMetadata)!=null&&a.isSuspendedOrTerminated?null:d.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:f,testid:void 0,icon:d.jsx(o("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}),children:s._(/*BTDS*/"Report")},"newsletter-overflow-menu-report"),R=[d.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:g,testid:void 0,icon:d.jsx(o("WAWebInfoRefreshedIcon.react").InfoRefreshedIcon,{}),children:s._(/*BTDS*/"Channel info")},"newsletter-overflow-menu-newsletter-info"),b,v,d.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:h,testid:void 0,icon:d.jsx(o("WAWebCloseCircleRefreshedIcon.react").CloseCircleRefreshedIcon,{}),children:s._(/*BTDS*/"Close channel")},"newsletter-overflow-menu-close-channel"),d.jsx(o("WAWebDropdownItemSeparator.react").DropdownItemSeparator,{},"newsletter-overflow-menu-separator"),S];return o("WAWebNewsletterMembershipUtil").iAmSubscriber(_)&&R.push(d.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:y,testid:void 0,icon:d.jsx(o("WAWebExitRefreshedIcon.react").ExitRefreshedIcon,{}),theme:o("WAWebDropdownItem.react").DropdownItemThemeType.Negative,children:s._(/*BTDS*/"Unfollow")},"newsletter-overflow-menu-unfollow")),u!=null?d.jsx("div",{ref:c,"data-testid":void 0,children:R}):d.jsx(o("WAWebDropdown.react").Dropdown,{ref:function(t){c.current=t},type:o("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:o("WAWebDropdown.react").DirX.LEFT,testid:void 0,children:R},"NewsletterMenuDropdown")}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),226);
__d("WAWebNewsletterSubscribeButton.react",["fbt","WAWebButton.react","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t=e.isLoading,n=e.onClick;return u.jsx(o("WAWebButton.react").WAWebButtonPrimary,{testid:void 0,onClick:n,spinner:t,disabled:t,children:s._(/*BTDS*/"Follow")})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),226);
__d("WAWebNewsletterConversationPanelHeader.react",["fbt","Promise","WAWebChatGetters","WAWebCommonNewsletterEnums","WAWebCommonNewsletterStrings","WAWebDrawerManager","WAWebFollowNewsletter","WAWebFrontendChatGetters","WAWebInfoFlowLoadable","WAWebInfoFlowStep","WAWebKeyboardTabUtils","WAWebLinkIcon.react","WAWebMenuBar.react","WAWebModalManager","WAWebMuteNotificationsRefreshedIcon.react","WAWebNewsletterDirectorySearchAction","WAWebNewsletterGatingUtils","WAWebNewsletterMembershipUtil","WAWebNewsletterModelUtils","WAWebNewsletterSubscribeButton.react","WAWebNewsletterToggleMuteStateAction","WAWebSpinner.react","WAWebStateUtils","WAWebTabOrder","WAWebUnfollowNewsletterConfirmationModal.react","WAWebUnmuteNotificationsRefreshedIcon.react","WAWebWamEnumChannelEventSurface","WAWebWamEnumChannelLinkShareEntryPoint","WDSButton.react","asyncToGeneratorRuntime","react","useWAWebChatValues","useWAWebModelValues","useWAWebOnUnmount","useWAWebPrevious"],(function(t,n,r,o,a,i,l,s){var e,u,c,d=c||(c=o("react")),m=u||(u=r("react")),p=d.useCallback,_=d.useState;function f(t){var a=t.chat,i=o("useWAWebChatValues").useChatValues(a.id,[o("WAWebChatGetters").getIsNewsletter,o("WAWebFrontendChatGetters").getNewsletterMetadata,o("WAWebChatGetters").getMuteExpiration]),l=i[0],u=i[1],c=i[2];r("useWAWebOnUnmount")(function(){d==null||d.resetRecentlyFollowedFrom()});var d=o("useWAWebModelValues").useOptionalModelValues(a.newsletterMetadata,["membershipType","suspended","terminated","isSuspendedOrTerminated","canBeMuted"]),f=_(!1),h=f[0],y=f[1],C=_(!1),b=C[0],v=C[1],S=r("useWAWebPrevious")(c);S!==c&&b&&v(!1);var R=p(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){y(!0),yield(e||(e=n("Promise"))).allSettled([o("WAWebFollowNewsletter").followNewsletter(o("WAWebStateUtils").unproxy(a),{eventSurface:o("WAWebWamEnumChannelEventSurface").CHANNEL_EVENT_SURFACE.CHANNEL_THREAD}),o("WAWebNewsletterGatingUtils").isSimilarNewsletterInThreadEnabled()&&o("WAWebNewsletterDirectorySearchAction").getSimilarNewslettersAction(o("WAWebStateUtils").unproxy(a))]),y(!1)}),[a]),L=p(function(){o("WAWebModalManager").ModalManager.open(m.jsx(o("WAWebUnfollowNewsletterConfirmationModal.react").UnfollowNewsletterConfirmationModal,{chat:o("WAWebStateUtils").unproxy(a),loggingOptions:{eventSurface:o("WAWebWamEnumChannelEventSurface").CHANNEL_EVENT_SURFACE.CHANNEL_THREAD}}))},[a]),E=p(function(){o("WAWebDrawerManager").DrawerManager.existsDrawerMid().then(function(e){e||o("WAWebDrawerManager").DrawerManager.openDrawerRight(m.jsx(o("WAWebInfoFlowLoadable").InfoFlowLoadable,{chat:a,initialStep:o("WAWebInfoFlowStep").InfoFlowStep.NewsletterLink,newsletterLinkShareScreenEntryPoint:o("WAWebWamEnumChannelLinkShareEntryPoint").CHANNEL_LINK_SHARE_ENTRY_POINT.CHANNEL_THREAD}),{transition:"slide-left",focusType:o("WAWebKeyboardTabUtils").FocusType.TABBABLE,noFocus:!0})})},[a]),k=p(function(){v(!0),o("WAWebNewsletterToggleMuteStateAction").muteNewsletterAction(a.id,{eventSurface:o("WAWebWamEnumChannelEventSurface").CHANNEL_EVENT_SURFACE.CHANNEL_THREAD}).catch(function(){return v(!1)})},[a]),I=p(function(){v(!0),o("WAWebNewsletterToggleMuteStateAction").unmuteNewsletterAction(a.id,{eventSurface:o("WAWebWamEnumChannelEventSurface").CHANNEL_EVENT_SURFACE.CHANNEL_THREAD}).catch(function(){return v(!1)})},[a]);if(!l||d==null)return null;if(d.isSuspendedOrTerminated)return d.membershipType===o("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber?m.jsx(r("WDSButton.react"),{label:s._(/*BTDS*/"Unfollow"),onPress:L,testid:void 0}):null;var T=null;d.canBeMuted&&(T=o("WAWebNewsletterModelUtils").isMuted(c)?m.jsx(o("WAWebMenuBar.react").MenuBarItem,{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:b?m.jsx(g,{}):m.jsx(o("WAWebMuteNotificationsRefreshedIcon.react").MuteNotificationsRefreshedIcon,{}),onClick:I,disabled:b,title:s._(/*BTDS*/"Unmute")}):m.jsx(o("WAWebMenuBar.react").MenuBarItem,{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:b?m.jsx(g,{}):m.jsx(o("WAWebUnmuteNotificationsRefreshedIcon.react").UnmuteNotificationsRefreshedIcon,{}),onClick:k,disabled:b,title:s._(/*BTDS*/"Mute")}));var D=o("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(d)?m.jsx(o("WAWebMenuBar.react").MenuBarItem,{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:m.jsx(o("WAWebLinkIcon.react").LinkIcon,{}),onClick:E,title:o("WAWebCommonNewsletterStrings").getShareText()}):null,x=o("WAWebNewsletterMembershipUtil").iAmGuest(d)?m.jsx(r("WAWebNewsletterSubscribeButton.react"),{onClick:R,isLoading:h}):null;return m.jsxs(m.Fragment,{children:[D,T,x]})}f.displayName=f.name+" [from "+i.id+"]";function g(){return m.jsx(o("WAWebSpinner.react").Spinner,{color:"wdsSecondaryLighter",size:20})}g.displayName=g.name+" [from "+i.id+"]",l.default=f}),226);
__d("WAWebSubgroupSwitcherButton.react",["fbt","WAWebCommunityFeatureUsageWamEvent","WAWebCommunityGroupJourneyEventImpl","WAWebCommunitySubgroupSwitcher.react","WAWebDetailImage.react","WAWebFlex.react","WAWebModalManager","WAWebTabOrder","WAWebUISpacing","WAWebUnstyledButton.react","WAWebWamEnumChatFilterActionTypes","WAWebWamEnumCommunityFeatureUiActionTakenType","WAWebWamEnumCommunityUiFeatureType","WAWebWamEnumSurfaceType","WDSIconIcArrowDropDown.react","WDSTooltip.react","react","stylex","useWAWebABPropConfigValue"],(function(t,n,r,o,a,i,l,s){var e,u,c=e||(e=r("react")),d={parentGroupImage:{height:"x1fgtraw",width:"xgd8bvy",$$css:!0},menuBarBtnContainer:{display:"x78zum5",position:"x1n2onr6",height:"x5yr21d",borderStartStartRadius:"x1ekkm8c",borderStartEndRadius:"x1143rjc",borderEndEndRadius:"xum4auv",borderEndStartRadius:"xj21bgg",transitionProperty:"x15406qy",transitionDuration:"x1d8287x",transitionTimingFunction:"xwji4o3","@media screen and (max-width: 720px)_paddingTop":"xj8bxqt","@media screen and (max-width: 720px)_paddingInlineEnd":"xe3rdy5","@media screen and (max-width: 720px)_paddingBottom":"xpbnuc5","@media screen and (max-width: 720px)_paddingInlineStart":"x1gzssx3","@media screen and (max-width: 720px)_marginTop":"x86at4b","@media screen and (max-width: 720px)_marginInlineEnd":"x1ua388o","@media screen and (max-width: 720px)_marginBottom":"x1ad89wd","@media screen and (max-width: 720px)_marginInlineStart":"x1rs47hk",$$css:!0},hoverBg:{":hover_backgroundColor":"x17gydlx",$$css:!0},iconGroup:{color:"x14ug900",$$css:!0}};function m(e){var t=e.parentGroupId,n=e.size;return c.jsx(o("WAWebDetailImage.react").DetailImage,{id:t,size:n,shape:o("WAWebDetailImage.react").DetailImageShape.Squircle,xstyle:d.parentGroupImage})}m.displayName=m.name+" [from "+i.id+"]";function p(e){var t,n=e.chat,a=(t=n.groupMetadata)==null?void 0:t.parentGroup,i=o("useWAWebABPropConfigValue").useABPropConfigValue("wds_web_tooltip");if(a==null)return null;var l=function(t){t==null||t.stopPropagation(),new(o("WAWebCommunityFeatureUsageWamEvent")).CommunityFeatureUsageWamEvent({communityId:a.toString(),communityUiAction:o("WAWebWamEnumCommunityFeatureUiActionTakenType").COMMUNITY_FEATURE_UI_ACTION_TAKEN_TYPE.ENTRY,communityUiFeature:o("WAWebWamEnumCommunityUiFeatureType").COMMUNITY_UI_FEATURE_TYPE.SUBGROUP_SWITCH}).commit(),new(o("WAWebCommunityGroupJourneyEventImpl")).CommunityGroupJourneyEvent({action:o("WAWebWamEnumChatFilterActionTypes").CHAT_FILTER_ACTION_TYPES.SUBGROUP_SWITCHER_CLICK,surface:o("WAWebWamEnumSurfaceType").SURFACE_TYPE.CHAT,chat:n}).commit(),o("WAWebModalManager").ModalManager.open(c.jsx(r("WAWebCommunitySubgroupSwitcher.react"),{chat:n}))},p=c.jsx(m,{parentGroupId:a,size:28}),_=s._(/*BTDS*/"Subgroup switcher"),f=c.jsx("div",babelHelpers.extends({},(u||(u=r("stylex"))).props(d.menuBarBtnContainer,o("WAWebUISpacing").uiMargin.start10,o("WAWebUISpacing").uiPadding.horiz10,o("WAWebUISpacing").uiPadding.top8,o("WAWebUISpacing").uiPadding.bottom5,d.hoverBg,o("WAWebUISpacing").uiPadding.start12,o("WAWebUISpacing").uiPadding.end6,o("WAWebUISpacing").uiPadding.top6,o("WAWebUISpacing").uiPadding.bottom6),{children:c.jsx(r("WAWebUnstyledButton.react"),{testid:void 0,title:i?void 0:_,"aria-label":_,dataTab:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,onClick:l,children:c.jsxs(o("WAWebFlex.react").FlexRow,{align:"center",justify:"center",xstyle:d.iconGroup,children:[p,c.jsx(r("WDSIconIcArrowDropDown.react"),{xstyle:o("WAWebUISpacing").uiMargin.start4,width:20,height:20})]})})}));return i?c.jsx(r("WDSTooltip.react"),{label:_,children:f}):f}p.displayName=p.name+" [from "+i.id+"]",l.SubgroupSwitcherButton=p}),226);
__d("WAWebHeader.react",["fbt","WAWebActions","WAWebBizGatingUtils","WAWebBlockContactUtils","WAWebBlockContants","WAWebBotGating","WAWebBroadcastMenuDropdown.react","WAWebBusinessProfileCollection","WAWebCallButtonsSurface","WAWebChatAssignmentNux.react","WAWebChatAssignmentUtils","WAWebChatGetters","WAWebChatGroupUtils","WAWebChatSearchDrawer.react","WAWebCmd","WAWebCommerceButton.react","WAWebConnModel","WAWebContactGetters","WAWebContactMenuDropdown.react","WAWebConversationMenus","WAWebConversationPanelStyleUtils","WAWebDesktopUpsellCallingUnavailable.react","WAWebDesktopUpsellPlatformAwareHooks","WAWebDetailImage.react","WAWebDrawerManager","WAWebDropdown.react","WAWebEnvironment","WAWebErrorBoundary.react","WAWebFrontendChatGetters","WAWebFrontendContactGetters","WAWebGroupChatImage.react","WAWebGroupMenuDropdown.react","WAWebGroupSubtitle.react","WAWebGroupType","WAWebHostedGroupUtils","WAWebIcLabelFilledIcon.react","WAWebInfoFlowLoadable","WAWebKeyboardTabUtils","WAWebL10N","WAWebLabelChatHeaderButton.react","WAWebLabelCollection","WAWebLabelOutlineIcon.react","WAWebLabelStackIcon.react","WAWebLabels.react","WAWebLabelsDropdown.react","WAWebMenuBar.react","WAWebMessageLogQplEvents","WAWebMmSignalSharingExpirationWindowUtils","WAWebMmSignalSharingGatingUtils","WAWebMmSignalSharingTos","WAWebMobilePlatforms","WAWebMoreRefreshedIcon.react","WAWebName.react","WAWebNewsletterChatHeaderSubtitle.react","WAWebNewsletterChatMenuDropdown.react","WAWebNewsletterConversationPanelHeader.react","WAWebNewsletterGatingUtils","WAWebPREGatingUtils","WAWebSearchRefreshedIcon.react","WAWebSingleChevronInCircleIcon.react","WAWebStackedCirclesImage.react","WAWebStateUtils","WAWebStylesEnv","WAWebSubgroupSwitcherButton.react","WAWebTabOrder","WAWebThemeContext","WAWebTos","WAWebUISpacing","WAWebUseBusinessProfile.react","WAWebUseIsKeyboardUser","WAWebUserSubtitle.react","WAWebVoipCallButtonsLoadable","WAWebVoipGatingUtils","WAWebWamEnumCallFromUi","WAWebWamEnumLobbyEntryPointType","WAWebWamEnumProfileEntryPoint","WDSFocusStateStyles","WDSMenuBarItem.react","WDSTooltip.react","asyncToGeneratorRuntime","nullthrows","react","stylex","useWAWebABPropConfigValue","useWAWebChatValues","useWAWebContactValues","useWAWebForceUpdate","useWAWebListener","useWAWebModelValues","useWAWebStaticButtonA11y","useWAWebUIM","useWAWebUnmountSignal"],(function(t,n,r,o,a,i,l,s){var e,u,c,d=c||(c=o("react")),m=e||(e=r("react")),p=d.useEffect,_=d.useRef,f=d.useState,g={chatControls:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",flexBasis:"xdl72j9",$$css:!0},chatHeader:{position:"x1n2onr6",boxSizing:"x9f619",display:"x78zum5",alignItems:"x6s0dn4",width:"xh8yej3",height:"x7j6532",backgroundColor:"x1h3rtpe","::after_position":"x1j6awrg","::after_bottom":"x1te75w5","::after_insetInlineStart":"x1iygr5g","::after_width":"x4eaejv","::after_height":"xcock1l","::after_content":"x1s928wv","::after_backgroundColor":"xl9llhp","::after_borderBottomWidth":"x1qj619r","::after_borderBottomStyle":"x1r9ni5o","::after_borderBottomColor":"xb1pvdl",$$css:!0},chatHeaderDarkOverride:{boxShadow:"xu306ak","::after_display":"x1h1zc6f",$$css:!0},chatHeaderStylesOverride:{backgroundColor:"x1280gxy",borderInlineStartStyle:"xstzfhl",$$css:!0},chatHeaderMaterial:{"::after_content":"x1s928wv","::after_display":"x1h1zc6f",$$css:!0},chatBody:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",minWidth:"xeuugli",$$css:!0},menuItemContainer:{position:"x1n2onr6",$$css:!0},chevronInCircleIcon:{position:"x10l6tqk",insetInlineEnd:"xo2ifbc",left:null,right:null,bottom:"x1o583il",backgroundColor:"x1280gxy",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",cursor:"x1ypdohk",$$css:!0},singleLabelIcon:{width:"xvy4d1p",height:"xxk0z11",$$css:!0},labelStackIcon:{position:"x10l6tqk",top:"xnfr1j",insetInlineStart:"x1o0tod",left:null,right:null,$$css:!0}};function h(e){return{menu:m.jsx(o("WAWebLabelsDropdown.react").WAWebLabelsDropdown,{chat:e}),type:o("WAWebDropdown.react").MenuType.DropdownMenu,dirX:r("WAWebL10N").isRTL()?o("WAWebDropdown.react").DirX.RIGHT:o("WAWebDropdown.react").DirX.LEFT,dirY:o("WAWebDropdown.react").DirY.BOTTOM,offsetY:5,offsetX:0}}function y(e){var t,n,r,a,i,l=e!=null&&(t=e.groupMetadata)!=null&&t.participants.iAmAdmin()&&(n=e.groupMetadata)!=null&&n.announce?s._(/*BTDS*/"Only admins can send messages"):s._(/*BTDS*/"click here for group info"),u;if(((r=e.groupMetadata)==null?void 0:r.groupType)===o("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP){var c;e!=null&&(c=e.groupMetadata)!=null&&c.participants.iAmAdmin()?u=s._(/*BTDS*/"Only admins can send messages"):u=s._(/*BTDS*/"Announcements")}else if(((a=e.groupMetadata)==null?void 0:a.groupType)===o("WAWebGroupType").GroupType.LINKED_SUBGROUP&&(i=e.groupMetadata)!=null&&i.participants.iAmMember()){var d,m=(d=e.groupMetadata)==null?void 0:d.getParentGroupChat(),p=m==null?void 0:m.contact,_=p!=null?o("WAWebFrontendContactGetters").getFormattedName(p):null;_!=null&&(u=s._(/*BTDS*/"{community}",[s._param("community",_)]))}return u!=null?u:l}function C(e){var t,n=(t=e.groupMetadata)==null?void 0:t.groupType;return n===o("WAWebGroupType").GroupType.COMMUNITY||n===o("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP||n===o("WAWebGroupType").GroupType.LINKED_SUBGROUP||n===o("WAWebGroupType").GroupType.LINKED_GENERAL_GROUP}function b(e,t,n){o("WAWebDrawerManager").DrawerManager.existsDrawerMid().then(function(r){r||(e.contact.isBusiness&&o("WAWebMessageLogQplEvents").qplStartProfileView("Header"),(o("WAWebChatGetters").getIsUser(e)||o("WAWebChatGetters").getIsBroadcast(e)||o("WAWebChatGetters").getIsGroup(e)||o("WAWebChatGetters").getIsNewsletter(e))&&o("WAWebDrawerManager").DrawerManager.openDrawerRight(m.jsx(o("WAWebInfoFlowLoadable").InfoFlowLoadable,{chat:o("WAWebStateUtils").unproxy(e),profileEntryPoint:n,sourceGroupChatOrNewsletter:o("WAWebChatGetters").getIsGroup(e)?e:void 0},"info-"+e.id.toString()),{transition:"slide-left",uim:t,focusType:o("WAWebKeyboardTabUtils").FocusType.TABBABLE}))})}function v(){o("WAWebDrawerManager").DrawerManager.existsDrawerRight().then(function(e){e&&o("WAWebDrawerManager").DrawerManager.closeDrawerRight()})}function S(e){return!o("WAWebMobilePlatforms").isSMB()||!o("WAWebBizGatingUtils").isCTWAChatHeaderLabelEntryPointEnabled()||r("WAWebEnvironment").isGuest||!e.canSend||r("WAWebEnvironment").isWindows&&C(e)?null:r("WAWebEnvironment").isWindows||C(e)?m.jsx(o("WAWebMenuBar.react").MenuBarItem,{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:(function(){var t=e==null?void 0:e.labels;if(!t||t.length===0)return m.jsx(o("WAWebLabelOutlineIcon.react").LabelOutlineIcon,{});if(t.length===1)return m.jsx(o("WAWebLabels.react").Labels,{iconXstyle:g.singleLabelIcon,labels:[t[0]],showName:!1});var n=o("WAWebLabelChatHeaderButton.react").getLabelStackInfo(t),r=n.primaryLabel,a=n.secondaryLabel;return m.jsxs("div",{className:"xxk0z11 x1n2onr6 xvy4d1p",children:[m.jsx(o("WAWebIcLabelFilledIcon.react").IcLabelFilledIcon,{width:24,height:24,style:{color:(r==null?void 0:r.color)!=null?r.color:void 0},xstyle:g.labelStackIcon}),m.jsx(o("WAWebLabelStackIcon.react").LabelStackIcon,{width:24,height:24,style:{color:(a==null?void 0:a.color)!=null?a.color:void 0},xstyle:g.labelStackIcon})]})})(),title:s._(/*BTDS*/"Labels"),dropdownMenu:h(e)}):m.jsx(o("WAWebLabelChatHeaderButton.react").LabelChatHeaderButton,{chat:e})}S.displayName=S.name+" [from "+i.id+"]";function R(e){"use no forget";var t,a,i,l,c,d=e.chat,h=e.onSelectMessages,C=r("useWAWebUIM")(),R=o("useWAWebForceUpdate").useForceUpdateDONOTUSE(),L=_(null),E=_(null),k=d.contact,I=f(function(){return o("WAWebMmSignalSharingTos").isMmSignalSharingDisclosureTosAccepted()}),T=I[0],D=I[1];o("useWAWebListener").useListener(o("WAWebTos").TosManager,"change",function(){if(o("WAWebMmSignalSharingGatingUtils").isMmSignalSharingDisclosureEnabled()){var e=o("WAWebMmSignalSharingTos").isMmSignalSharingDisclosureTosAccepted();T!==e&&D(e)}});var x=o("useWAWebChatValues").useChatValues(d.id,[(i=o("WAWebChatGetters")).getId,(l=o("WAWebFrontendChatGetters")).getFormattedTitle,l.getPresence,i.getIsUser,i.getIsNewsletter,i.getIsGroup,i.getIsBroadcast,l.getGroupMetadata,i.getIsPSA,l.getContact,i.getName,l.getAssignedAgent,l.getIsAssignedToMe,l.getNewsletterMetadata,l.getMmSignalSharingExpirationWindow,i.getCapiThreadControl,l.getAttachMediaContents]),$=x[0],P=x[1],N=x[2],M=x[3],w=x[4],A=x[5],F=x[6],O=x[7],B=x[8],W=x[9],q=x[10],U=x[11],V=x[12],H=x[13],G=x[14],z=x[15],j=x[16],K=r("WAWebUseIsKeyboardUser")(),Q=K.isKeyboardUser,X=o("WAWebThemeContext").useIsDarkTheme(),Y=o("useWAWebABPropConfigValue").useABPropConfigValue("wds_web_button"),J=o("useWAWebModelValues").useModelValues(N.chatstate,["type"]),Z=o("useWAWebContactValues").useContactValues(k.id,[(c=o("WAWebContactGetters")).getIsMe,c.getShowBusinessCheckmarkAsPrimary,c.getShowBusinessCheckmarkAsSecondary,c.getShouldForceBusinessUpdate,c.getShowBiz3pBotVerifiedNameAsSecondary]),ee=Z[0],te=Z[1],ne=Z[2],re=Z[3],oe=Z[4],ae=(t=o("WAWebUseBusinessProfile.react").useBusinessProfile(o("WAWebBotGating").isBizBot3pAvailable()?k.id:null,["isBizBot3p"]))!=null?t:{},ie=ae.isBizBot3p,le=oe&&ie===!0,se=o("useWAWebModelValues").useOptionalModelValues(H,["membershipType","suspended","terminated","isSuspendedOrTerminated"]),ue=r("useWAWebUnmountSignal")(),ce=f(null),de=ce[0],me=ce[1],pe=_(null);p(function(){function e(){return t.apply(this,arguments)}function t(){return t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WAWebBusinessProfileCollection").BusinessProfileCollection.find(k.id),R()}),t.apply(this,arguments)}re&&e()},[]);var _e=f(!0),fe=_e[0],ge=_e[1],he=function(t){o("WAWebDrawerManager").DrawerManager.existsDrawerMid().then(function(e){e&&(t==null||t.preventDefault())})},ye=function(t){t==null||t.preventDefault(),o("WAWebDrawerManager").DrawerManager.existsDrawerMid().then(function(e){e||o("WAWebDrawerManager").DrawerManager.openDrawerRight(m.jsx(r("WAWebChatSearchDrawer.react"),{chat:o("WAWebStateUtils").unproxy(d)},"chat-search-"+$.toString()),{transition:"slide-left",uim:C,focusType:o("WAWebKeyboardTabUtils").FocusType.TABBABLE})})},Ce=function(){return!!(o("WAWebHostedGroupUtils").isWAHostedGroupEnabled()&&(O==null?void 0:O.hasCapi)===!0)},be=function(t){var e;t((e=L.current)==null?void 0:e.getBoundingClientRect())},ve=function(){b(d,C,o("WAWebWamEnumProfileEntryPoint").PROFILE_ENTRY_POINT.CHAT_HEADER)},Se=r("useWAWebStaticButtonA11y")(ve),Re=Se[0],Le=Se[1];o("useWAWebListener").useListener(k.businessProfile,["change:profileOptions","change:catalogStatus"],R),o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"get_conversation_header_offset",be),o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"update_chatlist_selection",function(){return v()}),o("useWAWebListener").useListener(d,"change:labels",R),o("useWAWebListener").useListener(o("WAWebLabelCollection").LabelCollection,"all",R),o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"open_current_chat_info",function(){b(d,C,o("WAWebWamEnumProfileEntryPoint").PROFILE_ENTRY_POINT.CHAT_HEADER)}),o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"block_current_chat",function(){o("WAWebBlockContactUtils").handleBlock(d,o("WAWebBlockContants").BlockEntryPoint.OverflowMenuBlock)}),o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"clear_current_chat_conversation_history",function(){o("WAWebCmd").Cmd.clearChat(d)}),o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"exit_current_group",function(){A&&o("WAWebConversationMenus").handleDeleteOrExitChat(d)});var Ee=o("WAWebDesktopUpsellPlatformAwareHooks").useWAWebDesktopUpsellAbPropCheck("call_btn"),ke=o("WAWebDesktopUpsellPlatformAwareHooks").useWAWebDesktopUpsellPlatformCheck(),Ie=Ee&&ke,Te=!!j,De=o("useWAWebModelValues").useModelValues(o("WAWebConnModel").Conn,["pushname"]),xe=De.pushname,$e=f(null),Pe=$e[0],Ne=$e[1];p(function(){if(o("WAWebChatAssignmentUtils").canAssignChat(d)&&U!=null){var e=V?s._(/*BTDS*/"Assigned to you"):s._(/*BTDS*/"Assigned to {agentName}",[s._param("agentName",U.name)]);Ne(e)}},[xe,d,U,V]);var Me,we;if(M)Me=m.jsx(r("WAWebContactMenuDropdown.react"),{chat:d,onSelectMessages:h,toContextMenuManager:!0,enableChatThreadLogging:!0}),we=m.jsx(r("WAWebUserSubtitle.react"),{contact:k,presence:N,chatstate:N.chatstate,location:"title",showBusinessCheckmark:ne,showVerifiedName:le,assignmentSubtitle:Pe,chatId:$});else if(F)Me=m.jsx(r("WAWebBroadcastMenuDropdown.react"),{chat:o("WAWebStateUtils").unproxy(d),onSelectMessages:h,toContextMenuManager:!0}),we=null;else if(A){var Ae=r("nullthrows")(O);Me=m.jsx(r("WAWebGroupMenuDropdown.react"),{chat:o("WAWebStateUtils").unproxy(d),onSelectMessages:h,toContextMenuManager:!0}),Ae.isSuspendedOrTerminated()?we=null:!Ae.isUnnamed||J.type==="typing"?we=m.jsx(o("WAWebErrorBoundary.react").ErrorBoundary,{name:"group-subtitle",children:m.jsx(r("WAWebGroupSubtitle.react"),{chatstate:N.chatstate,groupMetadata:Ae,presence:N,placeholder:y(d),location:"title",assignmentSubtitle:Pe,chatId:$})}):we=null}else w&&(Me=m.jsx(r("WAWebNewsletterChatMenuDropdown.react"),{chat:d,toContextMenuManager:!0,onSelectMessages:h}),we=(se==null?void 0:se.suspended)===!0?null:m.jsx(r("WAWebNewsletterChatHeaderSubtitle.react"),{newsletterMetadata:se}));var Fe;Me&&(Fe={menu:Me,anchor:de,anchorRef:pe,autoFocus:Q,dirX:r("WAWebL10N").isRTL()?o("WAWebDropdown.react").DirX.RIGHT:o("WAWebDropdown.react").DirX.LEFT,dirY:o("WAWebDropdown.react").DirY.BOTTOM,offsetY:5,type:o("WAWebDropdown.react").MenuType.DropdownMenu});var Oe=null,Be=A&&((O==null?void 0:O.participants.iAmMember())!==!0||(O==null?void 0:O.announce)===!0&&!((a=O==null?void 0:O.participants.iAmAdmin())!=null&&a));if((O==null?void 0:O.groupType)!==o("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&!Ce()&&!ee&&!w&&!$.isBot()&&!k.isEnterprise&&!B&&!Be){var We=o("WAWebVoipGatingUtils").isCallingEnabled()&&(!A||o("WAWebVoipGatingUtils").isGroupCallingEnabled());We?Oe=m.jsx(o("WAWebVoipCallButtonsLoadable").WAWebCallButtonsLoadable,{callFromUI:A?o("WAWebWamEnumCallFromUi").CALL_FROM_UI.GROUP_CHAT_DIRECT:o("WAWebWamEnumCallFromUi").CALL_FROM_UI.CONVERSATION,lobbyEntryPoint:o("WAWebWamEnumLobbyEntryPointType").LOBBY_ENTRY_POINT_TYPE.NOT_OPENED,surface:o("WAWebCallButtonsSurface").WAWebCallButtonsSurface.ChatHeader,chat:d}):Ie===!0&&(Oe=m.jsx(r("WAWebDesktopUpsellCallingUnavailable.react"),{isGroupCall:A}))}var qe=(O==null?void 0:O.parentGroup)!=null&&O.participants.iAmMember(),Ue=qe?m.jsx(o("WAWebSubgroupSwitcherButton.react").SubgroupSwitcherButton,{chat:d}):null,Ve;w===!1&&o("WAWebChatGroupUtils").isSuspendedGroup(d)===!1&&(Ve=Y?m.jsx(r("WDSMenuBarItem.react"),{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:o("WAWebSearchRefreshedIcon.react").SearchRefreshedIcon,title:s._(/*BTDS*/"Search"),onClick:ye,marginInlineXstyle:o("WAWebUISpacing").uiMargin.start10,disabled:Te}):m.jsx(o("WAWebMenuBar.react").MenuBarItem,{tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,testid:void 0,icon:m.jsx(o("WAWebSearchRefreshedIcon.react").SearchRefreshedIcon,{}),title:s._(/*BTDS*/"Search\u2026"),onClick:ye,disabled:Te})),B&&(we=m.jsx(r("WAWebUserSubtitle.react"),{contact:k,presence:N,chatstate:N.chatstate,location:"title",showBusinessCheckmark:ne,chatId:$}));var He;if(fe&&(He=m.jsx(r("WAWebChatAssignmentNux.react"),{targetRef:E,chat:d})),ue.aborted)return null;var Ge=Y?m.jsx(r("WDSMenuBarItem.react"),{ref:E,tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,icon:o("WAWebMoreRefreshedIcon.react").MoreRefreshedIcon,title:s._(/*BTDS*/"Menu"),onClick:function(t){ge(!1),he(t)},testid:void 0,dropdownMenu:Fe,disabled:Te}):m.jsx(o("WAWebMenuBar.react").MenuBarItem,{ref:E,tabOrder:o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,icon:m.jsx(o("WAWebMoreRefreshedIcon.react").MoreRefreshedIcon,{}),title:s._(/*BTDS*/"Menu"),onClick:function(t){ge(!1),he(t)},testid:void 0,dropdownMenu:Fe,disabled:Te});return m.jsxs("header",babelHelpers.extends({ref:L},(u||(u=r("stylex"))).props(g.chatHeader,r("WAWebConversationPanelStyleUtils").sharedLayer,o("WAWebUISpacing").uiPadding.vert10,o("WAWebUISpacing").uiPadding.horiz16,X&&g.chatHeaderDarkOverride,g.chatHeaderMaterial,g.chatHeaderStylesOverride,r("WAWebConversationPanelStyleUtils").sharedShadow),{"data-testid":void 0,children:[m.jsx("div",{className:"x1n2onr6 x1c4vz4f x2lah0s xdl72j9 x1cbfl22 x1y332i5",onClick:function(){return b(d,C,o("WAWebWamEnumProfileEntryPoint").PROFILE_ENTRY_POINT.CHAT_HEADER)},title:s._(/*BTDS*/"Profile details"),role:B?null:"button",children:m.jsx(r("WAWebGroupChatImage.react"),{chat:d,theme:o("WAWebStackedCirclesImage.react").SubgroupImageTheme.CHAT_HEADER,regularChatImage:m.jsxs(m.Fragment,{children:[m.jsx(o("WAWebDetailImage.react").DetailImage,{id:$,size:40,ephemeralIcon:"conversation-header",hiddenSubgroupIcon:"conversation-header",enableAdsDataSharingIcon:!0,enableBizAiDataSharingIcon:!0}),o("WAWebMmSignalSharingExpirationWindowUtils").isMmSignalSharingUserDisclosedInCollectionWindow(G)&&m.jsx(o("WAWebSingleChevronInCircleIcon.react").SingleChevronInCircleIcon,{iconXstyle:g.chevronInCircleIcon})]}),showCommunityInfo:!0})}),m.jsxs("div",babelHelpers.extends({},u.props(g.chatBody,o("WDSFocusStateStyles").WDSFocusStateStyles.genericFocus),Le,{ref:Re,"data-testid":void 0,"data-tab":o("WAWebTabOrder").TAB_ORDER.CHAT_HEADER_BUTTON,children:[m.jsx("div",{className:"x78zum5 x1cy8zhl x1y332i5 xggjnk3 x1yc453h",children:m.jsx("div",babelHelpers.extends({},{0:{className:"x78zum5 x1q0g3np x1iyjqo2 x6ikm8r x10wlt62 x1jchvi3 x1fcty0u xdod15v x14ug900 x1yc453h xlyipyv xuxw1ft xh8yej3"},2:{className:"x78zum5 x1q0g3np x1iyjqo2 x6ikm8r x10wlt62 x1jchvi3 xdod15v x14ug900 x1yc453h xlyipyv xuxw1ft xh8yej3 x1s688f"},1:{className:"x78zum5 x1q0g3np x6ikm8r x10wlt62 x1jchvi3 x1fcty0u xdod15v x14ug900 x1yc453h xlyipyv xuxw1ft xh8yej3 x1c4vz4f x2lah0s xdl72j9"},3:{className:"x78zum5 x1q0g3np x6ikm8r x10wlt62 x1jchvi3 xdod15v x14ug900 x1yc453h xlyipyv xuxw1ft xh8yej3 x1s688f x1c4vz4f x2lah0s xdl72j9"}}[!!X<<1|!!o("WAWebStylesEnv").hasEmoji<<0],{children:m.jsx(o("WAWebName.react").Name,{chat:d,ellipsify:!0,showBusinessCheckmark:te,testid:void 0,showMessageYourselfName:ee,truncateName:!0})}))}),we]})),m.jsx("div",babelHelpers.extends({},u.props(g.chatControls,o("WAWebUISpacing").uiMargin.start20),{children:m.jsxs(o("WAWebMenuBar.react").MenuBar,{children:[Ue,Oe,m.jsx(o("WAWebCommerceButton.react").CommerceButton,{chat:d,disabled:Te}),o("WAWebNewsletterGatingUtils").isNewsletterEnabled()&&m.jsx(r("WAWebNewsletterConversationPanelHeader.react"),{chat:d}),m.jsx(r("WDSTooltip.react"),{label:s._(/*BTDS*/"Label chat"),shortcut:o("WAWebActions").Action.LABEL_CHAT,children:S(d)}),Ve,Me!=null&&m.jsx("div",babelHelpers.extends({},(u||(u=r("stylex"))).props(g.menuItemContainer,o("WAWebUISpacing").uiMargin.start10),{ref:o("WAWebPREGatingUtils").isPREChatMovingEnabled()?pe:me,children:Ge}))]},"conversation-header")})),He]}))}R.displayName=R.name+" [from "+i.id+"]",l.createLabelsDropdownMenu=h,l.isCommunityRelatedChat=C,l.openInfoPanel=b,l.ConversationHeader=R}),226);
__d("WAWebBusinessProfileBridgeApi",["WALogger","WAWebBizGatingUtils","WAWebCatalogCollection"],(function(t,n,r,o,a,i,l){var e,s={updatedCommerceExperience:function(n){var t=n.wid,r=o("WAWebCatalogCollection").CatalogCollection.get(t);r&&o("WAWebBizGatingUtils").isCatalogVariantsViewingEnabled()&&(o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Catalog] Catalog model is being reset due to businessProfile commerce experience update"]))),o("WAWebCatalogCollection").CatalogCollection.remove(r.id))}};l.BusinessProfileBridgeApi=s}),98);
__d("WAWebBusinessProfileCopyPnDataToLidRows",["WALogger","WAWebBizGatingUtils","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(!(!o("WAWebBizGatingUtils").isLidMigrationForBusinessProfileEnabled()||r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").UserPrefs.BusinessProfileLidTableMigrationComplete))){var a=!1;yield o("WAWebModelStorageUtils").getStorage().lock(["business-profile"],(function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=n[0];try{o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["copyBusinessProfilePnDataToLidRows: start migration"])));var i=t.map(function(e){var t,n,r,a,i;if(e==null)return null;var l=o("WAWebWidFactory").createUserWidOrThrow(e==null?void 0:e.id);if(l.isLid())return null;var s=o("WAWebLidMigrationUtils").toPn(l),u=o("WAWebLidMigrationUtils").toLid(l);return u==null||(s==null?void 0:s.user)==null?null:{id:u.toString(),commandsDescription:(t=e.commandsDescription)!=null?t:e.commandsDescription,commands:(n=e.commands)!=null?n:e.commands,prompts:(r=e.prompts)!=null?r:e.prompts,automatedType:(a=e.automatedType)!=null?a:e.automatedType,welcomeMsgProtocolMode:(i=e.welcomeMsgProtocolMode)!=null?i:e.welcomeMsgProtocolMode}}).filter(Boolean);yield r.bulkCreateOrMerge(i),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["copyBusinessProfilePnDataToLidRows: end migration"]))),a=!0}catch(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["copyBusinessProfilePnDataToLidRows: error ",""])),e).sendLogs("business-profile-lid-migration"),a=!1}});return function(e){return r.apply(this,arguments)}})()),r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.BusinessProfileLidTableMigrationComplete,a)}}),d.apply(this,arguments)}l.copyBusinessProfilePnDataToLidRows=c}),98);
__d("WAWebCTWADetectedOutcomeOnboardingStatusUpdateAction",["WAWebUserPrefsGeneral"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("WAWebUserPrefsGeneral").setDetectedOutcomeOnboardingStatus(e)}l.ctwaDetectedOutcomeOnboardingStatusUpdateAction=e}),98);
__d("WAWebQuickPromotionAction",["WAWebQuickPromotionCollection"],(function(t,n,r,o,a,i,l){function e(e){o("WAWebQuickPromotionCollection").QuickPromotionCollection.refreshPromotions(e)}l.loadedQuickPromotions=e}),98);
__d("WAWebSmbDataSharingServerUpdateAction",["WAWebCTWADataSharingModel"],(function(t,n,r,o,a,i,l){function e(e){o("WAWebCTWADataSharingModel").CTWADataSharingModel.setValue(e)}l.smbDataSharingSettingUpdateAction=e}),98);
__d("WAWebCTWABridgeApi",["WAWebAdEntryPointsConfigurationAction","WAWebCTWADetectedOutcomeOnboardingStatusUpdateAction","WAWebNewCTWASuggestionAction","WAWebQuickPromotionAction","WAWebSmbDataSharingServerUpdateAction"],(function(t,n,r,o,a,i,l){var e={newCTWASuggestion:function(t){var e=t.suggestion;return o("WAWebNewCTWASuggestionAction").newCTWASuggestion(e)},revokeCTWASuggestion:function(t){var e=t.suggestion;return o("WAWebNewCTWASuggestionAction").revokeCTWASuggestion(e)},loadedCTWASuggestions:function(t){var e=t.suggestions;return o("WAWebNewCTWASuggestionAction").loadedCTWASuggestions(e)},loadedQuickPromotions:function(t){var e=t.promotions;return o("WAWebQuickPromotionAction").loadedQuickPromotions(e)},smbDataSharingSettingUpdate:function(t){var e=t.smbDataSharingSettingValue;return o("WAWebSmbDataSharingServerUpdateAction").smbDataSharingSettingUpdateAction(e)},loadedAdEntryPointsConfiguration:o("WAWebAdEntryPointsConfigurationAction").loadedAdEntryPointsConfiguration,ctwaDetectedOutcomeOnboardingStatusUpdate:function(t){var e=t.onboardingStatus;return o("WAWebCTWADetectedOutcomeOnboardingStatusUpdateAction").ctwaDetectedOutcomeOnboardingStatusUpdateAction(e)}};l.CTWABridgeApi=e}),98);
__d("WAWebCTWASuggestionInitFromStorage",["Promise","WALogger","WATimeUtils","WAWebBackendApi","WAWebBizGatingUtils","WAWebSchemaCTWASuggestion"],(function(t,n,r,o,a,i,l){var e,s;function u(){if(!o("WAWebBizGatingUtils").adsActionBannersEnabledOnStartup())return(s||(s=n("Promise"))).resolve();var t=o("WAWebSchemaCTWASuggestion").getCTWASuggestionTable();return t.all().then(function(n){var r=[],a=[];if(n.forEach(function(e){o("WATimeUtils").isInFuture(e.expiresAt)?r.push(e):a.push(e.id)}),o("WAWebBackendApi").frontendFireAndForget("loadedCTWASuggestions",{suggestions:r}),a.length>0)return t.bulkRemove(a).catch(function(){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["restoreCTWASuggestions: could not remove expired suggestions"]))).devConsole(a)})})}l.restoreCTWASuggestions=u}),98);
__d("WAWebChatArchiveBridge",["WALogger","WASyncdConst","WATimeUtils","WAWebApiActiveMessageRanges","WAWebArchiveChatSync","WAWebMessageRangeUtils","WAWebMiscErrors","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e;function s(t,a,i){var l=o("WATimeUtils").unixTimeMs();return r("WAWebArchiveChatSync").getMutationsForArchive(l,a,t).then((function(){var i=n("asyncToGeneratorRuntime").asyncToGenerator(function*(i){try{return yield o("WAWebMessageRangeUtils").lockForMessageRangeSync(["chat"],i,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e[0];if(i[0].action!==o("WASyncdConst").Actions.Archive)throw r("err")("syncd: expected archive action from getMutationsForArchive");return yield o("WAWebApiActiveMessageRanges").addActiveMessageRange(t.toString(),"archive",i[0].binarySyncAction),n.merge(t.toString(),u(a))});return function(t){return e.apply(this,arguments)}})()),{status:200}}catch(t){throw t instanceof o("WAWebMiscErrors").DbOnLogoutAbort?t:(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["update chat table failed"]))).verbose().devConsole(t).sendLogs("update chat table failed when send conversation to archive"),r("err")("update chat table failed"))}});return function(e){return i.apply(this,arguments)}})())}function u(e){var t={archive:e};return e&&(t.pin=void 0),t}l.sendConversationArchive=s}),98);
__d("WAWebUpdateOfflinePeerReceipts",["WALogger","WAWebChatCollection","WAWebCmd","WAWebGroupUnreadMessageType","WAWebMsgCollection","WAWebNewsletterCollection","WAWebUnreadMentionModel"],(function(t,n,r,o,a,i,l){var e;function s(t,n){o("WAWebCmd").Cmd.isMainStreamReadyMd&&(o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["updateOfflinePeerReceipt, chatUpdates: ",", ackUpdats: "," "])),t.length,n).devConsole(t,n),t.forEach(function(e){var t,n=e.chatId,a=e.unreadCount,i=e.unreadMentionsOfMe,l=(t=o("WAWebChatCollection").ChatCollection.get(n))!=null?t:r("WAWebNewsletterCollection").get(n);if(l!=null){var s,u,c=i.map(function(e){return new(r("WAWebUnreadMentionModel"))({id:e.id,timestamp:e.timestamp})});(s=l.groupMetadata)==null||s.unreadMentionMetadata.reset(),(u=l.groupMetadata)==null||u.unreadMentionMetadata.addUnreadMentions(c,o("WAWebGroupUnreadMessageType").UnreadMessageType.PERSISTANCE_LOAD),l.set({unreadCount:a})}}),n.forEach(function(e){var t=e.msgKey,n=e.ack,r=o("WAWebMsgCollection").MsgCollection.get(t);r&&r.updateAck(n)}))}l.updateOfflinePeerReceipt=s}),98);
__d("WAWebChatBridgeApi",["Promise","WALogger","WAWebChatCollection","WAWebCommentAction","WAWebDBUpdateChatTable","WAWebMmSignalSharingExpirationWindowUtils","WAWebMmSignalSharingGatingUtils","WAWebMsgKey","WAWebThreadMetadataUtil","WAWebUpdateLastAddOnPreviewChatAction","WAWebUpdateOfflinePeerReceipts","WAWebUpdateUnreadChatAction","WAWebWamMemoryStat"],(function(t,n,r,o,a,i,l){var e,s,u=["id"],c,d={getChat:function(t){var e=t.chatId;return o("WAWebChatCollection").ChatCollection.get(e)},hasChat:function(t){var e=t.chatId;return!!o("WAWebChatCollection").ChatCollection.get(e)},isMessageSentToBusiness:function(t){var e=t.msgKey,n=o("WAWebChatCollection").ChatCollection.get(r("WAWebMsgKey").from(e).remote);return(n==null?void 0:n.contact.isBusiness)===!0},chatCollectionAdd:function(t){var e=t.things,n=t.options;return o("WAWebChatCollection").ChatCollection.add(e,n)},chatCollectionGadd:function(t){var e=t.chat;return o("WAWebChatCollection").ChatCollection.gadd(e)},chatCollectionTrigger:function(t){var e=t.name,n=t.args;o("WAWebChatCollection").ChatCollection.trigger(e,n)},updateOfflinePeerReceipt:function(t){var e=t.chatUpdates,n=t.ackUpdates;o("WAWebUpdateOfflinePeerReceipts").updateOfflinePeerReceipt(e,n)},chatCollectionUpdate:function(t){var e=t.updates;e.forEach(function(e){var t=e.id,n=babelHelpers.objectWithoutPropertiesLoose(e,u),r=o("WAWebChatCollection").ChatCollection.get(t);r&&r.set(n)})},updateChatReadStatus:function(t){var e=t.id,n=t.read,r=o("WAWebChatCollection").ChatCollection.get(e);r&&(n?o("WAWebUpdateUnreadChatAction").markSeen(r):o("WAWebUpdateUnreadChatAction").markUnseen(r))},updateChatUnreadMsgCountAndClearMentions:function(t){var e=t.remote,n=o("WAWebChatCollection").ChatCollection.get(e);n&&(o("WAWebUpdateUnreadChatAction").updateUnreadCountMD(n,0,!1),o("WAWebUpdateUnreadChatAction").clearUnreadMentions(n))},updateChatLastAddOnPreview:function(t){var e=t.chatMap;o("WAWebUpdateLastAddOnPreviewChatAction").updateModelsForLastAddOnPreview(e)},updateChatToLatest:function(t){var e=t.chatIdToLatestUpdates;o("WAWebCommentAction").updateChatToLatest(e)},updateChatSortListener:function(n){var t=n.enable;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[chat][updateChatSortListener] "," sort listener (","): start"])),t?"enable":"disable",o("WAWebWamMemoryStat").roundIntForMetrics(o("WAWebChatCollection").ChatCollection.length)),t?o("WAWebChatCollection").ChatCollection.enableSortListener(!0):o("WAWebChatCollection").ChatCollection.disableSortListener(),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[chat][updateChatSortListener] "," sort listener (","): done"])),t?"enable":"disable",o("WAWebWamMemoryStat").roundIntForMetrics(o("WAWebChatCollection").ChatCollection.length))},resetChatPreviewT:function(t){var e=t.chatIds;e.forEach(function(e){var t=o("WAWebChatCollection").ChatCollection.get(e);t&&(t.previewT=void 0)})},updateChatPreviewT:function(t){var e=t.threadMeta;o("WAWebChatCollection").ChatCollection.forEach(function(t){var n=o("WAWebThreadMetadataUtil").getOfflineMetaPreviewForChat({chatTimestamp:e,chatId:t.id,accountLid:t.accountLid});n!=null&&(t.previewT=n)})},updateBotInvokeSystemMsgCreated:function(t){var e=t.chatId,r=o("WAWebChatCollection").ChatCollection.get(e);if(r!=null)return r.hasCreatedBotInvokeSystemMsg===!0?(c||(c=n("Promise"))).resolve():r.updateBotInvokeSystemMsgCreated()},updateChatLimitSharing:function(t){var e=t.id,n=t.limitSharing,r=o("WAWebChatCollection").ChatCollection.get(e);r&&(r.limitSharing=n)},getChatModelsArray:function(){return(c||(c=n("Promise"))).resolve([].concat(o("WAWebChatCollection").ChatCollection.getModelsArray()))},updateMmSignalSharingExpirationWindow:function(t){var e=t.id,n=t.msg,r=t.contextInfo;if(o("WAWebMmSignalSharingGatingUtils").isMmSignalSharingDisclosureEnabled()){var a=o("WAWebChatCollection").ChatCollection.get(e);if(a){var i=o("WAWebMmSignalSharingExpirationWindowUtils").getMmSignalSharingExpirationWindow(a.mmSignalSharingExpirationWindow,n.id,n.t,r);a.mmSignalSharingExpirationWindow=i,o("WAWebDBUpdateChatTable").updateChatTable(e,{mmSignalSharingExpirationWindow:i})}}},updateChatToneId:function(t){var e=t.id,n=t.toneId,r=o("WAWebChatCollection").ChatCollection.get(e);r&&(r.toneId=n)}};l.ChatBridgeApi=d}),98);
__d("WAWebChatInternalStatusHookWrapper",["cr:12061"],(function(t,n,r,o,a,i,l){l.default=n("cr:12061")}),98);
__d("WAWebClockBridgeApi",["WAWebClock"],(function(t,n,r,o,a,i,l){var e={setWebClockSkew:function(t){var e=t.newClockSkew;o("WAWebClock").Clock.setSkew(e)}};l.ClockBridgeApi=e}),98);
__d("useWAWebLexicalOnContentChange",["LexicalComposerContext","react","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("LexicalComposerContext").useLexicalComposerContext(),n=t[0],a=r("useWAWebStableCallback")(e);s(function(){var e=n.registerTextContentListener(function(e){a(e)});return e},[n,a])}l.useLexicalOnContentChange=u}),98);
__d("WAWebCommandPaletteController",["Lexical","LexicalComposer","LexicalComposerContext","WAWebCommandPaletteInput.react","WAWebFlex.react","WAWebLexicalUtils","WAWebModalManager","WAWebNoop","WAWebPREGatingUtils","WAWebToArray","err","react","useWAWebLexicalEvent","useWAWebLexicalOnContentChange","vulture"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.createContext,m=u.useCallback,p=u.useContext,_=u.useEffect,f=u.useMemo,g=u.useState,h=u.useTransition,y={container:{borderStartStartRadius:"x6nvzda",borderStartEndRadius:"x4i4b9w",borderEndEndRadius:"xhl9efl",borderEndStartRadius:"xj65ea0",backgroundColor:"x16w0wmm",color:"x14ug900",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},pluginContainer:{maxHeight:"x12f24lm",$$css:!0}},C=d(null);function b(){var e=p(C);if(e==null)throw r("err")("useCommandPalette must be used inside of a CommandPaletteContext");return e}function v(e){var t=e.children,n=e.defaultPlugin,a=e.triggeredPlugins;r("vulture")("RDgCt_9skLvavkdCdzwvcRIUsLE=");var i=g([]),l=i[0],s=i[1],u=g(""),d=u[0],p=u[1],y=o("LexicalComposerContext").useLexicalComposerContext(),b=y[0],v=h(),S=v[0],R=v[1],L=l[l.length-1],E=m(function(e){o("WAWebLexicalUtils").setTextContent(b,e),p(e)},[b]),k=m(function(e,t){var n,r=(n=t==null?void 0:t.input)!=null?n:"";E(r),s([].concat(l,[{plugin:e,input:r}]))},[E,l]),I=m(function(e){var t=l.slice(0,l.length-1),n=t[t.length-1],r="";n!=null&&((e==null?void 0:e.input)!=null?r=e.input:n.plugin.restoreInputOnBack===!0&&(r=n.input)),E(r),s(t)},[E,l]),T=function(){return s([])},D=m(function(e,t){var n,r=(n=t==null?void 0:t.input)!=null?n:"";E(r),s([{plugin:e,input:r}])},[E,s]),x=function(){o("WAWebModalManager").ModalManager.close()};_(function(){if(l.length===0){var e=a==null?void 0:a.find(function(e){var t=o("WAWebToArray").toArray(e.trigger);if(t.includes(d))return e});e!=null&&k(e.plugin)}},[d]),o("useWAWebLexicalEvent").useLexicalCommandListener(b,o("Lexical").KEY_BACKSPACE_COMMAND,function(e){return d===""&&(e.preventDefault(),I()),!1}),o("useWAWebLexicalOnContentChange").useLexicalOnContentChange(function(e){L!=null&&(L.input=e),o("WAWebPREGatingUtils").isPRECommandPaletteEnabled()?R(function(){p(e)}):p(e)});var $=f(function(){var e;return{input:d,pushPlugin:k,popPlugin:I,clearStack:T,replaceStack:D,closeModal:x,activePlugin:(e=L==null?void 0:L.plugin)!=null?e:n,pluginStack:l,pluginList:a,isSearching:S}},[L==null?void 0:L.plugin,n,d,S,I,k,D,l,a]);return c.jsx(C.Provider,{value:$,children:t})}v.displayName=v.name+" [from "+i.id+"]";function S(){r("vulture")("INBUmkzMl13Q-TAdxWo44Heh1M8=");var e=b(),t=e.activePlugin;return t!=null?c.jsx(o("WAWebFlex.react").FlexColumn,{align:"stretch",xstyle:y.pluginContainer,children:c.jsx(t.Component,{})}):null}S.displayName=S.name+" [from "+i.id+"]";function R(e){var t=e.defaultPlugin,n=e.triggeredPlugins;r("vulture")("8uD66RSmeN3R-bq7l-iYS_m2ciY=");var a=f(function(){return{namespace:"CommandPaletteInput",onError:r("WAWebNoop")}},[]);return c.jsx(o("WAWebFlex.react").FlexColumn,{align:"stretch",xstyle:y.container,children:c.jsx(o("LexicalComposer").LexicalComposer,{initialConfig:a,children:c.jsxs(v,{defaultPlugin:t,triggeredPlugins:n,children:[c.jsx(r("WAWebCommandPaletteInput.react"),{}),c.jsx(S,{})]})})})}R.displayName=R.name+" [from "+i.id+"]",l.useCommandPalette=b,l.CommandPalette=R}),98);
__d("WAWebCommandPaletteInput.react",["LexicalErrorBoundary","LexicalPlainTextPlugin","WAWebCommandPaletteController","WAWebFlex.react","WAWebMultilinePlugin","WAWebRichTextInputContentEditable.react","WAWebSearchIcon.react","WAWebUISpacing","WDSSpinner.react","react","stylex","vulture"],(function(t,n,r,o,a,i,l){var e,s,u=e||(e=r("react")),c={container:{height:"xsdox4t",boxSizing:"x9f619",$$css:!0},relative:{position:"x1n2onr6",$$css:!0},contentEditable:{width:"xh8yej3",$$css:!0},prefix:{display:"x78zum5",alignItems:"x6s0dn4",color:"x1pse0pq",$$css:!0},prefixSeparator:{display:"x78zum5",fontWeight:"x1xlr1w8",$$css:!0}};function d(){var e;r("vulture")("eQlEWkFIYReDR3716M6RF2UN9SM=");var t=o("WAWebCommandPaletteController").useCommandPalette(),n=t.activePlugin,a=(e=n==null?void 0:n.placeholder)!=null?e:"Search chats, messages, settings, and more",i=t.pluginStack.length?u.jsx("div",{className:"x78zum5 x1q0g3np x6s0dn4",children:t.pluginStack.filter(function(e){return e.plugin.shortName}).map(function(e){return u.createElement("div",babelHelpers.extends({},(s||(s=r("stylex"))).props([c.prefix,o("WAWebUISpacing").uiMargin.start8]),{key:e.plugin.id}),u.jsx("div",{className:"x2aouup xlyipyv x6ikm8r x10wlt62 xuxw1ft",children:e.plugin.shortName}),u.jsx("div",babelHelpers.extends({},s.props([c.prefixSeparator,o("WAWebUISpacing").uiPadding.start8]),{children:"/"})))})}):null;return u.jsxs(o("WAWebFlex.react").FlexRow,{align:"center",padding:[8,16],xstyle:c.container,children:[i==null?u.jsx(o("WAWebSearchIcon.react").SearchIcon,{}):i,u.jsx(o("WAWebFlex.react").FlexRow,{grow:1,xstyle:c.relative,marginStart:8,children:u.jsx(o("LexicalPlainTextPlugin").PlainTextPlugin,{contentEditable:u.jsx(o("WAWebRichTextInputContentEditable.react").InputContentEditable,{xstyle:[c.contentEditable,o("WAWebUISpacing").uiMargin.start4],focusOnMount:!0,placeholder:a}),ErrorBoundary:o("LexicalErrorBoundary").LexicalErrorBoundary})}),t.isSearching&&u.jsx(r("WDSSpinner.react"),{size:24}),u.jsx(o("WAWebMultilinePlugin").MultilinePlugin,{multiline:!1})]})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("WAWebSettingsThemeIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="settings-theme";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),version:"1.1",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M12,1 L15.219275,4.21927498 L19.780725,4.21927498 L19.780725,8.78072502 L23,12 L19.780725,15.219275 L19.780725,19.780725 L15.219275,19.780725 L12,23 L8.78072502,19.780725 L4.21927498,19.780725 L4.21927498,15.219275 L1,12 L4.21927498,8.78072502 L4.21927498,4.21927498 L8.78072502,4.21927498 L12,1 Z M12,6 L12,18 C15.31,18 18,15.31 18,12 C18,8.76522727 15.4308833,6.12259298 12.2246968,6.00414409 L12,6 Z",fill:"currentColor",fillRule:"nonzero"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.SettingsThemeIcon=m}),98);
__d("WAWebThemeCommandPalettePlugin",["WAWebCommandPaletteController","WAWebLexicalWAWebMenu.react","WAWebMenuItems.react","WAWebSettingsThemeIcon.react","WAWebSystemTheme","WAWebThemeContext","react","vulture"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).useContext;function d(){r("vulture")("LhD2gH53Jdbsbtgex0MHCL9vtrw=");var e=o("WAWebCommandPaletteController").useCommandPalette(),t=c(o("WAWebThemeContext").ThemeContext),n=t.systemThemeMode?"system":t.theme,a=function(o){o==="system"?(t.setSystemThemeMode(!0),t.setTheme(r("WAWebSystemTheme").getCurrentTheme())):(t.setSystemThemeMode(!1),t.setTheme(o)),e.closeModal()},i=u.jsx(o("WAWebMenuItems.react").SelectMenuItem,{optionId:"dark",primary:"Dark",onSelect:function(){return a("dark")}},"dark"),l=u.jsx(o("WAWebMenuItems.react").SelectMenuItem,{optionId:"light",primary:"Light",onSelect:function(){return a("light")}},"light"),s=u.jsx(o("WAWebMenuItems.react").SelectMenuItem,{optionId:"system",primary:"System",onSelect:function(){return a("system")}},"system"),d=[];return t.theme==="light"?d=[i,l,s]:d=[l,i,s],u.jsx(o("WAWebLexicalWAWebMenu.react").LexicalWAWebMenu,{forceSelection:!0,children:u.jsx(o("WAWebMenuItems.react").SelectMenuItemGroup,{initialSelection:n,children:d.map(function(e){return e})})})}d.displayName=d.name+" [from "+i.id+"]";var m={plugin:{id:"ThemeCommandPalettePlugin",placeholder:"Choose a theme",shortName:u.jsx(o("WAWebSettingsThemeIcon.react").SettingsThemeIcon,{width:16,height:16}),Component:d},trigger:"/theme",doc:{name:"App Theme",description:"Switch between the light and dark themes"}};l.ThemeCommandPalettePlugin=m}),98);
__d("WAWebCommandPalettePlugins",["WAWebThemeCommandPalettePlugin","cr:8750","gkx"],(function(t,n,r,o,a,i,l){function e(){var e=[o("WAWebThemeCommandPalettePlugin").ThemeCommandPalettePlugin];if(!r("gkx")("26258")){var t,a=(t=n("cr:8750")==null?void 0:n("cr:8750").filter(Boolean))!=null?t:[];e.unshift.apply(e,a)}return e}l.getAvailablePlugins=e}),98);
__d("WAWebContactCell",["WAWebBizGatingUtils","WAWebChatStatus","WAWebChatTextStatusWrapper","WAWebContactGetters","WAWebContactImage.react","WAWebName.react","WAWebTextStatusGatingUtils","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react"));function u(e){var t=s.jsx(o("WAWebName.react").Name,{contact:e,showBusinessCheckmark:o("WAWebContactGetters").getShowBusinessCheckmarkAsPrimary(e),showLabelIcon:o("WAWebBizGatingUtils").canDisplayLabel(),titlify:!0,ellipsify:!0,you:!0}),n;o("WAWebTextStatusGatingUtils").receiveTextStatusEnabled()?n=s.jsx(o("WAWebChatTextStatusWrapper").TextStatus,{contactId:e.id}):n=s.jsx(o("WAWebChatStatus").StatusWrapper,{id:e.id});var r=s.jsx(o("WAWebContactImage.react").ContactImage,{contact:e,size:40});return{primary:t,secondary:n,detailLeft:r}}l.getContactCellContent=u}),98);
__d("WAWebContact.MenuItem",["WAWebContactCell","WAWebMenuItems.react","react","vulture"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react"));function u(e){var t=e.contact,n=e.onSelect;return r("vulture")("p125DVk6lyF0906verFRfAp_sHA="),s.jsx(o("WAWebMenuItems.react").ActionMenuItem,babelHelpers.extends({optionId:"contact-"+t.id.toString(),onSelect:n},o("WAWebContactCell").getContactCellContent(t)))}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("WAWebContactSearchModel",["WAWebContactCollection","WAWebContactGetters","WAWebPhoneNumberSearch","WAWebSearchModel","WAWebSearchUtils"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.id="ContactSearch",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.queryFn=function(t,n){var e=o("WAWebSearchUtils").normalizeString(t),r=o("WAWebPhoneNumberSearch").numberSearch(e),a=o("WAWebSearchUtils").filterPaginate(o("WAWebContactCollection").ContactCollection.getModelsArray(),function(n){var a=o("WAWebContactGetters").getIsUser(n);return t===""&&a?!0:a&&n.searchMatch(e,r)},n==null?void 0:n.pagination),i=a.results,l=a.pagination,s=i.map(function(e){return{id:e.id.toString(),type:"contact",data:e}});return{type:"contact",results:s,pagination:l}},t})(o("WAWebSearchModel").Search);l.ContactSearch=e}),98);
__d("WAWebSearchCollection",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.models=[],this.models=e}var t=e.prototype;return t.query=function(t,n){var e;return n!=null&&n.pageLengthPerModel!=null&&(e={pagination:{pageLength:n.pageLengthPerModel,page:0}}),this.models.map(function(n){var r=n.query(t,e);return r}).filter(Boolean)},e})();i.SearchCollection=e}),66);
__d("WAWebSparklesIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="sparkles";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=25,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 25",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M6.96618 14.136C6.90537 13.8719 6.74322 13.75 6.49997 13.75C6.25672 13.75 6.07429 13.8922 6.03376 14.136C5.46619 17.1834 5.48646 17.1631 2.42568 17.7726C2.14189 17.8335 2 18.0164 2 18.2398C2 18.4836 2.14189 18.6665 2.42568 18.7274C5.48646 19.3369 5.38511 19.3572 6.03376 22.3437C6.07429 22.5875 6.25672 22.75 6.49997 22.75C6.76347 22.75 6.90537 22.6078 6.96618 22.3437C7.61483 19.3572 7.51347 19.3369 10.5743 18.7274C10.8377 18.6665 11 18.5039 11 18.2398C11 17.996 10.8377 17.8335 10.5743 17.7726C7.51724 17.2044 7.51348 17.1835 6.9682 14.1472L6.96618 14.136Z",fill:"currentColor",style:{fillOpacity:1}}),c.jsx("path",{d:"M15.1417 3.39253C15.1195 2.99372 14.854 2.75 14.4779 2.75C14.146 2.75 13.8805 2.99372 13.8585 3.34822C13.1506 8.57718 12.9956 8.55501 7.57521 9.61853C7.24331 9.66284 7 9.90658 7 10.2611C7 10.6156 7.24331 10.8593 7.57521 10.9036C12.9956 11.6791 13.1725 11.8342 13.8585 17.1296C13.8805 17.5063 14.146 17.75 14.4779 17.75C14.854 17.75 15.1195 17.5063 15.1417 17.1075C15.7833 11.9007 16.0708 11.9228 21.4248 10.9036C21.7567 10.8371 22 10.6156 22 10.2611C22 9.88441 21.7567 9.66284 21.3362 9.61853C16.0266 8.73228 15.7833 8.59932 15.1417 3.39253Z",fill:"currentColor",style:{fillOpacity:1}})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.SparklesIcon=m}),98);
__d("WAWebDefaultCommandPalettePlugin",["Promise","WAWebChatCollection","WAWebChatListMenuItem.react","WAWebChatMsgIcon.react","WAWebChatSearchModel","WAWebChatlistUtils","WAWebCommandPaletteController","WAWebContact.MenuItem","WAWebContactSearchModel","WAWebContactsIcon.react","WAWebFlex.react","WAWebFrontendChatGetters","WAWebKeyboardShortcut.react","WAWebLexicalWAWebMenu.react","WAWebNoop","WAWebPanelRecentIcon.react","WAWebSearchCollection","WAWebSettingSearchModel","WAWebSettings.MenuItem","WAWebSettingsIcon.react","WAWebSparklesIcon.react","WAWebStaticMenuItem.react","WAWebSvgComponentBase","WAWebText.react","react","vulture"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=o("react")),d=s||(s=r("react")),m=c.useEffect,p=c.useMemo,_=c.useState;function f(e){var t=e.icon,n=e.title;return r("vulture")("htiMnprLe_BUD6fN0QuSG5DtUL8="),d.jsx(o("WAWebStaticMenuItem.react").MenuHeading,{children:d.jsxs(o("WAWebFlex.react").FlexRow,{align:"center",children:[d.jsx(o("WAWebFlex.react").FlexItem,{paddingEnd:8,children:t}),n]})})}f.displayName=f.name+" [from "+i.id+"]";function g(){r("vulture")("P081SyOM3WSTBVAVeKs6jZJOTXQ=");for(var e=o("WAWebCommandPaletteController").useCommandPalette(),t=3,n=0,a=[],i=o("WAWebChatCollection").ChatCollection.getModelsArray(),l=0;l<i.length;l++){var s=i[l];if(!s.active&&o("WAWebFrontendChatGetters").getShouldAppearInList(s)&&(a.push(s),s.pin==null&&n++),n===t)break}var u=a.sort(function(e,t){var n,r;return((n=t.t)!=null?n:0)-((r=e.t)!=null?r:0)}).slice(0,t);return d.jsxs(o("WAWebLexicalWAWebMenu.react").LexicalWAWebMenu,{forceSelection:!0,children:[d.jsx(f,{title:"Recent Chats",icon:d.jsx(o("WAWebPanelRecentIcon.react").PanelRecentIcon,{})}),u.map(function(t){return d.jsx(o("WAWebChatListMenuItem.react").ChatMenuItem,{optionId:"recent-chat-"+t.id.toString(),chat:t,onSelect:function(){o("WAWebChatlistUtils").openExistingChat(t.id).catch(r("WAWebNoop")),e.closeModal()}},t.id.toString())})]})}g.displayName=g.name+" [from "+i.id+"]";function h(e){var t=e.section;r("vulture")("ui54A-YWyASSsrqIORAZtVxZx98=");var n=o("WAWebCommandPaletteController").useCommandPalette();switch(t.type){case"setting":return d.jsxs(d.Fragment,{children:[d.jsx(f,{title:"Settings",icon:d.jsx(o("WAWebSettingsIcon.react").SettingsIcon,{width:16,height:16,DEPRECATED_color:o("WAWebSvgComponentBase").DEPRECATED_SvgColorProp.TEAL})}),d.jsx(o("WAWebSettings.MenuItem").SettingsMenu,{settings:t.results.map(function(e){return e.data}),onSelect:function(t){o("WAWebSettings.MenuItem").openSettingDrawer(t.step),n.closeModal()}})]});case"chat":return d.jsxs(d.Fragment,{children:[d.jsx(f,{title:"Chats",icon:d.jsx(o("WAWebChatMsgIcon.react").ChatMsgIcon,{width:24,height:24,DEPRECATED_color:o("WAWebSvgComponentBase").DEPRECATED_SvgColorProp.TEAL})}),t.results.map(function(e){return d.jsx(o("WAWebChatListMenuItem.react").ChatMenuItem,{optionId:"context-menu-chat-"+e.id,chat:e.data,onSelect:function(){o("WAWebChatlistUtils").openExistingChat(e.data.id).catch(r("WAWebNoop")),n.closeModal()}},t.type+"-"+e.id)})]});case"contact":return d.jsxs(d.Fragment,{children:[d.jsx(f,{title:"Contacts",icon:d.jsx(o("WAWebContactsIcon.react").ContactsIcon,{width:24,height:24,DEPRECATED_color:o("WAWebSvgComponentBase").DEPRECATED_SvgColorProp.TEAL})}),t.results.map(function(e){return d.jsx(r("WAWebContact.MenuItem"),{contact:e.data,onSelect:function(){o("WAWebChatlistUtils").openOrCreateLatestChat(e.data.id).catch(r("WAWebNoop")),n.closeModal()}},t.type+"-"+e.id)})]});default:return}}h.displayName=h.name+" [from "+i.id+"]";function y(){r("vulture")("d878NyXcHmk76GQA-RJpjXf_AP0=");var e=o("WAWebCommandPaletteController").useCommandPalette(),t;if(e.pluginList!=null){var n=e.pluginList.find(function(e){return e.plugin.id==="HelpCommandPalettePlugin"});n!=null&&(t=function(){return d.jsxs(d.Fragment,{children:[d.jsx(o("WAWebStaticMenuItem.react").MenuSeparator,{}),d.jsxs(o("WAWebFlex.react").FlexRow,{padding:[8,24,16,24],align:"center",gap:16,children:[d.jsx(o("WAWebSparklesIcon.react").SparklesIcon,{width:32,height:32,DEPRECATED_color:o("WAWebSvgComponentBase").DEPRECATED_SvgColorProp.TEAL}),d.jsxs(o("WAWebText.react").WAWebTextMuted,{children:["Type ",d.jsx(o("WAWebKeyboardShortcut.react").KeyboardKey,{value:"/?"})," to see available plugins"]})]})]})})}return d.jsxs(d.Fragment,{children:[d.jsx(g,{}),t!=null&&d.jsx(t,{})]})}y.displayName=y.name+" [from "+i.id+"]";function C(){r("vulture")("6DPkG82RIu-FzYo8bW7snVvfwRI=");var t=o("WAWebCommandPaletteController").useCommandPalette(),a=_([]),i=a[0],l=a[1],s=p(function(){return new(o("WAWebSearchCollection")).SearchCollection([new(o("WAWebSettingSearchModel")).SettingSearch({maxPageLength:3}),new(o("WAWebChatSearchModel")).ChatSearch({maxPageLength:4}),new(o("WAWebContactSearchModel")).ContactSearch({maxPageLength:4})])},[]);return m(function(){(e||(e=n("Promise"))).all(s.query(t.input)).then(function(e){return l(e)}).catch(r("WAWebNoop"))},[s,t.input]),t.input===""?d.jsx(y,{}):d.jsx(o("WAWebLexicalWAWebMenu.react").LexicalWAWebMenu,{forceSelection:!0,children:i.map(function(e){return e.results.length>0&&d.jsx(h,{section:e},e.type)})})}C.displayName=C.name+" [from "+i.id+"]";var b={id:"DefaultCommand",placeholder:"Search anything",shortName:null,Component:C};l.DefaultCommandPalettePlugin=b}),98);
__d("WAWebHelpCommandPalettePlugin",["WAWebCommandPaletteController","WAWebDevOnlyBadge.react","WAWebFlex.react","WAWebLexicalWAWebMenu.react","WAWebMenuItems.react","WAWebToArray","react","vulture"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={trigger:{backgroundColor:"xyp3urf",color:"x14ug900",borderStartStartRadius:"xyi3aci",borderStartEndRadius:"xwf5gio",borderEndEndRadius:"x1p453bz",borderEndStartRadius:"x1suzm8a",$$css:!0}};function c(e){var t=e.trigger;r("vulture")("SkDNk5M1p5y4_dRq_mIX9PKLvCc=");var n=o("WAWebToArray").toArray(t);return s.jsx(o("WAWebFlex.react").FlexRow,{justify:"center",align:"center",padding:8,xstyle:u.trigger,children:n[0]})}c.displayName=c.name+" [from "+i.id+"]";function d(e){return{plugin:{id:"HelpCommandPalettePlugin",placeholder:"Search extra command palette functionality",shortName:"?",Component:function(){var t=o("WAWebCommandPaletteController").useCommandPalette();return s.jsx(o("WAWebLexicalWAWebMenu.react").LexicalWAWebMenu,{children:e.map(function(e){return e.doc!=null?s.jsx(o("WAWebMenuItems.react").ActionMenuItem,{optionId:e.plugin.id,detailRight:s.jsx(c,{trigger:e.trigger}),primary:e.doc.isDevOnly===!0?s.jsx(o("WAWebDevOnlyBadge.react").DevOnlyBadge,{label:e.doc.name}):e.doc.name,secondary:e.doc.description,onSelect:function(){return t.replaceStack(e.plugin)}},e.plugin.id):null}).filter(Boolean)})}},trigger:["/?","/help"],doc:{name:"Help",description:"Discover all of the things the Command Palette can do"}}}l.buildHelpCommand=d}),98);
__d("WAWebCommandPalette.react",["WAWebAdaptiveLayoutGatingUtils","WAWebChatlistPanelFunctional.react","WAWebChatlistPanelMode","WAWebChatlistPanel_DEPRECATED.react","WAWebCmd","WAWebCommandPaletteController","WAWebCommandPalettePlugins","WAWebCommandPaletteUtils","WAWebDefaultCommandPalettePlugin","WAWebHelpCommandPalettePlugin","WAWebModal.react","WAWebModalManager","WAWebSettingsGetters","react","useWAWebListener","useWAWebSettingsValues","vulture"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).useEffect;function d(){var e=o("WAWebCommandPalettePlugins").getAvailablePlugins(),t=o("WAWebHelpCommandPalettePlugin").buildHelpCommand(e);return{defaultPlugin:o("WAWebDefaultCommandPalettePlugin").DefaultCommandPalettePlugin,triggeredPlugins:[].concat(e,[t])}}function m(e){var t=e.plugins;r("vulture")("3F0N_WO6az56XyTTtJ84ZFgmCUQ=");var n=t==null?d():t,a=n.defaultPlugin,i=n.triggeredPlugins;return u.jsx(o("WAWebModal.react").Modal,{type:o("WAWebModal.react").ModalTheme.CommandPaletteV2,children:u.jsx(o("WAWebCommandPaletteController").CommandPalette,{defaultPlugin:a,triggeredPlugins:i})})}m.displayName=m.name+" [from "+i.id+"]";function p(e){o("WAWebModalManager").ModalManager.open(u.jsx(m,{plugins:e}))}function _(){var e=o("useWAWebSettingsValues").useSettingsValues([o("WAWebSettingsGetters").getShowArchiveV2]),t=e[0],n=o("WAWebAdaptiveLayoutGatingUtils").shouldUseFunctionalChatlistPanel();return u.jsx(o("WAWebModal.react").Modal,{type:o("WAWebModal.react").ModalTheme.CommandPalette,children:n?u.jsx(o("WAWebChatlistPanelFunctional.react").ChatlistPanelFunctional,{showArchiveV2:t,mode:r("WAWebChatlistPanelMode").CommandPalette}):u.jsx(o("WAWebChatlistPanel_DEPRECATED.react").ChatlistPanel,{showArchiveV2:t,mode:r("WAWebChatlistPanelMode").CommandPalette})})}_.displayName=_.name+" [from "+i.id+"]";function f(){return c(function(){return o("WAWebCommandPaletteUtils").setIsCommandPaletteOpen(!0),function(){o("WAWebCommandPaletteUtils").setIsCommandPaletteOpen(!1)}},[]),o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"close_command_palette",function(){return o("WAWebModalManager").ModalManager.close()}),u.jsx(_,{})}f.displayName=f.name+" [from "+i.id+"]",l.openCommandPaletteV2Modal=p,l.CommandPaletteModal=f}),98);
__d("WAWebComposeBox.scss",["cx"],(function(t,n,r,o,a,i,l,s){var e={footer:"_ak1i",botSuggestions:"_anyz",boxPanelWrapper:"_ak1m",pttComposerActive:"_ak1n",textMessageComposerContainer:"_ak1q",textMessageComposerInputContainer:"_ak1r"},u=e;l.default=u}),98);
__d("WAWebConversationNewBanner.react",["WAWebButton.react","WAWebFlex.react","WAWebText.react","react","useWAWebWindowSize"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=1250,c={wrapper:{borderInlineStartWidth:"xpilrb4",borderInlineStartStyle:"x1t7ytsu",borderInlineStartColor:"x1vb5itz",$$css:!0},container:{borderStartStartRadius:"x6nvzda",borderStartEndRadius:"x4i4b9w",borderEndEndRadius:"xhl9efl",borderEndStartRadius:"xj65ea0",backgroundColor:"x1280gxy",display:"x78zum5",justifyContent:"x1l1ennw",$$css:!0}};function d(e){var t=e.buttons,n=e.primaryText,a=e.secondaryText,i=e.testId,l=r("useWAWebWindowSize")(),d=l.width,m=d<=u?o("WAWebFlex.react").FlexColumn:o("WAWebFlex.react").FlexRow;return s.jsx(o("WAWebFlex.react").FlexColumn,{padding:8,xstyle:c.wrapper,children:s.jsxs(m,{alignSelf:"stretch",align:"center",justify:"all",xstyle:c.container,padding:[16,16,16,16],gap:16,testid:void 0,children:[s.jsxs(o("WAWebFlex.react").FlexColumn,{children:[s.jsx(o("WAWebText.react").WAWebTextTitle,{children:n}),a!=null&&s.jsx(o("WAWebText.react").WAWebTextMuted,{children:a})]}),s.jsx(o("WAWebButton.react").ButtonGroup,{direction:"horizontal",shrink:0,children:t})]})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("WAWebConversationSpam.react",["fbt","WAWebBlockContactUtils","WAWebBlockContants","WAWebBlocklistCollection","WAWebBox.react","WAWebBusinessProfileTypes","WAWebButton.react","WAWebChatGetters","WAWebChatGroupUtils","WAWebCheckmarkIcon.react","WAWebClickableLink.react","WAWebCmd","WAWebContactGetters","WAWebConversationNewBanner.react","WAWebExitIcon.react","WAWebFbtCommon","WAWebFrontendChatGetters","WAWebFrontendContactGetters","WAWebGroupGatingUtils","WAWebGroupSafetyToolsModal.react","WAWebLeaveCommunityModal.react","WAWebMiscGatingUtils","WAWebModalManager","WAWebReportContactPopup.react","WAWebReportSpamPopup.react","WAWebSendSpamChatAction","WAWebSettingsBlockedIcon.react","WAWebSpamConstants","WAWebSuspendedGroupUtils","WAWebSvgComponentBase","WAWebThumbsDownIcon.react","WAWebUISpacing","WAWebUnstyledButton.react","WAWebXIcon.react","fbs","react","useWAWebChatValues","useWAWebContactValues","useWAWebForceUpdate","useWAWebListener"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react")),c={link:{display:"xt0psk2",$$css:!0}};function d(e){"use no forget";var t,n,a,i=e.chat,l=e.onClickDismissSpam,d=e.onClickNotSpam,p=o("useWAWebForceUpdate").useForceUpdateDONOTUSE(),_=o("useWAWebChatValues").useChatValues(i.id,[(t=o("WAWebChatGetters")).getId,t.getIsPSA,t.getIsIAS,(n=o("WAWebFrontendChatGetters")).getShouldAppearInList,n.getTrusted,t.getIsGroup,n.getContact,n.getGroupMetadata]),f=_[0],g=_[1],h=_[2],y=_[3],C=_[4],b=_[5],v=_[6],S=_[7],R=o("useWAWebContactValues").useContactValues(i.contact.id,[(a=o("WAWebContactGetters")).getId,a.getIsBusiness,a.getIsSupportAccount,a.getVerifiedLevel,o("WAWebFrontendContactGetters").getFormattedName,a.getIsMe,o("WAWebFrontendContactGetters").getBusinessProfile,a.getIsMyContact]),L=R[0],E=R[1],k=R[2],I=R[3],T=R[4],D=R[5],x=R[6],$=R[7];o("useWAWebListener").useListener(o("WAWebBlocklistCollection").BlocklistCollection,["add","remove","reset"],p);var P=function(){o("WAWebSendSpamChatAction").sendReport({chat:i,spamFlow:b===!0?o("WAWebSpamConstants").SpamFlow.GroupSpamBannerReport:o("WAWebSpamConstants").SpamFlow.OneToOneChatSpamBannerReport}),o("WAWebModalManager").ModalManager.close()},N=function(){o("WAWebSendSpamChatAction").sendSpamExitClear(i,o("WAWebSpamConstants").SpamFlow.GroupSpamBannerReport),o("WAWebModalManager").ModalManager.close()},M=function(){var e=S==null?void 0:S.getParentGroupChat();e!=null&&o("WAWebChatGroupUtils").isCommunityAnnouncementGroup(i)?o("WAWebModalManager").ModalManager.open(u.jsx(r("WAWebLeaveCommunityModal.react"),{chat:e,enableDeactivateIfSuperAdmin:!0,spamFlow:o("WAWebSpamConstants").SpamFlow.GroupSpamBannerReport})):o("WAWebChatGroupUtils").isGroupExitExperienceEnabledForChat(i)?o("WAWebSuspendedGroupUtils").openLeaveAndReportGroupModal(i,o("WAWebSpamConstants").SpamFlow.GroupSpamBannerReport):o("WAWebCmd").Cmd.deleteOrExitChat(i)},w=function(){if(!b){o("WAWebModalManager").ModalManager.open(u.jsx(o("WAWebReportContactPopup.react").ReportContactPopupV2,{chat:i,spamFlow:o("WAWebSpamConstants").SpamFlow.OneToOneChatSpamBannerReport}));return}o("WAWebModalManager").ModalManager.open(u.jsx(r("WAWebReportSpamPopup.react"),{isMessage:!1,isGroupChat:!0,onReport:P,onReportExitClear:N,onCancel:function(){return o("WAWebModalManager").ModalManager.close()}}))},A=function(){o("WAWebGroupSafetyToolsModal.react").displayGroupSafetyToolsModal()};if(g||h||!y||C||k||D)return null;var F=o("WAWebBlocklistCollection").BlocklistCollection.get(f),O=o("WAWebButton.react").WAWebButtonSecondary,B=o("WAWebButton.react").WAWebButtonSecondaryDestructive,W=s._(/*BTDS*/"Stay"),q=u.jsxs(O,{testid:void 0,onClick:d,children:[u.jsx("span",{className:"x1rg5ohu xt8t1vi x1xc408v x129tdwq x15urzxu xjbqb8w x5see2y x16hg961 x1pzews7 x1x3agtl x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x1whkhu0 x3emv5x x1ydeqjr xyg86qh x1120s5i",children:u.jsx(o("WAWebCheckmarkIcon.react").CheckmarkIcon,{width:14,height:12})}),W]},"not_spam"),U=u.jsx(r("WAWebUnstyledButton.react"),{testid:void 0,onClick:l,role:"button",xstyle:[o("WAWebUISpacing").uiMargin.topAuto,o("WAWebUISpacing").uiMargin.bottomAuto],children:u.jsx(o("WAWebXIcon.react").XIcon,{height:24,width:24,DEPRECATED_color:o("WAWebSvgComponentBase").DEPRECATED_SvgColorProp.GRAY_LIGHTER})},"dismiss_spam"),V=u.jsx(B,{testid:void 0,onClick:w,icon:o("WAWebThumbsDownIcon.react").ThumbsDownIcon,children:s._(/*BTDS*/"Report")},"report_spam"),H=u.jsx(B,{testid:void 0,onClick:M,icon:o("WAWebExitIcon.react").ExitIcon,children:m(i)},"exit_group"),G,z,j=[];b?(G=s._(/*BTDS*/"You were added by someone not in your contacts. See {safety_tools}.",[s._param("safety_tools",u.jsx(r("WAWebClickableLink.react"),{onClick:A,xstyle:c.link,children:r("fbs")._(/*BTDS*/"safety tools")}))]),j.push(V),j.push(H),j.push(q)):(G=u.jsx(o("WAWebBox.react").Box,{xstyle:o("WAWebUISpacing").uiPadding.end15,children:s._(/*BTDS*/"The sender won't see if you read their messages until you reply or add them as a contact.")}),E&&(I!==o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH?G=s._(/*BTDS*/"This business won't see if you read their messages until you reply or add them as a contact."):I===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH?G=o("WAWebMiscGatingUtils").isBlueStringsEnabled()?s._(/*BTDS*/"This verified account is not in your contact list."):s._(/*BTDS*/"This official business account is not in your contact list."):G=s._(/*BTDS*/"This business account is not in your contact list.")),F?z=u.jsx(O,{testid:void 0,onClick:function(){return o("WAWebBlockContactUtils").handleUnblock(i.contact,E?o("WAWebBlockContants").BlockEntryPoint.BizSpamBannerBlock:o("WAWebBlockContants").BlockEntryPoint.OneToOneOldSpamBannerBlock)},grow:1,children:r("WAWebFbtCommon")("Unblock")},"unblock"):z=u.jsx(B,{testid:void 0,onClick:function(){return o("WAWebBlockContactUtils").handleBlock(i,E?o("WAWebBlockContants").BlockEntryPoint.BizSpamBannerBlock:o("WAWebBlockContants").BlockEntryPoint.OneToOneOldSpamBannerBlock)},icon:o("WAWebSettingsBlockedIcon.react").SettingsBlockedIcon,grow:1,children:r("WAWebFbtCommon")("Block")},"block"),j.push(V,z,q));var K;return b?K=[H,q]:E?K=[z,q]:K=[z,U],u.jsx(r("WAWebConversationNewBanner.react"),{primaryText:G,buttons:K})}d.displayName=d.name+" [from "+i.id+"]";function m(e){return o("WAWebGroupGatingUtils").isGroupExitExperienceEnabled()&&!o("WAWebChatGroupUtils").isCommunityAnnouncementGroup(e)?r("WAWebFbtCommon")("Exit Group"):o("WAWebChatGroupUtils").isCommunityAnnouncementGroup(e)?r("WAWebFbtCommon")("Exit Community"):r("WAWebFbtCommon")("Leave Group")}l.default=d}),226);
__d("WAWebComposeBoxPopupPanels.react",["WAWebAnimationGroupItem.react","WAWebBizCtwaContextImagePreview.react","WAWebChatGetters","WAWebChatInternalStatusHookWrapper","WAWebComposeBoxExpressionPanels.react","WAWebComposeBoxPanelsMenu.react","WAWebComposeBoxPopupPanel.react","WAWebConversationSpam.react","WAWebDisplayType","WAWebFocusIndicator","WAWebFrontendChatGetters","WAWebFrontendMsgGetters","WAWebMediaLinkPreview.react","WAWebMediaLinkPreviewContainer.react","WAWebNoop","WAWebPREGatingUtils","WAWebQuestionReplyQuotedMessage.react","WAWebQuestions.flow","WAWebQuotedMessageUserJourneyLogger","WAWebQuotedMsg.react","WAWebQuotedMsgAdminGroupName.react","WAWebResizeObserver.react","WAWebUISpacing","WAWebUim","WAWebUimUie.react","WAWebVelocityTransitionGroup","cr:5981","gkx","react","stylex","useWAWebChatValues","useWAWebForceUpdate","useWAWebListener","useWAWebMeasure","useWAWebSetModelValue","vulture"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.useEffect,p=c.useImperativeHandle,_=c.useRef,f={overlay:{position:"x10l6tqk",bottom:"x1ey2m1c",insetInlineStart:"x1o0tod",left:null,right:null,boxSizing:"x9f619",width:"xh8yej3",$$css:!0},overlayRefresh:{width:"x8pckko",$$css:!0},topPanelContainer:{borderStartStartRadius:"x12l2aii",borderStartEndRadius:"x1mbk4o",maxWidth:"xazf962",display:"x1lliihq",$$css:!0},inputBoxShadow:{boxShadow:"xkfubxc",$$css:!0}};function g(e){var t=e.chat,n=e.onClickDismissSpam,o=e.onClickNotSpam;return d.jsx(r("WAWebConversationSpam.react"),{chat:t,onClickNotSpam:o,onClickDismissSpam:n})}g.displayName=g.name+" [from "+i.id+"]";function h(e){var t=e.getComposeBlockWidth,n=e.onEmoji,a=e.onExpressionPanelChange,i=e.onExpressionPanelClose,l=e.onGif,s=e.onSticker,u=e.ref,c=e.restoreFocus,m=e.selectedExpressionPanel;r("vulture")("X6Rhu0MUB9Uc186vEwvn-fgCTBo=");var f=_(null),g=_(),h=function(t){g.current=t};p(u,function(){return{restoreFocus:function(t){var e;(e=f.current)==null||e.restoreFocus(t)}}});var y=r("useWAWebMeasure")(),C=y[0],b=y[1],v=b.width>0?b.width:t(),S=function(){r("WAWebFocusIndicator").shouldIndicateFocus(),c()};return d.jsx(r("WAWebAnimationGroupItem.react"),{ref:C,children:d.jsx(r("WAWebComposeBoxExpressionPanels.react"),{displayCache:g.current,width:v,onDisplayCache:h,onEmoji:n,onFocusRelease:S,onGif:l,onExpressionPanelChange:a,onSticker:s,requestDismiss:i,ref:f,selectedExpressionPanel:m,theme:o("WAWebComposeBoxPanelsMenu.react").PanelsTheme.ChatComposeBox})})}h.displayName=h.name+" [from "+i.id+"]";function y(e){"use no forget";var t=e.attachmentButtonHidden,n=e.chat,a=e.isTopmostPanel,i=e.questionType,l=e.rawQuotedMsg,s=e.ref,u=e.restoreFocus,c=o("useWAWebForceUpdate").useForceUpdateDONOTUSE();o("useWAWebListener").useListener(n.composeQuotedMsg,"change:latestEditMsgKey",c);var m=o("useWAWebSetModelValue").useSetModelValue(n,"composeQuotedMsg"),p=function(t){t===void 0&&(t=o("WAWebUim").DismissReason.UIM_INTERACTION),t!==o("WAWebUim").DismissReason.LIFECYCLE&&(m(null),o("WAWebQuotedMessageUserJourneyLogger").QuotedMessageUserJourneyLogger.quotedMessageDeleted(n.id))};return d.jsx(o("WAWebUimUie.react").UIE,{ref:s,displayName:"ComposeBoxQuotedMsg",escapable:!0,requestFocus:u,requestDismiss:p,children:d.jsx(r("WAWebComposeBoxPopupPanel.react"),{onOmit:p,attachmentButtonHidden:t,questionType:i,isTopmostPanel:a,children:d.jsx(r("WAWebQuotedMsg.react"),{msg:l.safe(),displayType:o("WAWebDisplayType").DISPLAY_TYPE.CONVERSATION,composeQuotedMsgRemoteJid:n.composeQuotedMsgRemoteJid,theme:"composeBox",chat:o("WAWebFrontendMsgGetters").getChat(l),onClick:function(){o("WAWebQuotedMessageUserJourneyLogger").QuotedMessageUserJourneyLogger.quotedMessageTappedInComposer(n.id)}},l.id.toString())})})}y.displayName=y.name+" [from "+i.id+"]";function C(e){var t=e.isTopmostPanel,n=e.questionReplyQuotedMessage,a=e.ref;return r("vulture")("mZPANeCPcpR0ftBRjqotCb6G3ks="),d.jsx(o("WAWebUimUie.react").UIE,{ref:a,displayName:"QuestionReplyQuotedMsg",escapable:!1,children:d.jsx(r("WAWebComposeBoxPopupPanel.react"),{onOmit:r("WAWebNoop"),isTopmostPanel:t,questionType:o("WAWebQuestions.flow").QuestionType.Reply,showCloseButton:!1,children:d.jsx(r("WAWebQuestionReplyQuotedMessage.react"),{questionReplyQuotedMessage:n})})})}C.displayName=C.name+" [from "+i.id+"]";function b(e){var t=e.attachmentButtonHidden,n=e.chat,a=e.questionType,i=e.quotedGroupJid,l=e.ref,s=e.restoreFocus;r("vulture")("1XbldfV3hseqN2ptgov-myjUAZY=");var u=o("useWAWebSetModelValue").useSetModelValue(n,"quotedMsgAdminGroupJid"),c=function(t){t===void 0&&(t=o("WAWebUim").DismissReason.UIM_INTERACTION),t!==o("WAWebUim").DismissReason.LIFECYCLE&&u(null)};return d.jsx(o("WAWebUimUie.react").UIE,{ref:l,displayName:"QuotedMsgAdminGroupName",escapable:!0,requestFocus:s,requestDismiss:c,children:d.jsx(r("WAWebComposeBoxPopupPanel.react"),{questionType:a,onOmit:c,attachmentButtonHidden:t,isTopmostPanel:!0,children:d.jsx(o("WAWebQuotedMsgAdminGroupName.react").QuotedMsgAdminGroupName,{isComposePreview:!0,quotedGroupJid:i,quotedParentGroupJid:n.quotedMsgAdminGroupSubject!=null?n.quotedMsgAdminParentGroupJid:void 0,quotedGroupSubject:n.quotedMsgAdminGroupSubject},i.toString())})})}b.displayName=b.name+" [from "+i.id+"]";function v(e){var t=e.attachmentButtonHidden,n=e.isTopmostPanel,a=e.linkPreviewData,i=e.omitLinkPreview,l=e.questionType,s=e.ref,u=a.title,c=a.matchedText,m=a.description,p=a.thumbnail,_=a.inviteGrpType,f=a.isLoading,g=a.thumbnailHQ,h=a.thumbnailWidth,y=a.thumbnailHeight,C=o("WAWebMediaLinkPreviewContainer.react").getHostnameForUrl(c);return d.jsx(o("WAWebUimUie.react").UIE,{ref:s,displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:i,children:d.jsx("div",{"data-testid":void 0,className:"x6ikm8r",children:d.jsx(r("WAWebComposeBoxPopupPanel.react"),{onOmit:i,bodyBackground:!1,attachmentButtonHidden:t,isTopmostPanel:n,questionType:l,children:d.jsx(r("WAWebMediaLinkPreview.react"),{title:u,compose:!0,thumbnailJpegHQ:g,matchedText:C!=null?C:c,description:m,thumbnailJpeg:p,inviteGrpType:_,isLoading:f,thumbnailJpegWidth:h,thumbnailJpegHeight:y})})})})}v.displayName=v.name+" [from "+i.id+"]";function S(e){var t=e.attachmentButtonHidden,n=e.ctwaContextData,a=e.ctwaContextLinkData,i=e.isTopmostPanel,l=e.omitCtwa,s=e.questionType,u=e.ref;return d.jsx(o("WAWebUimUie.react").UIE,{ref:u,displayName:"ComposeBoxCtwaContextPreview",escapable:!0,requestDismiss:l,children:d.jsx(r("WAWebComposeBoxPopupPanel.react"),{onOmit:l,questionType:s,attachmentButtonHidden:t,isTopmostPanel:i,children:d.jsx(r("WAWebBizCtwaContextImagePreview.react"),{context:n,sourceUrl:a.sourceUrl,compose:!0})})})}S.displayName=S.name+" [from "+i.id+"]";function R(e,t){var a,i,l=t.chat,u=t.linkPreviewData,c=t.ctwaContextLinkData,p=t.ctwaContextData,R=t.restoreFocus,L=t.selectedExpressionPanel,E=t.getComposeBlockWidth,k=t.onComposeHeightChange,I=t.omitLinkPreview,T=t.omitCtwa,D=t.attachmentButtonHidden,x=t.onEmoji,$=t.onGif,P=t.onExpressionPanelChange,N=t.onSticker,M=t.onExpressionPanelClose,w=t.showSpamPanel,A=t.onClickNotSpam,F=t.onClickDismissSpam,O=t.questionReplyQuotedMessage,B=t.questionType,W=_(null),q=[],U=[],V=o("useWAWebChatValues").useChatValues(l.id,[o("WAWebChatGetters").getIsPSA,(i=o("WAWebFrontendChatGetters")).getShouldAppearInList,i.getComposeQuotedMsg,i.getComposeQuotedMsgRemoteJid,i.getQuotedMsgAdminGroupJid,i.getQuotedMsgAdminGroupSubject,i.getQuotedMsgAdminParentGroupJid,i.getMsgs,i.getContact]),H=V[0],G=V[1],z=V[2],j=V[3],K=V[4],Q=V[5],X=V[6],Y=V[7],J=V[8];w&&!H&&G&&Y&&Y.length>0?U.push(d.jsx(g,{chat:l,onClickNotSpam:A,onClickDismissSpam:F})):U.push(null),L&&E()!=null?U.push(d.jsx(h,{getComposeBlockWidth:E,onEmoji:x,onExpressionPanelChange:P,onExpressionPanelClose:M,onGif:$,onSticker:N,restoreFocus:R,ref:e,selectedExpressionPanel:L})):U.push(null);var Z=(a=r("WAWebChatInternalStatusHookWrapper")(l.id))!=null?a:{},ee=Z.hasActiveStatus;r("gkx")("26258")===!1&&o("WAWebChatGetters").getIsGroup(l)===!1&&n("cr:5981")!=null&&ee===!0?q.push(d.jsx(n("cr:5981").InternalStatusWarningComposeBox,{id:l.contact.id,renderImmediately:!0})):q.push(null),O?q.push(d.jsx(C,{questionReplyQuotedMessage:O,isTopmostPanel:q.filter(Boolean).length===0})):z?q.push(d.jsx(y,{chat:l,attachmentButtonHidden:D,rawQuotedMsg:z,isTopmostPanel:q.filter(Boolean).length===0,restoreFocus:R,questionType:B})):K?q.push(d.jsx(b,{chat:l,restoreFocus:R,quotedGroupJid:K,questionType:B})):q.push(null),u?q.push(d.jsx(v,{linkPreviewData:u,isTopmostPanel:q.filter(Boolean).length===0,omitLinkPreview:I,questionType:B})):q.push(null),c?q.push(d.jsx(S,{ctwaContextLinkData:c,isTopmostPanel:q.filter(Boolean).length===0,omitCtwa:T,ctwaContextData:p,questionType:B})):q.push(null);var te=q.filter(Boolean).length>0,ne=[f.overlay];ne.push(f.overlayRefresh,o("WAWebUISpacing").uiMargin.horiz12),te&&ne.push(o("WAWebUISpacing").uiMargin.top6);var re=_(null),oe=function(){var e,t=W==null||(e=W.current)==null?void 0:e.clientHeight;re.current===t&&o("WAWebPREGatingUtils").isPREResizeEnabled()||(k({overlay:t},!0),re.current=t)};m(function(){oe()},[]);var ae=d.jsx("div",{className:"x10l6tqk x13vifvy x1o0tod xh8yej3",children:d.jsxs("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(ne),{ref:W,children:[U,d.jsx(r("WAWebResizeObserver.react"),{onResize:oe,children:d.jsx(r("WAWebVelocityTransitionGroup"),{displayName:"ComposeBoxPanels",transitionName:"compose-panel-down",xstyle:[f.topPanelContainer,B==null&&f.inputBoxShadow,o("WAWebUISpacing").uiMargin.horizAuto],children:q})})]}))});return{PopupPanels:ae,hasTopPanels:te}}l.useComposePopupPanels=R}),98);
__d("WDSIconIcDelete.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-delete";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M7 21C6.45 21 5.97917 20.8042 5.5875 20.4125C5.19583 20.0208 5 19.55 5 19V6C4.71667 6 4.47917 5.90417 4.2875 5.7125C4.09583 5.52083 4 5.28333 4 5C4 4.71667 4.09583 4.47917 4.2875 4.2875C4.47917 4.09583 4.71667 4 5 4H9C9 3.71667 9.09583 3.47917 9.2875 3.2875C9.47917 3.09583 9.71667 3 10 3H14C14.2833 3 14.5208 3.09583 14.7125 3.2875C14.9042 3.47917 15 3.71667 15 4H19C19.2833 4 19.5208 4.09583 19.7125 4.2875C19.9042 4.47917 20 4.71667 20 5C20 5.28333 19.9042 5.52083 19.7125 5.7125C19.5208 5.90417 19.2833 6 19 6V19C19 19.55 18.8042 20.0208 18.4125 20.4125C18.0208 20.8042 17.55 21 17 21H7ZM17 6H7V19H17V6ZM10 17C10.2833 17 10.5208 16.9042 10.7125 16.7125C10.9042 16.5208 11 16.2833 11 16V9C11 8.71667 10.9042 8.47917 10.7125 8.2875C10.5208 8.09583 10.2833 8 10 8C9.71667 8 9.47917 8.09583 9.2875 8.2875C9.09583 8.47917 9 8.71667 9 9V16C9 16.2833 9.09583 16.5208 9.2875 16.7125C9.47917 16.9042 9.71667 17 10 17ZM14 17C14.2833 17 14.5208 16.9042 14.7125 16.7125C14.9042 16.5208 15 16.2833 15 16V9C15 8.71667 14.9042 8.47917 14.7125 8.2875C14.5208 8.09583 14.2833 8 14 8C13.7167 8 13.4792 8.09583 13.2875 8.2875C13.0958 8.47917 13 8.71667 13 9V16C13 16.2833 13.0958 16.5208 13.2875 16.7125C13.4792 16.9042 13.7167 17 14 17Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WAWebPttCancelButton.react",["fbt","WDSIconIcDelete.react","WDSMenuBarItem.react","react"],(function(t,n,r,o,a,i,l,s){var e=["ref"],u,c,d=c||(c=r("react")),m=(u||(u=o("react"))).useRef;function p(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=o.confirmOnMouseUp,i=o.onConfirm,l=o.tabOrder,u=m(!1),c=function(t){u.current=!0,window.addEventListener("mouseup",function(){u.current=!1},{once:!0})},p=function(t){a&&(u.current||t.button===0&&i(t))},_=function(t){t!=null&&i(t)},f=s._(/*BTDS*/"Cancel");return d.jsx("button",{onMouseUp:p,onMouseDown:c,"aria-label":f,children:d.jsx(r("WDSMenuBarItem.react"),{ref:n,testid:void 0,onClick:_,tabOrder:l,title:f,icon:r("WDSIconIcDelete.react")})})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);
__d("WAWebRecordingSessionStateEnum",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["NOT_STARTED","RECORDING","PAUSED","STOPPED","ERROR"]);i.RecordingSessionState=e}),66);
__d("WAWebPttComposerRecordingSessionGetters",["WAWebGetters","WAWebGettersCaches","WAWebRecordingSessionStateEnum"],(function(t,n,r,o,a,i,l){var e=o("WAWebGetters").createGetterFactories({createCache:o("WAWebGettersCaches").createRecordingSessionCache}),s=e.field,u=e.computed,c=e.clearCacheFor,d=c,m=s("exceedsMinDuration"),p=s("recordingState"),_=u(function(e){var t=e[0];return t===o("WAWebRecordingSessionStateEnum").RecordingSessionState.RECORDING},[p]),f=s("isViewOnce");l.clearRecordingSessionGetterCacheFor=d,l.getExceedsMinDuration=m,l.getIsRecording=_,l.getIsViewOnce=f}),98);
__d("WAWebPttComposerStreamingEncryptor",["Promise","WACryptoAesCbc","WACryptoHmac","WAMediaCalculateFilehash","WAMediaCrypto","WATypedArraysConcat","WAWebCryptoCreateMediaKeys","WAWebMmsMediaTypes","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s=(function(){function t(t){var r=t.mediaKeys,a=t.encKey,i=t.onChunkEncrypted,l=t.onEncryptionCompleted;this.$6=(e||(e=n("Promise"))).resolve(),this.$3=r,this.$4=a,this.$5=o("WACryptoAesCbc").getIv(this.$3.iv),this.$2=[this.$5],this.$1=new Uint8Array([]),this.$8=i,this.$9=l,this.$7=!1}var a=t.prototype;return a.getMediaKeys=function(){return this.$3},a.encryptChunk=function(t,a){var e=this;if(this.$7)throw r("err")("Encryption was already finalized");a&&(this.$7=!0);var i=this.$10(t,a);i!=null&&(this.$6=this.$6.then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("WACryptoAesCbc").aesCbcEncryptChunk(a,i,e.$5,e.$4);e.$8==null||e.$8(t.encryptedChunk),e.$11(t,a)})))},a.$11=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n;if(this.$2.push(e.encryptedChunk),this.$5=e.nextIv,!!t){var r=o("WATypedArraysConcat").concatTypedArrays(Uint8Array,this.$2,o("WAMediaCrypto").HMAC_LENGTH),a=this.$2[0].byteLength,i=r.byteLength-o("WAMediaCrypto").HMAC_LENGTH,l=r.subarray(0,i),s=yield o("WACryptoHmac").hmacSha256(this.$3.macKey,l,o("WAMediaCrypto").HMAC_LENGTH);r.set(new Uint8Array(s),i);var u=r.subarray(a),c=yield o("WAMediaCalculateFilehash").calculateFilehash(u);(n=this.$9)==null||n.call(this,s,c)}});function t(t,n){return e.apply(this,arguments)}return t})(),a.$10=function(t,n){if(this.$1=o("WATypedArraysConcat").concatTypedArrays(Uint8Array,[this.$1,t]),this.$1.length>=o("WACryptoAesCbc").AES_CBC_BLOCK_SIZE||n){var e=n?this.$1.length:Math.floor(this.$1.length-this.$1.length%o("WACryptoAesCbc").AES_CBC_BLOCK_SIZE),r=this.$1.slice(0,e);r.subarray();var a=new Uint8Array(this.$1.length-e);return a.set(this.$1.slice(e,this.$1.length)),this.$1=a,r}},t})();function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebCryptoCreateMediaKeys")(o("WAWebMmsMediaTypes").MEDIA_TYPES.PTT,e.mediaKey),n=yield o("WACryptoAesCbc").importRawKey(t.encKey);return new s({mediaKeys:t,encKey:n,onChunkEncrypted:e.onChunkEncrypted,onEncryptionCompleted:e.onEncryptionCompleted})}),c.apply(this,arguments)}l.StreamingEncryptor=s,l.createStreamingEncryptor=u}),98);
__d("WAWebWamEnumPttResultType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SENT:1,CANCELLED:2,TOO_SHORT:3});i.PTT_RESULT_TYPE=e}),66);
__d("WAWebWamEnumPttSourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({FROM_CONVERSATION:0,FROM_VOICEMAIL:1});i.PTT_SOURCE_TYPE=e}),66);
__d("WAWebPttWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPttResultType","WAWebWamEnumPttSourceType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({Ptt:[458,{isMetaAiThread:[15,e.TYPES.BOOLEAN],pttAvgNoiseLoudness:[11,e.TYPES.NUMBER],pttAvgNoiseLoudnessReduction:[12,e.TYPES.NUMBER],pttAvgSpeechLoudness:[13,e.TYPES.NUMBER],pttAvgSpeechLoudnessReduction:[14,e.TYPES.NUMBER],pttDraftPlayCnt:[7,e.TYPES.INTEGER],pttDraftSeekCnt:[8,e.TYPES.INTEGER],pttDuration:[5,e.TYPES.TIMER],pttLock:[4,e.TYPES.BOOLEAN],pttPauseCnt:[9,e.TYPES.INTEGER],pttResult:[1,o("WAWebWamEnumPttResultType").PTT_RESULT_TYPE],pttSize:[3,e.TYPES.NUMBER],pttSource:[2,o("WAWebWamEnumPttSourceType").PTT_SOURCE_TYPE],pttStop:[6,e.TYPES.BOOLEAN],pttStopTapCnt:[10,e.TYPES.INTEGER]},[1,1,1],"regular"]},{Ptt:[]});l.PttWamEvent=s}),98);
__d("WAWebUploadStreamerRefactorGatingUtils",["WAWebABProps"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebABProps").getABPropConfigValue("web_ptt_streamer_upload")}l.isUploadStreamerRefactorEnabled=e}),98);
__d("WAWebPttComposerRecordingSession",["fbt","invariant","$InternalEnum","Promise","WAAbortError","WALogger","WAMediaCalculateFilehash","WANullthrows","WAPromiseRaceAbort","WAPttComposerRecorder","WAPttComposerScaleWaveform","WARandomHex","WAWebAppTracker","WAWebBaseModel","WAWebBotProfileCollection","WAWebBotUtils","WAWebCallCollection","WAWebConfirmPopup.react","WAWebCreateMediaUploadMetrics","WAWebCryptoRandomMediaKey","WAWebFrontendChatGetters","WAWebGuidePopup.react","WAWebMedia","WAWebMediaCapture","WAWebMediaCaptureStreamType","WAWebMediaGetUploadOriginForChat","WAWebMediaLoad","WAWebMediaOpaqueData","WAWebMiscErrors","WAWebMmsClientUploadStreamer","WAWebMmsMediaTypes","WAWebModalManager","WAWebNoop","WAWebPresenceChatAction","WAWebPresenceCollection","WAWebPttAudioChannels","WAWebPttAudioManager","WAWebPttComposerRecordingSessionGetters","WAWebPttComposerStreamingEncryptor","WAWebPttDailyUtils","WAWebPttWamEvent","WAWebRecordingSessionStateEnum","WAWebSerializeError","WAWebTimeSpentLoggingExternal","WAWebUploadStreamerRefactorGatingUtils","WAWebWamEnumPttResultType","WAWebWamEnumPttSourceType","WAWebWamEnumTsExternalEventSource","WAWebWamMediaMetricUtils","asyncToGeneratorRuntime","err","lodash","react"],(function(t,n,r,o,a,i,l,s,u){var e,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A=w||(w=r("react")),F=n("$InternalEnum").Mirrored(["CANCEL_BUTTON","PTT_TOO_SHORT","SENT","OTHER"]),O=1,B=8.5,W=64,q=(function(t){function a(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,e.id=o("WAWebBaseModel").prop(),e.duration=o("WAWebBaseModel").prop(0),e.exceedsMinDuration=o("WAWebBaseModel").prop(!1),e.isViewOnce=o("WAWebBaseModel").prop(!1),e.recordingState=o("WAWebBaseModel").prop(o("WAWebRecordingSessionStateEnum").RecordingSessionState.NOT_STARTED),e._hasStreamingUploadFailed=o("WAWebBaseModel").prop(!1),e._draftPreviewSeen=o("WAWebBaseModel").prop(!1),e._draftPlayCount=o("WAWebBaseModel").prop(0),e._draftSeekCount=o("WAWebBaseModel").prop(0),e._pauseCount=o("WAWebBaseModel").prop(0),babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.initialize=function(){var e=this;t.prototype.initialize.call(this);var n=null;this.on("change:recordingState",function(){e._endTsExternalEvent==null||e._endTsExternalEvent(),e._chat!=null&&(o("WAWebPttComposerRecordingSessionGetters").getIsRecording(e)?(n=o("WAWebPttAudioChannels").MainAudioChannel.claim(e,function(){e.pause()}),o("WAWebPresenceChatAction").markRecording(e._chat),e._endTsExternalEvent=o("WAWebTimeSpentLoggingExternal").beginTsExternalEvent(o("WAWebWamEnumTsExternalEventSource").TS_EXTERNAL_EVENT_SOURCE.PTT_RECORD)):(n==null||n(),o("WAWebPresenceChatAction").markPaused(e._chat)))})},i.start=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=this;switch(this.recordingState){case o("WAWebRecordingSessionStateEnum").RecordingSessionState.NOT_STARTED:break;case o("WAWebRecordingSessionStateEnum").RecordingSessionState.RECORDING:return!0;case o("WAWebRecordingSessionStateEnum").RecordingSessionState.PAUSED:return this.resume();case o("WAWebRecordingSessionStateEnum").RecordingSessionState.STOPPED:case o("WAWebRecordingSessionStateEnum").RecordingSessionState.ERROR:throw r("err")("Can't start recording from state "+this.recordingState)}var a=r("WAWebCreateMediaUploadMetrics")(o("WAWebMmsMediaTypes").MEDIA_TYPES.PTT,r("WAWebMediaGetUploadOriginForChat")(this._chat),0,!1,!1),i=a.handleUploadHostFound,l=a.handleUploadAttemptSuccess,s=a.handleUploadAttemptError,u=a.handleUploadSuccess,f=a.handleUploadError,g=a.handleEncryptionStart,h=a.handleEncryptionSuccess,y=a.handleStreamUploadStart,C=a.handleUploadProgress,b=a.handleSendMessageStart;if(this._handleSendMessageStart=b,o("WAWebUploadStreamerRefactorGatingUtils").isUploadStreamerRefactorEnabled()){var v=r("WAWebCryptoRandomMediaKey")();this._earlyUploadPromise=new(M||(M=n("Promise")))(function(e){t._resolveEarlyUploadPromise=e});var S=new AbortController;this._uploaderAbortController=S;var R=yield o("WAMediaCalculateFilehash").getRandomFilehash(),L=new(o("WAWebMmsClientUploadStreamer")).UploadStreamer({encFilehash:R,token:R,type:o("WAWebMmsMediaTypes").MEDIA_TYPES.PTT,signal:S.signal,byteOffset:0,onUploadHostFound:i,onUploadAttemptSuccess:l,onUploadAttemptError:s,onProgress:function(t,n){C(t.loaded+n)},onStreamUploadStart:y,mediaId:o("WAWebWamMediaMetricUtils").generateMediaEventId()});L.startUploadFromClient(),this._encryptor=yield o("WAWebPttComposerStreamingEncryptor").createStreamingEncryptor({mediaKey:v.key,onChunkEncrypted:(function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){try{yield L.uploadChunkFromClient(n)}catch(n){if(t._resolveEarlyUploadPromise==null||t._resolveEarlyUploadPromise(null),t._hasStreamingUploadFailed=!0,n.name===o("WAAbortError").ABORT_ERROR)return;o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["onChunkEncrypted: ptt-streaming-upload-error: ",""])),n.message),o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["PTT Streaming Upload cancelled due to a problem uploading"]))).devConsole(n).sendLogs("ptt-streaming-upload-failed"),f(n)}});function a(e){return r.apply(this,arguments)}return a})(),onEncryptionCompleted:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){h();try{yield L.uploadChunkFromClient(new Uint8Array(e));var r=yield L.finalizeUploadFromClient(n);t._resolveEarlyUploadPromise==null||t._resolveEarlyUploadPromise({directPath:r.directPath,mediaKey:v.key,mediaKeyTimestamp:v.timestamp,encFilehash:n,url:r.url}),u()}catch(e){if(t._resolveEarlyUploadPromise==null||t._resolveEarlyUploadPromise(null),t._hasStreamingUploadFailed=!0,e.name===o("WAAbortError").ABORT_ERROR)return;o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["onEncryptionCompleted: ptt-streaming-upload-error: ",""])),e.message),o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["PTT Streaming Upload cancelled due to a problem when finalizing upload"]))).devConsole(e).sendLogs("ptt-streaming-upload-failed"),f(e)}});function r(t,n){return e.apply(this,arguments)}return r})()})}try{var E=!0;this._recorder=new(r("WAPttComposerRecorder"))({createStream:G,waveformSampleRate:this.getWaveformSampleRate(),onDuration:function(n){t.duration=n,t.exceedsMinDuration=n>=O},onPage:function(n,r){if(!(!o("WAWebUploadStreamerRefactorGatingUtils").isUploadStreamerRefactorEnabled()||t._hasStreamingUploadFailed))try{var e;E&&(g(),E=!1),(e=t._encryptor)==null||e.encryptChunk(n,r)}catch(e){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["PTT Streaming Upload cancelled due to a problem encrypting"]))).devConsole(e),t._resolveEarlyUploadPromise==null||t._resolveEarlyUploadPromise(null),t._hasStreamingUploadFailed=!0}}});var k=yield this._recorder.start();if(k)return this.recordingState=o("WAWebRecordingSessionStateEnum").RecordingSessionState.RECORDING,o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.RecordPTT),o("WAWebPresenceCollection").PresenceCollection.update(this._chat.presence.id),o("WAWebPttDailyUtils").incrementPttDailyCount(o("WAWebPttDailyUtils").PttDailyCountKind.RECORD,r("WANullthrows")(o("WAWebFrontendChatGetters").getKind(this._chat))),!0}catch(e){o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["PTT Recording Error\n",""],["PTT Recording Error\\n",""])),r("WAWebSerializeError")(e)).devConsole(e)}return this._endSession(),this.recordingState=o("WAWebRecordingSessionStateEnum").RecordingSessionState.ERROR,!1});function a(){return t.apply(this,arguments)}return a})(),i.getLiveWaveformSamples=function(){var e,t;return(e=(t=this._recorder)==null?void 0:t.getLiveWaveformSamples())!=null?e:[]},i.getCorrectedWaveformSamples=function(){var e,t;return(e=(t=this._recorder)==null?void 0:t.getCorrectedWaveformSamples())!=null?e:[]},i.getScaledWaveformSamples=function(){return r("WAPttComposerScaleWaveform")(this.getCorrectedWaveformSamples(),W).map(function(e){return Math.floor(e*100)})},i.getPreciseDuration=function(){var e,t;return(e=(t=this._recorder)==null?void 0:t.getPreciseDuration())!=null?e:0},i._endSession=function(){var e;(e=this._recorder)==null||e.stop()},i.pause=function(){if(this.recordingState===o("WAWebRecordingSessionStateEnum").RecordingSessionState.RECORDING){if(!this.exceedsMinDuration){this.stop(F.PTT_TOO_SHORT);return}this.recordingState=o("WAWebRecordingSessionStateEnum").RecordingSessionState.PAUSED,o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.RecordPTT);var e=r("WANullthrows")(this._recorder);e.pause()}},i.resume=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){switch(this.recordingState){case o("WAWebRecordingSessionStateEnum").RecordingSessionState.RECORDING:return!0;case o("WAWebRecordingSessionStateEnum").RecordingSessionState.PAUSED:break;case o("WAWebRecordingSessionStateEnum").RecordingSessionState.NOT_STARTED:case o("WAWebRecordingSessionStateEnum").RecordingSessionState.STOPPED:case o("WAWebRecordingSessionStateEnum").RecordingSessionState.ERROR:throw r("err")("Can't resume recording from state "+this.recordingState)}this.recordingState=o("WAWebRecordingSessionStateEnum").RecordingSessionState.RECORDING;try{var e=r("WANullthrows")(this._recorder),t=yield e.resume();return t?(o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.RecordPTT),!0):(this.recordingState=o("WAWebRecordingSessionStateEnum").RecordingSessionState.PAUSED,!1)}catch(e){return this.recordingState=o("WAWebRecordingSessionStateEnum").RecordingSessionState.ERROR,o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Error resuming recording session\n",""],["Error resuming recording session\\n",""])),r("WAWebSerializeError")(e)),!1}});function t(){return e.apply(this,arguments)}return t})(),i.stop=function(t){if(this.recordingState!==o("WAWebRecordingSessionStateEnum").RecordingSessionState.STOPPED&&(this.recordingState=o("WAWebRecordingSessionStateEnum").RecordingSessionState.STOPPED,o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.RecordPTT),this._endSession(),this._recorder!=null)){t===F.SENT?o("WAWebPttDailyUtils").incrementPttDailyCount(o("WAWebPttDailyUtils").PttDailyCountKind.SEND,r("WANullthrows")(o("WAWebFrontendChatGetters").getKind(this._chat))):this.duration>O&&o("WAWebPttDailyUtils").incrementPttDailyCount(o("WAWebPttDailyUtils").PttDailyCountKind.CANCEL,r("WANullthrows")(o("WAWebFrontendChatGetters").getKind(this._chat))),t!==F.SENT&&this._uploaderAbortController&&this._uploaderAbortController.abort();var e=H(t);e!=null&&this._sendPttWamEvent(e)}},i._getDataForSending=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: _getDataForSending started"])));var e=r("WANullthrows")(this._recorder),t=yield e.getCompleteRecording();o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Got complete recording, size: "," bytes, type: ",""])),t.size,t.type);var n=yield r("WAWebMediaOpaqueData").createFromData(t,t.type);return o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Created OpaqueData successfully"]))),n}catch(e){throw o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Error in _getDataForSending"]))),e}});function t(){return e.apply(this,arguments)}return t})(),i._getDataForPlayback=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=r("WANullthrows")(this._recorder),t=yield e.getPartialRecording(),n=yield o("WAWebMediaLoad").transcode(t);return r("WAWebMediaOpaqueData").createFromData(n,n.type)});function t(){return e.apply(this,arguments)}return t})(),i.getAudioForPlayback=function(){var e=this;return new j(function(){return e._getDataForPlayback()})},i.getWaveformSampleRate=function(){return B},i.send=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){e===void 0&&(e=!1);try{var n,a;o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: send started with isViewOnce=",", isWamoSub=",""])),e,t),(n=this._handleSendMessageStart)==null||n.call(this,e),this._recorder||o("WALogger").ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Recorder is null in send method"])));var i=r("WANullthrows")(this._recorder),l=this._chat;o("WALogger").LOG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Getting data for sending"])));var s=r("WAPromiseRaceAbort")(this._getDataForSending(),l.getDeleteSignal()),u=((a=l.getComposeContents())==null?void 0:a.ctwaContext)||void 0;o("WALogger").LOG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Before prepRawMedia, duration=",", waveform samples=",""])),Math.floor(i.getDuration()),this.getScaledWaveformSamples().length);var c;try{c=o("WAWebMedia").prepRawMedia(s,{isPtt:!0,precomputedFields:{duration:Math.floor(i.getDuration()),waveform:new Uint8Array(this.getScaledWaveformSamples())}}),o("WALogger").LOG(L||(L=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: prepRawMedia completed successfully"])))}catch(e){throw o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Error in prepRawMedia"]))),e}o("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Early upload promise status: ",""])),this._earlyUploadPromise?"exists":"null");var d=null;if(o("WAWebBotUtils").isMetaAiBot(l.id)){var m;d=(m=o("WAWebBotProfileCollection").BotProfileCollection.get(l.id))==null?void 0:m.personaId}try{c.sendToChat(l,{quotedMsg:l.composeQuotedMsg||void 0,addEvenWhilePreparing:!e,ctwaContext:u,isViewOnce:e,isWamoSub:t,botPersonaId:d},this._earlyUploadPromise),o("WALogger").LOG(I||(I=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: sendToChat called successfully"])))}catch(e){throw o("WALogger").ERROR(T||(T=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Error in sendToChat:"]))),e}l.composeQuotedMsg=null,o("WALogger").LOG(D||(D=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Stopping recording session with SENT reason"]))),this.stop(F.SENT);try{yield s.catch(o("WAAbortError").catchAbort(r("WAWebNoop"))),o("WALogger").LOG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: getData completed or was aborted"])))}catch(e){o("WALogger").ERROR($||($=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Error in getData: ",""])),e)}o("WALogger").LOG(P||(P=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: send method completed successfully"])))}catch(e){throw o("WALogger").ERROR(N||(N=babelHelpers.taggedTemplateLiteralLoose(["WAWebPttComposerRecordingSession: Unhandled error in send method"]))),e}});function t(t,n){return e.apply(this,arguments)}return t})(),i._sendPttWamEvent=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=r("WANullthrows")(this._recorder),a=yield n.getCompleteRecording();new(o("WAWebPttWamEvent")).PttWamEvent({pttSource:o("WAWebWamEnumPttSourceType").PTT_SOURCE_TYPE.FROM_CONVERSATION,pttResult:e,pttDuration:Math.round(this.duration)*1e3,pttSize:r("lodash").round((t=a.size)!=null?t:0,-3),pttStop:this._draftPreviewSeen,pttDraftPlayCnt:this._draftPlayCount,pttDraftSeekCnt:this._draftSeekCount,pttPauseCnt:this._pauseCount}).commit()});function t(t){return e.apply(this,arguments)}return t})(),i.markDraftPreviewSeen=function(){this._draftPreviewSeen||(this._draftPreviewSeen=!0,o("WAWebPttDailyUtils").incrementPttDailyCount(o("WAWebPttDailyUtils").PttDailyCountKind.DRAFT_REVIEW,r("WANullthrows")(o("WAWebFrontendChatGetters").getKind(this._chat))))},i.incrementDraftPlayCount=function(){this._draftPlayCount++},i.incrementDraftSeekCount=function(){this._draftSeekCount++},i.incrementPauseButtonCount=function(){this._pauseCount++,this._pauseCount===1&&o("WAWebPttDailyUtils").incrementPttDailyCount(o("WAWebPttDailyUtils").PttDailyCountKind.PAUSED_RECORD,r("WANullthrows")(o("WAWebFrontendChatGetters").getKind(this._chat)))},i.delete=function(){t.prototype.delete.call(this),o("WAWebPttComposerRecordingSessionGetters").clearRecordingSessionGetterCacheFor(this)},a})(o("WAWebBaseModel").BaseModel);q.Proxy="recordingSession";var U=o("WAWebBaseModel").defineModel(q);function V(e){return new U({id:o("WARandomHex").randomHex(8),_chat:e.chat})}function H(e){switch(e){case F.SENT:return o("WAWebWamEnumPttResultType").PTT_RESULT_TYPE.SENT;case F.PTT_TOO_SHORT:return o("WAWebWamEnumPttResultType").PTT_RESULT_TYPE.TOO_SHORT;case F.CANCEL_BUTTON:return o("WAWebWamEnumPttResultType").PTT_RESULT_TYPE.CANCELLED;case F.OTHER:return null}}function G(e){return z.apply(this,arguments)}function z(){return z=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(r("WAWebCallCollection").activeCall)return o("WAWebModalManager").ModalManager.open(A.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return o("WAWebModalManager").ModalManager.close()},children:s._(/*BTDS*/"Can't record voice messages during a WhatsApp call.")})),null;var t=o("WAWebMediaCapture").start({type:o("WAWebMediaCaptureStreamType").WAWebMediaCaptureStreamType.MICROPHONE,featureSurface:o("WAWebGuidePopup.react").FeatureSurface.VOICE_MESSAGES}),n=t.disposeStream,a=t.asyncStream;e.addEventListener("abort",function(){n()},{once:!0});try{return yield a}catch(e){if(e instanceof o("WAWebMiscErrors").GetUserMedia.NotAllowedError){var i;return o("WAWebModalManager").ModalManager.open(A.jsx((i=o("WAWebGuidePopup.react")).GuidePopup,{messaging:i.Messaging.MIC_FAIL,type:i.GuidePopupType.GUIDE_UNBLOCK,featureSurface:i.FeatureSurface.VOICE_MESSAGES})),null}if(e instanceof o("WAWebMiscErrors").GetUserMedia.GetUserMediaError){var i;return o("WAWebModalManager").ModalManager.open(A.jsx((i=o("WAWebGuidePopup.react")).GuidePopup,{messaging:i.Messaging.MIC_MISSING,type:i.GuidePopupType.GUIDE_NONE,featureSurface:i.FeatureSurface.VOICE_MESSAGES})),null}throw e}}),z.apply(this,arguments)}var j=(function(){function e(e){var t=this;this._opaqueDataPromise=e();var r=o("WAWebPttAudioManager").AudioManager.createAudioProxy();this._audio=r,this._unregisterFromAudioChannel=o("WAWebPttAudioChannels").MainAudioChannel.registerMedia(r),n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield t._opaqueDataPromise,n=t._audio;n!=null&&(n.src=e.url())})()}var t=e.prototype;return t.getAudio=function(){return this._audio!=null||u(0,56371),this._audio},t.dispose=function(){var e=this,t=this._audio;t!=null&&(this._unregisterFromAudioChannel(),this._audio=null,n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield e._opaqueDataPromise;t.autorelease()})())},e})();l.RecordingSessionStopReason=F,l.RecordingSession=U,l.createRecordingSession=V,l.AudioResource=j}),226);
__d("WAWebWamEnumPttMessageUserJourneyAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({START:1,PAUSE:2,RESUME:3,FAIL:4,SEND:5,DELETE:6,AUTO_CANCEL:7,LOCK:8,DRAFT_SAVED:9,DRAFT_LOADED:10});i.PTT_MESSAGE_USER_JOURNEY_ACTION=e}),66);
__d("WAWebWamEnumPttMessageUserJourneyFailureReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({FAIL_OTHER:1,FAIL_CREATE_RECORDER:2,FAIL_PREPARE_RECORDER:3,FAIL_START_RECORDER:4,FAIL_RESUME_RECORDER:5,FAIL_MIC_PERMISSION:6,FAIL_STORAGE_READ_WRITE_PERMISSION:7,FAIL_MINIMUM_STORAGE_REQUIREMENT:8,FAIL_PAUSE_RECORDER:9,FAIL_MOVE_PTT_FILE_TO_PERMANENT_STORAGE_ON_SEND:10,FAIL_STORE_PTT_FILE_IN_DRAFT_CACHE:11,FAIL_RECORDER_STOP:12,FAIL_DRAFT_PLAYBACK_START:13,FAIL_DRAFT_PLAYBACK_SEEK:14,FAIL_MIC_AND_STORAGE_READ_WRITE_PERMISSION:15});i.PTT_MESSAGE_USER_JOURNEY_FAILURE_REASON=e}),66);
__d("WAWebWamEnumPttMessageUserJourneyStage",[],(function(t,n,r,o,a,i){var e=Object.freeze({NORMAL:1,LOCKED:2});i.PTT_MESSAGE_USER_JOURNEY_STAGE=e}),66);
__d("WAWebWamEnumPttWaveformResult",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUCCESS:1,ALL_ZEROES:2,ALL_ONES:3,MISSING:4});i.PTT_WAVEFORM_RESULT=e}),66);
__d("WAWebPttMessageUserJourneyWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChatbarInitialState","WAWebWamEnumPttMessageUserJourneyAction","WAWebWamEnumPttMessageUserJourneyFailureReason","WAWebWamEnumPttMessageUserJourneyStage","WAWebWamEnumPttWaveformResult","WAWebWamEnumTsSurface","WAWebWamEnumUserJourneyChatType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({PttMessageUserJourney:[5402,{appSessionId:[1,e.TYPES.STRING],chatbarInitialState:[7,o("WAWebWamEnumChatbarInitialState").CHATBAR_INITIAL_STATE],isMetaAiThread:[12,e.TYPES.BOOLEAN],pttIntensityAggregateValue:[14,e.TYPES.NUMBER],pttMessageUserJourneyAction:[2,o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION],pttMessageUserJourneyContainsQuotedItem:[11,e.TYPES.BOOLEAN],pttMessageUserJourneyFailureReason:[9,o("WAWebWamEnumPttMessageUserJourneyFailureReason").PTT_MESSAGE_USER_JOURNEY_FAILURE_REASON],pttMessageUserJourneyStage:[3,o("WAWebWamEnumPttMessageUserJourneyStage").PTT_MESSAGE_USER_JOURNEY_STAGE],pttWaveformResult:[13,o("WAWebWamEnumPttWaveformResult").PTT_WAVEFORM_RESULT],uiSurface:[4,o("WAWebWamEnumTsSurface").TS_SURFACE],unifiedSessionId:[10,e.TYPES.STRING],userJourneyChatType:[5,o("WAWebWamEnumUserJourneyChatType").USER_JOURNEY_CHAT_TYPE],userJourneyEventMs:[8,e.TYPES.INTEGER],userJourneyFunnelId:[6,e.TYPES.STRING]},[1,1,1],"regular"]},{PttMessageUserJourney:[]});l.PttMessageUserJourneyWamEvent=s}),98);
__d("WAWebPttMessageUserJourneyLogger",["WALogger","WATimeUtils","WAWebABProps","WAWebPonyfillsCryptoRandomUUID","WAWebPttMessageUserJourneyWamEvent","WAWebUnifiedSession","WAWebWamEnumChatbarInitialState","WAWebWamEnumPttMessageUserJourneyAction","WAWebWamEnumTsSurface","WAWebWamEnumUserJourneyChatType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){e===void 0&&(e=r("WAWebPonyfillsCryptoRandomUUID")()),this.loggingEnabled=!1,this.$3=!1,this.loggingEnabled=o("WAWebABProps").getABPropConfigValue("ptt_user_journey_logging_wam_enabled"),this.$1=e}var n=t.prototype;return n.setHasDraft=function(t){t===void 0&&(t=!0),this.$3=t},n.start=function(t,n){this.$3=!1,this.$4({chatId:t,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,action:o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.START,containsQuotedItem:n})},n.pause=function(t,n){this.$4({chatId:t,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,action:o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.PAUSE,containsQuotedItem:n})},n.resume=function(t,n){this.$4({chatId:t,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,action:o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.RESUME,containsQuotedItem:n})},n.send=function(t,n){this.$4({chatId:t,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,action:o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.SEND,containsQuotedItem:n}),this.$3=!1},n.delete=function(t,n){this.$4({chatId:t,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,action:o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.DELETE,containsQuotedItem:n}),this.$3=!1},n.draftSaved=function(t,n){this.$4({chatId:t,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,action:o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_SAVED,containsQuotedItem:n})},n.$4=function(n){if(this.loggingEnabled){var t=o("WAWebUnifiedSession").UnifiedSessionManager.getSessionId();if(t==null){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[uj] [ptt message] Unified session ID is null"])));return}u(n.action)&&this.$2==null&&(this.$2=r("WAWebPonyfillsCryptoRandomUUID")());var a=this.$2;if(a!=null){var i=d(n.chatId),l=new(o("WAWebPttMessageUserJourneyWamEvent")).PttMessageUserJourneyWamEvent;l.appSessionId=this.$1,l.unifiedSessionId=t,l.userJourneyFunnelId=a,l.uiSurface=n.uiSurface,i!=null&&(l.userJourneyChatType=i),l.userJourneyEventMs=o("WATimeUtils").unixTimeMs(),l.chatbarInitialState=this.$3?o("WAWebWamEnumChatbarInitialState").CHATBAR_INITIAL_STATE.CONTAINS_DRAFT:o("WAWebWamEnumChatbarInitialState").CHATBAR_INITIAL_STATE.EMPTY,l.pttIntensityAggregateValue=0,l.pttMessageUserJourneyAction=n.action,l.pttMessageUserJourneyContainsQuotedItem=n.containsQuotedItem,l.commit(),c(n.action)&&(this.$2=null)}}},t})();function u(e){return e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.AUTO_CANCEL||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.FAIL||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_SAVED||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_LOADED?!1:e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.START||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.RESUME||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.PAUSE||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.DELETE||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.SEND||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.LOCK?!0:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function c(e){return e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.SEND||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.AUTO_CANCEL||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.FAIL||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_SAVED||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_LOADED||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.DELETE?!0:e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.START||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.RESUME||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.PAUSE||e===o("WAWebWamEnumPttMessageUserJourneyAction").PTT_MESSAGE_USER_JOURNEY_ACTION.LOCK?!1:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function d(e){return e.isUser()?o("WAWebWamEnumUserJourneyChatType").USER_JOURNEY_CHAT_TYPE.INDIVIDUAL:e.isGroup()?o("WAWebWamEnumUserJourneyChatType").USER_JOURNEY_CHAT_TYPE.GROUP:e.isNewsletter()?o("WAWebWamEnumUserJourneyChatType").USER_JOURNEY_CHAT_TYPE.CHANNEL:null}var m=new s;l.PttMessageUserJourneyLogger=m}),98);
__d("WDSIconIcKeyboardVoiceFilled.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-keyboard-voice-filled";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M12 14C11.1667 14 10.4583 13.7083 9.875 13.125C9.29166 12.5417 9 11.8333 9 11V5C9 4.16667 9.29166 3.45833 9.875 2.875C10.4583 2.29167 11.1667 2 12 2C12.8333 2 13.5417 2.29167 14.125 2.875C14.7083 3.45833 15 4.16667 15 5V11C15 11.8333 14.7083 12.5417 14.125 13.125C13.5417 13.7083 12.8333 14 12 14ZM12 21C11.7167 21 11.4792 20.9042 11.2875 20.7125C11.0958 20.5208 11 20.2833 11 20V17.9C9.45 17.7 8.13333 17.0583 7.05 15.975C5.96666 14.8917 5.30833 13.5917 5.075 12.075C5.025 11.7917 5.1 11.5417 5.3 11.325C5.5 11.1083 5.76666 11 6.1 11C6.33333 11 6.54166 11.0875 6.725 11.2625C6.90833 11.4375 7.025 11.65 7.075 11.9C7.29166 13.0667 7.85833 14.0417 8.775 14.825C9.69166 15.6083 10.7667 16 12 16C13.2333 16 14.3083 15.6083 15.225 14.825C16.1417 14.0417 16.7083 13.0667 16.925 11.9C16.975 11.65 17.0958 11.4375 17.2875 11.2625C17.4792 11.0875 17.6917 11 17.925 11C18.2417 11 18.5 11.1083 18.7 11.325C18.9 11.5417 18.975 11.7917 18.925 12.075C18.6917 13.5917 18.0333 14.8917 16.95 15.975C15.8667 17.0583 14.55 17.7 13 17.9V20C13 20.2833 12.9042 20.5208 12.7125 20.7125C12.5208 20.9042 12.2833 21 12 21Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSIconIcPauseCircle.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-pause-circle";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M10 16C10.2833 16 10.5208 15.9042 10.7125 15.7125C10.9042 15.5208 11 15.2833 11 15V9C11 8.71667 10.9042 8.47917 10.7125 8.2875C10.5208 8.09583 10.2833 8 10 8C9.71667 8 9.47917 8.09583 9.2875 8.2875C9.09583 8.47917 9 8.71667 9 9V15C9 15.2833 9.09583 15.5208 9.2875 15.7125C9.47917 15.9042 9.71667 16 10 16ZM14 16C14.2833 16 14.5208 15.9042 14.7125 15.7125C14.9042 15.5208 15 15.2833 15 15V9C15 8.71667 14.9042 8.47917 14.7125 8.2875C14.5208 8.09583 14.2833 8 14 8C13.7167 8 13.4792 8.09583 13.2875 8.2875C13.0958 8.47917 13 8.71667 13 9V15C13 15.2833 13.0958 15.5208 13.2875 15.7125C13.4792 15.9042 13.7167 16 14 16ZM12 22C10.6167 22 9.31667 21.7375 8.1 21.2125C6.88333 20.6875 5.825 19.975 4.925 19.075C4.025 18.175 3.3125 17.1167 2.7875 15.9C2.2625 14.6833 2 13.3833 2 12C2 10.6167 2.2625 9.31667 2.7875 8.1C3.3125 6.88333 4.025 5.825 4.925 4.925C5.825 4.025 6.88333 3.3125 8.1 2.7875C9.31667 2.2625 10.6167 2 12 2C13.3833 2 14.6833 2.2625 15.9 2.7875C17.1167 3.3125 18.175 4.025 19.075 4.925C19.975 5.825 20.6875 6.88333 21.2125 8.1C21.7375 9.31667 22 10.6167 22 12C22 13.3833 21.7375 14.6833 21.2125 15.9C20.6875 17.1167 19.975 18.175 19.075 19.075C18.175 19.975 17.1167 20.6875 15.9 21.2125C14.6833 21.7375 13.3833 22 12 22ZM12 20C14.2333 20 16.125 19.225 17.675 17.675C19.225 16.125 20 14.2333 20 12C20 9.76667 19.225 7.875 17.675 6.325C16.125 4.775 14.2333 4 12 4C9.76667 4 7.875 4.775 6.325 6.325C4.775 7.875 4 9.76667 4 12C4 14.2333 4.775 16.125 6.325 17.675C7.875 19.225 9.76667 20 12 20Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WAWebPttPauseResumeRecordingButton.react",["fbt","WDSIconIcKeyboardVoiceFilled.react","WDSIconIcPauseCircle.react","WDSMenuBarItem.react","react"],(function(t,n,r,o,a,i,l,s){var e=["ref"],u,c,d=c||(c=r("react")),m=(u||(u=o("react"))).useRef;function p(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=o.recording,i=o.onConfirm,l=o.confirmOnMouseUp,u=o.disabled,c=u===void 0?!1:u,p=o.tabOrder,_=m(!1),f=function(t){_.current=!0,window.addEventListener("mouseup",function(){_.current=!1},{once:!0})},g=function(t){l&&(_.current||t.button===0&&i(t))},h=function(t){t!=null&&i(t)},y=a?s._(/*BTDS*/"Pause recording"):s._(/*BTDS*/"Resume recording");return d.jsx("button",babelHelpers.extends({onMouseUp:g,onMouseDown:f,"aria-label":y},{0:{className:"x14ug900 x144v4sp"},1:{className:"x14ug900 x144v4sp"}}[!c<<0],{children:d.jsx(r("WDSMenuBarItem.react"),{ref:n,testid:void 0,title:y,onClick:h,disabled:c,tabOrder:p,icon:r(a?"WDSIconIcPauseCircle.react":"WDSIconIcKeyboardVoiceFilled.react")})}))}p.displayName=p.name+" [from "+i.id+"]",p.displayName="PttPauseAndResumeRecordingButton",l.default=p}),226);
__d("WDSIconIcSendFilled.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-send-filled";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M4.4 19.425C4.06667 19.5583 3.75 19.5291 3.45 19.3375C3.15 19.1458 3 18.8666 3 18.5V14L11 12L3 9.99997V5.49997C3 5.1333 3.15 4.85414 3.45 4.66247C3.75 4.4708 4.06667 4.44164 4.4 4.57497L19.8 11.075C20.2167 11.2583 20.425 11.5666 20.425 12C20.425 12.4333 20.2167 12.7416 19.8 12.925L4.4 19.425Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WAWebPttSendButton.react",["fbt","WDSIconIcSendFilled.react","WDSMenuBarItem.react","react"],(function(t,n,r,o,a,i,l,s){var e=["ref"],u,c,d=c||(c=r("react")),m=(u||(u=o("react"))).useRef;function p(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=o.disabled,i=a===void 0?!1:a,l=o.confirmOnMouseUp,u=o.onConfirm,c=o.tabOrder,p=m(!1),_=function(t){p.current=!0,window.addEventListener("mouseup",function(){p.current=!1},{once:!0})},f=function(t){l&&(p.current||t.button===0&&u(t))},g=function(t){t!=null&&u(t)},h=s._(/*BTDS*/"Send");return d.jsx("button",{onMouseUp:f,onMouseDown:_,"aria-label":h,children:d.jsx(r("WDSMenuBarItem.react"),{ref:n,testid:void 0,disabled:i,title:h,onClick:g,icon:r("WDSIconIcSendFilled.react"),buttonVariant:"filled",tabOrder:c})})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);
__d("useWAWebPttRecordingSessionValues",["useWAWebCollectionValues"],(function(t,n,r,o,a,i,l){function e(e,t){return o("useWAWebCollectionValues").useModelGetterValues(e,t)}l.usePttRecordingSessionValues=e}),98);
__d("WAWebPttComposer.react",["$InternalEnum","WANullthrows","WAWebAttachMediaViewOnce.react","WAWebBizCoexUtils","WAWebChatGetters","WAWebClock","WAWebCmd","WAWebFrontendChatGetters","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebNewsletterWamoSubMessageType","WAWebNewsletterWamoSubMessageTypePopup.react","WAWebNewsletterWamoSubUtils","WAWebPttCancelButton.react","WAWebPttComposerRecordingSession","WAWebPttComposerRecordingSessionGetters","WAWebPttComposerWaveform.react","WAWebPttMessageUserJourneyLogger","WAWebPttPauseResumeRecordingButton.react","WAWebPttPlayPauseButton.react","WAWebPttSendButton.react","WAWebPttTsExternalLogger","WAWebRecordingSessionStateEnum","WAWebTabOrder","WAWebUISpacing","WAWebUserPrefsMeUser","WAWebVelocityTransitionGroup","WAWebViewOnceGatingUtils","asyncToGeneratorRuntime","err","react","stylex","useWAWebChatValues","useWAWebEventTargetValue","useWAWebListener","useWAWebOnUnmount","useWAWebPttRecordingSessionValues","useWAWebSetModelValue","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.useCallback,p=c.useEffect,_=c.useRef,f=c.useState,g=n("$InternalEnum").Mirrored(["RECORDER","PREVIEW"]),h={pauseRecordingButtonContainer:{display:"x78zum5",$$css:!0},recordingDotRefresh:{height:"x170jfvy",width:"x1fsd2vl",backgroundColor:"x1b0f5k1",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0}};function y(e){var t,a=e.chat,i=e.recordingSession,l=e.onComplete,u=_(),c=_(),y=f(function(){switch(i.recordingState){case o("WAWebRecordingSessionStateEnum").RecordingSessionState.PAUSED:return g.PREVIEW;case o("WAWebRecordingSessionStateEnum").RecordingSessionState.RECORDING:return g.RECORDER;default:throw r("err")("Invalid recording session state: "+i.recordingState)}}),v=y[0],S=y[1],R=(t=o("useWAWebChatValues").useOptionalChatValues(a.id,[o("WAWebChatGetters").getIsNewsletter,o("WAWebFrontendChatGetters").getNewsletterMetadata,o("WAWebFrontendChatGetters").getComposeQuotedMsg]))!=null?t:[!1,null,null],L=R[0],E=R[1],k=R[2],I=f(null),T=I[0],D=I[1],x=f(function(){return v===g.PREVIEW?i.getAudioForPlayback():null}),$=x[0],P=x[1];p(function(){if($!=null)return o("WAWebPttTsExternalLogger").attachPttPlayTimeSpentLogger($.getAudio())},[$]);var N=function(){P(null),$==null||$.dispose()},M=$==null?void 0:$.getAudio(),w=_(),A=_(),F=_(i);F.current=i;var O=r("useWAWebEventTargetValue")(i,"change:duration",function(){return Math.floor(i.duration)}),B=f(function(){return Math.floor((M==null?void 0:M.currentTime)||0)}),W=B[0],q=B[1],U=f(function(){return((M==null?void 0:M.currentTime)||0)===0}),V=U[0],H=U[1],G=function(t){q(Math.floor(t)),H(t===0)};o("useWAWebListener").useListener(M,"timeupdate",function(){var e;G((e=M==null?void 0:M.currentTime)!=null?e:0)});var z=f(null),j=z[0],K=z[1],Q=o("useWAWebPttRecordingSessionValues").usePttRecordingSessionValues(i,[o("WAWebPttComposerRecordingSessionGetters").getExceedsMinDuration,o("WAWebPttComposerRecordingSessionGetters").getIsRecording,o("WAWebPttComposerRecordingSessionGetters").getIsViewOnce]),X=Q[0],Y=Q[1],J=Q[2],Z=o("useWAWebSetModelValue").useSetModelValue(i,"isViewOnce"),ee=f(J),te=ee[0],ne=ee[1],re=function(){ne(!1),Z(!J)};o("useWAWebListener").useListener(i,"change:recordingState",function(){(i.recordingState===o("WAWebRecordingSessionStateEnum").RecordingSessionState.STOPPED||i.recordingState===o("WAWebRecordingSessionStateEnum").RecordingSessionState.ERROR)&&l()});var oe=r("useWAWebEventTargetValue")(M,["play","pause"],function(){return M!=null&&!M.paused}),ae=C(),ie=function(){i.stop(o("WAWebPttComposerRecordingSession").RecordingSessionStopReason.CANCEL_BUTTON),o("WAWebPttMessageUserJourneyLogger").PttMessageUserJourneyLogger.delete(a.id,k!=null)};p(function(){Y&&self.setTimeout(function(){var e;(e=w.current)==null||e.focus()},100)},[Y]),p(function(){v===g.PREVIEW&&(F.current.markDraftPreviewSeen(),self.setTimeout(function(){var e;(e=A.current)==null||e.focus()},100))},[v]),r("useWAWebOnUnmount")(function(){M==null||M.pause(),N(),i.pause()});var le=function(t){i.send(J,t)},se=function(){if(X){var e=c.current;if(L&&o("WAWebNewsletterWamoSubUtils").newsletterSupportsSubscriptions(E)&&e&&o("WAWebNewsletterGatingUtils").isWamoSubCreatorExperienceSupported()){var t=function(t){le(t===o("WAWebNewsletterWamoSubMessageType").NewsletterWamoSubMessageType.WamoSub)};D({popupAnchorEl:e,handleSelect:t})}else le();o("WAWebPttMessageUserJourneyLogger").PttMessageUserJourneyLogger.send(a.id,k!=null)}};o("useWAWebListener").useListener(i,"change:recordingState",function(){if(!o("WAWebPttComposerRecordingSessionGetters").getIsRecording(i)&&i.recordingState===o("WAWebRecordingSessionStateEnum").RecordingSessionState.PAUSED){N();var e=i.getAudioForPlayback();P(e),G(0),S(g.PREVIEW)}});var ue=function(){i.incrementPauseButtonCount(),i.pause(),o("WAWebPttMessageUserJourneyLogger").PttMessageUserJourneyLogger.pause(a.id,k!=null)},ce=function(){n("asyncToGeneratorRuntime").asyncToGenerator(function*(){M==null||M.pause(),S(g.RECORDER);var e=yield i.resume();e||S(g.PREVIEW),o("WAWebPttMessageUserJourneyLogger").PttMessageUserJourneyLogger.resume(a.id,k!=null)})()},de=function(){var e=r("WANullthrows")(M);e.paused?(e.play(),i.incrementDraftPlayCount()):e.pause()};o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"pause_ptt_recording",function(){var e=v===g.RECORDER?ue:ce;e()}),o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"send_ptt_recording",function(){se()}),o("useWAWebListener").useListener(M,"ended",function(){r("WANullthrows")(M).load()});var me=m(function(){var e;return(e=M==null?void 0:M.currentTime)!=null?e:0},[M]),pe=r("useWAWebStableCallback")(function(){return i.getPreciseDuration()}),_e=r("useWAWebStableCallback")(function(){return i.duration}),fe=r("useWAWebStableCallback")(function(){return i.getLiveWaveformSamples()}),ge=r("useWAWebStableCallback")(function(){return i.getCorrectedWaveformSamples()}),he=r("useWAWebStableCallback")(function(e){G(e),K(null),r("WANullthrows")(M).currentTime=e,i.incrementDraftSeekCount()}),ye=r("useWAWebStableCallback")(function(e){K(Math.floor(e))}),Ce=d.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(h.pauseRecordingButtonContainer,o("WAWebUISpacing").uiMargin.end12),{children:d.jsx(r("WAWebPttPauseResumeRecordingButton.react"),{recording:v===g.RECORDER,confirmOnMouseUp:ae,tabOrder:o("WAWebTabOrder").TAB_ORDER.PTT_BUTTON,onConfirm:v===g.RECORDER?ue:ce})})),be=d.jsxs("div",{className:"x10l6tqk x13vifvy xtijo5x x1ey2m1c x1o0tod x78zum5 x6s0dn4",children:[d.jsx("div",babelHelpers.extends({},s.props(h.recordingDotRefresh,o("WAWebUISpacing").uiMargin.horiz12))),d.jsx(b,{time:O}),d.jsx("div",{className:"x78zum5 x1iyjqo2 xs83m0k x1r8uery x1sikpz7 x1sa5p1d x1wbi8v6",children:d.jsx(o("WAWebPttComposerWaveform.react").Waveform,{location:o("WAWebPttComposerWaveform.react").WaveformLocation.DRAFT_PREVIEW,sampleRate:i.getWaveformSampleRate(),getSamples:fe,getCurrentTime:me,getDuration:pe,live:Y,mode:o("WAWebPttComposerWaveform.react").WaveformMode.RECORDER,onSeek:ye,onSeekEnd:he,tabIndex:o("WAWebTabOrder").TAB_ORDER.PTT_BUTTON})})]}),ve=o("WAWebViewOnceGatingUtils").isSendingViewOnceV2Enabled()&&!o("WAWebChatGetters").getIsNewsletter(a)&&!a.contact.isEnterprise&&!o("WAWebFrontendChatGetters").getIsCapiHostedGroup(a)&&!o("WAWebBizCoexUtils").isMeOrCurrentContactHosted(a.contact)&&!o("WAWebUserPrefsMeUser").isMeAccount(a.contact.id)?d.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(o("WAWebUISpacing").uiMargin.horiz12),{children:d.jsx(r("WAWebAttachMediaViewOnce.react"),{mediaType:o("WAWebMsgType").MSG_TYPE.PTT,dimension:24,onChange:re,isOn:J,disabled:!1,shouldShowNux:v===g.PREVIEW,dataTab:o("WAWebTabOrder").TAB_ORDER.PTT_BUTTON,shouldSkipNuxAndToast:te})})):null,Se=j!=null?j:V?O:W,Re=d.jsxs("div",{className:"x10l6tqk x13vifvy xtijo5x x1ey2m1c x1o0tod x78zum5 x6s0dn4 x14mko6t x1y3qizg x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x15unhv1 x1s194ge xvp2sfm x11hqq3w x13tw7jo xbm2e5w xgdig0o xj3boke xzt5al7 x1kukv79 x11ahuha x972fbf x10w94by x1qhh985 x14e42zd",children:[d.jsx(r("WAWebPttPlayPauseButton.react"),{ref:A,theme:"compose-box",paused:!oe,tabOrder:o("WAWebTabOrder").TAB_ORDER.PTT_BUTTON,onConfirm:de}),d.jsx("div",{className:"x78zum5 x1iyjqo2 xs83m0k x1r8uery x1sikpz7 xf6vk7d x1hm9lzh",children:d.jsx(o("WAWebPttComposerWaveform.react").Waveform,{location:o("WAWebPttComposerWaveform.react").WaveformLocation.DRAFT_PREVIEW,sampleRate:i.getWaveformSampleRate(),getSamples:ge,getCurrentTime:me,getDuration:_e,live:oe,mode:o("WAWebPttComposerWaveform.react").WaveformMode.PREVIEW,onSeek:ye,onSeekEnd:he,tabIndex:o("WAWebTabOrder").TAB_ORDER.PTT_BUTTON})}),d.jsx(b,{time:Se})]}),Le=function(t){t.key==="Escape"&&(t.stopPropagation(),ie())};return d.jsxs("div",{onKeyDown:Le,ref:u,className:"x78zum5 x6s0dn4 xh8yej3 x19ygybj",tabIndex:0,children:[d.jsx(r("WAWebPttCancelButton.react"),{ref:w,confirmOnMouseUp:ae,onConfirm:ie,tabOrder:o("WAWebTabOrder").TAB_ORDER.PTT_BUTTON}),d.jsx("div",{className:"x1n2onr6 x78zum5 x1iyjqo2 xs83m0k x1r8uery x6s0dn4 x5yr21d",children:d.jsxs(r("WAWebVelocityTransitionGroup"),{transitionName:"fade",children:[v===g.RECORDER?be:null,v===g.PREVIEW?Re:null]})}),Ce,ve,d.jsx(r("WAWebPttSendButton.react"),{ref:c,disabled:!X&&!Y,confirmOnMouseUp:ae,onConfirm:se,tabOrder:o("WAWebTabOrder").TAB_ORDER.PTT_BUTTON}),T!=null&&d.jsx(r("WAWebNewsletterWamoSubMessageTypePopup.react"),{handleSelect:T.handleSelect,popupAnchorEl:T.popupAnchorEl,onDismiss:function(){return D(null)}})]})}y.displayName=y.name+" [from "+i.id+"]";function C(){var e=f(!1),t=e[0],n=e[1],r=250;return p(function(){var e=self.setTimeout(function(){n(!0)},r),t=function(){n(!1),o()};window.addEventListener("mouseup",t);var o=function(){window.removeEventListener("mouseup",t),self.clearTimeout(e)};return o},[]),t}function b(e){var t=e.time;return d.jsx("div",{className:"x2c5eco xunn93x",role:"timer",children:o("WAWebClock").Clock.durationStr(t)})}b.displayName=b.name+" [from "+i.id+"]",l.default=y}),98);
__d("WAWebMessageComposer.react",["WAWebAttachMenuBarItem.react","WAWebAttachMenuGatingUtils","WAWebAvatarGatingUtils","WAWebBotGating","WAWebChatGetters","WAWebClassnames","WAWebCmd","WAWebComposeBox.scss","WAWebComposeBoxPanelsMenu.react","WAWebComposeBoxSendButton.react","WAWebContactGetters","WAWebEnvironment","WAWebExpressionsPanelPicker.react","WAWebKeyboardHotKeys.react","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebPttComposer.react","WAWebQuestions.flow","WAWebQuestionsGatingUtils","WAWebStateUtils","WAWebUISpacing","nullthrows","react","stylex","useWAWebListener"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=r("react")),d=(e||(e=o("react"))).useRef,m={inputContainer:{boxSizing:"x9f619",flex:"x12lumcd",width:"x1qrby5j",minWidth:"xeuugli",minHeight:"xisnujt",fontSize:"x6prxxf",fontWeight:"x1fcty0u",lineHeight:"x1fc57z9",backgroundColor:"xk7ee7b",borderTopColor:"x1716072",borderInlineEndColor:"x1ygal6x",borderBottomColor:"x89wmna",borderInlineStartColor:"x1rbbhm9",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",borderStartStartRadius:"xyi3aci",borderStartEndRadius:"xwf5gio",borderEndEndRadius:"x1p453bz",borderEndStartRadius:"x1suzm8a",outline:"x1a2a7pz",willChange:"x13w7htt",display:"x78zum5",$$css:!0},inputContainerMaterial:{borderStartStartRadius:"xlr9sxt",borderStartEndRadius:"xvvg52n",borderEndEndRadius:"xwd4zgb",borderEndStartRadius:"xq8v1ta",$$css:!0},inputContainerRefresh:{minHeight:"x1wiwyrm",height:"xt7dq6l",borderStartStartRadius:"x17m9png",borderStartEndRadius:"x91sizk",borderEndEndRadius:"x1vva9xg",borderEndStartRadius:"x1jfkl46",alignItems:"x6s0dn4",transition:"x1m0b2ad",$$css:!0},inputBoxShadow:{boxShadow:"xkfubxc",$$css:!0},questionInputContainer:{backgroundColor:"x4wrhlh",borderTopColor:"xx42vgk",borderInlineEndColor:"xbogo7e",borderBottomColor:"x120ee7l",borderInlineStartColor:"x1vb5itz",$$css:!0},withoutTopBorder:{borderTopWidth:"x972fbf",$$css:!0},inputContainerRefreshNoTopPanel:{transition:"x1p0mfcu",$$css:!0},inputContainerHasTopPanel:{borderStartStartRadius:"x1bczwif",borderStartEndRadius:"x17un8ov",boxShadow:"xz16w4b",transition:"x1m0b2ad",$$css:!0}};function p(e){var t=e.chat,n=e.closePttComposer,a=e.expressionsPanelPickerRef,i=e.expressionsPanelWrapperRef,l=e.getCurrentComposeContent,u=e.handleExpressionPanelChange,p=e.handleInputBlur,f=e.handleInputFocus,g=e.handleMetaUpDebounced,h=e.handlePanelsGif,y=e.handlePanelsSticker,C=e.handlePanelsStickerFromStore,b=e.handleSendText,v=e.handleTab,S=e.hasTextState,R=e.hasTopPanel,L=e.input,E=e.inputHotkeyRef,k=e.isMessageToBot,I=e.onExpressionPanelActive,T=e.pttComposerActive,D=e.questionReplyQuotedMessage,x=e.questionType,$=e.recordingSession,P=e.ref,N=e.replaceInputSelection,M=e.richTextInputRef,w=e.selectedExpressionPanel,A=e.startRecording,F=e.updateTextAfterMediaDrawerClose,O=d(null);o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"open_attachment_dropdown",function(){var e=O.current;e&&e.open()});var B=x===o("WAWebQuestions.flow").QuestionType.Question,W=x===o("WAWebQuestions.flow").QuestionType.Reply,q=o("WAWebAvatarGatingUtils").avatarsOnWebEnabled(),U=(!o("WAWebChatGetters").getIsNewsletter(t)||o("WAWebNewsletterGatingUtils").isNewsletterPTTSendingEnabled())&&(!B||o("WAWebQuestionsGatingUtils").isQuestionSenderEnabledForMsgType(t,o("WAWebMsgType").MSG_TYPE.PTT))&&(!W||o("WAWebQuestionsGatingUtils").isQuestionReplySenderEnabledForMsgType(t,o("WAWebMsgType").MSG_TYPE.PTT))&&!o("WAWebContactGetters").getIsCAPISupportAccount(t.contact)&&(!k||o("WAWebBotGating").isBotPttEnabled()),V=function(t){t.target===t.currentTarget&&T===!1&&(M==null||M.focus())},H=function(n){return k?!1:B?o("WAWebQuestionsGatingUtils").isQuestionSenderEnabledForMsgType(t,n):W?o("WAWebQuestionsGatingUtils").isQuestionReplySenderEnabledForMsgType(t,n):!0},G={expressionsPanelWrapperRef:i,expressionsPanelPickerRef:a,replaceInputSelection:N,handlePanelsSticker:y,handlePanelsStickerFromStore:C,handlePanelsGif:h,isStickerEnabled:H(o("WAWebMsgType").MSG_TYPE.STICKER),isAvatarEnabled:q&&H(o("WAWebMsgType").MSG_TYPE.STICKER),isGifEnabled:H(o("WAWebMsgType").MSG_TYPE.VIDEO),onExpressionPanelActive:I,getComposeBoxEditorRef:function(){return M},handleClose:function(){return M==null?void 0:M.focus()},size:W||B?o("WAWebExpressionsPanelPicker.react").ExpressionsPanelSize.SMALL:void 0},z=[o("WAWebUISpacing").uiPadding.all5,o("WAWebUISpacing").uiMargin.horiz12,o("WAWebUISpacing").uiMargin.bottom12],j=c.jsx(o("WAWebComposeBoxSendButton.react").SendButtonRefresh,{supportsPtt:U,onClickSend:b,recordingSession:$,onStartRecording:function(){return void A()},hasTextState:S,isMessageToBot:k}),K=void 0;!k&&(!B||o("WAWebQuestionsGatingUtils").getEnabledQuestionAttachmentTypes(t).size>0)&&(!W||o("WAWebQuestionsGatingUtils").getEnabledQuestionReplyAttachmentTypes(t).size>0)&&(K=c.jsx("div",{className:"x100vrsf x1vqgdyp x78zum5 x6s0dn4 xpvyfi4",children:c.jsx(r("WAWebAttachMenuBarItem.react"),{ref:O,chat:o("WAWebStateUtils").unproxy(t),getComposeContents:l,getComposeBoxEditorRef:function(){return M},onMenuComplete:F,iconWidth:24,questionType:x,questionReplyQuotedMessage:D})}));var Q=T?c.jsx("div",{className:"x78zum5 x13a6bvl xh8yej3 x67bb7w",children:c.jsx(r("WAWebPttComposer.react"),{chat:o("WAWebStateUtils").unproxy(t),recordingSession:r("nullthrows")($),onComplete:n})}):c.jsxs(c.Fragment,{children:[!k&&K,o("WAWebAttachMenuGatingUtils").areExpressionPanelsEnabledV2()&&!o("WAWebAttachMenuGatingUtils").shouldShowExpressionPanelsOutOfInput()?c.jsx(_,babelHelpers.extends({},G)):void 0,L,j]}),X=r("WAWebEnvironment").isWindows,Y=babelHelpers.extends({tab:v,"shift+tab":v},X?{"ctrl+up":g}:{"meta+up":g},{up:g});return c.jsxs("div",{ref:P,className:r("WAWebComposeBox.scss").textMessageComposerContainer,children:[c.jsxs("div",{className:o("WAWebClassnames").classnamesConvertMeToStylexPlease("x9f619 x78zum5 x6s0dn4 xl56j7k x1ofbdpd",r("WAWebComposeBox.scss").boxPanelWrapper),children:[o("WAWebAttachMenuGatingUtils").areExpressionPanelsEnabledV2()?void 0:c.jsx(o("WAWebComposeBoxPanelsMenu.react").ComposeBoxExpressionPanelsMenu,{chat:t,selectedExpressionPanel:w,onChange:u,theme:o("WAWebComposeBoxPanelsMenu.react").PanelsTheme.ChatComposeBox,isMessageToBot:k}),o("WAWebAttachMenuGatingUtils").areExpressionPanelsEnabledV2()&&o("WAWebAttachMenuGatingUtils").shouldShowExpressionPanelsOutOfInput()?c.jsx(_,babelHelpers.extends({},G)):void 0]}),c.jsx("div",{className:r("WAWebComposeBox.scss").textMessageComposerInputContainer,children:c.jsx(o("WAWebKeyboardHotKeys.react").HotKeys,{ref:E,className:(s||(s=r("stylex")))(m.inputContainer,z,m.inputContainerMaterial,m.inputContainerRefresh,!x&&m.inputBoxShadow,!R&&m.inputContainerRefreshNoTopPanel,R&&m.inputContainerHasTopPanel,x&&m.questionInputContainer,x!=null&&R&&m.withoutTopBorder),handlers:Y,onClick:V,onFocus:f,onBlur:p,children:Q})})]})}p.displayName=p.name+" [from "+i.id+"]";function _(e){var t=e.expressionsPanelPickerRef,n=e.expressionsPanelWrapperRef,r=e.getComposeBoxEditorRef,a=e.handleClose,i=e.handlePanelsGif,l=e.handlePanelsSticker,s=e.handlePanelsStickerFromStore,u=e.isAvatarEnabled,d=e.isGifEnabled,m=e.isStickerEnabled,p=e.onExpressionPanelActive,_=e.replaceInputSelection,f=e.size;return c.jsx(o("WAWebExpressionsPanelPicker.react").ExpressionsPanelPicker,{ref:t,wrapperRef:n,onEmoji:_,onAvatar:u?l:void 0,onSticker:m?l:void 0,onStickerFromStore:m?s:void 0,onGif:d?i:void 0,onToggleActive:function(t){p==null||p(t)},getComposeBoxEditorRef:r,onClose:a,size:f})}_.displayName=_.name+" [from "+i.id+"]",l.MessageComposer=p}),98);
__d("WAWebQuickRepliesPluginLogEvents",["WAWebQuickReplyWamEvent","WAWebWamEnumQuickReplyAction","WAWebWamEnumQuickReplyEntryPoint","WAWebWamEnumQuickReplyType"],(function(t,n,r,o,a,i,l){function e(e,t){t===void 0&&(t=!1);var n=new(o("WAWebQuickReplyWamEvent")).QuickReplyWamEvent({quickReplyAction:o("WAWebWamEnumQuickReplyAction").QUICK_REPLY_ACTION.ACTION_CHAT_IMPRESSION,quickReplyCount:e,quickReplyEntryPoint:t?o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD});n.commit()}function s(e){e===void 0&&(e=!1);var t=new(o("WAWebQuickReplyWamEvent")).QuickReplyWamEvent({quickReplyAction:o("WAWebWamEnumQuickReplyAction").QUICK_REPLY_ACTION.ACTION_CHAT_CLICK,quickReplyKeywordMatched:!1,quickReplyEntryPoint:e?o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD});t.commit()}function u(e){e===void 0&&(e=!1);var t=new(o("WAWebQuickReplyWamEvent")).QuickReplyWamEvent({quickReplyAction:o("WAWebWamEnumQuickReplyAction").QUICK_REPLY_ACTION.ACTION_CHAT_CLICK_CANCEL,quickReplyEntryPoint:e?o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD});t.commit()}function c(e){e===void 0&&(e=!1);var t=new(o("WAWebQuickReplyWamEvent")).QuickReplyWamEvent({quickReplyAction:o("WAWebWamEnumQuickReplyAction").QUICK_REPLY_ACTION.ACTION_SMART_DEFAULT_CLICK,quickReplyKeywordMatched:!1,quickReplyEntryPoint:e?o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD});t.commit()}function d(e){e===void 0&&(e=!1);var t=new(o("WAWebQuickReplyWamEvent")).QuickReplyWamEvent({quickReplyAction:o("WAWebWamEnumQuickReplyAction").QUICK_REPLY_ACTION.ACTION_SMART_DEFAULT_CLICK,quickReplyKeywordMatched:!1,quickReplyEntryPoint:e?o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD,quickReplyType:o("WAWebWamEnumQuickReplyType").QUICK_REPLY_TYPE.QUICK_REPLY_TYPE_PIX_KEY});t.commit()}l.logFilterEvent=e,l.logSelectEvent=s,l.logCancelEvent=u,l.logSmartDefaultSelectEvent=c,l.logPixSmartSelectEvent=d}),98);
__d("WAWebQuickRepliesPluginResult.react",["WAWebUISpacing","WDSText.react","react","stylex","useWAWebModelValues"],(function(t,n,r,o,a,i,l){var e,s,u=e||(e=r("react")),c={quickReplyResult:{display:"x78zum5",alignItems:"x6s0dn4",fontSize:"x1nxh6w3",borderStartStartRadius:"xyi3aci",borderStartEndRadius:"xwf5gio",borderEndEndRadius:"x1p453bz",borderEndStartRadius:"x1suzm8a",textAlign:"x1yc453h",$$css:!0},quickReplyResultSelected:{color:"x14ug900",backgroundColor:"x4wrhlh",$$css:!0}};function d(e){var t=o("useWAWebModelValues").useModelValues(e.quickReply,["shortcut","message"]),n=t.shortcut,a=t.message,i=e.query,l=e.selected,d=e.onMouseDown,m=e.onMouseEnter,p=e.onMouseUp,_=n.slice(i.length),f=[c.quickReplyResult,o("WAWebUISpacing").uiPadding.vert10,o("WAWebUISpacing").uiPadding.horiz8];return l===!0&&f.push(c.quickReplyResultSelected),u.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(f),{onMouseDown:d,onMouseUp:p,onMouseEnter:m,"data-testid":void 0,children:u.jsxs("div",{className:"x78zum5 xeuugli xdt5ytf xh8yej3",children:[u.jsxs("div",{className:"x78zum5 x6s0dn4",children:[u.jsx(r("WDSText.react"),{type:"Body1",colorName:"contentDefault",children:i}),u.jsx(r("WDSText.react"),{type:"Body1",colorName:"contentDefault",children:_})]}),u.jsx("div",{"data-testid":void 0,children:u.jsx(r("WDSText.react"),{type:"Body2",colorName:"contentDeemphasized",children:a})})]})}))}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("WAWebSendLocationChatAction",["WALogger","WATimeUtils","WAWebAck","WAWebMsgKey","WAWebSendMsgChatAction","WAWebSendMsgResultAction","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.chat,a=t.lat,i=t.lng,l=t.loc,s=t.meUser,u=yield c({chat:n,lat:a,lng:i,loc:l,meUser:s});try{var d=yield o("WAWebSendMsgChatAction").addAndSendMsgToChat(n,u)[1];if(!d||d.messageSendResult!==o("WAWebSendMsgResultAction").SendMsgResult.OK)throw r("err")("Location message SendMsgResult failure status")}catch(t){throw o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Location message send to chat failure: ",""])),t),t}}),u.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.chat,n=e.lat,a=e.lng,i=e.loc,l=e.meUser,s={type:"location",ack:o("WAWebAck").ACK.CLOCK,from:l,id:new(r("WAWebMsgKey"))({from:l,to:t.id,id:yield r("WAWebMsgKey").newId(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,t:o("WATimeUtils").unixTime(),to:t.id,lat:n,lng:a,loc:i};return s}),d.apply(this,arguments)}l.default=s}),98);
__d("WAWebQuickReplyPickerPlugin",["fbt","WALogger","WATypeUtils","WAWebBizQuickRepliesDrawerLoadable","WAWebBizSendOrderAction","WAWebBusinessProfileCollection","WAWebChatCollection","WAWebContactCollection","WAWebDrawerManager","WAWebFrontendContactGetters","WAWebLexicalTypeAheadList.react","WAWebPencilRefreshedIcon.react","WAWebQuickRepliesPluginLogEvents","WAWebQuickRepliesPluginResult.react","WAWebQuickReplyCollection","WAWebQuickReplyEnum","WAWebQuickReplyGetters","WAWebSendContactsAction","WAWebSendLocationChatAction","WAWebSendTextMsgChatAction","WAWebUserPrefsMeUser","WDSButton.react","react","useWAWebLexicalTypeAhead"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m=d||(d=o("react")),p=c||(c=r("react")),_=m.useEffect,f=m.useMemo,g=m.useRef,h=m.useState,y=52,C="/",b=25,v=30;function S(e){var t=e.editor,n=t,a=o("WAWebPencilRefreshedIcon.react").PencilRefreshedIcon,i=o("useWAWebLexicalTypeAhead").useTypeAhead(n,C,{boundary:!0,maxQueryLength:b}),l=i.query,u=i.replaceQuery,c=i.omitQuery,d=i.leadOffset,m=g(!1),S=g(),L=g(!1),D=h(!1),x=D[0],$=D[1];_(function(){o("WAWebQuickReplyCollection").QuickReplyCollection.addSmartDefaultsIfNeeded()},[]),_(function(){$(m.current)},[l]);var P=function(t,n){if(t.itemKey==="quick-replies-header")return p.jsxs("div",{className:"x889kno xf159sx x1a8lsjc xmzvs34 x6prxxf xhslqc4 x1yc453h x78zum5 x1qughib x6s0dn4",children:[p.jsx("span",{children:s._(/*BTDS*/"Quick replies")}),p.jsx(r("WDSButton.react"),{variant:"borderless",type:"default",size:"small",Icon:a,onPress:function(){o("WAWebDrawerManager").DrawerManager.openDrawerRight(p.jsx(o("WAWebBizQuickRepliesDrawerLoadable").WAWebBizQuickRepliesDrawerLoadable,{onBack:function(){return o("WAWebDrawerManager").DrawerManager.closeDrawerRight()},isInitialStep:!1}))},"aria-label":s._(/*BTDS*/"Edit Quick Replies")})]},"quick-replies-header");if(!t.quickReply)return p.jsx("div",{});var e=t.quickReply;return p.jsx(r("WAWebQuickRepliesPluginResult.react"),{quickReply:e,query:t.query,selected:n},e.id.toString())},N=function(t){if(t.itemKey!=="quick-replies-header"){var e=t.quickReply;if(e){switch(S.current=e.message,o("WAWebQuickReplyGetters").getType(e)){case o("WAWebQuickReplyEnum").QuickReplyTypes.PROFILE_SMART_DEFAULT:c(),I(e);break;case o("WAWebQuickReplyEnum").QuickReplyTypes.ADDRESS_SMART_DEFAULT:c(),k(e);break;case o("WAWebQuickReplyEnum").QuickReplyTypes.HOURS_SMART_DEFAULT:c(),E(e);break;case o("WAWebQuickReplyEnum").QuickReplyTypes.PIX_KEY_SMART_DEFAULT:c(),T(e);break;default:u(e.message,{select:!0}),e.useOnce()}o("WAWebQuickReplyGetters").getType(e)===o("WAWebQuickReplyEnum").QuickReplyTypes.PIX_KEY_SMART_DEFAULT?o("WAWebQuickRepliesPluginLogEvents").logPixSmartSelectEvent(m.current):e.isSmartDefault()?o("WAWebQuickRepliesPluginLogEvents").logSmartDefaultSelectEvent(m.current):o("WAWebQuickRepliesPluginLogEvents").logSelectEvent(m.current),L.current=m.current,m.current=!1}}},M=function(){c(),m.current=!1},w=f(function(){if(l==null)return null;var e=R(l,x);if(e.length===0)return null;var t={height:v,itemKey:"quick-replies-header",contentKey:"header",index:0,quickReply:null,query:"",selectable:!1},n=e.map(function(e,t){return{height:y,itemKey:e.id,contentKey:l,index:t+1,quickReply:e,query:l,selectable:!0}});return[t].concat(n)},[l,x]),A=600,F=(w!=null?w:[]).map(function(e){var t;return{renderFn:function(n){return P(e,n)},onSelect:function(){return N(e)},width:A,height:(t=e.height)!=null?t:y,skipKeyboardNav:e.itemKey==="quick-replies-header"}}),O=F.findIndex(function(e){return e.skipKeyboardNav===!1});return p.jsx(o("WAWebLexicalTypeAheadList.react").LexicalTypeAheadList,{leadOffset:d,items:F,onCancel:M,startingIndex:O})}S.displayName=S.name+" [from "+i.id+"]";function R(e,t){var n=o("WAWebQuickReplyCollection").QuickReplyCollection.filterShortcuts(e),r=o("WAWebChatCollection").ChatCollection.getActive();return n=L(r,n),n.length&&o("WAWebQuickRepliesPluginLogEvents").logFilterEvent(n.length,t),n}function L(e,t){return t.filter(function(t){return!t.hideForChat(e)})}function E(t){var n=o("WAWebChatCollection").ChatCollection.getActive();n&&(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendBusinessHours inside WAWebQuickReplyPickerPlugin"]))),o("WAWebSendTextMsgChatAction").sendTextMsgToChat(n,t.message),t.useOnce())}function k(e){var t=o("WAWebChatCollection").ChatCollection.getActive(),n=o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),a=o("WAWebBusinessProfileCollection").BusinessProfileCollection.get(n),i=o("WAWebContactCollection").ContactCollection.get(n);if(!(!t||!a)){var l=a.latitude,s=a.longitude,c=a.address;if(o("WATypeUtils").isNumber(l)&&o("WATypeUtils").isNumber(s)&&i){var d=o("WAWebFrontendContactGetters").getDisplayName(i);a.address&&(d+="\n"+a.address),r("WAWebSendLocationChatAction")({chat:t,lat:l,lng:s,loc:d,meUser:n}),e.useOnce()}else c&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["sendBusinessAddress inside WAWebQuickReplyPickerPlugin"]))),o("WAWebSendTextMsgChatAction").sendTextMsgToChat(t,c),e.useOnce())}}function I(e){var t=o("WAWebChatCollection").ChatCollection.getActive(),n=o("WAWebUserPrefsMeUser").getMePnUserOrThrow();if(n!=null){var a=o("WAWebContactCollection").ContactCollection.get(n);!t||!a||(r("WAWebSendContactsAction")([a],t),e.useOnce())}}function T(e){var t=o("WAWebChatCollection").ChatCollection.getActive();t&&(o("WAWebBizSendOrderAction").sendPixKeyPaymentInfoMessage(t),e.useOnce())}l.QuickReplyPickerPlugin=S}),226);
__d("WAWebQuickReplySuggestions.react",["Lexical","WALogger","WATypeUtils","WAWebBizSendOrderAction","WAWebBusinessProfileCollection","WAWebChatCollection","WAWebContactCollection","WAWebFrontendContactGetters","WAWebListSuggestionsPanel.react","WAWebQuickRepliesPluginLogEvents","WAWebQuickRepliesPluginResult.react","WAWebQuickReplyCollection","WAWebQuickReplyEnum","WAWebQuickReplyGetters","WAWebSendContactsAction","WAWebSendLocationChatAction","WAWebSendTextMsgChatAction","WAWebUserPrefsMeUser","react","useWAWebForceUpdate","useWAWebLexicalEvent","useWAWebLexicalTypeAhead","useWAWebListener","vulture"],(function(t,n,r,o,a,i,l){var e,s,u,c,d=c||(c=o("react")),m=u||(u=r("react")),p=d.useEffect,_=d.useImperativeHandle,f=d.useMemo,g=d.useRef,h=52,y="/",C=25;function b(e){"use no forget";var t=e.ref,n=e.editor,a=e.kind,i=e.onSelect,l=e.onHide;r("vulture")("NDIpW609phBnWmlfBVFyl35NvtM=");var s=o("useWAWebLexicalTypeAhead").useTypeAhead(n,y,{boundary:!0,maxQueryLength:C}),u=s.query,c=s.clearQuery,d=s.replaceQuery,b=s.omitQuery,S=s.setQuery,I=o("useWAWebForceUpdate").useForceUpdateDONOTUSE(),T=g(!1),D=g(),x=g(!1);o("useWAWebListener").useListener(o("WAWebQuickReplyCollection").QuickReplyCollection,"add remove change:shortcut",I),p(function(){o("WAWebQuickReplyCollection").QuickReplyCollection.addSmartDefaultsIfNeeded()},[]);var $=function(t,n){return m.jsx(r("WAWebQuickRepliesPluginResult.react"),{quickReply:t.quickReply,query:t.query,selected:n},t.quickReply.id.toString())},P=function(t){var e=t.quickReply;switch(D.current=e.message,o("WAWebQuickReplyGetters").getType(e)){case o("WAWebQuickReplyEnum").QuickReplyTypes.PROFILE_SMART_DEFAULT:c(),E(e);break;case o("WAWebQuickReplyEnum").QuickReplyTypes.ADDRESS_SMART_DEFAULT:c(),L(e);break;case o("WAWebQuickReplyEnum").QuickReplyTypes.HOURS_SMART_DEFAULT:c(),R(e);break;case o("WAWebQuickReplyEnum").QuickReplyTypes.PIX_KEY_SMART_DEFAULT:c(),k(e);break;default:d(e.message,{select:!0}),e.useOnce()}o("WAWebQuickReplyGetters").getType(e)===o("WAWebQuickReplyEnum").QuickReplyTypes.PIX_KEY_SMART_DEFAULT?o("WAWebQuickRepliesPluginLogEvents").logPixSmartSelectEvent(T.current):e.isSmartDefault()?o("WAWebQuickRepliesPluginLogEvents").logSmartDefaultSelectEvent(T.current):o("WAWebQuickRepliesPluginLogEvents").logSelectEvent(T.current),x.current=T.current,T.current=!1,i==null||i()},N=function(){b(),T.current=!1},M=f(function(){if(u==null)return null;var e=v(u,T.current);return e.length===0?null:e.map(function(e,t){return{height:h,itemKey:e.id,contentKey:u,index:t,quickReply:e,query:u,selectable:!0}})},[u]);return o("useWAWebLexicalEvent").useLexicalKeydownEvent(n,"Backspace",function(){var e=D.current;e&&n.getEditorState().read(function(){var t=o("Lexical").$getSelection();t&&e===t.getTextContent()&&o("WAWebQuickRepliesPluginLogEvents").logCancelEvent(x.current)})},!0),_(t,function(){return{togglePanel:function(){u==null?(S(""),T.current=!0):(c(),T.current=!1)}}}),m.jsx(o("WAWebListSuggestionsPanel.react").ListSuggestionsPanel,{kind:a,editor:n,items:M,renderItem:$,onSelect:P,onDismiss:N,onHide:l})}b.displayName=b.name+" [from "+i.id+"]";function v(e,t){var n=o("WAWebQuickReplyCollection").QuickReplyCollection.filterShortcuts(e),r=o("WAWebChatCollection").ChatCollection.getActive();return n=S(r,n),n.length&&o("WAWebQuickRepliesPluginLogEvents").logFilterEvent(n.length,t),n}function S(e,t){return t.filter(function(t){return!t.hideForChat(e)})}function R(t){var n=o("WAWebChatCollection").ChatCollection.getActive();n&&(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendBusinessHours inside WAWebQuickReplySuggestions"]))),o("WAWebSendTextMsgChatAction").sendTextMsgToChat(n,t.message),t.useOnce())}function L(e){var t=o("WAWebChatCollection").ChatCollection.getActive(),n=o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),a=o("WAWebBusinessProfileCollection").BusinessProfileCollection.get(n),i=o("WAWebContactCollection").ContactCollection.get(n);if(!(!t||!a)){var l=a.latitude,u=a.longitude,c=a.address;if(o("WATypeUtils").isNumber(l)&&o("WATypeUtils").isNumber(u)&&i){var d=o("WAWebFrontendContactGetters").getDisplayName(i);a.address&&(d+="\n"+a.address),r("WAWebSendLocationChatAction")({chat:t,lat:l,lng:u,loc:d,meUser:n}),e.useOnce()}else c&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["sendBusinessAddress inside WAWebQuickReplySuggestions"]))),o("WAWebSendTextMsgChatAction").sendTextMsgToChat(t,c),e.useOnce())}}function E(e){var t=o("WAWebChatCollection").ChatCollection.getActive(),n=o("WAWebUserPrefsMeUser").getMePnUserOrThrow();if(n!=null){var a=o("WAWebContactCollection").ContactCollection.get(n);!t||!a||(r("WAWebSendContactsAction")([a],t),e.useOnce())}}function k(e){var t=o("WAWebChatCollection").ChatCollection.getActive();t&&(o("WAWebBizSendOrderAction").sendPixKeyPaymentInfoMessage(t),e.useOnce())}l.QuickReplySuggestions=b}),98);
__d("WAWebReconnectUtil",["WAWebSocketModel","WAWebStreamModel"],(function(t,n,r,o,a,i,l){var e=function(){var e=this;this.isReconnecting=!1,this.reconnectIfDisconnected=function(){!e.isReconnecting&&o("WAWebStreamModel").Stream.displayInfo===o("WAWebStreamModel").StreamInfo.OFFLINE&&(e.isReconnecting=!0,o("WAWebSocketModel").Socket.summary(),self.setTimeout(function(){return e.isReconnecting=!1},3e3))}},s=new e().reconnectIfDisconnected;l.reconnect=s}),98);
__d("WAWebUseComposeBoxActionListeners",["WAWebComposeBoxActions","useWAWebListener"],(function(t,n,r,o,a,i,l){function e(e,t){var n,r,a=e.id.toString();(n=o("useWAWebListener")).useListener((r=o("WAWebComposeBoxActions")).ComposeBoxActions,"focus_"+a,t.onFocus),n.useListener(r.ComposeBoxActions,"focus",t.onFocus),n.useListener(r.ComposeBoxActions,"send_"+a,t.onSend),n.useListener(r.ComposeBoxActions,"paste_"+a,t.onPaste),n.useListener(r.ComposeBoxActions,"paste",t.onPaste),n.useListener(r.ComposeBoxActions,"paste_files_"+a,t.onPasteFiles),n.useListener(r.ComposeBoxActions,"send_paste_"+a,t.onRoutedPaste),n.useListener(r.ComposeBoxActions,"toggle_quick_replies",t.onToggleQuickReplies),n.useListener(r.ComposeBoxActions,"add_sending_log_attributes_"+a,t.onSendingLogAttributes),n.useListener(r.ComposeBoxActions,"set_ctwa_context_link_data_"+a,t.onCtwaContextLinkData),n.useListener(r.ComposeBoxActions,"set_text_content_"+a,t.onSetTextContent)}l.default=e}),98);
__d("WAWebUseShouldShowBotSuggestions",["WAWebBotGating","WAWebMsgType","WAWebUserPrefsMeUser","useWAWebEventTargetValue"],(function(t,n,r,o,a,i,l){function e(e,t){var n=r("useWAWebEventTargetValue")(e,["change:msgsLength"],function(){var t,n=o("WAWebBotGating").isBotEnabled()&&e.id.isBot(),r=(t=e.msgs.last())==null?void 0:t.subtype;return n&&(e.msgsLength===0||e.msgsLength===1&&r==="bot_init")}),a=r("useWAWebEventTargetValue")(e,["change:msgsLength"],function(){if(!o("WAWebBotGating").isBizBot3pAvailable()||!t||t.length===0)return!1;var n=e.msgs.last();if(!n||n.subtype==="biz_bot_3p_disclosure")return!0;if(n.type===o("WAWebMsgType").MSG_TYPE.CHAT&&!o("WAWebUserPrefsMeUser").isMeAccount(n.from)){var r=e.msgs.at(e.msgs.length-2);if((r==null?void 0:r.subtype)==="biz_bot_3p_disclosure")return!0}return!e.msgs.some(function(e){return e.type!==o("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE&&e.type!==o("WAWebMsgType").MSG_TYPE.E2E_NOTIFICATION})},[t]);return n||a}l.useShouldShowBotSuggestions=e}),98);
__d("WAWebWamEnumTextMessageUserJourneyAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({TYPING_START:1,CLEARED:2,SENT:3,DRAFT_SAVED:4,EXIT:5,CLICK_ON_COMPOSER:6,DELIVERED:7,DRAFT_LOADED:8});i.TEXT_MESSAGE_USER_JOURNEY_ACTION=e}),66);
__d("WAWebTextMessageUserJourneyWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChatbarInitialState","WAWebWamEnumTextMessageUserJourneyAction","WAWebWamEnumTsSurface","WAWebWamEnumUserJourneyChatType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({TextMessageUserJourney:[5404,{appSessionId:[1,e.TYPES.STRING],chatbarInitialState:[6,o("WAWebWamEnumChatbarInitialState").CHATBAR_INITIAL_STATE],textMessageUserJourneyAction:[2,o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION],textMessageUserJourneyContainsQuotedItem:[9,e.TYPES.BOOLEAN],uiSurface:[3,o("WAWebWamEnumTsSurface").TS_SURFACE],unifiedSessionId:[8,e.TYPES.STRING],userJourneyChatType:[4,o("WAWebWamEnumUserJourneyChatType").USER_JOURNEY_CHAT_TYPE],userJourneyEventMs:[7,e.TYPES.INTEGER],userJourneyFunnelId:[5,e.TYPES.STRING]},[1,1,1],"regular"]},{TextMessageUserJourney:[]});l.TextMessageUserJourneyWamEvent=s}),98);
__d("WAWebTextMessageUserJourneyLogger",["WALogger","WATimeUtils","WAWebABProps","WAWebPonyfillsCryptoRandomUUID","WAWebTextMessageUserJourneyWamEvent","WAWebUnifiedSession","WAWebWamEnumChatbarInitialState","WAWebWamEnumTextMessageUserJourneyAction","WAWebWamEnumUserJourneyChatType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){e===void 0&&(e=r("WAWebPonyfillsCryptoRandomUUID")()),this.loggingEnabled=!1,this.loggingEnabled=o("WAWebABProps").getABPropConfigValue("text_user_journey_logging_wam_enabled"),this.$1=e}var n=t.prototype;return n.log=function(n){if(this.loggingEnabled){var t=o("WAWebUnifiedSession").UnifiedSessionManager.getSessionId();if(t==null){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[uj] [text message] Unified session ID is null"])));return}u(n.action)&&this.$2==null&&(this.$2=r("WAWebPonyfillsCryptoRandomUUID")());var a=this.$2;if(a!=null){var i=d(n.chatId),l=new(o("WAWebTextMessageUserJourneyWamEvent")).TextMessageUserJourneyWamEvent;l.appSessionId=this.$1,l.unifiedSessionId=t,l.userJourneyFunnelId=a,l.uiSurface=n.uiSurface,l.textMessageUserJourneyAction=n.action,n.containsQuotedItem!=null&&(l.textMessageUserJourneyContainsQuotedItem=n.containsQuotedItem),l.userJourneyChatType=i,l.userJourneyEventMs=o("WATimeUtils").unixTimeMs(),l.chatbarInitialState=n.hasDraft?o("WAWebWamEnumChatbarInitialState").CHATBAR_INITIAL_STATE.CONTAINS_DRAFT:o("WAWebWamEnumChatbarInitialState").CHATBAR_INITIAL_STATE.EMPTY,l.commit(),c(n.action)&&(this.$2=null)}}},t})();function u(e){return e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.TYPING_START||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.CLEARED||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.CLICK_ON_COMPOSER||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.SENT?!0:e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.DELIVERED||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_SAVED||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_LOADED||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.EXIT?!1:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function c(e){return e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_SAVED||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_LOADED||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.SENT||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.EXIT?!0:e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.CLEARED||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.CLICK_ON_COMPOSER||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.DELIVERED||e===o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.TYPING_START?!1:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function d(e){return e.isUser()?o("WAWebWamEnumUserJourneyChatType").USER_JOURNEY_CHAT_TYPE.INDIVIDUAL:e.isGroup()?o("WAWebWamEnumUserJourneyChatType").USER_JOURNEY_CHAT_TYPE.GROUP:e.isNewsletter()?o("WAWebWamEnumUserJourneyChatType").USER_JOURNEY_CHAT_TYPE.CHANNEL:o("WAWebWamEnumUserJourneyChatType").USER_JOURNEY_CHAT_TYPE.MULTIPLE}var m=new s;l.TextMessageUserJourneyLogger=m}),98);
__d("WAWebUseTextMessageUserJourneyLogger",["WAWebTextMessageUserJourneyLogger","WAWebWamEnumTextMessageUserJourneyAction","WAWebWamEnumTsSurface","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useRef;function u(e,t){t===void 0&&(t=!1);var n=s(!1),r=s(!1),a=s(t),i=function(i,l){var t=n.current;if(a.current&&!r.current){r.current=!0;return}var s=n.current=i;!t&&s?o("WAWebTextMessageUserJourneyLogger").TextMessageUserJourneyLogger.log({chatId:e,action:o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.TYPING_START,hasDraft:a.current,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,containsQuotedItem:l}):(t||a.current)&&!s&&o("WAWebTextMessageUserJourneyLogger").TextMessageUserJourneyLogger.log({chatId:e,action:o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.CLEARED,hasDraft:a.current,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,containsQuotedItem:l})},l=function(r){o("WAWebTextMessageUserJourneyLogger").TextMessageUserJourneyLogger.log({chatId:e,action:o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.SENT,hasDraft:a.current,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,containsQuotedItem:r}),n.current=!1,a.current=!1},u=function(r){var t=n.current?o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.DRAFT_SAVED:o("WAWebWamEnumTextMessageUserJourneyAction").TEXT_MESSAGE_USER_JOURNEY_ACTION.EXIT;o("WAWebTextMessageUserJourneyLogger").TextMessageUserJourneyLogger.log({chatId:e,action:t,hasDraft:a.current,uiSurface:o("WAWebWamEnumTsSurface").TS_SURFACE.CHAT_THREAD,containsQuotedItem:r})};return{handleTextMsgChangeForUJLogging:i,handleMsgSentForUJLogging:l,handleCloseForUJLogging:u}}l.default=u}),98);
__d("useForceUpdate",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useReducer;function u(){var e=s(c,0),t=e[1];return t}function c(e){return e+1}l.default=u}),98);
__d("WAWebComposeBox.react",["fbt","$InternalEnum","PaymentLink","PaymentLinkWamLogger","Promise","WAAbortError","WAFilteredCatch","WALogger","WANullthrows","WAShiftTimer","WATimeUtils","WAWebApiPrepareCtwaContextSend","WAWebAttachMenuGatingUtils","WAWebAttachmentMenuLogger","WAWebBizGatingUtils","WAWebBizQueryCtwaContextBridge","WAWebBlocklistCollection","WAWebBotCommandSuggestions.react","WAWebBotGating","WAWebBotProfileGetters","WAWebBotSuggestions.react","WAWebBotTypes","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebChatGetters","WAWebChatPreferenceCollection","WAWebClassnames","WAWebCmd","WAWebCodeFormatMutator","WAWebComposeBox.scss","WAWebComposeBoxActions","WAWebComposeBoxPopupPanels.react","WAWebComposeBoxUtils","WAWebConstantsDeprecated","WAWebConversationSpamUtils","WAWebCopyPasteCopyableArea.react","WAWebCryptoRandomMediaKey","WAWebDrawerManager","WAWebElevatedPushNamesFlag","WAWebEmojiPickerPlugin","WAWebErrorBoundary.react","WAWebFilePicker.react","WAWebFileUtils","WAWebFrontendChatGetters","WAWebGenMinimalLinkPreviewChatAction","WAWebKeyboardHotKeys.react","WAWebLexicalUtils","WAWebLimitSharingUIUtils","WAWebLinkPreviewChatAction","WAWebLinkify","WAWebMediaConstants","WAWebMediaGetUploadOriginForChat","WAWebMediaOpaqueData","WAWebMediaUploadMmsThumbnail","WAWebMentionPickerPlugin","WAWebMessageComposer.react","WAWebMessageEditGatingUtils","WAWebMimeTypes","WAWebMiscErrors","WAWebMmsMediaTypes","WAWebModalManager","WAWebNewsletterGatingUtils","WAWebNewsletterSendMsgAction","WAWebNewsletterWamoSubMessageType","WAWebNewsletterWamoSubMessageTypePopup.react","WAWebNewsletterWamoSubUtils","WAWebNoop","WAWebPrepareMessageSendingAction","WAWebPresenceChatAction","WAWebProtobufsE2E.pb","WAWebPttComposerRecordingSession","WAWebPttMessageUserJourneyLogger","WAWebQuestions.flow","WAWebQuickReplyLogging","WAWebQuickReplyPickerPlugin","WAWebQuickReplySuggestions.react","WAWebReconnectUtil","WAWebRecordingSessionStateEnum","WAWebRichTextInput.react","WAWebSendStickerAction","WAWebSendTextMsgChatAction","WAWebStateUtils","WAWebStopEvent","WAWebSuggestionsPanelContainer.react","WAWebTabOrder","WAWebTextSizeUtils","WAWebToast.react","WAWebToastManager","WAWebUISpacing","WAWebUim","WAWebUimUie.react","WAWebUseBotProfileValues","WAWebUseBusinessProfile.react","WAWebUseComposeBoxActionListeners","WAWebUseIsKeyboardUser","WAWebUseShouldShowBotSuggestions","WAWebUseTextMessageUserJourneyLogger","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebVelocityTransitionGroup","WAWebWamEnumMediaPickerOriginType","WAWebWamEnumQuickReplyEntryPoint","WAWebWamEnumWebcStickerMakerEventNameType","WAWebWebcStickerMakerEventsWamEvent","asyncToGeneratorRuntime","cr:5993","cr:7456","gkx","justknobx","react","stylex","useForceUpdate","useLazyRef","useWAWebChatValues","useWAWebDebouncedCallback","useWAWebListener","useWAWebModelValues","useWAWebOnUnmount","useWAWebSetModelValue","useWAWebStableCallback"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m,p,_=["ref"],f,g,h,y,C=y||(y=o("react")),b=h||(h=r("react")),v=C.useEffect,S=C.useImperativeHandle,R=C.useMemo,L=C.useRef,E=C.useState,k=/^https?:\/\/media\.giphy\.com\/media\/([a-zA-Z0-9]+)/,I=1,T=700,D=8,x=n("$InternalEnum").Mirrored(["ATTACHMENT_MENU","OTHER"]),$={blockCompose:{position:"x1n2onr6",zIndex:"xhtitgo",boxSizing:"x9f619",display:"x78zum5",flexDirection:"x1q0g3np",alignItems:"xuk3077",maxWidth:"x193iq5w",minHeight:"x122xwht",backgroundColor:"xhjsbib",$$css:!0},blockComposeRefresh:{backgroundColor:"xjbqb8w",minHeight:"x1wiwyrm",maxWidth:"xquzyny",$$css:!0},richTextRefresh:{caretColor:"xjdcl3y",$$css:!0}};function P(t){"use no forget";var a,i,l,h,y=t.ref,C=babelHelpers.objectWithoutPropertiesLoose(t,_),P=C.chat,N=C.onPageUpDown,M=C.onComposeHeightChange,w=C.canShowSpamPanel,A=w===void 0?!1:w,F=C.questionType,O=C.onSend,B=r("useForceUpdate")(),W=o("useWAWebChatValues").useChatValues(C.chat.id,[o("WAWebChatGetters").getId,o("WAWebFrontendChatGetters").getTrusted,o("WAWebFrontendChatGetters").getComposeQuotedMsg,o("WAWebChatGetters").getIsPSA,o("WAWebChatGetters").getIsGroup,o("WAWebFrontendChatGetters").getPttRecordingSession,o("WAWebFrontendChatGetters").getShouldAppearInList,o("WAWebFrontendChatGetters").getPresence,o("WAWebFrontendChatGetters").getContact,o("WAWebFrontendChatGetters").getAttachMediaContents,o("WAWebFrontendChatGetters").getQuotedMsgAdminGroupJid,o("WAWebFrontendChatGetters").getQuotedMsgAdminGroupSubject,o("WAWebFrontendChatGetters").getQuotedMsgAdminParentGroupJid,o("WAWebFrontendChatGetters").getComposeQuotedMsgRemoteJid,o("WAWebChatGetters").getIsAutoMuted,o("WAWebChatGetters").getIsNewsletter,o("WAWebChatGetters").getIsBroadcast,o("WAWebFrontendChatGetters").getNewsletterMetadata,o("WAWebFrontendChatGetters").getIsCAG]),q=W[0],U=W[1],V=W[2],H=W[3],G=W[4],z=W[5],j=W[6],K=W[7],Q=W[8],X=W[9],Y=W[10],J=W[11],Z=W[12],ee=W[13],te=W[14],ne=W[15],re=W[16],oe=W[17],ae=F===o("WAWebQuestions.flow").QuestionType.Question,ie=C.questionReplyQuotedMessage,le=o("useWAWebSetModelValue").useSetModelValue(P,"composeQuotedMsg"),se=o("useWAWebSetModelValue").useSetModelValue(P,"quotedMsgAdminGroupJid"),ue=o("useWAWebSetModelValue").useSetModelValue(P,"composeQuotedMsgRemoteJid"),ce=o("useWAWebSetModelValue").useSetModelValue(P,"pttRecordingSession"),de=o("useWAWebModelValues").useModelValues(r("WAWebChatPreferenceCollection").getDefault(),["spellcheck","transformTextEmoji","enterIsSend","showExpandedComposer"]),me=R(function(){return P.getComposeContents()},[P]),pe=E(null),_e=pe[0],fe=pe[1],ge=L(me==null?void 0:me.omittedURL),he=E(null),ye=he[0],Ce=he[1],be=E(!1),ve=be[0],Se=be[1],Re=E(o("PaymentLinkWamLogger").LinkPreviewStatus.NOT_STARTED),Le=Re[0],Ee=Re[1],ke=L(me==null?void 0:me.omittedURL),Ie=L((me==null?void 0:me.text)||""),Te=function(){var e=o("WAWebCodeFormatMutator").removeCodeBlocks(Ie.current);return o("WAWebLinkify").findLinks(e,!0,o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow())[0]},De=r("WAWebUseIsKeyboardUser")(),xe=De.isKeyboardUser,$e=E(null),Pe=$e[0],Ne=$e[1],Me=function(){return q.isBot()||Pe!=null},we=o("WAWebUseBusinessProfile.react").useBusinessProfile(o("WAWebBotGating").isBizBot3pAvailable()||o("WAWebBotGating").isBizBot1pEnabled()?q:null,["commands","prompts","isBizBot1p","isBizBot3p"]),Ae=Pe!=null?Pe:q,Fe=o("WAWebUseBotProfileValues").useOptionalBotProfileValues(Ae,[o("WAWebBotProfileGetters").getCommands]),Oe=Fe[0],Be=(we==null?void 0:we.commands)||o("WAWebBotGating").isMetaBotCommandsEnabled()&&Oe||null,We=L([]),qe=r("useLazyRef")(function(){return new AbortController}),Ue=E(!1),Ve=Ue[0],He=Ue[1],Ge=o("WAWebUseShouldShowBotSuggestions").useShouldShowBotSuggestions(C.chat,we==null?void 0:we.prompts),ze=r("useWAWebStableCallback")(function(){return P.getComposeContents()}),je=L(!1),Ke=r("WAWebUseTextMessageUserJourneyLogger")(P.id,((a=(i=ze())==null||(i=i.text)==null?void 0:i.length)!=null?a:0)>0),Qe=Ke.handleTextMsgChangeForUJLogging,Xe=Ke.handleMsgSentForUJLogging,Ye=Ke.handleCloseForUJLogging;v(function(){return function(){Ye(V!=null),P.pttRecordingSession!=null&&o("WAWebPttMessageUserJourneyLogger").PttMessageUserJourneyLogger.draftSaved(P.id,V!=null)}},[]);var Je=function(){We.current=[],qe.current.abort(),qe.current=new AbortController,Ve&&He(!1)},Ze=function(t){t===void 0&&(t=o("WAWebUim").DismissReason.UIM_INTERACTION),Se(!0),et(t)},et=function(t){t===void 0&&(t=o("WAWebUim").DismissReason.UIM_INTERACTION),t!==o("WAWebUim").DismissReason.LIFECYCLE&&(Je(),ye&&(ke.current=ge.current,Ce(null)))},tt=function(){ge.current=null,Se(!1),Ee(o("PaymentLinkWamLogger").LinkPreviewStatus.NOT_STARTED),et()},nt=function(a,i){if(a.data.thumbnailDirectPath!==void 0){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["link preview: using an existing thumbnail mms"])));var t=o("WAWebComposeBoxUtils").getCachedPreview(a);return Ce(function(e){return(e==null?void 0:e.url)!==a.url?e:t}),(f||(f=n("Promise"))).resolve()}o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["link preview: uploading new thumbnail mms"])));var l=a.data.thumbnailHQ;return l?r("WAWebMediaOpaqueData").createFromBase64Jpeg(l).then(function(e){return r("WAWebMediaUploadMmsThumbnail")({thumbnail:e,mediaType:ne?o("WAWebMmsMediaTypes").MEDIA_TYPES.NEWSLETTER_THUMBNAIL_LINK:o("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_LINK,mediaKeyInfo:r("WAWebCryptoRandomMediaKey")(),uploadOrigin:r("WAWebMediaGetUploadOriginForChat")(P),forwardedFromWeb:!1,signal:i,timeout:o("WAWebMediaConstants").MMS_THUMBNAIL_UPLOAD_TIMEOUT,isViewOnce:!1})}).then(function(e){var t=e.mediaEntry;t&&Ce(function(n){if((n==null?void 0:n.url)!==a.url)return n;var r={mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp,thumbnailDirectPath:t.directPath,thumbnailSha256:e.filehash,thumbnailEncSha256:t.encFilehash},o=babelHelpers.extends({},a,{data:babelHelpers.extends({},a.data,r)});return o})}).catch(o("WAAbortError").catchAbort(r("WAWebNoop"))).catch(function(e){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Full preview upload has failed: "]))).devConsole(e)}):(f||(f=n("Promise"))).resolve()},rt=E(!!Ie.current),ot=rt[0],at=rt[1],it=E(me==null?void 0:me.ctwaContextLinkData),lt=it[0],st=it[1],ut=L(null),ct=L(null),dt=L(null),mt=L(null),pt=L(null),_t=L(null),ft=L(null),gt=L(0),ht=L(!1),yt=L(!1),Ct=L(null),bt=r("useWAWebStableCallback")(function(){if(!ot||lt){tt();return}var e=Te();if(!e){tt();return}var t=e.url;if(!(ge.current!==""&&ge.current===t)){ge.current=t,ke.current=null;var n=qe.current.signal,a=null;o("PaymentLink").shouldDetectInComposer()&&(a=o("PaymentLink").getPSP(t));var i=a!=null?o("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$PreviewType.PAYMENT_LINKS:o("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$PreviewType.NONE,l=o("WAWebGenMinimalLinkPreviewChatAction").genMinimalLinkPreview(e,i,!0,{psp:a});Ce(l),Ee(o("PaymentLinkWamLogger").LinkPreviewStatus.STARTED);var s=o("WAWebLinkPreviewChatAction").getLinkPreview(e,P).then(function(t){if(n.aborted)throw new(o("WAAbortError")).AbortError;if(t&&ge.current===t.url&&t.data&&(t.data.title||t.data.description))return Ce(t),nt(t,n).finally(function(){Ee(o("PaymentLinkWamLogger").LinkPreviewStatus.COMPLETED)});l!=null&&Ce(o("WAWebGenMinimalLinkPreviewChatAction").genMinimalLinkPreview(e,i,!1,{psp:a}))});We.current.push(s),s.catch(o("WAFilteredCatch").filteredCatch(o("WAWebMiscErrors").Unmount,r("WAWebNoop"))).catch(o("WAAbortError").catchAbort(r("WAWebNoop")))}}),vt=r("useLazyRef")(function(){return new(o("WAShiftTimer")).ShiftTimer(bt)}),St=L({text:"",parsableText:"",data:{}}),Rt=L(null),Lt=null,Et=E(),kt=Et[0],It=Et[1],Tt=E(P.pttRecordingSession),Dt=Tt[0],xt=Tt[1],$t=E(P.pttRecordingSession!=null),Pt=$t[0],Nt=$t[1],Mt=E(null),wt=Mt[0],At=Mt[1],Ft=E(""),Ot=Ft[0],Bt=E(me==null?void 0:me.ctwaContext),Wt=Bt[0],qt=Bt[1],Ut=E(function(){return o("WAWebConversationSpamUtils").shouldShowSpamPanel(P)}),Vt=Ut[0],Ht=Ut[1],Gt=function(){Ht(!1),o("WAWebConversationSpamUtils").acknowledgeGroupAsNotSpam(P)},zt=function(){Ht(!1)},jt=E({handleOnce:[],handleMultiple:[]}),Kt=jt[0],Qt=jt[1];o("useWAWebListener").useListener(o("WAWebBlocklistCollection").BlocklistCollection,["add","remove","reset"],B);var Xt=E(de.showExpandedComposer),Yt=Xt[0],Jt=Xt[1],Zt=function(){Jt(!Yt),de.set("showExpandedComposer",!de.showExpandedComposer)},en=function(){var e,t=Ie.current,n=P.getComposeContents();if(!(n==null&&t.trim()==="")&&(n==null||(e=n.text)==null?void 0:e.trim())!==t.trim()){var r={text:t,timestamp:o("WATimeUtils").unixTime()},a=ke.current;a!=null&&(r.omittedURL=a),Wt!=null&&(r.ctwaContext=Wt),lt!=null&&(r.ctwaContextLinkData=lt),P.setComposeContents(r)}},tn=function(t){en(),tt();var e=t.sourceUrl;e!=null&&e!==""&&o("WAWebBizQueryCtwaContextBridge").fetchCtwaContextData(t).then(function(e){qt(e),en()}).catch(function(e){o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve CTWA context data, error: ",""])),e)})};v(function(){gt.current=r("WANullthrows")(mt.current).clientHeight,vt.current.debounceAndCap(50,50),lt&&(!Wt||Wt.sourceUrl!==lt.sourceUrl)&&(qt(null),tn(lt)),o("WAWebPttMessageUserJourneyLogger").PttMessageUserJourneyLogger.setHasDraft(P.pttRecordingSession!=null)},[]),r("useWAWebOnUnmount")(function(){var e;vt.current.cancel(),qe.current.abort(),(e=Ct.current)==null||e.cancel(),en()});var nn=r("useWAWebDebouncedCallback")(en,200),rn=function(){var e=Ie.current.trim().length>0;return e},on=function(t){kt==null||kt.focus()},an=function(t,n){kt==null||kt.replaceSelection(t,n)},ln=function(t,n){if(t===" "&&!rn())return o("WAWebCmd").Cmd.scrollMessages();on(!0),an(t,n)},sn=function(t){if(q.isBot())return o("WAWebToastManager").ToastManager.open(b.jsx(o("WAWebToast.react").Toast,{msg:s._(/*BTDS*/"This action is not supported.")})),!1;var e=r("justknobx")._("4552"),n=t.filter(function(t){var n=o("WAWebFileUtils").typeFromMimetype(t.type);return n===o("WAWebFileUtils").FILETYPE.DOCUMENT?e:n===o("WAWebFileUtils").FILETYPE.IMAGE||n===o("WAWebFileUtils").FILETYPE.VIDEO||n===o("WAWebFileUtils").FILETYPE.AUDIO});return n.length>0&&(nn.flush(),o("WAWebCmd").Cmd.attachMediaDrawer({chat:P,attachments:n.map(function(e){return{file:e}}),fileOrigin:o("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.PASTE,initCaption:ze(),onComplete:Ln})),!0},un=function(t){sn(t)},cn=function(t){on(!0),kt==null||kt.paste(t)},dn=L(x.OTHER),mn=function(){if(r("justknobx")._("169"))kt==null||kt.replaceSelection("/");else{var e;(e=Rt.current)==null||e.togglePanel()}dn.current=x.ATTACHMENT_MENU},pn=function(){kt==null||kt.reset()},_n=function(){on()},fn=function(){o("WAWebComposeBoxActions").ComposeBoxActions.setIsFocus(!0)},gn=function(){o("WAWebComposeBoxActions").ComposeBoxActions.setIsFocus(!1)},hn=L(null),yn=L(null),Cn=function(t){st(t),qt(null),tn(t)},bn=function(t){Qt(function(e){var n=e.handleOnce,r=e.handleMultiple;return{handleOnce:t.handleOnce?n.concat(t.handleOnce):n,handleMultiple:t.handleMultiple?n.concat(t.handleMultiple):r}})},vn=function(){st(null),qt(null),en(),vt.current.onOrBefore(1)},Sn=function(){var e;(e=ct.current)==null||e.activate(),on(!1)},Rn=function(t){var e;t.stopPropagation(),N(t),(e=Ct.current)==null||e.debounce(0)},Ln=r("useWAWebStableCallback")(function(e,t){t===void 0&&(t={});var n=t,r=n.initCaptionUsed;e&&r&&pn(),e&&vn()}),En=r("useWAWebStableCallback")(function(){nn.flush()}),kn=function(){At(null),_n()},In=function(t,n,a,i){var e=o("WAWebComposeBoxUtils").fetchGif(t,n,a,i);return nn.flush(),(ae||ie)&&o("WAWebModalManager").ModalManager.close(),o("WAWebCmd").Cmd.attachMediaDrawer({chat:P,attachments:[e],initCaption:ze(),fileOrigin:o("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.CHAT_GIF_INAPP,onComplete:function(t,n){Ln(t,n),t&&kn()},isQuestion:ae,questionReplyQuotedMessage:ie}),e.catch(r("WAWebNoop")),e},Tn=function(t,n,r){In(t,t,n,r)},Dn=function(t,n,r){var e=V,a=o("WAWebApiPrepareCtwaContextSend").prepareCtwaContextSend(lt,Wt),i={stickerSendOrigin:n,quotedMsg:e,ctwaContext:a};r===o("WAWebNewsletterWamoSubMessageType").NewsletterWamoSubMessageType.WamoSub&&(i.isWamoSub=!0),o("WAWebSendStickerAction").sendStickerToChat(P,t,i),le(null),vn()},xn=function(t,n,r){if(t.isCreateButton){var e;new(o("WAWebWebcStickerMakerEventsWamEvent")).WebcStickerMakerEventsWamEvent({stickerMakerEventName:o("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.STICKER_MAKER_BUTTON_TAP}).commit(),(e=_t.current)==null||e.open();return}if(ne&&o("WAWebNewsletterWamoSubUtils").newsletterSupportsSubscriptions(oe)&&r!=null&&r.target&&o("WAWebNewsletterGatingUtils").isWamoSubCreatorExperienceSupported()){var a=function(r){Dn(t,n,r)};fe({popupAnchorEl:r.target,handleSelect:a})}else Dn(t,n)},$n=function(t,n,r){r===!0?Dn(t,n,o("WAWebNewsletterWamoSubMessageType").NewsletterWamoSubMessageType.WamoSub):Dn(t,n)},Pn=function(t){var e=rn();Ie.current=t;var n=rn();n!==e&&(window.setTimeout(function(){o("WAWebComposeBoxActions").ComposeBoxActions.setHasText(n)},0),at(n)),n?(K.subscribe(),o("WAWebPresenceChatAction").markComposing(P),o("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(P)):(Lt=null,o("WAWebPresenceChatAction").markPaused(P));var r=Te();(!r&&ge.current||r&&r.url!==ge.current)&&tt(),ht.current?vt.current.onOrBefore(1):vt.current.debounce(T),ht.current=!1,nn(),!Vt&&t&&!U&&Ht(!0);var a=St.current.data,i=a.mentionedJidList,l=i==null?void 0:i.find(function(e){return e.isBot()});Ne(l),je.current?je.current=!1:Qe(n,V!=null)},Nn=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;P.pttRecordingSession!=null?e=P.pttRecordingSession:(e=o("WAWebPttComposerRecordingSession").createRecordingSession({chat:o("WAWebStateUtils").unproxy(P)}),e.on("change:recordingState",function(){var t=e.recordingState;P.pttRecordingSession===e&&(t===o("WAWebRecordingSessionStateEnum").RecordingSessionState.ERROR||t===o("WAWebRecordingSessionStateEnum").RecordingSessionState.STOPPED)&&ce(null)})),xt(e),Nt(!1),o("WAWebPttMessageUserJourneyLogger").PttMessageUserJourneyLogger.start(P.id,V!=null);var t;try{t=yield e.start()}finally{var n=t?e:null;ce(n),xt(n),Nt(n!=null)}});return function(){return e.apply(this,arguments)}})(),Mn=function(t){At(t),t!=null&&o("WAWebUserPrefsGeneral").setLastComposeBoxExpressionPanel(t)},wn=function(t){var e=t.getFiles();return sn(e)},An=function(t){var e=k.exec(t);if(e){var n="https://media.giphy.com/media/"+e[1]+"/200w.mp4";return In(n,t,o("WAWebProtobufsE2E.pb").Message$VideoMessage$Attribution.GIPHY).catch(function(){o("WAWebDrawerManager").DrawerManager.closeDrawerMid(),on(!0),kt==null||kt.replaceSelection(t),o("WAWebToastManager").ToastManager.open(b.jsx(o("WAWebToast.react").Toast,{msg:s._(/*BTDS*/"The item you tried adding failed to load.")}))}),!0}return ht.current=!0,!1},Fn=function(){return mt.current?mt.current.offsetWidth-I:0},On=function(t){var e,n,r=t.target;r instanceof HTMLElement&&(e=yn.current)!=null&&e.contains(r)||(r instanceof HTMLElement&&r===(kt==null||(n=kt.editor)==null?void 0:n.getRootElement())&&Sn(),!G&&ot&&Ht(!0))},Bn=function(t){var e;o("WAWebReconnectUtil").reconnect();var n=St.current.text.trim(),a=St.current.data;if(!(n.length===0&&!lt)){if(o("WAWebLimitSharingUIUtils").isLimitSharingReceiverEnabledForUsers(P,a.mentionedJidList)){o("WAWebLimitSharingUIUtils").showLimitSharingInvokeBlockedPopup(P);return}Je();var i=V,l=ye==null?void 0:ye.data,s=o("PaymentLink").getPaymentLinkMessageMetadata(l,o("WAWebCodeFormatMutator").removeCodeBlocks(n)),u=a.mentionedJidList||[],c=a.groupMentions||[],d=o("WAWebApiPrepareCtwaContextSend").prepareCtwaContextSend(lt,Wt),p=yt.current;if(At(null),at(!1),Ce(null),(e=hn.current)==null||e.close(),Lt&&(o("WAWebQuickReplyLogging").logQuickReplySendEvent(Lt===x.ATTACHMENT_MENU?o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:o("WAWebWamEnumQuickReplyEntryPoint").QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD),Lt=null),p){var _=o("WAWebStateUtils").unproxy(P);_.urlText&&(_.urlText=void 0)}var f={linkPreview:l,quotedMsg:i,mentionedJidList:u,groupMentions:c,quotedMsgAdminGroupJid:Y,quotedMsgAdminGroupSubject:J,quotedMsgAdminParentGroupJid:Z,ctwaContext:d,isQuestion:ae,questionReplyQuotedMessage:ie};if(ne?(t===o("WAWebNewsletterWamoSubMessageType").NewsletterWamoSubMessageType.WamoSub&&o("WAWebNewsletterGatingUtils").isWamoSubCreatorExperienceSupported()&&(f.isWamoSub=!0),o("WAWebNewsletterSendMsgAction").sendNewsletterTextMsg(P,n,f)):(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["sendTextAction inside WAWebComposeBox"]))),o("WAWebSendTextMsgChatAction").sendTextMsgToChat(P,n,babelHelpers.extends({},f,{botMsgBodyType:o("WAWebBotGating").isBizBot3pAvailable()&&we!=null&&we.commands&&o("WAWebLexicalUtils").hasBotCommand(kt==null?void 0:kt.editor)?o("WAWebBotTypes").BotMsgBodyType.COMMAND:null,paymentLinkMetadata:s})),vn(),Kt.handleOnce.forEach(function(e){return e==null?void 0:e()}),Kt.handleMultiple.forEach(function(e){return e==null?void 0:e()}),Qt({handleMultiple:Kt.handleMultiple,handleOnce:[]})),o("PaymentLinkWamLogger").shouldLogSendEvent()){var g=o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),h=o("WAWebBusinessProfileUtils").hasCatalog(o("WAWebBusinessProfileCollection").BusinessProfileCollection.get(g));o("PaymentLinkWamLogger").genLogSendEventIfPaymentLink(o("WAWebCodeFormatMutator").removeCodeBlocks(n),ve,ye,Le,h,P,s).catch(r("WAWebNoop"))}yt.current=!1,le(null),se(null),ue(null),P.setComposeContents({}),pn(),rn()}},Wn=function(){if(ne&&o("WAWebNewsletterWamoSubUtils").newsletterSupportsSubscriptions(oe)&&ut.current&&o("WAWebNewsletterGatingUtils").isWamoSubCreatorExperienceSupported()){var e=function(t){Bn(t)};fe({popupAnchorEl:ut.current,handleSelect:e})}else Bn();O==null||O(),je.current=!0,Xe(V!=null)},qn=r("useWAWebStableCallback")(function(e){kt==null||kt.setTextContent(e)}),Un=function(t){if(wt){var e;(e=pt.current)==null||e.restoreFocus(!0),o("WAWebStopEvent").stopEvent(t)}},Vn=r("useWAWebDebouncedCallback")(function(e){rn()||!(ne?o("WAWebNewsletterGatingUtils").isNewsletterMessageEditingEnabled():o("WAWebMessageEditGatingUtils").sendTextEditEnabled()||o("WAWebMessageEditGatingUtils").sendCaptionEditEnabled())||o("WAWebComposeBoxUtils").editLastMessage(P,e)},200,{trailing:!0}),Hn=function(){xt(null),Nt(!1),_n()},Gn=function(t){if(t){t.stopPropagation();var e=t.target.files==null?[]:Array.from(t.target.files);e.length&&(new(o("WAWebWebcStickerMakerEventsWamEvent")).WebcStickerMakerEventsWamEvent({stickerMakerEventName:o("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_UPLOADED}).commit(),o("WAWebCmd").Cmd.attachMediaDrawer({chat:P,attachments:e.map(function(e){return{file:e,stickerMaker:!0}}),fileOrigin:o("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,sendAsSticker:!0}))}};r("WAWebUseComposeBoxActionListeners")(P,{onFocus:_n,onPaste:ln,onPasteFiles:un,onRoutedPaste:cn,onSend:Wn,onToggleQuickReplies:mn,onCtwaContextLinkData:Cn,onSendingLogAttributes:bn,onSetTextContent:qn});var zn=o("WAWebTextSizeUtils").getWAWebTextSizeStyles().composerFontSize,jn=o("WAWebStateUtils").unproxy(P).groupMetadata,Kn=function(t){o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["handlePromptSelect inside WAWebComposeBox"]))),o("WAWebSendTextMsgChatAction").sendTextMsgToChat(P,t,{botMsgBodyType:o("WAWebBotGating").isBizBot3pAvailable()?o("WAWebBotTypes").BotMsgBodyType.PROMPT:null})},Qn=o("WAWebComposeBoxUtils").getComposeBoxPlaceholderText({chat:P,questionType:F}),Xn=o("WAWebComposeBoxUtils").getComposeBoxAriaLabelText(P),Yn=function(t){t&&o("WAWebAttachMenuGatingUtils").areExpressionPanelsOpenEnabled()},Jn=b.jsxs(o("WAWebRichTextInput.react").RichTextInput,{ref:It,onFocus:fn,onBlur:gn,placeholder:Qn,ariaLabel:Xn,ariaActiveDescendents:Ot,textXstyle:zn,xstyle:$.richTextRefresh,testid:void 0,editorName:"compose-box",initialText:(l=ze())==null?void 0:l.text,groupMetadata:jn,readOnly:Dt!=null,maxLength:r("WAWebConstantsDeprecated").MAX_TXT_MSG_SIZE,maxVisibleLines:D,minVisibleLines:Yt?2:1,spellCheck:de.spellcheck,transformTextEmoji:de.transformTextEmoji,enterIsNewLine:!de.enterIsSend,multiline:!0,focusOnMount:!xe,textFormatEnabled:!0,tabOrder:o("WAWebTabOrder").TAB_ORDER.COMPOSE_BOX_INPUT,onChange:function(t){St.current=t,Pn(t.parsableText)},onEnter:Wn,onFiles:wn,onTextPaste:An,onMaxPasteExceeded:o("WAWebComposeBoxUtils").handleMaxPasteExceeded,bulletPointsEnabled:!0,numberedListEnabled:!0,inlineCodeEnabled:!0,blockQuoteEnabled:!0,internLinksEnabled:!0,phoneNumbersEnabled:!1,linksEnabled:!0,textFormatShortcutsEnabled:!0,floatingToolbarEnabled:!Yt,botInvokeEnabled:P.canInvokeBot(),highlightedBotCommands:Be,children:[b.jsx(o("WAWebEmojiPickerPlugin").EmojiPickerPlugin,{}),b.jsx(o("WAWebMentionPickerPlugin").MentionPickerPlugin,{chat:o("WAWebStateUtils").unproxy(P),elevatedPushNamesEnabled:o("WAWebElevatedPushNamesFlag").elevatedPushNamesM2Enabled(P),botInvokeEnabled:P.canInvokeBot()}),o("WAWebBizGatingUtils").canSendQuickReplyInChat(P)&&r("justknobx")._("169")&&(kt==null?void 0:kt.editor)&&b.jsx(o("WAWebQuickReplyPickerPlugin").QuickReplyPickerPlugin,{editor:kt.editor})]}),Zn,er=kt==null?void 0:kt.editor;er!=null&&(Zn=b.jsxs(b.Fragment,{children:[!1,!1,o("WAWebBizGatingUtils").canSendQuickReplyInChat(P)&&!r("justknobx")._("169")&&b.jsx(o("WAWebQuickReplySuggestions.react").QuickReplySuggestions,{kind:o("WAWebSuggestionsPanelContainer.react").SuggestionsPanelKind.ComposeBox,editor:er,ref:Rt,onSelect:function(){dn.current===x.ATTACHMENT_MENU?(o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentSend(P,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.QUICK_REPLY),Lt=x.ATTACHMENT_MENU):Lt=x.OTHER,dn.current=x.OTHER},onHide:function(){dn.current===x.ATTACHMENT_MENU&&o("WAWebAttachmentMenuLogger").AttachmentMenuLogger.logAttachmentCancel(P,o("WAWebAttachmentMenuLogger").AttachmentMenuTarget.QUICK_REPLY),dn.current=x.OTHER}}),(o("WAWebBotGating").isBizBot3pEnabled()&&we||o("WAWebBotGating").isMetaBotCommandsEnabled()&&Oe)&&b.jsx(o("WAWebBotCommandSuggestions.react").BotCommandSuggestions,{kind:o("WAWebSuggestionsPanelContainer.react").SuggestionsPanelKind.ComposeBox,editor:er,businessProfile:we&&o("WAWebStateUtils").unproxy(we),metaBotId:Ae}),!r("gkx")("26258")&&n("cr:5993")?b.jsx(n("cr:5993"),{kind:o("WAWebSuggestionsPanelContainer.react").SuggestionsPanelKind.ComposeBox,editor:er}):null]})),S(y,function(){return{flushSaveComposeContentDebounced:En,getCurrentComposeContent:ze,updateTextAfterMediaDrawerClose:Ln}},[En,ze,Ln]),o("useWAWebListener").useListener(o("WAWebCmd").Cmd,"start_ptt_recording",function(){Pt||Nn()});var tr=null;Ge&&(tr=b.jsx(r("WAWebBotSuggestions.react"),{id:q,onPromptSelect:Kn}));var nr={chat:P,pttComposerActive:Pt,isMessageToBot:Me(),getCurrentComposeContent:ze,richTextInputRef:kt,updateTextAfterMediaDrawerClose:Ln,inputHotkeyRef:ft,handleTab:Un,handleMetaUpDebounced:Vn,handleInputFocus:On,input:Jn,expressionsPanelWrapperRef:yn,expressionsPanelPickerRef:hn,replaceInputSelection:an,handlePanelsSticker:xn,handlePanelsStickerFromStore:$n,handlePanelsGif:Tn,hasTextState:ot,handleSendText:Wn,recordingSession:Dt,startRecording:Nn,onExpressionPanelActive:Yn},rr=o("WAWebComposeBoxPopupPanels.react").useComposePopupPanels(pt,{chat:P,linkPreviewData:ye==null?void 0:ye.data,ctwaContextLinkData:lt,ctwaContextData:Wt,restoreFocus:_n,selectedExpressionPanel:wt,getComposeBlockWidth:Fn,onComposeHeightChange:M,omitLinkPreview:Ze,omitCtwa:vn,attachmentButtonHidden:Me(),onEmoji:an,onGif:Tn,onExpressionPanelChange:Mn,onSticker:xn,onExpressionPanelClose:kn,showSpamPanel:A&&Vt,onClickNotSpam:Gt,onClickDismissSpam:zt,questionReplyQuotedMessage:C.questionReplyQuotedMessage,questionType:F}),or=rr.PopupPanels,ar=rr.hasTopPanels,ir;return Yt&&n("cr:7456")?ir=b.jsx(n("cr:7456"),babelHelpers.extends({},nr,{ref:ut,onCollapseComposer:Zt})):ir=b.jsx(o("WAWebMessageComposer.react").MessageComposer,babelHelpers.extends({},nr,{ref:ut,handleExpressionPanelChange:Mn,selectedExpressionPanel:wt,hasTopPanel:ar,closePttComposer:Hn,questionType:F,questionReplyQuotedMessage:C.questionReplyQuotedMessage})),b.jsx(o("WAWebErrorBoundary.react").ErrorBoundary,{name:"compose-box",type:"fatal",children:b.jsx(o("WAWebUimUie.react").UIE,{displayName:"ComposeBox",ref:ct,uimState:o("WAWebUim").UIMState.PASSIVE,requestFocus:xe?null:_n,children:b.jsxs(o("WAWebKeyboardHotKeys.react").HotKeys,{component:"footer",tabIndex:null,handlers:{pagedown:Rn,pageup:Rn},className:o("WAWebClassnames").classnamesConvertMeToStylexPlease((h={},h[r("WAWebComposeBox.scss").pttComposerActive]=Pt,h[r("WAWebComposeBox.scss").footer]=!0,h[r("WAWebComposeBox.scss").botSuggestions]=Ge,h),"x1wiwyrm"),ref:dt,children:[tr,b.jsx(r("WAWebCopyPasteCopyableArea.react"),{canCut:!0,className:(g||(g=r("stylex")))($.blockCompose,[$.blockComposeRefresh,o("WAWebUISpacing").uiMargin.horizAuto],!1),ref:mt,children:b.jsxs("div",{"data-testid":void 0,className:"x1n2onr6 x98rzlu xh8yej3 xeuugli x1gg8mnh",children:[null,b.jsx(r("WAWebVelocityTransitionGroup"),{transitionName:"messageComposer",children:ir})]})}),or,b.jsx(r("WAWebFilePicker.react"),{ref:_t,mimes:o("WAWebMimeTypes").IMAGE_MIMES,onChange:Gn,multiple:!1}),Zn,_e!=null&&b.jsx(r("WAWebNewsletterWamoSubMessageTypePopup.react"),{handleSelect:_e.handleSelect,popupAnchorEl:_e.popupAnchorEl,onDismiss:function(){return fe(null)}})]})})})}P.displayName=P.name+" [from "+i.id+"]";var N=P;function M(e){var t=e.chat,n=e.handleFocus,r=t.id.toString();return o("useWAWebListener").useListener(o("WAWebComposeBoxActions").ComposeBoxActions,"focus_"+r,n),o("useWAWebListener").useListener(o("WAWebComposeBoxActions").ComposeBoxActions,"focus",n),b.jsx(o("WAWebUimUie.react").UIE,{displayName:"PlaceholderComposeBox"})}M.displayName=M.name+" [from "+i.id+"]",l.ComposeBox=N,l.PlaceholderComposeBox=M}),226);
__d("WAWebCompression",["JSResourceForInteraction","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){e===void 0&&(e={});var t=yield r("JSResourceForInteraction")("WAGzip").__setRef("WAWebCompression").load();return t.createDeflate(e)}),s.apply(this,arguments)}l.createDeflate=e}),98);
__d("WAWebCongratulationsAnimation.react",["WAWebCongratulationsAnimationsUtils","WAWebLottieAnimationLoadable","react","useWAWebUnmountSignal","vulture"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useImperativeHandle,m=u.useRef,p=u.useState,_={lottieComponent:{height:"x5yr21d",width:"xh8yej3",$$css:!0}};function f(e){var t=e.onAnimationComplete,n=e.ref;r("vulture")("Q8G6-VUzV4BHaqYUdZKx_IbPceU=");var a=p(!1),i=a[0],l=a[1],s=p(null),u=s[0],f=s[1],g=m(null),h=r("useWAWebUnmountSignal")(),y=function(){t==null||t(),!h.aborted&&l(!1)},C=function(t){if(!h.aborted){var e=o("WAWebCongratulationsAnimationsUtils").getCongratulationsAnimationPath(t.animation);f(e),l(!0)}};d(n,function(){return{triggerAnimation:C}});var b=null;return i&&u!=null&&(b=c.jsx("div",{className:"x10l6tqk xc9l9hb x47corl x5yr21d xh8yej3 x78zum5 xl56j7k",children:c.jsx("div",{className:"x5yr21d xktia5q",children:c.jsx(o("WAWebLottieAnimationLoadable").LottieAnimation,{ref:g,autoplay:!0,path:u,onComplete:y,xstyle:_.lottieComponent})})})),b}f.displayName=f.name+" [from "+i.id+"]";var g=f;l.CongratulationsAnimation=g}),98);
__d("WAWebContactMutator",["WALogger","WAWebApiContact","WAWebBizCoexGatingUtils","WAWebContactCollection","WAWebProtobufsAdv.pb","WAWebWidFactory"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e){if(e.isLid()){var t=o("WAWebApiContact").getPnIfLidIsLatestMapping(e),n=t!=null?o("WAWebContactCollection").ContactCollection.gadd(t):null;return{lidContact:o("WAWebContactCollection").ContactCollection.gadd(e),pnContact:n}}var r=o("WAWebApiContact").getCurrentLid(e),a=r!=null?o("WAWebContactCollection").ContactCollection.gadd(r):null;return{pnContact:o("WAWebContactCollection").ContactCollection.gadd(e),lidContact:a}}function m(e,t){var n=e.pnContact,r=e.lidContact;n!=null&&n.set(t),r!=null&&r.set(t)}function p(e){var t=e.contactId,n=e.pushname,r=d(o("WAWebWidFactory").asUserWidOrThrow(t)),a=r.pnContact,i=r.lidContact;if((a==null||a.pushname===n)&&(i==null||i.pushname===n))return!1;var l={pushname:n};return m(r,l),!0}function _(e){var t=e.lidPhoneNumberMappings;t.forEach(function(e){var t=e.lid,n=e.phoneNumber,r=o("WAWebContactCollection").ContactCollection.get(o("WAWebWidFactory").createUserWidOrThrow(t,"lid")),a=o("WAWebContactCollection").ContactCollection.get(o("WAWebWidFactory").createUserWidOrThrow(n));if(r!=null){var i=r.phoneNumber=o("WAWebWidFactory").createUserWidOrThrow(n);r.copyFieldsFromPnContact(i)}r==null||r.updateContactBlocked(),a==null||a.updateContactBlocked(),r==null||r.updateContactOptedOutOfMarketingMessages(),a==null||a.updateContactOptedOutOfMarketingMessages()})}function f(e){var t=e.lidContactDataMappings;t.forEach(function(e){var t=e.lid,n=e.shareOwnPn,r=e.displayNameLID,a=e.requestedPnTimestamp,i=o("WAWebContactCollection").ContactCollection.gadd(t);i!=null&&(n!=null&&(i.shareOwnPn=n),r!=null&&(i.displayNameLID=r),a!=null&&(i.requestedPnTimestamp=a))})}function g(t){var n=t.contactId,r=t.disappearingModeDuration,a=t.disappearingModeSettingTimestamp,i=d(o("WAWebWidFactory").asUserWidOrThrow(n)),l={disappearingModeDuration:r,disappearingModeSettingTimestamp:a};m(i,l),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["updated contact disappearing mode"]))).tags("contact")}function h(e){var t=e.contactId,n=e.textStatusString,r=e.textStatusEmoji,a=e.textStatusEphemeralDuration,i=e.textStatusLastUpdateTime,l=e.textStatusExpiryTs,u=d(o("WAWebWidFactory").asUserWidOrThrow(t)),c={textStatusString:n,textStatusEmoji:r,textStatusEphemeralDuration:a,textStatusLastUpdateTime:i,textStatusExpiryTs:l};m(u,c),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["updated contact text status"]))).tags("contact")}function y(e){var t=e.contactId,n=e.businessInfo;if(n!=null){var r=d(o("WAWebWidFactory").asUserWidOrThrow(t));m(r,babelHelpers.extends({},n)),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["updated contact business info"]))).tags("contact")}}function C(e){var t=e.usernameUpdates;t.forEach(function(e){var t=e.id,n=e.username,r=e.usernameCountryCode,a=e.displayNameLID,i=e.usernameSoftDeleted,l=d(o("WAWebWidFactory").createUserWidOrThrow(t)),s=l.pnContact,u=l.lidContact,c=s!=null&&(s.username!==n||s.usernameCountryCode!==r),p=u!=null&&(u.username!==n||u.usernameCountryCode!==r);if(!(!c&&!p)){var _={};r!=null&&(_.usernameCountryCode=r),a!=null&&(_.displayNameLID=a),i!==!0&&(_.username=n),m(l,_)}})}function b(e){var t=e.contactId,n=e.advAccountType;if(o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){var r=n===o("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED;o("WAWebContactCollection").ContactCollection.gadd(t).set(r?{isHosted:!0,isOrHasBeenHosted:!0}:{isHosted:!1})}}function v(e){var t=e.showMe,n=e.showWithoutName;return o("WAWebContactCollection").ContactCollection.getFilteredContacts({showMe:t,showWithoutName:n})}function S(e){var t=e.id,n=e.usernameKey,r=d(o("WAWebWidFactory").createUserWidOrThrow(t)),a={usernameKey:n};m(r,a),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["updated contact username key"]))).tags("contact")}l.updatePushname=p,l.bulkUpdatePhoneNumberJids=_,l.bulkUpdateLidContactState=f,l.updateDisappearingMode=g,l.updateTextStatus=h,l.updateBusinessInfo=y,l.bulkUpdateUsernames=C,l.updateContactAdvAccountType=b,l.getFilteredContacts=v,l.updateUsernameKey=S}),98);
__d("WAWebContactBridgeApi",["Promise","WAWebBizUpdateContactsWithVerifiedNamesAction","WAWebChatCollection","WAWebContactCollection","WAWebContactMutator","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u={updatePushname:(s=o("WAWebContactMutator")).updatePushname,bulkUpdatePhoneNumberJids:s.bulkUpdatePhoneNumberJids,bulkUpdateLidContactState:s.bulkUpdateLidContactState,updateDisappearingMode:s.updateDisappearingMode,updateTextStatus:s.updateTextStatus,updateContactWithVerifiedName:function(t){var e=t.contactId,n=t.verifiedNameInfo,r=o("WAWebContactCollection").ContactCollection.gadd(e);o("WAWebBizUpdateContactsWithVerifiedNamesAction").updateContactsWithVerifiedNames([n],[r])},addContactToCollection:function(t){var e=t.contact,n=t.option;o("WAWebContactCollection").ContactCollection.add(babelHelpers.extends({},e),n)},updateBusinessInfo:s.updateBusinessInfo,bulkUpdateUsernames:s.bulkUpdateUsernames,updateContactAdvAccountType:s.updateContactAdvAccountType,getFilteredContacts:s.getFilteredContacts,updateUsernameKey:s.updateUsernameKey,getFrequentContacts:function(r){var t=r.count,a=r.includeVoipCallableOnly,i=o("WAWebChatCollection").ChatCollection.getModelsArray(),l=i.filter(function(e){return e.id.isRegularUser()}),s=[],u=l.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebContactCollection").ContactCollection.get(e.id);t!=null&&!a&&s.push(e)});return function(t){return e.apply(this,arguments)}})());return(e||(e=n("Promise"))).all(u).then(function(){return s.sort(function(e,t){var n,r;return((n=t.t)!=null?n:0)-((r=e.t)!=null?r:0)}).slice(0,t).map(function(e){var t,n=o("WAWebContactCollection").ContactCollection.get(e.id);return(t=n==null?void 0:n.id.toString())!=null?t:null}).filter(Boolean)})}};l.ContactBridgeApi=u}),98);
__d("WAWebCreateOrUpdateGroupMetadataAction",["WAWebGroupMetadataCollection","WAWebGroupQueryBridge"],(function(t,n,r,o,a,i,l){function e(e){var t,n,a,i,l,s,u,c,d;o("WAWebGroupQueryBridge").updateSubject(e.id,e.subject),r("WAWebGroupMetadataCollection").gadd(babelHelpers.extends({id:e.id,owner:e.owner,subject:e.subject,creation:e.creation,desc:e.desc,descId:e.descId,descOwner:e.descOwner,descTime:e.descTime,restrict:e.restrict||!1,announce:e.announce||!1,noFrequentlyForwarded:e.noFrequentlyForwarded||!1,ephemeralDuration:e.ephemeralDuration||0,growthLockExpiration:e.growthLockExpiration,growthLockType:e.growthLockType,membershipApprovalMode:e.membershipApprovalMode,memberAddMode:e.memberAddMode,memberLinkMode:e.memberLinkMode,participants:e.participants,pastParticipants:e.pastParticipants,support:(t=e.support)!=null?t:!1,suspended:(n=e.suspended)!=null?n:!1,terminated:(a=e.terminated)!=null?a:!1,isParentGroup:(i=e.isParentGroup)!=null?i:!1,isParentGroupClosed:(l=e.isParentGroupClosed)!=null?l:!1,parentGroup:e.parentGroup,defaultSubgroup:(s=e.defaultSubgroup)!=null?s:!1,generalSubgroup:(u=e.generalSubgroup)!=null?u:!1,deviceStale:!0,size:e.size,incognito:e.incognito,isLidAddressingMode:e.isLidAddressingMode,reportToAdminMode:e.reportToAdminMode},e.reportToAdminMode===!1&&{lastReportToAdminTimestamp:null},{allowNonAdminSubGroupCreation:e.allowNonAdminSubGroupCreation,generalChatAutoAddDisabled:e.generalChatAutoAddDisabled,hasCapi:e.hasCapi,hiddenSubgroup:(c=e.hiddenSubgroup)!=null?c:!1,groupSafetyCheck:(d=e.groupSafetyCheck)!=null?d:!1}))}l.createOrUpdateGroupMetadataModelFromQuery=e}),98);
__d("WAWebCreateSendMsgRecord",["WALogger","WAWebAddonDBTable","WAWebDBMessageSerialization","WAWebMsgKey","WAWebMsgModel","WAWebSchemaMessage","WAWebSendMsgTypes","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s;function u(e,t,n){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){if(a===o("WAWebSendMsgTypes").SendMessageRecordType.Message){var i=yield o("WAWebSchemaMessage").getMessageTable().get(t);if(i==null)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsgJob didn't find a msg in the db"]))),null;var l=new(o("WAWebMsgModel")).Msg(o("WAWebDBMessageSerialization").messageFromDbRow(i));return{type:o("WAWebSendMsgTypes").SendMessageRecordType.Message,data:l}}else if(a===o("WAWebSendMsgTypes").SendMessageRecordType.Addon){var u=r("WAWebMsgKey").from(t),c=yield o("WAWebAddonDBTable").addonDBTable.getByMsgKey(n,u);return c==null?(o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["resendUserMsgJob didn't find an addonMsgData in the db"]))),null):{type:o("WAWebSendMsgTypes").SendMessageRecordType.Addon,data:c}}throw r("err")("unexpected msgRecordType: "+a)}),c.apply(this,arguments)}l.createMsgRecord=u}),98);
__d("WAWebCustomPaymentMethodsSyncBridgeApi",["WAWebCustomPaymentMethods"],(function(t,n,r,o,a,i,l){var e={setCustomPaymentMethods:function(t){var e=t.customPaymentMethods;o("WAWebCustomPaymentMethods").CustomPaymentMethods.setCustomPaymentMethods(e)}};l.CustomPaymentMethodsSyncBridgeApi=e}),98);
__d("WAWebDownloadWebLogs",["Promise","WAWebCompression","WAWebFileSaver","WAWebFileSaverTypes","WAWebLid1X1MigrationGating","WAWebLoggerImpl","WAWebPrimaryVersion","WAWebToast.react","WAWebToastManager","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","gkx","react"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=r("react")),c=1e6;function d(){return(e||(e=n("Promise"))).all([o("WAWebLoggerImpl").Logger.getLogs(),o("WAWebPrimaryVersion").getPrimaryCurrentVersion()]).then((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n,a,i,l=e[0],s=e[1];if(s!=null){var u="Primary app version: "+s;l.unshift(u)}l.unshift("Lid migrated: "+o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated().toString());var c="Web log for device : "+((t=(n=o("WAWebUserPrefsMeUser").getMaybeMeDevicePn())==null?void 0:n.toString())!=null?t:"")+", lid : "+((a=(i=o("WAWebUserPrefsMeUser").getMaybeMeDeviceLid())==null?void 0:i.toString())!=null?a:"")+", time: "+new Date().toString(),d=yield o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb(),m="";r("gkx")("26259")?m="Environment : INTERN "+(d?", AB Props : DEBUG (joined beta)":""):m="Environment : DEV "+(d?", AB Props : RELEASE (joined beta)":""),l.unshift(c,m);var p=l.join("\n");return p});return function(t){return e.apply(this,arguments)}})())}function m(){o("WAWebToastManager").ToastManager.open(u.jsx(o("WAWebToast.react").Toast,{msg:"The download process has started. It might take longer for larger web log files."}));var t=new Date().toISOString().replace(/:/g,"-"),r="web_client_log_"+t;(e||(e=n("Promise"))).all([o("WAWebCompression").createDeflate(),d()]).then(function(e){var t=e[0],n=e[1],r=new Blob([n],{type:"text/plain"});if(r.size>10*c){t.push(n,!0);var o=new Blob([t.result()],{type:"application/zip"});return o}return r}).then(function(e){o("WAWebFileSaver").FileSaver.downloadData(e,e.type==="text/plain"?r:r+".txt",e.type==="text/plain"?o("WAWebFileSaverTypes").AllowedFileExtensions.TXT:o("WAWebFileSaverTypes").AllowedFileExtensions.ZIP)})}l.getWebLogs=d,l.createDownloadDataForMdWebLogs=m}),98);
__d("WAWebDebugBridgeApi",["WAWebDownloadWebLogs"],(function(t,n,r,o,a,i,l){"use strict";var e={createDownloadDataForMdWebLogs:function(){o("WAWebDownloadWebLogs").createDownloadDataForMdWebLogs()},getWebLogs:function(){return o("WAWebDownloadWebLogs").getWebLogs()}};l.DebugBridgeApi=e}),98);
__d("WAWebWdsPictoMovePhoneIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="wds-picto-move-phone";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=88,R=131;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 131 88",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M55.4 46.8c1.5 0 2.8-1.2 2.8-2.8s-1.2-2.8-2.8-2.8-2.8 1.2-2.8 2.8 1.3 2.8 2.8 2.8zm10.2 0c1.5 0 2.8-1.2 2.8-2.8s-1.2-2.8-2.8-2.8c-1.5 0-2.8 1.2-2.8 2.8s1.3 2.8 2.8 2.8zm10.2 0c1.5 0 2.8-1.2 2.8-2.8s-1.2-2.8-2.8-2.8S73 42.5 73 44s1.3 2.8 2.8 2.8zm36.1-34.1H87.5c-2.6 0-4.6 2.1-4.6 4.7v53.2c0 2.6 2.1 4.7 4.6 4.7h24.4c2.6 0 4.6-2.1 4.6-4.7V17.4c.1-2.6-2-4.7-4.6-4.7z",style:{fill:"#e6ffda",stroke:"#111b21",strokeWidth:1.5,strokeMiterlimit:10}}),c.jsx("path",{d:"M43 12.7H18.6c-2.6 0-4.6 2.1-4.6 4.7v53.2c0 2.6 2.1 4.7 4.6 4.7H43c2.6 0 4.6-2.1 4.6-4.7V17.4c.1-2.6-2-4.7-4.6-4.7z",style:{fill:"#25d366",stroke:"#111b21",strokeWidth:1.5,strokeLinecap:"round",strokeMiterlimit:10}}),c.jsx("path",{d:"M43 19.8H18.7c-.8 0-1.5.7-1.5 1.5V66c0 .8.7 1.5 1.5 1.5H43c.8 0 1.5-.7 1.5-1.5V21.3c0-.8-.7-1.5-1.5-1.5zm-16.9 51h9.5M95 17.1h9.4",style:{strokeLinecap:"round",fill:"none",stroke:"#111b21",strokeWidth:1.5,strokeMiterlimit:10}}),c.jsx("path",{d:"M83.3 21.3h32.9M83.3 63.9h32.9m-16.5 7.9c1.2 0 2.1-1 2.1-2.2s-1-2.2-2.1-2.2c-1.2 0-2.1 1-2.1 2.2s.9 2.2 2.1 2.2z",style:{fill:"none",stroke:"#111b21",strokeWidth:1.5,strokeMiterlimit:10}})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.WdsPictoMovePhoneIcon=m}),98);
__d("WAWebDeviceSwitchingPopup.react",["fbt","WAWebConfirmPopup.react","WAWebFbtCommon","WAWebFlex.react","WAWebModal.react","WAWebModalManager","WAWebText.react","WAWebUISpacing","WAWebWdsPictoMovePhoneIcon.react","react","stylex","vulture"],(function(t,n,r,o,a,i,l,s){var e,u,c=e||(e=r("react")),d={hyphen:{textAlign:"x2b8uid",fontWeight:"xk50ysn",fontSize:"x579bpy",color:"x14ug900",$$css:!0}};function m(e){r("vulture")("DIyj0DRN0eb8aZjeYrcq6R99gB8=");var t=e.otpCode,n=function(){o("WAWebModalManager").ModalManager.close()},a=t.split(""),i=a.slice(0,3),l=a.slice(3),m=c.jsx(o("WAWebWdsPictoMovePhoneIcon.react").WdsPictoMovePhoneIcon,{}),_=c.jsx("div",{dir:"ltr",children:c.jsxs(o("WAWebFlex.react").FlexRow,{align:"center",justify:"center",children:[i.map(function(e,t){return c.jsx(p,{content:e},t+":"+e)}),c.jsx("span",babelHelpers.extends({},(u||(u=r("stylex"))).props(d.hyphen,o("WAWebUISpacing").uiPadding.top20,o("WAWebUISpacing").uiPadding.horiz8),{"aria-hidden":"true",children:"-"})),l.map(function(e,t){return c.jsx(p,{content:e},t+3+":"+e)})]})});return c.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{onOK:n,okText:r("WAWebFbtCommon")("OK"),type:o("WAWebModal.react").ModalTheme.InviteNew,buttonAlign:"center",children:c.jsxs(o("WAWebFlex.react").FlexColumn,{align:"center",xstyle:o("WAWebUISpacing").uiPadding.all24,children:[m,c.jsx(o("WAWebText.react").WAWebTextLarge,{paddingTop:24,paddingBottom:24,weight:"medium",children:s._(/*BTDS*/"Code for new phone")}),c.jsx("div",{className:"x1jchvi3",children:s._(/*BTDS*/"Enter this verification code on your new phone. Please don't share it with anyone. If you didn't request a code, you can safely ignore this.")}),_]})})}m.displayName=m.name+" [from "+i.id+"]";function p(e){var t=e.content;return r("vulture")("RnO40rXatJcT4DqTT2n1yrVDbhI="),c.jsx(o("WAWebFlex.react").FlexRow,{align:"center",justify:"center",xstyle:[o("WAWebUISpacing").uiMargin.horiz14,o("WAWebUISpacing").uiPadding.top20],children:c.jsx("span",{className:"x2b8uid xk50ysn x1q74xe4 x1jzgpr8 x14ug900",children:t})})}p.displayName=p.name+" [from "+i.id+"]",l.default=m}),226);
__d("WAWebDeviceSwitchAction",["WAWebDeviceSwitchingPopup.react","WAWebModalManager","WAWebNotificationBackend","WAWebUserPrefsMeUser","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react"));function u(e){var t=o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),n={wid:t,otpCode:e};o("WAWebNotificationBackend").showDeviceSwitchNotification(n),o("WAWebModalManager").ModalManager.open(s.jsx(r("WAWebDeviceSwitchingPopup.react"),{otpCode:e}))}l.handleOpenDeviceSwitchCode=u}),98);
__d("WAWebDeviceSwitchingBridgeApi",["WAWebDeviceSwitchAction"],(function(t,n,r,o,a,i,l){var e={showDeviceSwitchOtp:function(t){var e=t.otpCode;o("WAWebDeviceSwitchAction").handleOpenDeviceSwitchCode(e)}};l.DeviceSwitchingBridgeApi=e}),98);
__d("WAWebDocumentVisibilityObserver",[],(function(t,n,r,o,a,i){var e=6e4,l=(function(){function t(){this.$1=!document.hidden,this.$2=!document.hidden,this.$3=document.hidden?null:0,this.$4=[]}var n=t.prototype;return n.isDocumentVisible=function(){return this.$1},n.isWindowInFocus=function(){return this.$2},n.getDocumentVisibilityDuration=function(t){var e=t.start,n=t.end,r=0,o=window.performance.now();this.$3!=null&&(this.$4.push({start:this.$3,end:o}),this.$3=o);for(var a of this.$4)if(!(a.end<e||a.start>n)){if(a.start<=e&&a.end<=n){r+=a.end-e;continue}if(a.start<=e&&a.end>n){r+=n-e;continue}if(a.start>=e&&a.end<=n){r+=a.end-a.start;continue}if(a.start>=e&&a.end>n){r+=n-a.start;continue}}return r},n.observe=function(){var t=this,n=function(r,o){o!==t.$1&&(t.$1=o,o?t.$3=r.timeStamp:t.$3!=null&&(t.$4.push({start:t.$3,end:r.timeStamp}),t.$3=null),t.$4=t.$4.filter(function(t){return t.end>=r.timeStamp-e}))},r=function(t){n(t,!document.hidden)},o=function(){t.$2=!0},a=function(){t.$2=!1};return document.addEventListener("visibilitychange",r),window.addEventListener("focus",o),window.addEventListener("blur",a),function(){document.removeEventListener("visibilitychange",r),window.removeEventListener("focus",o),window.removeEventListener("blur",a)}},t})();i.WAWebDocumentVisibilityObserver=l}),66);
__d("WAWebErrorBoundaryInstrumented.react",["WAWebErrorBoundary.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["children"],u,c=u||(u=r("react"));function d(t){var n=t.ref,r=babelHelpers.objectWithoutPropertiesLoose(t,e),a=r.children,i=babelHelpers.objectWithoutPropertiesLoose(r,s);return c.jsx(o("WAWebErrorBoundary.react").ErrorBoundary,babelHelpers.extends({},i,{children:a}))}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("WAWebUserPrefsGalaxyDisableCTA",["WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(t,n,r,o,a,i,l){function e(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").KEYS.WA_WEB_GALAXY_DISABLE_CTA_COLLECTION);return Array.isArray(e)?new Set(e.filter(function(e){return typeof e=="string"})):new Set}function s(e){var t=Array.from(e);r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.WA_WEB_GALAXY_DISABLE_CTA_COLLECTION,t)}function u(t){var n=e();n.add(t),s(n)}function c(t){var n=e();n.delete(t),s(n)}function d(){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.WA_WEB_GALAXY_DISABLE_CTA_COLLECTION,[])}l.getGalaxyDisableCTAMessageIds=e,l.setGalaxyDisableCTAMessageIds=s,l.addGalaxyDisableCTAMessageId=u,l.removeGalaxyDisableCTAMessageId=c,l.clearGalaxyDisableCTAMessageIds=d}),98);
__d("WAWebGalaxyDisableCTACollection",["WALogger","WAWebBaseCollection","WAWebBaseModel","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebMsgCollection","WAWebMsgType","WAWebUserPrefsGalaxyDisableCTA"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(o("WAWebBaseModel").BaseModel),f=o("WAWebBaseModel").defineModel(_),g=(function(t){function n(){var e;return e=t.call(this)||this,e.messageCollectionListener=null,e.initialize(),e.$GalaxyDisableCTACollectionImpl$p_1(),e}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.initialize=function(){var e=this,t=o("WAWebUserPrefsGalaxyDisableCTA").getGalaxyDisableCTAMessageIds();t.forEach(function(t){var n=new f({id:t});e.add(n)})},a.addMessageId=function(n){if(this.get(n)==null){var t=o("WAWebMsgCollection").MsgCollection.get(n);if(t)o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["GalaxyDisableCTACollection: found existing message for ID: ",""])),n),this.$GalaxyDisableCTACollectionImpl$p_2(t,n);else{o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["GalaxyDisableCTACollection: adding message ID to wait queue: ",""])),n);var r=new f({id:n});o("WAWebUserPrefsGalaxyDisableCTA").addGalaxyDisableCTAMessageId(n),this.add(r)}}},a.$GalaxyDisableCTACollectionImpl$p_1=function(){var e=this;this.messageCollectionListener=function(t){t.type===o("WAWebMsgType").MSG_TYPE.INTERACTIVE&&t.interactiveType===r("WAWebInteractiveMessageType").NATIVE_FLOW&&t.nativeFlowName===r("WAWebInteractiveMessagesNativeFlowName").CTA_FLOW&&e.$GalaxyDisableCTACollectionImpl$p_3()},o("WAWebMsgCollection").MsgCollection.on("add",this.messageCollectionListener)},a.$GalaxyDisableCTACollectionImpl$p_3=function(){var e=this;this.forEach(function(t){var n=t.id.toString(),r=o("WAWebMsgCollection").MsgCollection.get(n);r&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["GalaxyDisableCTACollection: found message for ID: ",""])),n),e.$GalaxyDisableCTACollectionImpl$p_2(r,n))})},a.$GalaxyDisableCTACollectionImpl$p_2=function(t,n){var e=this;try{if(t.galaxyFlowDisabled===!0){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["GalaxyDisableCTACollection: message already updated, skipping: ",""])),n),this.$GalaxyDisableCTACollectionImpl$p_4(n);return}t.set({galaxyFlowDisabled:!0}),t.updateNFMButtonsState(!0).then(function(t){return e.$GalaxyDisableCTACollectionImpl$p_4(n)}).catch(function(e){o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["GalaxyDisableCTACollection: Failed to update NFM buttons state: ",""])),e)}),o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["GalaxyDisableCTACollection: processed and removed message ID: ",""])),n)}catch(e){o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["GalaxyDisableCTACollection: Error updating message state: ",""])),e)}},a.$GalaxyDisableCTACollectionImpl$p_4=function(t){var e=this.get(t);e&&(this.remove(e),o("WAWebUserPrefsGalaxyDisableCTA").removeGalaxyDisableCTAMessageId(t))},n})(o("WAWebBaseCollection").BaseCollection);g.model=f;var h=new g;l.GalaxyDisableCTACollection=h}),98);
__d("WhatsAppExtensionStatus",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["DRAFT","PUBLISHED","DEPRECATED","BLOCKED","THROTTLED"]),l=e;i.default=l}),66);
__d("WAWebGalaxyFlowsDrawerUtils",["fbt","WAFlowsActionHandlerTypes","WAWebGalaxyFlowWamLoggerUtils","WAWebGalaxyFlowsUtils","WAWebProfilePicThumbCollection"],(function(t,n,r,o,a,i,l,s){"use strict";var e={screen:"RESPONSE"},u=function(){var e=location.hostname.match(/(?:dev-web|web)\.(.+?)\.whatsapp\.com$/);return e?"https://flows."+e[1]+".whatsapp.net/flows-v2/wa-web/":"https://flows.whatsapp.net/flows-v2/wa-web/"},c="flows-iframe",d="flows-iframe-loaded",m=["whatsapp.net"],p=u();function _(e){var t,n=(t=o("WAWebGalaxyFlowsUtils").getFlowDataFromFetchedData(e.flowId,e.flowFetchedMetadata))==null?void 0:t.state;return n==="PUBLISHED"||!e.mode?"PUBLISHED":"DRAFT"}function f(e){return e.flowAction===o("WAFlowsActionHandlerTypes").WELJActionType.DATA_EXCHANGE?o("WAFlowsActionHandlerTypes").WELJActionType.DATA_EXCHANGE:o("WAFlowsActionHandlerTypes").WELJActionType.NAVIGATE}function g(t,n,r,a){var i,l=n.isResponseFlow,s=function(){var e;o("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.resyncPicturesByWid([t.contact.id]);var n=t.contact.getProfilePicThumb();return(e=n==null?void 0:n.img)!=null?e:""},u=o("WAWebGalaxyFlowsUtils").getFlowDataFromFetchedData(n.flowId,n.flowFetchedMetadata);return{public_key:h(n.flowFetchedMetadata),biz_jid:t.contact.id.toString(),flow_token:n.flowToken,extension_status:String(_(n)),qpl_message_id:n.flowQPLMessageId,wam_message_id:n.flowWAMMessageId,wam_session_id:"2C95C13B-5731-4508-8F88-863DAAC34A95",extension_id:n.flowId,qpl_session_id:"7342BB21-9B5E-4408-895C-D5171427E19F",business_name:(i=r==null?void 0:r.business_name)!=null?i:"",biz_logo:s(),is_template:n.isTemplate===!0,hsm_tag:n.hsmTag,categories:n.categories,biz_platform:o("WAWebGalaxyFlowWamLoggerUtils").getFlowsMaybeBizPlatform(t),entry_point_conversion_source:n.entryPointConversionSource,entry_point_conversion_app:n.entryPointConversionApp,entry_point_conversation_initiated:-1,flow_action:f(n),flow_action_payload:btoa(JSON.stringify(l?e:n.flowActionPayload)),flow_json:JSON.stringify(n.flowJSON),flow_entry_point:n.flowEntryPoint,click_sequence_number:null,is_flow_interactive:!0,response_viewer:a,response_message:n.flowResponseMessage,creation_source:n.creationSource,www_proxy_secret:u==null?void 0:u.www_proxy_secret,flow_token_signature:u==null?void 0:u.flow_token_signature}}function h(e){var t,n;if(!e)return"";var r=(t=e.xwa_extensions_get_flow_data)!=null?t:{},o=r.endpoint_public_key;return(n=o==null?void 0:o.key)!=null?n:""}function y(){return navigator.onLine?s._(/*BTDS*/"Something went wrong."):s._(/*BTDS*/"Check your internet connection and try again.")}l.getFlowsUrl=u,l.FLOWS_IFRAME_ID=c,l.FLOWS_IFRAME_LOADED_EVENT=d,l.SUPPORTED_ORIGINS=m,l.FLOWS_URL=p,l.getFlowStatus=_,l.getFlowInitDataPayload=g,l.getPublicKeyFromFetchedData=h,l.getGalaxyFlowsFullScreenErrorString=y}),226);
__d("WAWebGalaxyFlowsNavBarUtils",["fbt","WAWebActionMenuItem.react","WAWebClickable.react","WAWebDrawerHeader.react","WAWebDropdownV2.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebModalManager","WAWebMoreRefreshedIcon.react","WAWebReportMsgPopup.react","WAWebSpamConstants","WDSIconIcClose.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=r("react")),d=(e||(e=o("react"))).useRef,m={LEARN_MORE:0x77cb899945874,HELP:301407378887650},p=197,_={contextMenuIconContainer:{borderStartStartRadius:"xvs2etk",borderStartEndRadius:"xg3wpu6",borderEndEndRadius:"x1jwbhkm",borderEndStartRadius:"xgg4q86",height:"x1vqgdyp",width:"x100vrsf",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",flex:"x1okw0bk",cursor:"x1ypdohk",":hover_backgroundColor":"x1j1k1sc",$$css:!0}};function f(e){o("WAWebExternalLink.react").openExternalLink(o("WAWebFaqUrl").getFullUrl(e))}function g(e){o("WAWebModalManager").ModalManager.open(c.jsx(o("WAWebReportMsgPopup.react").ReportMsgPopupV2,{msg:e.unsafe(),spamFlow:o("WAWebSpamConstants").SpamFlow.GalaxyFlowsContextMenuReport}))}function h(e){var t=e.isResponseFlow,n=e.msg,a=e.onCancel,i=d(null),l=d(null),u=s._(/*BTDS*/"Menu"),h=s._(/*BTDS*/"Close"),y=c.jsx(o("WAWebClickable.react").Clickable,{ref:i,xstyle:_.contextMenuIconContainer,title:h,ariaLabel:h,onClick:a,children:c.jsx(r("WDSIconIcClose.react"),{})}),C=c.jsxs(c.Fragment,{children:[!t&&c.jsx(o("WAWebClickable.react").Clickable,{ref:l,xstyle:_.contextMenuIconContainer,title:u,ariaLabel:u,children:c.jsx(o("WAWebMoreRefreshedIcon.react").MoreRefreshedIcon,{})}),c.jsxs(o("WAWebDropdownV2.react").DropdownV2Menu,{minWidth:p,target:l,alignment:o("WAWebDropdownV2.react").PopoverAlignment.Center,position:o("WAWebDropdownV2.react").PopoverPosition.Bottom,children:[c.jsx(o("WAWebActionMenuItem.react").ActionMenuItem,{optionId:"help",primary:s._(/*BTDS*/"Help"),onSelect:function(){return f(m.HELP)}}),c.jsx(o("WAWebActionMenuItem.react").ActionMenuItem,{optionId:"report",primary:s._(/*BTDS*/"Report"),onSelect:function(){return g(n)}})]})]});return c.jsx(o("WAWebDrawerHeader.react").DrawerHeader,{testid:void 0,type:o("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.TAB,children:c.jsxs(o("WAWebFlex.react").FlexRow,{align:"end",justify:"end",gap:12,children:[C,y]})})}h.displayName=h.name+" [from "+i.id+"]",l.GALAXY_FLOWS_ARTICLE_IDS=m,l.openHelpCenterArticle=f,l.reportGalaxyFlow=g,l.WAWebGalaxyFlowsNavBar=h}),226);
__d("WAWebMexFetchNewChatMessageCappingInfoJobQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"XWA2MessageCappingInfo",kind:"LinkedField",name:"xwa2_message_capping_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_quota",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"used_quota",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cycle_start_timestamp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cycle_end_timestamp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"server_sent_timestamp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ote_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mv_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capping_status",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"WAWebMexFetchNewChatMessageCappingInfoJobQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"WAWebMexFetchNewChatMessageCappingInfoJobQuery",selections:t},params:{id:"24503548349331633",metadata:{},name:"WAWebMexFetchNewChatMessageCappingInfoJobQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("WAWebMexFetchNewChatMessageCappingInfoJob",["WALogger","WAWebBackendErrors","WAWebIndividualNewChatMessageCappingLimitUtils","WAWebMessageCappingWamEvent","WAWebMexClient","WAWebMexFetchNewChatMessageCappingInfoJobQuery.graphql","WAWebWamEnumMessageCappingActionType","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("WAWebMexFetchNewChatMessageCappingInfoJobQuery.graphql");function c(){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e,t,n,r,a,i={input:{type:"INDIVIDUAL_NEW_CHAT_MSG"}};new(o("WAWebMessageCappingWamEvent")).MessageCappingWamEvent({messageCappingActionType:o("WAWebWamEnumMessageCappingActionType").MESSAGE_CAPPING_ACTION_TYPE.API,userActionTarget:"fetch_capping_data",extraAttributes:JSON.stringify(o("WAWebIndividualNewChatMessageCappingLimitUtils").getCappingData()||{})}).commit();var l=yield o("WAWebMexClient").fetchQuery(u,i),c=l==null?void 0:l.xwa2_message_capping_info;if((l==null?void 0:l.xwa2_message_capping_info)==null)throw new(o("WAWebMessageCappingWamEvent")).MessageCappingWamEvent({messageCappingActionType:o("WAWebWamEnumMessageCappingActionType").MESSAGE_CAPPING_ACTION_TYPE.API,userActionTarget:"fetch_capping_data_response",extraAttributes:JSON.stringify({api_status:"failure"})}).commit(),new(o("WAWebBackendErrors")).ServerStatusCodeError(500,"Mex unexpected null response for new chat message capping info");return new(o("WAWebMessageCappingWamEvent")).MessageCappingWamEvent({messageCappingActionType:o("WAWebWamEnumMessageCappingActionType").MESSAGE_CAPPING_ACTION_TYPE.API,userActionTarget:"fetch_capping_data_response",extraAttributes:JSON.stringify({api_status:"success",capping_info:l})}).commit(),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[MEX][wa_biz_tools][CAP] fetched new chat message capping info"]))).tags("GQL","MEX","wa_biz_tools","CAP").devConsole({response:l}),{total_quota:(e=c==null?void 0:c.total_quota)!=null?e:0,used_quota:(t=c==null?void 0:c.used_quota)!=null?t:0,cycle_start_timestamp:(n=c==null?void 0:c.cycle_start_timestamp)!=null?n:"",cycle_end_timestamp:(r=c==null?void 0:c.cycle_end_timestamp)!=null?r:"",server_sent_timestamp:(a=c==null?void 0:c.server_sent_timestamp)!=null?a:"",ote_status:c==null?void 0:c.ote_status,mv_status:c==null?void 0:c.mv_status,capping_status:c==null?void 0:c.capping_status}}),d.apply(this,arguments)}l.mexFetchNewChatMessageCapping=c}),98);
__d("WAWebGetNewChatMessageCappingInfoJob",["Promise","WAJobOrchestratorTypes","WALogger","WAWebBackendApi","WAWebIndividualNewChatMessageCappingLimitGatingUtils","WAWebIndividualNewChatMessageCappingLimitUtils","WAWebMexFetchNewChatMessageCappingInfoJob","WAWebOrchestratorNonPersistedJob","WAWebUserPrefsIndexedDBStorage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!o("WAWebIndividualNewChatMessageCappingLimitGatingUtils").isIndividualNewChatMessageCappingEnabled())return(s||(s=n("Promise"))).resolve();var e=yield d();if(e!=null){var t,r=o("WAWebIndividualNewChatMessageCappingLimitUtils").getCappingStatusType(e==null?void 0:e.capping_status);yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebIndividualNewChatMessageCappingLimitUtils").NEW_CHAT_MESSAGE_CAPPING_IDB_KEY,{capping_status:r,ote_status:o("WAWebIndividualNewChatMessageCappingLimitUtils").getCappingOTEStatusType(e==null?void 0:e.ote_status),mv_status:o("WAWebIndividualNewChatMessageCappingLimitUtils").getCappingMVStatusType(e==null?void 0:e.mv_status),total_quota:e==null?void 0:e.total_quota,used_quota:Math.min(Number(e==null?void 0:e.used_quota),Number(e==null?void 0:e.total_quota)),cycle_end_timestamp:Number(e==null?void 0:e.cycle_end_timestamp),cycle_start_timestamp:Number(e==null?void 0:e.cycle_start_timestamp),server_sent_timestamp:Number((t=e==null?void 0:e.server_sent_timestamp)!=null?t:"0")})}return o("WAWebBackendApi").frontendFireAndForget("individualNewChatMessageCappingStateChange",{}),(s||(s=n("Promise"))).resolve()}),c.apply(this,arguments)}function d(){return o("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getNewChatMessageCapping",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{return yield o("WAWebMexFetchNewChatMessageCappingInfoJob").mexFetchNewChatMessageCapping()}catch(t){throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MEX][wa_biz_tools][CAP] get new chat message capping info job error"]))).tags("GQL","MEX","wa-ice","RET").devConsole({e:t}),t}}),{priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}l.fetchOrUpdateCapStatus=u}),98);
__d("WAWebRestoreGroupParticipantsAction",["Promise","WALogger","WAWebChatCollection","WAWebDBParticipantTypes","WAWebGroupMetadataCollection","WAWebGroupParticipantModel","WAWebGroupQueryBridge","WAWebSchemaParticipant","WAWebWamGroupMetricCache","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m;function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreGroupParticipantsForChats: start restoring participants for chats ",""])),t);var a=new Map;t.forEach(function(e){var t=r("WAWebGroupMetadataCollection").get(e);if(!t||t.participantQueryPromise||!t.stale){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreGroupParticipantsForChats: skip for chat - ",""])),e);return}t.participantQueryPromise=new(m||(m=n("Promise")))(function(t){a.set(e,t)})});var i=Array.from(a.keys());try{var l=yield o("WAWebSchemaParticipant").getParticipantTable().bulkGet(i);l.forEach((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,l=r("WAWebGroupMetadataCollection").get(i[t]),s=!!((n=o("WAWebChatCollection").ChatCollection.get(i[t]))!=null&&n.isReadOnly);if(l)try{var d=[],m=[];if(e==null||e.deviceSyncComplete!=null&&!e.deviceSyncComplete||e.staleType===o("WAWebDBParticipantTypes").STALE_TYPES.PARTICIPANT)if(s)o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreGroupParticipantsForChats: skip sync stale participant for read only chat ",""])),i[t]);else{var p;o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreGroupParticipantsForChats: sync stale participant for ",""])),i[t]);var _=yield o("WAWebGroupQueryBridge").sendQueryGroup(o("WAWebWidFactory").createWid(i[t]));d=((p=_==null?void 0:_.participants)!=null?p:[]).map(function(e){var t=e.id,n=e.isAdmin,o=e.isSuperAdmin;return new(r("WAWebGroupParticipantModel"))({id:t,isAdmin:n,isSuperAdmin:o})})}else{var f,g,h=new Set(e.admins),y=e.superAdmins!=null?new Set(e.superAdmins):void 0;d=(f=(g=e.participants)==null?void 0:g.map(function(e){var t;if(y===void 0){var n;t=((n=l.owner)==null?void 0:n.toString())===e}else t=y.has(e);return new(r("WAWebGroupParticipantModel"))({id:o("WAWebWidFactory").createUserWidOrThrow(e),isAdmin:h.has(e),isSuperAdmin:t})}))!=null?f:[]}if(e==null)m=[];else{var C;m=(C=e.pastParticipants)==null?void 0:C.map(function(e){var t=e.jid,n=e.leaveTs,a=e.leaveReason;return new(r("WAWebGroupParticipantModel"))({id:o("WAWebWidFactory").createWid(t),leaveTs:n,leaveReason:a})})}l.participants.add(d,{merge:!0}),l.pastParticipants.add(m,{merge:!0}),l.stale=!1,l.deviceStale=(e==null?void 0:e.staleType)===o("WAWebDBParticipantTypes").STALE_TYPES.DEVICE,e!=null&&o("WAWebWamGroupMetricCache").cacheGroupMetrics(e)}finally{var b=a.get(i[t]);b==null||b(),l.participantQueryPromise=null}});return function(t,n){return e.apply(this,arguments)}})())}catch(e){i.forEach(function(e){var t=a.get(e);t==null||t();var n=r("WAWebGroupMetadataCollection").get(e);n&&(n.participantQueryPromise=null)});return}o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreGroupParticipantsForChats: complete restoring participants for chats ",""])),t)}),_.apply(this,arguments)}l.restoreGroupParticipantsForChats=p}),98);
__d("WAWebUpdateModelForGroupAction",["Promise","WALogger","WANullthrows","WATimeUtils","WAWebABProps","WAWebApiContact","WAWebChatCollection","WAWebCommunityActivityCollection","WAWebCommunityActivityModel","WAWebCommunityGatingUtils","WAWebCommunitySubgroupSuggestionsUtils","WAWebEphemeralityUtils","WAWebGroupGatingUtils","WAWebGroupGetMembershipApprovalRequestsJob","WAWebGroupMetadataCollection","WAWebGroupSafetyCheckGatingUtils","WAWebGroupType","WAWebInvalidateEventsAction","WAWebLeaveReasonType","WAWebNux","WAWebNuxAction","WAWebPollsInvalidateChatPollMsgsAction","WAWebRemoveFromFavoritesAction","WAWebUpdateModelsForCommunityAction","WAWebUserPrefsMeUser","WAWebWidFactory"],(function(t,n,r,o,a,i,l){var e,s,u;function c(t,a){var i=t.chatId,l=o("WAWebChatCollection").ChatCollection.get(i);if(!l)return(u||(u=n("Promise"))).resolve();var c=r("WANullthrows")(l.groupMetadata),d=t.author,m=t.ts;switch(a.actionType){case o("WAWebGroupType").GROUP_ACTIONS.SUBJECT:{var p={name:a.subject};l.contact.set(p),c.set("subject",a.subject);break}case o("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE:{if(!a.jid)break;var _=r("WAWebGroupMetadataCollection").assertGet(a.jid);if(_.participants.iAmAdmin()){var f=a.participants.map(function(e){var t=e.id;return{id:t,isAdmin:!1}});_.participants.add(f,{merge:!0})}else _.participants.remove(a.participants.map(function(e){return e.id}));if(a.participants.find(function(e){return o("WAWebUserPrefsMeUser").isMeAccount(e.id)})){var g=_.participants.filter(function(e){return!e.isAdmin}).map(function(e){return e.id});_.participants.remove(g)}break}case o("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_PROMOTE:{if(!a.jid)break;var h=r("WAWebGroupMetadataCollection").assertGet(a.jid),y=a.participants.map(function(e){var t=e.id;return{id:t,isAdmin:!0}});h.participants.add(y,{merge:!0});break}case o("WAWebGroupType").GROUP_ACTIONS.ADD:case o("WAWebGroupType").GROUP_ACTIONS.PROMOTE:case o("WAWebGroupType").GROUP_ACTIONS.DEMOTE:{if(a.actionType===o("WAWebGroupType").GROUP_ACTIONS.ADD){c.groupAdder==null&&o("WAWebGroupSafetyCheckGatingUtils").groupSafetyCheckM2Enabled()&&c.set("groupAdder",t.author);var C=a.participants.some(function(e){return e.id.isLid()}),b=c.isCag,v=!!c.isLidAddressingMode;if(C&&!b&&!v)break}var S=[],R=new Set;c.participants.iAmAdmin()||a.actionType===o("WAWebGroupType").GROUP_ACTIONS.ADD||a.actionType===o("WAWebGroupType").GROUP_ACTIONS.PROMOTE?(S=a.participants.map(function(e){var t=e.id;return t}),a.participants.forEach(function(e){var t=e.lid,n=e.id,r=e.isAdmin;r&&R.add(n.toString()),!(t==null||n.isLid())&&c.participants.remove(t)})):a.actionType===o("WAWebGroupType").GROUP_ACTIONS.DEMOTE&&(S=a.participants.map(function(e){var t=e.lid,n=e.id;return t==null||n.isLid()?n:t}),a.participants.forEach(function(e){var t=e.lid,n=e.id;t==null||n.isLid()||c.participants.remove(n)}));var L=S.map(function(e){return{id:e,isAdmin:a.actionType===o("WAWebGroupType").GROUP_ACTIONS.PROMOTE||a.actionType===o("WAWebGroupType").GROUP_ACTIONS.ADD&&R.has(e.toString())}});if(c.participants.add(L,{merge:!0}),a.actionType===o("WAWebGroupType").GROUP_ACTIONS.ADD&&(S.forEach(function(e){c.pastParticipants.remove(e),o("WAWebUserPrefsMeUser").isMeAccount(e)&&c.pastParticipants.reset()}),c.membershipApprovalMode&&o("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&S.forEach(function(e){c.membershipApprovalRequests.remove(e)}),S.forEach(function(e){r("WAWebGroupMetadataCollection").trigger("group_participant_change_"+e.toString(),l.id)}),a.isParentGroup===!0&&r("WAWebCommunityActivityCollection").add({id:i.toString(),communityId:i,type:o("WAWebCommunityActivityModel").ActivityTypeType.NEW_COMMUNITY,timestamp:m!=null?m:o("WATimeUtils").unixTime()})),S.find(function(e){return o("WAWebUserPrefsMeUser").isMeAccount(e)}))if(a.actionType===o("WAWebGroupType").GROUP_ACTIONS.PROMOTE){if(o("WAWebCommunityGatingUtils").communityAdminPromotionOneTimePromptEnabled()&&c.groupType===o("WAWebGroupType").GroupType.COMMUNITY){var E=o("WAWebNux").getCommunityAdminPromotionNuxKey(c.id.toString());o("WAWebNuxAction").resetNux(E)}c.membershipApprovalMode&&o("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&o("WAWebGroupGetMembershipApprovalRequestsJob").queryAndUpdateGroupMembershipApprovalRequests(l.id)}else a.actionType===o("WAWebGroupType").GROUP_ACTIONS.DEMOTE&&o("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&c.membershipApprovalRequests.reset();break}case o("WAWebGroupType").GROUP_ACTIONS.REMOVE:{var k,I=!1,T=[],D=[];a.participants.forEach(function(e){var n=e.id,r=e.lid,a=e.isAdmin,i=o("WAWebUserPrefsMeUser").isMeAccount(n);r!=null&&i&&a===!0&&T.push(r),T.push(n),D.push({id:n,leaveTs:m,leaveReason:n.equals(t.author)?o("WAWebLeaveReasonType").LeaveReason.Left:o("WAWebLeaveReasonType").LeaveReason.Removed}),i&&(I=!0)}),c.participants.remove(T),c.pastParticipants.add(D),a.reason===o("WAWebGroupType").REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE&&c.participants.add(a.participants.map(function(e){var t=e.lid,n=e.id;return t==null||n.isLid()?{id:n}:{id:t}}),{merge:!0}),a.participants.forEach(function(e){r("WAWebGroupMetadataCollection").trigger("group_participant_change_"+e.id.toString(),l.id)}),I&&(o("WAWebPollsInvalidateChatPollMsgsAction").invalidateChatPollMsgs(l),o("WAWebInvalidateEventsAction").invalidateEventMsgsForChat(l),o("WAWebRemoveFromFavoritesAction").removeFromFavoritesAction(l.id,{suppressToast:!0}));var x=(k=c.getParentGroupChat())==null?void 0:k.groupMetadata;c.isCag&&(x==null||x.participants.remove(T),x==null||x.pastParticipants.add(D)),!c.isParentGroupParticipant()&&c.parentGroup&&(x==null||x.trigger("exitParentGroup"),o("WAWebUpdateModelsForCommunityAction").updateModelsForExitedCommunity(c.parentGroup));break}case o("WAWebGroupType").GROUP_ACTIONS.MODIFY:if(d&&a.participants&&a.participants.length>0){var $=d,P=a.participants[0].id,N=c.participants.remove($),M=!1,w=!1;N.length&&N[0]&&(M=N[0].isAdmin,w=N[0].isSuperAdmin);var A={id:P,isAdmin:M,isSuperAdmin:w};c.participants.add(A)}break;case o("WAWebGroupType").GROUP_ACTIONS.INVITE_CODE:a.code?c.inviteCode=a.code:o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["model:chat:handleGroupAction:invalid invite code: "," for ",""])),a.code,l.id.toString());break;case o("WAWebGroupType").GROUP_ACTIONS.DESC_ADD:c.set({desc:a.desc,descId:a.descId,descTime:a.descTime,descOwner:d==null?void 0:d.toString()});break;case o("WAWebGroupType").GROUP_ACTIONS.DESC_REMOVE:if(c.descId===a.descId){c.set({desc:void 0,descId:void 0,descTime:void 0,descOwner:void 0});break}break;case o("WAWebGroupType").GROUP_ACTIONS.RESTRICT:c.restrict=!!a.value;break;case o("WAWebGroupType").GROUP_ACTIONS.SUSPEND:{var F=!!a.value;c.suspended=F,o("WAWebUpdateModelsForCommunityAction").maybeUpdateModelsForCommunitySuspendedStatus(i,F);break}case o("WAWebGroupType").GROUP_ACTIONS.ANNOUNCE:c.announce=!!a.value;break;case o("WAWebGroupType").GROUP_ACTIONS.NO_FORWARD:c.noFrequentlyForwarded=!!a.value;break;case o("WAWebGroupType").GROUP_ACTIONS.EPHEMERAL:c.ephemeralDuration=a.duration,c.disappearingModeTrigger=o("WAWebEphemeralityUtils").getDisappearingModeTrigger(a.trigger),c.disappearingModeInitiatedByMe=a.initiatedByMe;break;case o("WAWebGroupType").GROUP_ACTIONS.REVOKE_INVITE:{var O=[];a.participants.forEach(function(e){var t=e.id;c.pendingParticipants.get(t)&&O.push(t)}),c.pendingParticipants.remove(O);break}case o("WAWebGroupType").GROUP_ACTIONS.DELETE:a.reason===o("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT?o("WAWebUpdateModelsForCommunityAction").updateModelsForIntegrityDeactivateCommunity(i):a.reason===o("WAWebGroupType").DELETE_REASON.DELETE_PARENT?o("WAWebUpdateModelsForCommunityAction").updateModelsForDeactivateCommunity(i):c.terminated=!0;break;case o("WAWebGroupType").GROUP_ACTIONS.GROWTH_UNLOCKED:c.growthLockExpiration=void 0,c.growthLockType=void 0;break;case o("WAWebGroupType").GROUP_ACTIONS.GROWTH_LOCKED:a.type==="invite"&&(c.growthLockExpiration=a.expiration,c.growthLockType=a.type);break;case o("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_LINK:c.parentGroup=a.groupDatas[0].id;break;case o("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_LINK:o("WAWebUpdateModelsForCommunityAction").updateModelsForSubgroupLink({parentGroupId:l.id,subgroups:a.groupDatas,timestamp:m,author:t.author});break;case o("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_LINK:c.parentGroup&&o("WAWebUpdateModelsForCommunityAction").updateModelsForSubgroupLink({parentGroupId:c.parentGroup,subgroups:a.groupDatas,timestamp:m,author:t.author});break;case o("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_UNLINK:c.parentGroup=void 0;break;case o("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_UNLINK:o("WAWebUpdateModelsForCommunityAction").updateModelsForSubgroupUnlink(l.id,a.groupDatas);break;case o("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_UNLINK:c.parentGroup&&o("WAWebUpdateModelsForCommunityAction").updateModelsForSubgroupUnlink(c.parentGroup,a.groupDatas);break;case o("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_MODE:o("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&(c.membershipApprovalMode=!!a.value,a.value||c.membershipApprovalRequests.reset());break;case o("WAWebGroupType").GROUP_ACTIONS.ALLOW_ADMIN_REPORTS:{c.set("reportToAdminMode",a.value),a.value||c.set("lastReportToAdminTimestamp",null);break}case o("WAWebGroupType").GROUP_ACTIONS.ADMIN_REPORT_RECIEVED:{c.set("lastReportToAdminTimestamp",a.value);break}case o("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_REQUEST:if(o("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&!o("WAWebABProps").getABPropConfigValue("group_join_request_m3")){var B=r("WANullthrows")(d);c.membershipApprovalRequests.add({id:B,t:m,addedBy:B,requestMethod:a.requestMethod,parentGroupId:a.parentGroupId})}break;case o("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS:if(o("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&o("WAWebABProps").getABPropConfigValue("group_join_request_m3")){var W=a.requests.map(function(e){return{id:e.wid,t:m,addedBy:r("WANullthrows")(d),requestMethod:a.requestMethod,parentGroupId:a.parentGroupId}});c.membershipApprovalRequests.add(W)}break;case o("WAWebGroupType").GROUP_ACTIONS.REVOKED_MEMBERSHIP_REQUESTS:o("WAWebABProps").getABPropConfigValue("group_join_request_m2")&&a.requests.forEach(function(e){c.membershipApprovalRequests.remove(e)});break;case o("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION:c.allowNonAdminSubGroupCreation=!!a.value;break;case o("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION:c.subgroupSuggestions.add({id:o("WAWebCommunitySubgroupSuggestionsUtils").getSubgroupSuggestionId(a.id,a.owner),groupId:a.id,parentGroupId:a.parentGroupId,subject:a.subject,desc:a.description,owner:a.owner,t:a.t,isExistingGroup:a.isExistingGroup,participantCount:a.participantCount},{merge:!0});break;case o("WAWebGroupType").GROUP_ACTIONS.REVOKED_SUB_GROUP_SUGGESTIONS:c.subgroupSuggestions.remove(a.subgroupSuggestions.map(function(e){var t=e.id,n=e.owner;return o("WAWebCommunitySubgroupSuggestionsUtils").getSubgroupSuggestionId(t,n)}));break;case o("WAWebGroupType").GROUP_ACTIONS.SUBGROUP_SUGGESTIONS_CHANGE_NUMBER:{var q=a.subgroupSuggestions.map(function(e){return c.subgroupSuggestions.get(o("WAWebCommunitySubgroupSuggestionsUtils").getSubgroupSuggestionId(e,a.oldOwner))}).filter(Boolean);c.subgroupSuggestions.remove(q),c.subgroupSuggestions.add(q.map(function(e){return{id:o("WAWebCommunitySubgroupSuggestionsUtils").getSubgroupSuggestionId(e.groupId,a.newOwner),groupId:e.groupId,parentGroupId:e.parentGroupId,subject:e.subject,desc:e.desc,owner:a.newOwner,t:e.t,isExistingGroup:e.isExistingGroup,participantCount:e.participantCount}}),{merge:!0});break}case o("WAWebGroupType").GROUP_ACTIONS.MEMBER_ADD_MODE:{c.memberAddMode=a.memberAddMode;break}case o("WAWebGroupType").GROUP_ACTIONS.MEMBER_LINK_MODE:{o("WAWebGroupGatingUtils").isAnyoneCanLinkToGroupsEnabled()&&(c.memberLinkMode=a.value);break}case o("WAWebGroupType").GROUP_ACTIONS.GENERAL_CHAT_AUTO_ADD_DISABLED:{c.generalChatAutoAddDisabled=!0;break}case o("WAWebGroupType").GROUP_ACTIONS.COMMUNITY_OWNER_UPDATE:{var U=a.newOwner,V=a.oldOwner,H=new Set([U.toString()]),G=o("WAWebApiContact").getAlternateUserWid(o("WAWebWidFactory").asUserWidOrThrow(U));G!=null&&H.add(G.toString());var z=new Set;if(V){z.add(V.toString());var j=o("WAWebApiContact").getAlternateUserWid(o("WAWebWidFactory").asUserWidOrThrow(V));if(j&&z.add(j.toString()),o("WAWebUserPrefsMeUser").isMeAccount(V)){var K=o("WAWebNux").getCommunityAdminPromotionNuxKey(c.id.toString());o("WAWebNuxAction").dismissNux(K)}}var Q=[];c.participants.forEach(function(e){var t=e.id.toString();z.has(t)?Q.push({id:e.id,isAdmin:!0,isSuperAdmin:!1}):H.has(t)&&Q.push({id:e.id,isAdmin:!0,isSuperAdmin:!0})}),c.owner=U,c.participants.add(Q,{merge:!0});break}case o("WAWebGroupType").GROUP_ACTIONS.HIDDEN_GROUP:{c.hiddenSubgroup=!!a.value;break}case o("WAWebGroupType").GROUP_ACTIONS.GROUP_SAFETY_CHECK:{c.groupSafetyCheck=!!a.value;break}default:o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["unhandled group notif action in handleGroupAction"]))).tags("groups");break}return(u||(u=n("Promise"))).resolve()}l.updateModelForGroupAction=c}),98);
__d("WAWebGroupBridgeApi",["WAWebChatCollection","WAWebCommunitySubgroupSuggestionsUtils","WAWebContactCollection","WAWebCreateOrUpdateGroupMetadataAction","WAWebGroupMetadataCollection","WAWebMsgCollection","WAWebRestoreGroupParticipantsAction","WAWebUpdateModelForGroupAction"],(function(t,n,r,o,a,i,l){var e={updateModelForGroupAction:function(t){var e=t.groupMeta,n=t.groupAction;o("WAWebUpdateModelForGroupAction").updateModelForGroupAction(e,n)},restoreGroupParticipantsForChats:function(t){var e=t.chatIds;o("WAWebRestoreGroupParticipantsAction").restoreGroupParticipantsForChats(e)},expireGroupInviteV4:function(t){var e,n=t.inviteMsgId;(e=o("WAWebMsgCollection").MsgCollection.get(n))==null||e.set({inviteCodeExp:"0"})},updateGroupSubject:function(t){var e=t.id,n=t.subject;o("WAWebContactCollection").ContactCollection.add({id:e,name:n},{merge:!0})},updateGroupAddressingMode:function(t){var e,n=t.id,o=t.isLidAddressingMode,a=t.groupInfoUpdate;(e=r("WAWebGroupMetadataCollection").get(n))==null||e.set(babelHelpers.extends({isLidAddressingMode:o},a))},notAlreadyInGroup:function(t){var e,n=t.groupId,r=t.participants,a=(e=o("WAWebChatCollection").ChatCollection.get(n))==null?void 0:e.groupMetadata;return a?r.filter(function(e){var t=e.id;return!a.participants.get(t)}):r},createOrUpdateGroupMetadataFromQuery:function(t){var e=t.groupInfo;o("WAWebCreateOrUpdateGroupMetadataAction").createOrUpdateGroupMetadataModelFromQuery(e)},createOrUpdateSubgroupSuggestions:function(t){var e=t.parentGroupId,n=t.subgroupSuggestions,a=r("WAWebGroupMetadataCollection").gadd(e);a.subgroupSuggestions.set(n.map(function(e){return babelHelpers.extends({},e,{id:o("WAWebCommunitySubgroupSuggestionsUtils").getSubgroupSuggestionId(e.id,e.owner),groupId:e.id})}))}};l.GroupBridgeApi=e}),98);
__d("WAWebSendKeyDistributionMsgAction",["Promise","WAWebGroupMetadataCollection","WAWebMsgKey","WAWebSendMsgJob","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(!t.isGroup())return(e||(e=n("Promise"))).reject(r("err")("[messaging] sendKeyDistributionMsg: only group chats are supported`"));var a=o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),i=new(r("WAWebMsgKey"))({from:a,to:t,id:yield r("WAWebMsgKey").newId(),participant:o("WAWebWidFactory").asUserWidOrThrow(a),selfDir:"out"});return yield r("WAWebGroupMetadataCollection").find(t),o("WAWebSendMsgJob").encryptAndSendKeyDistributionMsg(i)}),u.apply(this,arguments)}l.sendKeyDistributionMsg=s}),98);
__d("WAWebGroupCreationKeyDistribution",["WALogger","WAWebDBGroupsGroupMetadata","WAWebGroupsParticipantsApi","WAWebMessagingGatingUtils","WAWebSendKeyDistributionMsgAction","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n,r,a,i,l=(n=(r=yield o("WAWebGroupsParticipantsApi").getParticipants(t))==null?void 0:r.participants.length)!=null?n:0,c=(a=(i=yield o("WAWebDBGroupsGroupMetadata").getGroupMetadata(t))==null?void 0:i.announce)!=null?a:!1;!c&&l&&o("WAWebMessagingGatingUtils").sendKeyDistributionMsgToNewGroups()&&l>=o("WAWebMessagingGatingUtils").sendKeyDistributionMsgMinGroupSize()&&l<=o("WAWebMessagingGatingUtils").sendKeyDistributionMsgMaxGroupSize()&&(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleGroupCreation: sending key distribution message"]))).tags("groups"),o("WAWebSendKeyDistributionMsgAction").sendKeyDistributionMsg(t).then(function(){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["handleGroupCreation: sending key distribution message: done"]))).tags("groups")}).catch(function(e){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["handleGroupCreation: sending key distribution message failed: ",""])),e).tags("groups")}))}),d.apply(this,arguments)}l.maybeSendKeyDistributionMsgToNewGroup=c}),98);
__d("WAWebGroupHistoryBridgeApi",["WAWebUpdateGroupHistoryBundleStateAction"],(function(t,n,r,o,a,i,l){var e={updateGroupHistoryBundleState:function(t){var e=t.messageKey,n=t.processState;o("WAWebUpdateGroupHistoryBundleStateAction").updateGroupHistoryBundleState(e,n)}};l.GroupHistoryBridgeApi=e}),98);
__d("WAWebGroupMetadataBridgeApi",["Promise","WAWebChatCollection","WAWebGroupMetadataCollection","WAWebWamNumberToSizeBucket","nullthrows"],(function(t,n,r,o,a,i,l){var e,s={getGroupMetadata:function(t){var e=t.groupWid;return r("WAWebGroupMetadataCollection").get(e)},updateCachedDeviceCount:function(t){var e=t.groupWid,n=t.deviceCount,o=r("WAWebGroupMetadataCollection").get(e);o!=null&&(o.cachedDeviceCount=n,o.cachedDeviceSizeBucket=r("WAWebWamNumberToSizeBucket")(n))},setGroupMetadata:function(t){var e;(e=r("WAWebGroupMetadataCollection").get(t.id))==null||e.set(t)},removeMembershipApprovalRequests:function(t){var e,n=t.groupId,o=t.requestIds;(e=r("WAWebGroupMetadataCollection").get(n))==null||e.membershipApprovalRequests.remove(o)},addMembershipApprovalRequests:function(t){var e,n=t.groupId,o=t.requests;(e=r("WAWebGroupMetadataCollection").get(n))==null||e.membershipApprovalRequests.add(o,{merge:!0})},syncEphemeralTriggerCollectionForGroup:function(a){var t=a.chatId,i=a.trigger,l=o("WAWebChatCollection").ChatCollection.get(t);if(!l)return(e||(e=n("Promise"))).resolve();var s=r("nullthrows")(l.groupMetadata);return s!=null&&(s.disappearingModeTrigger=i),(e||(e=n("Promise"))).resolve()}};l.GroupMetadataBridgeApi=s}),98);
__d("WAWebMdBootstrapHistoryDataReceivedWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMdBootstrapHistoryPayloadType","WAWebWamEnumMdBootstrapPayloadType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MdBootstrapHistoryDataReceived:[2998,{historySyncChunkOrder:[6,e.TYPES.INTEGER],historySyncRetryRequestId:[7,e.TYPES.STRING],historySyncStageProgress:[5,e.TYPES.INTEGER],mdBootstrapHistoryPayloadType:[3,o("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE],mdBootstrapPayloadType:[2,o("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE],mdSessionId:[1,e.TYPES.STRING],mdTimestamp:[4,e.TYPES.INTEGER]},[1,1,1],"regular"]},{MdBootstrapHistoryDataReceived:[]});l.MdBootstrapHistoryDataReceivedWamEvent=s}),98);
__d("WAWebHandleHistorySyncNotification",["Promise","WABinary","WAGzip","WALogger","WATimeUtils","WAWebABProps","WAWebApiHistorySyncNotification","WAWebDownloadManager","WAWebEnvironment","WAWebGetMetricHistorySyncPayloadType","WAWebHandleHistorySyncChunk","WAWebHistorySyncNotificationUtils","WAWebHistorySyncProgress","WAWebHistorySyncWorkerCompatibleNotificationUtils","WAWebHttpErrors","WAWebJestE2ELogUtils","WAWebMdBootstrapHistoryDataReceivedWamEvent","WAWebMsgKey","WAWebNonMessageDataRequestHistorySyncOnDemandUtils","WAWebProtobufsE2E.pb","WAWebProtobufsHistorySync.pb","WAWebSendHistSyncServerErrorReceiptJob","WAWebSendReceiptJobCommon","WAWebSyncBootstrap","WAWebSyncGatingUtils","WAWebSyncdMdSyncFieldstatMeta","WAWebUserPrefsHistorySync","WAWebUserPrefsMeUser","WAWebUserPrefsTypes","WAWebWamEnumMdBootstrapPayloadType","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T=11;function D(e,t,n){return x.apply(this,arguments)}function x(){return x=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i){var l;if(o("WAWebJestE2ELogUtils").maybeLogToJestE2eJSConsole("received history sync notif"),!!t){try{o("WAWebUserPrefsMeUser").getMePnUserOrThrow()}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Assert get me is empty during history sync"]))).sendLogs("Assert get me is empty during history sync");return}if(!o("WAWebUserPrefsMeUser").isMePrimaryNonLid(a)){if(a==null||!(a instanceof r("WAWebWid"))){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[history sync] History sync empty wid error"]))).sendLogs("History sync empty wid error");return}o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[history sync] History sync payload wid error"]))).sendLogs("History sync payload wid error");return}var D=t.downloadOptions;if(D){if(!r("gkx")("26258")&&o("WAWebABProps").getABPropConfigValue("web_abprop_drop_full_history_sync")&&t.historySyncNotification.syncType===o("WAWebProtobufsE2E.pb").Message$HistorySyncType.FULL){o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Dropping full history sync for ",""])),o("WAWebUserPrefsMeUser").getMePnUserOrThrow().user).tags("history-sync");return}var x=!!t.historySyncNotification.originalMessageId,$=x?t.historySyncNotification.originalMessageId:i,P=new(r("WAWebMsgKey"))({remote:a,fromMe:!0,id:$}).toString(),N=(l=t.historySyncNotification.progress)!=null?l:0,M={msgKey:P,processed:0,downloadOptions:D,isReupload:1,historySyncStepStartedTs:o("WATimeUtils").unixTimeMs(),reuploadPending:!1,historySyncPayloadSize:t.historySyncNotification.fileLength,oldestMsgInChunkTimestampSec:t.historySyncNotification.oldestMsgInChunkTimestampSec,initialHistBootstrapInlinePayload:t.historySyncNotification.initialHistBootstrapInlinePayload,peerDataRequestSessionId:t.historySyncNotification.peerDataRequestSessionId,progress:N,encHandle:t.historySyncNotification.encHandle};(!x||t.historySyncNotification.syncType===o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_BOOTSTRAP)&&(M.syncType=t.historySyncNotification.syncType,M.chunkOrder=t.historySyncNotification.chunkOrder||0,M.isReupload=0);var w=M;if(w.syncType===o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT&&N===100){var A=w.chunkOrder;o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[history sync] setting total chunk count when receiving: ",""])),A),yield o("WAWebUserPrefsHistorySync").setChunkCountForEndOfRecentHistorySync(A!=null?A:1),o("WAWebHistorySyncProgress").updateHistorySyncProgressModel()}var F=new(o("WAWebMdBootstrapHistoryDataReceivedWamEvent")).MdBootstrapHistoryDataReceivedWamEvent({mdBootstrapPayloadType:w.syncType===o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_BOOTSTRAP?o("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE.CRITICAL:o("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE.NON_CRITICAL,mdBootstrapHistoryPayloadType:o("WAWebGetMetricHistorySyncPayloadType").getMetricHistorySyncPayloadType(w.syncType),mdTimestamp:o("WATimeUtils").unixTimeMs(),mdSessionId:yield o("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getMdSessionId(),historySyncStageProgress:N});switch(w.chunkOrder!=null&&(F.historySyncChunkOrder=w.chunkOrder),F.commit(),w.syncType){case o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_BOOTSTRAP:case o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.INITIAL_STATUS_V3:case o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.NON_BLOCKING_DATA:{o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[history sync] initial sync received ",""])),o("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(w)),o("WAWebHandleHistorySyncChunk").handleHistorySyncChunk(w);return}case o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.PUSH_NAME:{o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[history sync] initial pushname received ",""])),o("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(w)),yield o("WAWebApiHistorySyncNotification").enqueueNotification(babelHelpers.extends({},w,{downloadOptions:babelHelpers.extends({},w.downloadOptions)}),!0),o("WAWebHandleHistorySyncChunk").handleHistorySyncChunk(w);return}case o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.ON_DEMAND:{if(o("WAWebSyncGatingUtils").isHistorySyncOnDemandEnabled()){var O,B,W;if(o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[history sync] on demand history sync received ",""])),o("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(w)),w.peerDataRequestSessionId==null&&o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[history sync][rdu] on demand history sync chunk does not have requested session id."]))),!o("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").inFlightHistorySyncOnDemandRequests.has((O=w.peerDataRequestSessionId)!=null?O:"")){o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[history sync][rdu] drop on demand history sync notification as it's timeout with key ","."])),r("gkx")("26258")?"":w.peerDataRequestSessionId);return}o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[history sync][rdu] clean history sync on demand rdu request as it is received without timeout with key ","."])),r("gkx")("26258")?"":w.peerDataRequestSessionId),w.peerDataRequestChatId=o("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").inFlightHistorySyncOnDemandRequests.get((B=w.peerDataRequestSessionId)!=null?B:""),o("WAWebNonMessageDataRequestHistorySyncOnDemandUtils").inFlightHistorySyncOnDemandRequests.delete((W=w.peerDataRequestSessionId)!=null?W:""),yield o("WAWebApiHistorySyncNotification").enqueueNotification(w)}break}default:{if(o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[history sync] recent or full chunk received, adding chunk info to db: ",""])),o("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(w)),w.syncType===o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT){if(M.chunkOrder!=null&&t.progress!=null&&t.progress!==0){var q=Math.ceil(M.chunkOrder/(t.progress/100));o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[history sync] setting estimated total chunk count: ",""])),q),o("WAWebUserPrefsHistorySync").setEstimatedChunkCountForEndOfRecentHistorySync(q)}if(M.oldestMsgInChunkTimestampSec!=null){var U=o("WAWebUserPrefsHistorySync").getHistorySyncEarliestDate();U&&M.oldestMsgInChunkTimestampSec<U&&(o("WALogger").DEV(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[history sync] setHistorySyncEarliestDate: ",""])),M.oldestMsgInChunkTimestampSec),o("WAWebUserPrefsHistorySync").setHistorySyncEarliestDate(M.oldestMsgInChunkTimestampSec))}o("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(w.syncType,o("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.RECEIVED,w.chunkOrder);var V=w.chunkOrder!=null&&w.chunkOrder<=T;if(o("WAWebSyncGatingUtils").isRecentSyncDownloadOptimizationEnabled()&&V){var H=yield o("WAWebHistorySyncNotificationUtils").getHistorySyncMetrics(w,!0),G=H.historySyncStartDownloadingMetric,z=H.historySyncDownloadedMetric;try{o("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(w.syncType,o("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DOWNLOADING,w.chunkOrder),o("WAWebHistorySyncNotificationUtils").commitHistoryStartDownloadingMetric(G,w.historySyncStepStartedTs,o("WATimeUtils").unixTimeMs()),o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[history sync] start downloading chunk when receiving notification, ",""])),o("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(w)).tags("history-sync");var j=w.chunkOrder!==1,K=yield o("WAWebDownloadManager").downloadManager.downloadAndMaybeDecrypt(babelHelpers.extends({signal:new AbortController().signal},w.downloadOptions,{isPreload:j}));w.downloadedHistorySyncPayload=K,o("WAWebUserPrefsHistorySync").setRecentSyncSingleChunkStatus(w.syncType,o("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DOWNLOADED,w.chunkOrder),w.downloadOptions.mediaKey="",o("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(z,w.historySyncStepStartedTs,!0,o("WATimeUtils").unixTimeMs())}catch(e){if(o("WALogger").WARN(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[history sync][recent sync] history sync download failed"]))).devConsole(e),!(e instanceof o("WAWebHttpErrors").HttpNetworkError)){var Q=r("WAWebMsgKey").fromString(w.msgKey);o("WAWebHistorySyncNotificationUtils").commitHistoryDownloadedMetric(z,w.historySyncStepStartedTs,!1,o("WATimeUtils").unixTimeMs()),r("WAWebSendHistSyncServerErrorReceiptJob")(Q.remote,Q.id,w.downloadOptions.mediaKey);return}}}}if(w.syncType===o("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.FULL&&r("WAWebEnvironment").isWindows===!0&&o("WAWebABProps").getABPropConfigValue("wa_hybrid_3_month_history_sync_window")){o("WALogger").LOG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Skip full history sync chunk for ",""])),o("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(w));try{var X=yield o("WAWebDownloadManager").downloadManager.downloadAndMaybeDecrypt(babelHelpers.extends({signal:new AbortController().signal},w.downloadOptions)),Y=new(o("WABinary")).Binary(X),J=yield o("WAGzip").inflate(Y.readByteArrayView()),Z=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsHistorySync.pb").HistorySyncSpec,J),ee=o("WAWebUserPrefsHistorySync").getHistoryInitialSyncBoundary(),te=Z.conversations.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{var t=o("WAWebWidFactory").createWid(e.id),n=(ee==null?void 0:ee[e.id])!=null;if(n)return o("WAWebHistorySyncWorkerCompatibleNotificationUtils").updateEndOfHistorySync(t,o("WAWebProtobufsHistorySync.pb").Conversation$EndOfHistoryTransferType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY)}catch(t){o("WALogger").WARN(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[history sync] failed to process endOfHistoryTransferType for chat ",": ",""])),e.id,t)}});return function(t){return e.apply(this,arguments)}})());yield(I||(I=n("Promise"))).all(te)}catch(e){o("WALogger").WARN(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[history sync] failed to process FULL chunk for endOfHistoryTransferType: ",""])),e)}var ne=r("WAWebMsgKey").fromString(w.msgKey),re=new Map;re.set(ne.remote,[ne.id]),o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:ne.remote,type:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.HISTORY_SYNC_COMPLETION,groupedReceipt:re}),o("WAWebHistorySyncProgress").updateHistorySyncProgressModel();return}yield o("WAWebApiHistorySyncNotification").enqueueNotification(w)}}o("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] trigger notification processing after receiving ",""])),o("WAWebHistorySyncNotificationUtils").getHistorySyncLogDetailsString(w)),r("WAWebSyncBootstrap").continueProgressiveHistorySyncProcessingV2(o("WAWebHistorySyncNotificationUtils").HistorySyncScheduleSource.NewRecentSyncNotification)}}}),x.apply(this,arguments)}l.handleHistorySyncNotification=D}),98);
__d("WAWebSyncdHandleKeyRequest",["Promise","WAWebGetSyncKey","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r=[],a=[];return yield(e||(e=n("Promise"))).all(t.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebGetSyncKey").getSyncKeyInTransaction_DO_NOT_USE(e);t?r.push(t):a.push(e)});return function(t){return e.apply(this,arguments)}})())),{keys:r,orphanKeys:a}}),u.apply(this,arguments)}l.getKeysForKeyRequest=s}),98);
__d("WAWebKeyManagementHandleKeyRequestApi",["WALogger","WASyncdKeyTypes","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebSyncdCryptoUtils","WAWebSyncdHandleKeyRequest","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){if(!o("WAWebUserPrefsMeUser").isMeAccountNonLid(n)){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["syncd: key request wid error"]))).sendLogs("syncd: key request wid error");return}var r=t.keyIds;if(r){var a=r.map(function(e){return e.keyId}).filter(Boolean).map(o("WASyncdKeyTypes").toSyncKeyId);if(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["syncd: handleAppStateSyncKeyRequest from device ","\n    	 for keyIds: [","]"],["syncd: handleAppStateSyncKeyRequest from device ","\n    \\t for keyIds: [","]"])),n.getDeviceId(),a.map(o("WAWebSyncdCryptoUtils").syncKeyIdToHex)),a){var i=yield o("WAWebSyncdHandleKeyRequest").getKeysForKeyRequest(a),l=i.keys,c=i.orphanKeys;return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["syncd: handleAppStateSyncKeyRequest from device ",": about to send key share\n      	 keys with keydata: [","]\n      	 keys without keydata: [","]"],["syncd: handleAppStateSyncKeyRequest from device ",": about to send key share\n      \\t keys with keydata: [","]\n      \\t keys without keydata: [","]"])),n.getDeviceId(),l.map(function(e){return o("WAWebSyncdCryptoUtils").syncKeyIdToHex(e.keyId)}),c.map(function(e){return o("WAWebSyncdCryptoUtils").syncKeyIdToHex(e)})),o("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(o("WAWebPersistedJobDefinitions").jobSerializers.sendRequestedKeyShare(l,c,n))}}}),d.apply(this,arguments)}l.handleAppStateSyncKeyRequest=c}),98);
__d("WAWebSyncdHandleKeyShare",["Promise","WACryptoUtils","WALogger","WASyncdConst","WASyncdKeyManagementUtils","WAWebGetSyncKey","WAWebSyncd","WAWebSyncdCryptoUtils","WAWebSyncdDbCallbacksApi","WAWebSyncdStoreMissingKeys","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3},y=new Map;function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){return r.some(function(e){return e.fullKey!=null})||o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["syncd: key share from device "," has no keys with keydata."])),t),yield(g||(g=n("Promise"))).all(r.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e.keyId,a=e.fullKey;if(a!=null){var i=o("WAWebSyncdCryptoUtils").syncKeyIdToHex(n),l=yield o("WAWebGetSyncKey").getSyncKeyInTransaction_DO_NOT_USE(n);if(!l)yield o("WAWebGetSyncKey").setSyncKeyInTransaction(a),y.has(i)&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["syncd: already have in memory key "," from device ","."])),i,t),y.set(i,{keyId:n,fullKey:a,sharingDeviceId:t}),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["syncd: stored key share key id "," from device ",". payload key id: ",".\n        timestamp raw: ",". timestamp: ",". device from key id: ",". epoch ",""])),o("WAWebSyncdCryptoUtils").syncKeyIdToHex(n),t,o("WAWebSyncdCryptoUtils").syncKeyIdToHex(a.keyId),a.timestamp,new Date(a.timestamp).toLocaleString(void 0,h),o("WASyncdKeyManagementUtils").getKeyDeviceId(a.keyId),o("WASyncdKeyManagementUtils").getKeyEpoch(a.keyId));else{var g=l.timestamp!==a.timestamp,C=l.keyEpoch!==a.keyEpoch,b=!o("WACryptoUtils").arrayBuffersEqual(l.keyData,a.keyData),v=l.keyData.byteLength!==a.keyData.byteLength,S=l.fingerprint.currentIndex!==a.fingerprint.currentIndex,R=l.fingerprint.rawId!==a.fingerprint.rawId,L=l.fingerprint.deviceIndexes.every(function(e,t){return e===a.fingerprint.deviceIndexes[t]});if(L&&l.fingerprint.deviceIndexes.every(function(e,t){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["syncd: comparing fingerprint element "," index "," to ","\n            result: ",""])),e,t,a.fingerprint.deviceIndexes[t],e===a.fingerprint.deviceIndexes[t])}),b){yield o("WAWebSyncdDbCallbacksApi").writeSyncdLog(o("WASyncdConst").CollectionName.CriticalBlock,"incoming shared key has mismatch with an existing key:\n            key id: "+o("WAWebSyncdCryptoUtils").syncKeyIdToHex(a.keyId)+"\n            sending client id: "+t.toString()+"\n            timestamp: "+new Date(a.timestamp).toLocaleString(void 0,h)),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["syncd: key share mismatch extra details:\n              existing timestamp: ",", new key timestamp: ","\n              existing fingerprint device indexes: ",", new key fingerprint device indexes: ","\n              existing key length: ",", new key length: ",",\n              sending client id: ",",\n              existing key device id: ","\n              new key device id: ","\n              existing key device epoch: ","\n              new key device epoch: ","\n              existing key id:  ","\n              new key id:  ","\n              index key id: ","\n          "])),new Date(l.timestamp).toLocaleString(void 0,h),new Date(a.timestamp).toLocaleString(void 0,h),l.fingerprint.deviceIndexes,a.fingerprint.deviceIndexes,l.keyData.byteLength,a.keyData.byteLength,t,o("WASyncdKeyManagementUtils").getKeyDeviceId(l.keyId),o("WASyncdKeyManagementUtils").getKeyDeviceId(a.keyId),o("WASyncdKeyManagementUtils").getKeyEpoch(l.keyId),o("WASyncdKeyManagementUtils").getKeyEpoch(a.keyId),o("WAWebSyncdCryptoUtils").syncKeyIdToHex(l.keyId),o("WAWebSyncdCryptoUtils").syncKeyIdToHex(a.keyId),o("WAWebSyncdCryptoUtils").syncKeyIdToHex(n)),o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["syncd: all shared keys in payload: ",""])),r.map(function(e){return o("WAWebSyncdCryptoUtils").syncKeyIdToHex(e.keyId)}));var E=y.get(i);if(E){var k=E.fullKey;k?o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["syncd: details from previous in memory key for ",":\n              memory key id: ","\n              memory key device id: ","\n              memory key device epoch: ","\n              memory key timestamp: ","\n              memory key fingerprint device indexes: ","\n              memory key binary equal incoming binary? ","\n              memory key binary equal existing key binary? ","\n              memory key sharing device id: ","\n            "])),i,o("WAWebSyncdCryptoUtils").syncKeyIdToHex(E.keyId),o("WASyncdKeyManagementUtils").getKeyDeviceId(E.keyId),o("WASyncdKeyManagementUtils").getKeyEpoch(E.keyId),new Date(k.timestamp).toLocaleString(void 0,h),k.fingerprint.deviceIndexes,o("WACryptoUtils").arrayBuffersEqual(k.keyData,a.keyData),o("WACryptoUtils").arrayBuffersEqual(k.keyData,l.keyData),E.sharingDeviceId):o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["syncd: no previous in memory key for ",""])),i)}o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["syncd: got key share for existing key with different key data\n            (timestampMismatch: ",", epochMismatch: ",", keyDataMismatch: ",",\n              currentIndexMismatch: ",", rowIdMismatch: ",", fingerprintMismatch: ",",\n              keyDataLengthMismatch: ",")"])),g,C,b,S,R,L,v).sendLogs("syncd: got key share for existing key with different key data")}}}});return function(t){return e.apply(this,arguments)}})())),yield o("WAWebSyncdStoreMissingKeys").updateMissingKeys(r.map(function(e){var t=e.keyId,n=e.fullKey;return{keyId:t,keyData:n==null?void 0:n.keyData}}),t),o("WAWebSyncd").syncBlockedCollections()}),b.apply(this,arguments)}l.handleKeyShare=C}),98);
__d("WAWebKeyManagementHandleKeyShareApi",["Promise","WAJids","WALogger","WALongInt","WASyncdKeyManagementUtils","WASyncdKeyTypes","WAWebSyncdCriticalBootstrapProcessingApi","WAWebSyncdCryptoUtils","WAWebSyncdFatal","WAWebSyncdHandleKeyShare","WAWebSyncdUploadFatalErrorMetric","WAWebUserPrefsMeUser","WAWebWamEnumBootstrapAppStateDataStageCode","WAWebWamEnumMdSyncdFatalErrorCode","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g=0,h=6,y=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){o("WAWebSyncdCriticalBootstrapProcessingApi").logCriticalBootstrapStageIfNecessary(o("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.MISSING_KEYS_RECEIVED);var a=r.getDeviceId();o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["syncd: handling key share from device "," with "," keys"])),a,t.keys.length);var i=[],l=t.keys;return l?(yield(f||(f=n("Promise"))).all(l.map(function(e){var t,n=(t=e.keyId)==null?void 0:t.keyId,r=e.keyData,l=r==null?void 0:r.keyData,_=l==null?null:o("WASyncdKeyTypes").toSyncKeyData(l);if(!n){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["syncd: received key with missing keyID from device ",""])),a);return}var f=o("WASyncdKeyTypes").toSyncKeyId(n),y=o("WAWebSyncdCryptoUtils").syncKeyIdToHex(f);if(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["syncd: received key share key id "," from device "," "," keyData"])),y,a,l!=null?"with":"without"),l&&o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["syncd: incoming key info\n        	keyId: ",""],["syncd: incoming key info\n        \\tkeyId: ",""])),y),n.byteLength!==h)return o("WAWebSyncdUploadFatalErrorMetric").uploadFatalErrorMetric(o("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.INVALID_KEY_SHARE_KEY_ID,null),o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error: key share key id has invalid bytelength of ",""])),n.byteLength).sendLogs("syncd: fatal error: key share key id has invalid bytelength of "+n.byteLength),o("WAWebSyncdFatal").handleFatalError();if(r){var C,b,v,S=r.timestamp,R=(C=r.fingerprint)==null?void 0:C.currentIndex,L=(b=r.fingerprint)==null?void 0:b.rawId,E=(v=r.fingerprint)==null?void 0:v.deviceIndexes;if(!_||S==null||R==null||L==null||!E){if(a!==g){o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error: invalid key share key data (from companion)"]))).sendLogs("syncd: fatal error: invalid key share key data (from companion)");return}return o("WAWebSyncdUploadFatalErrorMetric").uploadFatalErrorMetric(o("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.INVALID_KEY_SHARE_KEY_DATA,null),o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal error: invalid key share key data"]))).sendLogs("syncd: fatal error: invalid key share key data"),o("WAWebSyncdFatal").handleFatalError()}var k={keyId:f,keyEpoch:o("WASyncdKeyManagementUtils").getKeyEpoch(f),keyData:_,timestamp:o("WALongInt").numberOrThrowIfTooLarge(S),fingerprint:{rawId:L,currentIndex:R,deviceIndexes:E}};i.push({keyId:f,fullKey:k})}else i.push({keyId:f,fullKey:null})})),o("WAWebSyncdHandleKeyShare").handleKeyShare(o("WAJids").interpretAsDeviceId(a),i)):(f||(f=n("Promise"))).resolve()});return function(n,r){return t.apply(this,arguments)}})();function C(e,t){return o("WAWebUserPrefsMeUser").isMeAccountNonLid(t)?y(e,t):(o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["syncd: key share wid error"]))).sendLogs("syncd: key share wid error"),(f||(f=n("Promise"))).resolve())}function b(e){r("gkx")("26258")||(y=e(y))}l.handleAppStateSyncKeyShare=C,l.setAppStateSyncKeyShareHandler=b}),98);
__d("WAWebNonMessageDataRequestHandlerPlaceholderResend",["Promise","WALogger","WATimeUtils","WAWebABProps","WAWebCurrentUser","WAWebE2EProtoUtils","WAWebHandleMsgProcess","WAWebHandleMsgTypes.flow","WAWebLidMigrationUtils","WAWebMsgKey","WAWebMsgProcessingApiUtils","WAWebNonMessageDataRequestLoggingUtils","WAWebParseWebMessageInfoApi","WAWebProtobufsE2E.pb","WAWebProtobufsWeb.pb","WAWebSchemaMessage","WAWebSyncGatingUtils","WAWebUserPrefsMeUser","WAWebWamEnumPeerDataResponseApplyResultType","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y;function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(o("WAWebSyncGatingUtils").isPlaceholderMessageResendEnabled()){var r=t.length;if(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: Handle placeholder resend response results with length ",""])),r),r===0){o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: got empty response in result"]))),o("WAWebNonMessageDataRequestLoggingUtils").logPlaceholderMessageResendResponse(o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND,e,o("WAWebWamEnumPeerDataResponseApplyResultType").PEER_DATA_RESPONSE_APPLY_RESULT_TYPE.INVALID_RESPONSE,0,0,0);return}var a=0,i=0;t.forEach((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{var t=e.placeholderMessageResendResponse;if(t==null){o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: got null as placeholder message resend response in result"]))),i++;return}var n=t.webMessageInfoBytes;if(n==null){o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: got null as web message info in result"]))),i++;return}var r=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsWeb.pb").WebMessageInfoSpec,n),l={verifiedNameSerial:null,verifiedLevel:null,verifiedNameCert:null,privacyMode:null,nativeFlowName:null,campaignId:null},s=o("WAWebParseWebMessageInfoApi").parseWebMessageInfo(r),u=s?yield v([s]):[];o("WAWebCurrentUser").isEmployee()&&o("WAWebABProps").getABPropConfigValue("wa_web_debug_color_code_retry_messages")&&(u=u.map(function(e){return babelHelpers.extends({},e,{backgroundColor:8388736})}));var c=R(r);if(o("WAWebLidMigrationUtils").shouldHaveAccountLid(c.chat)){var d=o("WAWebLidMigrationUtils").toUserLid(c.chat);d&&(c.accountLid=d)}var m=o("WAWebMsgProcessingApiUtils").isRevokeInfo(c)?o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.PEER_RETRY:o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE;o("WAWebCurrentUser").isEmployee()&&o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: got web message info. count: ",""])),u.entries().toArray().length),o("WAWebHandleMsgProcess").processMsgs({renderableMsgs:u,reparsing:!1,bizInfo:l,msgMeta:null,paymentInfo:r.paymentInfo,info:c,messageOverwriteOption:m})}catch(e){o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[rdu] error: ",""])),e).sendLogs("placeholderResendResponse: error while handling response from placeholder resend request"),i++;return}a++});return function(t){return e.apply(this,arguments)}})()),o("WAWebNonMessageDataRequestLoggingUtils").logPlaceholderMessageResendResponse(o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND,e,i===0?o("WAWebWamEnumPeerDataResponseApplyResultType").PEER_DATA_RESPONSE_APPLY_RESULT_TYPE.SUCCESS:o("WAWebWamEnumPeerDataResponseApplyResultType").PEER_DATA_RESPONSE_APPLY_RESULT_TYPE.OTHER_ERROR,r,a,i)}}),b.apply(this,arguments)}function v(e){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=(yield o("WAWebSchemaMessage").getMessageTable().bulkGet([e.id.toString(),(t=o("WAWebLidMigrationUtils").getAlternateMsgKey(e.id))==null?void 0:t.toString()])).find(Boolean);return n?babelHelpers.extends({},e,{id:r("WAWebMsgKey").from(n.id),from:o("WAWebWidFactory").createWid(n.from)}):e});return function(t){return e.apply(this,arguments)}})());return(y||(y=n("Promise"))).all(t)}),S.apply(this,arguments)}function R(t){var n=o("WAWebE2EProtoUtils").protobufToMsgKey(t.key),a={externalId:n.id,ts:t.messageTimestamp!=null?o("WATimeUtils").castLongIntToUnixTime(t.messageTimestamp):o("WATimeUtils").unixTime(),edit:-1,isHsm:!1,count:null,pushname:t.pushName,displayName:null,senderPn:null,senderLid:null,recipientLid:null,recipientPn:null,category:null,offline:null},i;n.remote.isGroup()?i=n.remote:n.fromMe?i=n.remote.isLid()?o("WAWebUserPrefsMeUser").getMeLidUserOrThrow():o("WAWebUserPrefsMeUser").getMePnUserOrThrow():i=n.remote;var l;t.participant!=null?l=o("WAWebWidFactory").createWid(t.participant):n.participant!=null&&(l=n.participant);var m=t.userReceipt.map(function(e){return o("WAWebWidFactory").createUserWidOrThrow(e.userJid)});if(i.isUser()){if(m!=null&&m.length>0){if(!o("WAWebUserPrefsMeUser").isMeAccount(i))throw o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: failed to get message info as the message is not from me"]))),r("err")("recipient on non peer chat message");return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},a,{chat:m[0],author:i})}return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},a,{chat:o("WAWebWidFactory").asUserWidOrThrow(i),author:i})}else if(i.isGroup()){if(l==null)throw o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: failed to get message info as group message with no participant"]))),r("err")("group message with no participant");return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.GROUP},a,{chat:i,author:l,isDirect:!1})}else if(i.isBroadcast()&&!i.isStatus()){if(l==null)throw o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: failed to get message info as broadcast message with no participant"]))),r("err")("broadcast message with no participant");return o("WAWebUserPrefsMeUser").isMeAccount(l)?babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST},a,{chat:i,author:l,isDirect:!1,bclParticipants:[],bclHashValidated:!1}):babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST},a,{chat:i,author:l,isDirect:!1,ephSetting:null})}else if(i.isBroadcast()&&i.isStatus()){if(l==null)throw o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: failed to get message info as status message with no participant"]))),r("err")("status message with no participant");return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS},a,{chat:i,author:l,isDirect:!1})}throw o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Placeholder resend: failed to recognize message type"]))),r("err")("Unrecognized message type")}l.handlePlaceholderResendOperationRequestResponse=C,l.applyMatOnBackfillMessages=v}),98);
__d("WAWebSendNonMessageDataRequestResponse",["Promise","WALogger","WAWebApiPeerMessageStore","WAWebMsgKey","WAWebMsgType","WAWebProtobufsE2E.pb","WAWebSendAppStateSyncMsgJob","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e,t,n){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a){var i=yield d(t,r,a);return i==null?(o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["peer message: the constructed peer data operation request response message is null"]))),(s||(s=n("Promise"))).resolve()):(yield o("WAWebApiPeerMessageStore").storePeerMessages([i]),o("WAWebSendAppStateSyncMsgJob").encryptAndSendKeyMsg({msg:i}))}),c.apply(this,arguments)}function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=null;switch(t){case o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER:a=p(e,n);break;default:break}if(a==null)return null;var i=new(r("WAWebMsgKey"))({fromMe:!0,remote:o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),id:yield r("WAWebMsgKey").newId()});return{id:i,to:o("WAWebWidFactory").createDeviceWidFromUserAndDevice(o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow().user,o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow().server,0),type:"protocol",subtype:"peer_data_operation_request_response_message",kind:o("WAWebMsgType").MsgKind.PeerMessage,peerDataOperationRequestResponseMessage:a}}),m.apply(this,arguments)}function p(e,t){return t==null?null:{stanzaId:e,peerDataOperationRequestType:o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,peerDataOperationResult:t}}l.sendPeerDataOperationRequestResponseMessage=u}),98);
__d("WAWebNonMessageDataRequestHandlerUploadSticker",["Promise","WABase64","WALogger","WANullthrows","WATimeUtils","WAWebCryptoRandomMediaKey","WAWebFavoriteStickerCollection","WAWebMediaEntry","WAWebMediaMmsV4Upload","WAWebNonMessageDataRequestLoggingUtils","WAWebNonMessageDataRequestMediaHandlingUtils","WAWebProtobufsE2E.pb","WAWebProtobufsMmsRetry.pb","WAWebRecentStickerCollectionMd","WAWebSendNonMessageDataRequestResponse","WAWebStickerModel","WAWebWamEnumUploadOriginType","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f;function g(t,n){if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Sticker RDU: Handle reupload sticker response results with length ",""])),n.length),n.length===0){o("WAWebNonMessageDataRequestLoggingUtils").logNonMessagePeerDataResponse(o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,t,0,0,0,0,0);return}var a=n.length,i=0,l=0,_=0,f=0,g=new Map;n.forEach(function(e){e.mediaUploadResult===o("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.SUCCESS?i++:e.mediaUploadResult===o("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.NOT_FOUND?f++:_++;var t=e.stickerMessage;if(t==null){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Sticker RDU: get null as stickerMessage in result"])));return}var n=t.fileSha256,a=t.fileEncSha256,h=t.mediaKey,y=t.directPath,C=t.mediaKeyTimestamp;if(n==null){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Sticker RDU: get null as fileSha256 in result"])));return}var b=o("WABase64").encodeB64(n);if(e.mediaUploadResult!==o("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.SUCCESS){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Sticker RDU: the mediaUploadResult "," is not success"])),e.mediaUploadResult),e.mediaUploadResult!==o("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.NOT_FOUND&&g.set(b,r("WANullthrows")(e.mediaUploadResult));return}if(a==null||h==null){o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Sticker RDU: get null as media fields in result"])));return}l++;var v=o("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd.get(b),S=o("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(b);if(o("WAWebNonMessageDataRequestMediaHandlingUtils").inFlightStickerRequests.has(b)&&o("WAWebNonMessageDataRequestMediaHandlingUtils").inFlightStickerRequests.delete(b),v||S){var R,L=v!=null?v.sticker:r("WANullthrows")(S).sticker;if(y===L.directPath&&o("WABase64").encodeB64(a)===L.encFilehash&&o("WABase64").encodeB64(h)===L.mediaKey)return;if((R=L.mediaObject)!=null&&R.entries.entries){var E;(E=L.mediaObject)==null||(E=E.entries)==null||E.clearEntries()}var k=new(o("WAWebStickerModel")).StickerModel({id:L.filehash,directPath:y!=null?y:L.directPath,filehash:L.filehash,encFilehash:o("WABase64").encodeB64(a),mediaKey:o("WABase64").encodeB64(h),mediaKeyTimestamp:C!=null?Number(C):L.mediaKeyTimestamp,width:L.width,height:L.height,size:L.size,mimetype:L.mimetype,type:L.type,isAvatar:L.isAvatar,index:0});v&&(o("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["RDU: update recent sticker with response of RDU with filehash ",""])),b),o("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd.updateRecentStickerWithNewSticker(b,k)),S&&(o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["RDU: update favorite sticker with response of RDU with filehash ",""])),b),o("WAWebFavoriteStickerCollection").FavoriteStickerCollection.updateFavoriteStickerWithNewSticker(b,k))}}),o("WAWebNonMessageDataRequestMediaHandlingUtils").insertResponseError(g,o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER),o("WAWebNonMessageDataRequestLoggingUtils").logNonMessagePeerDataResponse(o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,t,a,i,l,_,f)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){for(var a=t.length,i=0,l=0,s=0,u=0,c=o("WATimeUtils").unixTime(),d=[],m=t.map(function(e){var t=e.fileSha256;if(t==null){s++,d.push({mediaUploadResult:o("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.GENERAL_ERROR});return}var n=o("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(t);if(n==null){u++,d.push({mediaUploadResult:o("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.NOT_FOUND,stickerMessage:{fileSha256:o("WABase64").decodeB64(t)}});return}return n}).filter(function(e){return e!=null}),p=new Set,g=m.map(function(e){var t=r("WANullthrows")(e==null?void 0:e.sticker),n=t.mediaObject;if(n==null)return{kind:o("WAWebMediaMmsV4Upload").UploadMediaResultKind.ERROR};if(o("WAWebNonMessageDataRequestMediaHandlingUtils").shouldSkipMediaUploadWithSuccess(t.filehash,o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,c)){var a=n.entries.getDownloadEntry(!0);if(a instanceof o("WAWebMediaEntry").EncryptedMediaEntry)return l++,p.add(t.filehash),{kind:o("WAWebMediaMmsV4Upload").UploadMediaResultKind.SUCCESS,mediaEntry:a}}if(o("WAWebNonMessageDataRequestMediaHandlingUtils").shouldSkipMediaUploadWithCancellation(t.filehash,o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,c))return p.add(t.filehash),{kind:o("WAWebMediaMmsV4Upload").UploadMediaResultKind.CANCELLATION};var i=n.entries.getUploadEntry(!0);if(i instanceof o("WAWebMediaEntry").UnencryptedMediaEntry)return o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[sticker-upload] Unexpected unencrypted upload entry"]))).devConsole(i).sendLogs("sticker-upload-unexpected-unencrypted-entry"),{kind:o("WAWebMediaMmsV4Upload").UploadMediaResultKind.ERROR};var s=i instanceof o("WAWebMediaEntry").EncryptedMediaEntry?{key:i.mediaKey,timestamp:i.mediaKeyTimestamp}:r("WAWebCryptoRandomMediaKey")();return o("WAWebMediaMmsV4Upload").uploadMedia({mimetype:t.mimetype,mediaObject:n,mediaType:"sticker",forwardedFromWeb:!1,uploadOrigin:o("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.STICKER_WEB,mediaKeyInfo:s,isViewOnce:!0})}),h=yield(f||(f=n("Promise"))).all(g),y=new Map,C=0;C<h.length;C++){var b,v,S=h[C],R=S.kind,L=S.mediaEntry,E=r("WANullthrows")(m[C]),k=r("WANullthrows")(E==null?void 0:E.sticker);if(R!==o("WAWebMediaMmsV4Upload").UploadMediaResultKind.SUCCESS||L==null){s++,d.push({mediaUploadResult:o("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.GENERAL_ERROR,stickerMessage:{fileSha256:o("WABase64").decodeB64(k.filehash)}}),p.has(k.filehash)||y.set(k.filehash,R);continue}if(i++,!p.has(k.filehash)){var I;if((I=k.mediaObject)!=null&&I.entries.entries){var T;(T=k.mediaObject)==null||(T=T.entries)==null||T.clearEntries()}var D=new(o("WAWebStickerModel")).StickerModel({id:k.filehash,directPath:L.directPath,filehash:k.filehash,encFilehash:L.encFilehash,mediaKey:L.mediaKey,mediaKeyTimestamp:L.mediaKeyTimestamp,width:k.width,height:k.height,size:k.size,mimetype:k.mimetype,isAvatar:k.isAvatar,type:k.type,index:0});o("WAWebFavoriteStickerCollection").FavoriteStickerCollection.updateFavoriteStickerWithNewSticker(k.filehash,D),y.set(k.filehash,R)}d.push({mediaUploadResult:o("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.SUCCESS,stickerMessage:{fileSha256:o("WABase64").decodeB64(k.filehash),fileEncSha256:o("WABase64").decodeB64((b=L.encFilehash)!=null?b:""),mediaKey:o("WABase64").decodeB64(L.mediaKey),mimetype:k.mimetype,height:k.height,width:k.width,directPath:(v=L.directPath)!=null?v:"",mediaKeyTimestamp:L.mediaKeyTimestamp}})}o("WAWebSendNonMessageDataRequestResponse").sendPeerDataOperationRequestResponseMessage(e,o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,d),o("WAWebNonMessageDataRequestMediaHandlingUtils").insertMediaUploadResult(y,c),o("WAWebNonMessageDataRequestLoggingUtils").logMediaUpload(o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER,e,a,i,l,s,u)}),y.apply(this,arguments)}l.handleUploadStickerPeerDataOperationRequestResponse=g,l.handleUploadStickerPeerDataOperationRequest=h}),98);
__d("WAWebNonMessageDataRequestHandlerWaffleLinkingNonceFetch",["WALogger","WAWebAccountLinkingAPI","WAWebAccountLinkingDBOperations","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(t){t.forEach((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.waffleNonceFetchRequestResponse;if(n==null){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Waffle nonce fetch: got null as waffle nonce fetch response in result"])));return}var r=n.nonce,a=n.waEntFbid;if(r==null||a==null){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[rdu] Waffle nonce fetch: got null as waffle nonce or waEntFbid"])));return}yield o("WAWebAccountLinkingDBOperations").updateAccountLinkingData(r,a),yield o("WAWebAccountLinkingAPI").refreshAccessToken()});return function(e){return t.apply(this,arguments)}})())}l.handleWaffleLinkingNonceFetchOperationRequestResponse=u}),98);
__d("WAWebProtobufsSyncdSnapshotRecovery.pb",["WAProtoConst","WAWebProtobufSyncAction.pb"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="SyncdSnapshotRecovery",s.internalSpec={version:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,c],collectionName:[2,e.TYPES.STRING],mutationRecords:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u],collectionLthash:[4,e.TYPES.BYTES]},u.name="SyncdPlainTextRecord",u.internalSpec={value:[1,e.TYPES.MESSAGE,o("WAWebProtobufSyncAction.pb").SyncActionDataSpec],keyId:[2,e.TYPES.BYTES],mac:[3,e.TYPES.BYTES]},c.name="SyncdVersion",c.internalSpec={version:[1,e.TYPES.UINT64]},l.SyncdSnapshotRecoverySpec=s,l.SyncdPlainTextRecordSpec=u,l.SyncdVersionSpec=c}),98);
__d("WAWebNonMessageDataRequestHandler",["WABinary","WAGzip","WALogger","WANullthrows","WASyncdConst","WAWebNonMessageDataRequestHandlerGalaxyFlow","WAWebNonMessageDataRequestHandlerGenLinkPreview","WAWebNonMessageDataRequestHandlerPlaceholderResend","WAWebNonMessageDataRequestHandlerUploadSticker","WAWebNonMessageDataRequestHandlerWaffleLinkingNonceFetch","WAWebNonMessageDataRequestLoggingUtils","WAWebProtobufsE2E.pb","WAWebProtobufsSyncdSnapshotRecovery.pb","WAWebRequestSyncdSnapshotRecovery","WAWebSyncdSnapshotRecoveryGatingUtils","asyncToGeneratorRuntime","decodeProtobuf"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e,t){if(t.peerDataOperationRequestType!=null)switch(t.peerDataOperationRequestType){case o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER:o("WAWebNonMessageDataRequestHandlerUploadSticker").handleUploadStickerPeerDataOperationRequest(e,t.requestStickerReupload);return;case o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.GALAXY_FLOW_ACTION:o("WAWebNonMessageDataRequestHandlerGalaxyFlow").handleGalaxyFlowLaunchRequest(t);return;default:return}}function m(t,n){if(n.peerDataOperationRequestType!=null)switch(n.peerDataOperationRequestType){case o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.UPLOAD_STICKER:o("WAWebNonMessageDataRequestHandlerUploadSticker").handleUploadStickerPeerDataOperationRequestResponse(t,n.peerDataOperationResult);return;case o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.GENERATE_LINK_PREVIEW:o("WAWebNonMessageDataRequestHandlerGenLinkPreview").handleGenerateLinkPreviewOperationRequestResponse(n);return;case o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.PLACEHOLDER_MESSAGE_RESEND:o("WAWebNonMessageDataRequestHandlerPlaceholderResend").handlePlaceholderResendOperationRequestResponse(t,n.peerDataOperationResult);return;case o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.WAFFLE_LINKING_NONCE_FETCH:o("WAWebNonMessageDataRequestHandlerWaffleLinkingNonceFetch").handleWaffleLinkingNonceFetchOperationRequestResponse(n.peerDataOperationResult);return;case o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.COMPANION_SYNCD_SNAPSHOT_FATAL_RECOVERY:if(o("WAWebSyncdSnapshotRecoveryGatingUtils").syncdSnapshotRecoveryEnabled()===!1){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["syncd Snapshot recovery is not enabled"])));return}o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["========== SNAPSHOT RECOVERY RESPONSE ========="]))).devConsole(n.peerDataOperationResult);try{p(n.peerDataOperationResult[0],t)}catch(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["syncd Snapshot recovery initianl handling failed: ",""])),e),o("WAWebNonMessageDataRequestLoggingUtils").logNonMessagePeerDataResponse(o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.COMPANION_SYNCD_SNAPSHOT_FATAL_RECOVERY,t,0,0,0,1,0)}return;default:return}}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,a,i=e==null||(n=e.syncdSnapshotFatalRecoveryResponse)==null?void 0:n.isCompressed,l=new(o("WABinary")).Binary(r("WANullthrows")(e==null||(a=e.syncdSnapshotFatalRecoveryResponse)==null?void 0:a.collectionSnapshot)),s=l.readByteArrayView();i===!0&&(s=yield o("WAGzip").inflate(l.readByteArrayView()));var u=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsSyncdSnapshotRecovery.pb").SyncdSnapshotRecoverySpec,s);o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["========== SNAPSHOT RECOVERY PROCESSED ========="]))).devConsole(u);var d=o("WASyncdConst").CollectionName.cast(u.collectionName);d!=null&&o("WAWebRequestSyncdSnapshotRecovery").SyncdSnapshotRecoveryModule.resolveRecoveryPromise(d,u),o("WAWebNonMessageDataRequestLoggingUtils").logNonMessagePeerDataResponse(o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.COMPANION_SYNCD_SNAPSHOT_FATAL_RECOVERY,t,1,1,1,0,0)}),_.apply(this,arguments)}l.handlePeerDataOperationRequest=d,l.handlePeerDataOperationRequestResponse=m}),98);
__d("WAWebHandleDeferredMessages",["WALogger","WANullthrows","WAPromiseEach","WAWebApiDeferredMessagesStorage","WAWebApiHydrateWidsUtil","WAWebHandleHistorySyncNotification","WAWebKeyManagementHandleKeyRequestApi","WAWebKeyManagementHandleKeyShareApi","WAWebMsgProcessingApiUtils","WAWebNonMessageDataRequestHandler","WAWebParsedProtocolMsgType","WAWebProtobufsE2E.pb","asyncToGeneratorRuntime","decodeProtobuf","err"],(function(t,n,r,o,a,i,l){var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield r("WAWebApiDeferredMessagesStorage").getDeferredMessages();yield o("WAPromiseEach").promiseEach(t,(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){if(t){var a=t.type,i=t.plaintext,l=t.info,s=t.paymentInfo,u=t.bizInfo,c=o("WAWebApiHydrateWidsUtil").hydrateWids(l),d=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsE2E.pb").MessageSpec,i),m=o("WAWebMsgProcessingApiUtils").getFrom(c),p=yield o("WAWebMsgProcessingApiUtils").parseProtocolMessage({info:c,msgProtobuf:d,paymentInfo:s,bizInfo:u,hsmInfo:null});if(p==null){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] Failed to handle deferred messages: parseProtocolMessage failed"])));return}switch(a){case o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.HISTORY:yield o("WAWebHandleHistorySyncNotification").handleHistorySyncNotification(r("WANullthrows")(p==null?void 0:p.history),m,c.externalId);break;case o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.APP_STATE_SYNC_KEY_SHARE:yield o("WAWebKeyManagementHandleKeyShareApi").handleAppStateSyncKeyShare(r("WANullthrows")(p==null?void 0:p.appStateSyncKeyShare),m);break;case o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.APP_STATE_SYNC_KEY_REQUEST:yield o("WAWebKeyManagementHandleKeyRequestApi").handleAppStateSyncKeyRequest(r("WANullthrows")(p==null?void 0:p.appStateSyncKeyRequest),m);break;case o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:yield o("WAWebNonMessageDataRequestHandler").handlePeerDataOperationRequestResponse(c.externalId,r("WANullthrows")(p==null?void 0:p.peerDataOperationRequestResponseMessage));break;case o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.PEER_DATA_OPERATION_REQUEST_MESSAGE:yield o("WAWebNonMessageDataRequestHandler").handlePeerDataOperationRequest(c.externalId,r("WANullthrows")(p==null?void 0:p.peerDataOperationRequestMessage));break;default:throw r("err")("[worker] Invalid messages stored in deferred messages table")}yield r("WAWebApiDeferredMessagesStorage").deleteDeferredMessage(t.id)}});return function(e,n){return t.apply(this,arguments)}})())}),u.apply(this,arguments)}l.default=s}),98);
__d("WAWebHeroInteraction.react",["CometHeroHoldTrigger.react","WAWebErrorBoundaryInstrumented.react","hero-tracing","react","useWAWebCometInteractionTracing"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.children,n=e.description,a=e.enableHoldTrigger,i=a===void 0?!0:a,l=e.pageletName,u=e.policy,c=r("useWAWebCometInteractionTracing")(u);return s.jsx(o("hero-tracing").HeroInteraction,{interactionDesc:n,interactionUUID:c.traceIdState,pageletName:l!=null?l:n,renderTrackedDOMElement:function(o){return s.jsxs(r("WAWebErrorBoundaryInstrumented.react"),{name:"hero-interaction",children:[i&&s.jsx(r("CometHeroHoldTrigger.react"),{description:n,hold:c.interactionIsInFlight}),t(o,c)]})}})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("WAWebHistorySyncApi",["WAWebHistorySyncProgressModel"],(function(t,n,r,o,a,i,l){var e={setHistorySyncPaused:function(t){var e=t.paused;o("WAWebHistorySyncProgressModel").getHistorySyncProgressModel().setPaused(e)},setHistorySyncProgress:function(t){var e=t.progress,n=t.incomplete;e!=null&&o("WAWebHistorySyncProgressModel").getHistorySyncProgressModel().setProgress(e),n!=null&&o("WAWebHistorySyncProgressModel").getHistorySyncProgressModel().setIncomplete(n)}};l.HistorySyncBridgeApi=e}),98);
__d("WAWebHistorySyncOnDemandEvents",["WAWebEventEmitter"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.triggerSuccessHistorySyncOd=function(t){this.trigger("history_sync_on_demand_events:success_history_sync_od",t)},n.triggerErrorHistorySyncOd=function(t){this.trigger("history_sync_on_demand_events:error_history_sync_od",t)},t})(r("WAWebEventEmitter")),s=new e;l.WAWebHistorySyncOnDemandEvents=s}),98);
__d("WAWebHistorySyncOnDemandAction",["WAWebHistorySyncOnDemandEvents"],(function(t,n,r,o,a,i,l){function e(e){o("WAWebHistorySyncOnDemandEvents").WAWebHistorySyncOnDemandEvents.trigger("history_sync_on_demand_events:success_history_sync_od",e)}function s(e){o("WAWebHistorySyncOnDemandEvents").WAWebHistorySyncOnDemandEvents.trigger("history_sync_on_demand_events:error_history_sync_od",e)}l.successHistorySyncOd=e,l.errorHistorySyncOd=s}),98);
__d("WAWebSelfPrimaryIdentityChangeAction",["WALogger","WAWebLogoutReasonConstants","WAWebSocketModel","gkx"],(function(t,n,r,o,a,i,l){var e;function s(){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleNewIdentity: ignore identity change for your own primary device"]))).sendLogs("self-identity-change"),r("gkx")("26258")?o("WAWebSocketModel").Socket.logout(o("WAWebLogoutReasonConstants").LogoutReason.PrimaryIdentityKeyChange):self.setTimeout(function(){o("WAWebSocketModel").Socket.logout(o("WAWebLogoutReasonConstants").LogoutReason.PrimaryIdentityKeyChange)},1e4)}l.handleSelfPrimaryIdentityChange=s}),98);
__d("WAWebIdentityBridgeApi",["WAWebSelfPrimaryIdentityChangeAction"],(function(t,n,r,o,a,i,l){var e={handleSelfPrimaryIdentityChange:function(){return o("WAWebSelfPrimaryIdentityChangeAction").handleSelfPrimaryIdentityChange()}};l.IdentityBridgeApi=e}),98);
__d("WAWebIndividualNewChatMessageCappingBridgeApi",["WAWebCmd"],(function(t,n,r,o,a,i,l){var e={individualNewChatMessageCappingStateChange:function(){o("WAWebCmd").Cmd.newChatMessageCappingStateChange()}};l.IndividualNewChatMessageCappingBridgeApi=e}),98);
__d("WAWebL10nHelpersBridgeApi",["WAWebFrontendL10nHelpers","WAWebL10N"],(function(t,n,r,o,a,i,l){var e={setLocalePrefCookie:function(t){var e=t.locale;o("WAWebFrontendL10nHelpers").setWAWebLocalePrefCookie(e)},mungeLocaleOverrideFromUrlIfNecessary:function(){o("WAWebFrontendL10nHelpers").mungeWAWebLocaleOverrideFromUrlIfNecessary()},extendLocalePrefCookieTtl:function(){o("WAWebFrontendL10nHelpers").extendWAWebLocalePrefCookieTtl()},getUserLocale:function(){return r("WAWebL10N").getLocale()}};l.L10nHelpersBridgeApi=e}),98);
__d("WAWebLabelsBridgeApi",["WAWebBIzLabelReorderAction"],(function(t,n,r,o,a,i,l){var e={reorderLabels:function(t){var e=t.sortedLabelIds;o("WAWebBIzLabelReorderAction").reorderLabelsAction(e)}};l.LabelsBridgeApi=e}),98);
__d("WAWebLongAnimationFrameObserver",["WALogger","WAWebDocumentVisibilityObserver"],(function(t,n,r,o,a,i,l){var e,s=500;function u(e){var t=e.match(/.*\.(.*)/);return t?t[1]:e}var c=(function(){function t(){this.documentVisibilityObserver=new(o("WAWebDocumentVisibilityObserver")).WAWebDocumentVisibilityObserver}var n=t.prototype;return n.isSupported=function(){var e;return typeof((e=window.PerformanceObserver)==null||(e=e.supportedEntryTypes)==null?void 0:e.includes)=="function"&&window.PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")},n.observe=function(t){t.observe({type:"long-animation-frame",buffered:!0})},n.handle=function(n){for(var t of n)if(!(t.blockingDuration<s||t.firstUIEventTimestamp<0)){var r=this.documentVisibilityObserver.isWindowInFocus(),a=this.documentVisibilityObserver.isDocumentVisible();if(!(!a||!r)){if(t.scripts.length===0)return;var i=t.scripts.reduce(function(e,t){return e.duration>t.duration?e:t});o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[long-animation-frame] blockingDuration: ","ms - ",":"," ","ms"])),t.blockingDuration,u(i.invoker),i.sourceFunctionName,i.duration).sendLogs("[performance observer] long-animation-frame by "+u(i.invoker),{sampling:.001})}}},t})();l.WAWebLongAnimationFrameObserver=c}),98);
__d("WAWebLongTaskObserver",["WALogger","WAWebCrashContextUtils","WAWebDocumentVisibilityObserver"],(function(t,n,r,o,a,i,l){var e,s=5e3,u=10*1e3,c=15*1e3,d=30*1e3;function m(e){return e>c?"15s+":e>u?"10s-15s":e>s?"5s-10s":"0s-5s"}var p=(function(){function t(){this.documentVisibilityObserver=new(o("WAWebDocumentVisibilityObserver")).WAWebDocumentVisibilityObserver}var n=t.prototype;return n.isSupported=function(){var e;return typeof((e=window.PerformanceObserver)==null||(e=e.supportedEntryTypes)==null?void 0:e.includes)=="function"&&window.PerformanceObserver.supportedEntryTypes.includes("longtask")},n.observe=function(t){t.observe({type:"longtask",buffered:!1}),this.documentVisibilityObserver.observe()},n.handle=function(n){for(var t of n)if(!(t.duration<s||t.duration>d)){var r=this.documentVisibilityObserver.isWindowInFocus(),a=this.documentVisibilityObserver.isDocumentVisible();if(!(!a||!r)){var i=t.startTime+t.duration;o("WAWebCrashContextUtils").recordHangEvent(i,t.duration),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[longtask][","] entryDuration: ","ms"])),m(t.duration),t.duration).sendLogs("[performance observer] longtask",{sampling:.01,sendLogsType:o("WALogger").SendLogsType.PERFORMANCE_OBSERVER_LONGTASK_SAD})}}},t})();l.WAWebLongTaskObserver=p}),98);
__d("WAWebMemoryInfoBridgeApi",["WAWebChatCollection","WAWebContactCollection","WAWebMsgCollection"],(function(t,n,r,o,a,i,l){var e={getCollectionSizes:function(){return{chat:o("WAWebChatCollection").ChatCollection.length,contact:o("WAWebContactCollection").ContactCollection.length,message:o("WAWebMsgCollection").MsgCollection.length}}};l.MemoryInfoBridgeApi=e}),98);
__d("WAWebMetaAiThreadDrawer.react",["fbt","WAWebAiThreadList.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebMetaAIIcon.react","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t=e.chat,n=e.ref,a=u.jsxs("div",{className:"x6s0dn4 x1s70e7g x78zum5",children:[u.jsx(r("WAWebMetaAIIcon.react"),{height:20,width:20}),s._(/*BTDS*/"Meta AI")]});return u.jsxs(r("WAWebDrawer.react"),{ref:n,testid:void 0,children:[u.jsx(o("WAWebDrawerHeader.react").DrawerHeader,{title:a,type:o("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.TAB,focusBackOrCancel:!0}),u.jsx(r("WAWebDrawerBody.react"),{children:u.jsx(o("WAWebAiThreadList.react").WAWebAiThreadList,{chat:t})})]})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),226);
__d("WAWebUpdateEditedMessagesAction",["WALogger","WATimeUtils","WAWebBotFrontendUtils","WAWebBotGating","WAWebBotTypes","WAWebChatMessageSearch","WAWebDBProcessEditProtocolMsgs","WAWebFrontendMsgGetters","WAWebGroupUnreadMessageType","WAWebMessageEditGatingUtils","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgInfoCollection","WAWebMsgType","WAWebMuteGetters","WAWebNotificationController","WAWebNotificationsMsgNotification","WAWebUnreadMentionModel"],(function(t,n,r,o,a,i,l){var e;function s(t){for(var n of t){var r=n.parentMsg,a=n.editedMsgData,i=n.protocolMsg,l=n.mentionOfMe,s=o("WAWebMsgCollection").MsgCollection.get(r.id);if(!s)return;var d=a.mediaKey!==s.mediaKey;d&&(s.thumbnailHQ=""),(o("WAWebBotGating").shouldAnimateAsBotStream(s)||s.botEditType!=null)&&(a.lastBotEditBodyLength=o("WAWebBotFrontendUtils").getBotMsgBodyLength(s));var m=new(o("WAWebNotificationsMsgNotification")).WAMsgNotification({msg:s}).buildKey();s.set(a),o("WAWebChatMessageSearch").clearFtsCache(o("WAWebFrontendMsgGetters").getChat(s)),u(s,m,l),o("WAWebMsgGetters").getIsSentByMe(i)||(o("WAWebFrontendMsgGetters").getChat(s).unreadEditTimestampMs=o("WATimeUtils").unixTimeMs()),l&&c(s,l),s.clearRawLinks(),s.clearRawPhoneNumbers();var p=o("WAWebMsgCollection").MsgCollection.get(i.id);p&&p.type===o("WAWebMsgType").MSG_TYPE.CIPHERTEXT&&p.delete(),o("WAWebMsgInfoCollection").MsgInfoCollection.remove(s.id),o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[message-edit] updated Msg model"]))).devConsole({msg:s})}o("WAWebMsgCollection").MsgCollection.processEditedMessages(t.map(function(e){var t=e.parentMsg;return o("WAWebMsgCollection").MsgCollection.get(t.id)}))}function u(e,t,n){var r=o("WAWebNotificationController").WANotificationController.getNotification(t),a=new(o("WAWebNotificationsMsgNotification")).WAMsgNotification({msg:e});if(r&&o("WAWebMsgGetters").getIsMetaBotResponse(e)){e.botEditType===o("WAWebBotTypes").BotMsgEditType.LAST&&o("WAWebNotificationController").WANotificationController.triggerNotification(a);return}r&&o("WAWebNotificationController").WANotificationController.triggerNotification(a);var i=o("WAWebFrontendMsgGetters").getChat(e);if(o("WAWebMuteGetters").getIsMuted(i.mute)&&n)switch(n){case o("WAWebDBProcessEditProtocolMsgs").EditedMentionOfMe.Added:i.isUnreadMsg(e)&&o("WAWebNotificationController").WANotificationController.triggerNotification(a);break;case o("WAWebDBProcessEditProtocolMsgs").EditedMentionOfMe.Removed:r==null||r.closeBanner();break}}function c(e,t){var n;if(o("WAWebMessageEditGatingUtils").receiveCaptionEditEnabled()){var a=o("WAWebFrontendMsgGetters").getChat(e);switch(t){case o("WAWebDBProcessEditProtocolMsgs").EditedMentionOfMe.Added:if(a.isUnreadMsg(e)){var i,l=new(r("WAWebUnreadMentionModel"))({id:e.id,timestamp:e.latestEditSenderTimestampMs});(i=a.groupMetadata)==null||i.unreadMentionMetadata.addUnreadMentions([l],o("WAWebGroupUnreadMessageType").UnreadMessageType.NEW_MESSAGE)}break;case o("WAWebDBProcessEditProtocolMsgs").EditedMentionOfMe.Removed:(n=a.groupMetadata)==null||n.unreadMentionMetadata.removeUnreadMentions(e.id.toString());break}}}l.updateEditedMessagesAction=s}),98);
__d("WAWebUpdateMsgAcksAction",["Promise","WALogger","WAWebAckMsgAction","WAWebHandleMsgReceiptCommon","WAWebMsgCollection","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e,t,n){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){var a=[];e.forEach((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=yield p(e);n&&a.push(o("WAWebAckMsgAction").updateMsgAck(e,n,{from:n.from,to:n.to,ack:t,t:r}))});return function(t){return e.apply(this,arguments)}})()),yield(s||(s=n("Promise"))).all(a)}),c.apply(this,arguments)}function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a){var i=[],l=[];t.forEach((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield p(t);n?l.push(o("WAWebAckMsgAction").updateMsgAck(t,n,{from:n.from,to:n.to,ack:r,t:a})):(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["updateMsgPeerAcks: no message found for incoming ack, with msgKey: ",""])),t),t.fromMe||i.push(t))});return function(e){return t.apply(this,arguments)}})()),i.length>0&&o("WAWebHandleMsgReceiptCommon").updateOrphanPeerReceipt(i,r,a),yield(s||(s=n("Promise"))).all(l)}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t;return(t=o("WAWebMsgCollection").MsgCollection.get(e))!=null?t:o("WAWebMsgCollection").MsgCollection.getByEditMsgKey(e)}),_.apply(this,arguments)}l.updateMsgOtherAcks=u,l.updateMsgPeerAcks=d}),98);
__d("WAWebUpdateReactionMessageUIAction",["Promise","WALogger","WAWebDBGetReactions","WAWebReactionDataUtils","WAWebReactionsCollection","WAWebReactionsMsgAction","WAWebReactionsUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=yield o("WAWebReactionsUtils").createReactionsRow(t);if(r!=null){var a=!n,i="reaction "+String(t.id)+" received to: "+String(t.reactionParentKey);o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["processReactionMsg: ",""])),i).tags("messaging");var l=yield o("WAWebDBGetReactions").existsReactionAddressingModeInsensitive({parentMsgKey:r.parentMsgKey,senderUserJid:r.senderUserJid});if(l&&l.msgKey===r.msgKey){var s=l;yield o("WAWebReactionsMsgAction").addOrUpdateReactionsModelCollection(s,{allowNotify:a})}}}),c.apply(this,arguments)}function d(e){var t=new Set(e);for(var n of o("WAWebReactionsCollection").ReactionsCollection.toArray())for(var r of n.reactions.toArray())for(var a of t){var i=r.senders.get(a);if(i!=null&&(r.senders.remove(a),t.delete(a),t.size===0))return}}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){yield(s||(s=n("Promise"))).all(e.map(function(e){return o("WAWebReactionsMsgAction").addOrUpdateReactionsModelCollection(o("WAWebReactionDataUtils").reactionMsgDataToReactionRow(e),r)})),t.length>0&&d(t)}),p.apply(this,arguments)}l.updateReactionUI=u,l.updateReactionCollection=m}),98);
__d("WAWebUpdateReplyApi",["WAWebMsgCollection","WAWebMsgKey","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){for(var t of e.entries()){var n=t[0],a=t[1],i=o("WAWebMsgCollection").MsgCollection.get(r("WAWebMsgKey").fromString(n));i!=null&&(i.replyCount=i.replyCount!=null?i.replyCount+a:a)}}),s.apply(this,arguments)}l.updateReplyCount=e}),98);
__d("WAWebMsgBridgeApi",["WAWebAckMsgAction","WAWebBizAgentAction","WAWebEphemeralSyncResponse","WAWebExternalBetaEvents","WAWebGalaxyDisableCTACollection","WAWebHandleDeferredMessages","WAWebHistorySyncOnDemandAction","WAWebKeepInChatMsgAction","WAWebLinkDeviceAction","WAWebMsgCollection","WAWebUpdateEditedMessagesAction","WAWebUpdateMessageUIAction","WAWebUpdateMsgAcksAction","WAWebUpdateReactionMessageUIAction","WAWebUpdateReplyApi"],(function(t,n,r,o,a,i,l){var e={processMultipleMessages:function(t){var e=t.chatId,n=t.msgObjs,r=t.meta,a=t.processMessagesOrigin,i=t.chatMsgsCollection,l=t.preserveOrder;return o("WAWebMsgCollection").MsgCollection.processMultipleMessages(e,n,r,a,i,l)},addInitialBotTypingIndicatorToChat:function(t){var e=t.chatId,n=t.msgKey;return o("WAWebMsgCollection").MsgCollection.addInitialBotTypingIndicatorToChat(e,n)},msgCollectionTrigger:function(t){var e=t.name;o("WAWebMsgCollection").MsgCollection.trigger(e)},processKeepInChatMessages:function(t){var e=t.keepInChatMessages,n=t.allowNotification;return o("WAWebKeepInChatMsgAction").processKeepInChatMessages(e,n)},updateUnattributedMessages:function(t){var e=t.messageInfo,n=t.messages;return o("WAWebBizAgentAction").updateUnattributedMessages(e,n)},processKeepInChatMessage:function(t){var e=t.keepInChatMessage,n=t.allowNotification;return o("WAWebKeepInChatMsgAction").processKeepInChatMessage(e,{allowNotification:n})},updateEditedMessagesAction:function(t){var e=t.messageEdits;o("WAWebUpdateEditedMessagesAction").updateEditedMessagesAction(e)},updateMessageUI:function(t){var e=t.chatId,n=t.msg,r=t.messageOverwriteOption,a=t.preserveOrder,i=t.isOffline;return o("WAWebUpdateMessageUIAction").updateUI(e,n,r,a,i)},updateMsgModelAcks:function(t){var e=t.updates;e.forEach(function(e){var t=o("WAWebMsgCollection").MsgCollection.get(e.id);t!=null&&(t.ack=e.ack)})},updateReactionUI:function(t){var e=t.msg,n=t.reparsing;return o("WAWebUpdateReactionMessageUIAction").updateReactionUI(e,n)},updateReactionCollection:function(t){var e=t.msgs,n=t.removeReactions,r=t.allowNotifications;return o("WAWebUpdateReactionMessageUIAction").updateReactionCollection(e,n,{allowNotify:r})},processOrphanReadReceipts:function(t){var e=t.msgIds;return o("WAWebAckMsgAction").processOrphanReadReceipts(e)},updateMsgPeerAcks:function(t){var e=t.msgKeys,n=t.ack,r=t.t;return o("WAWebUpdateMsgAcksAction").updateMsgPeerAcks(e,n,r)},updateMsgOtherAcks:function(t){var e=t.msgKeys,n=t.ack,r=t.t;return o("WAWebUpdateMsgAcksAction").updateMsgOtherAcks(e,n,r)},handleDeferredMessages:function(){return r("WAWebHandleDeferredMessages")()},processEphemeralSyncResponse:function(t){var e=t.msg;return o("WAWebEphemeralSyncResponse").processEphemeralSyncResponse(e)},refreshAltLinkingCode:function(t){var e=t.ref;return o("WAWebLinkDeviceAction").refreshAltLinkingCode(e)},forceManualRefresh:function(t){var e=t.ref;return o("WAWebLinkDeviceAction").forceManualRefresh(e)},errorAltLinking:function(){return o("WAWebLinkDeviceAction").errorAltLinking()},primaryHelloReceivedAltLinking:function(){return o("WAWebLinkDeviceAction").primaryHelloReceivedAltLinking()},changeOptInStatusForExternalWebBeta:function(){o("WAWebExternalBetaEvents").WAWebExternalBetaEvents.triggerBetaOptInStatusChanges()},successHistorySyncOd:function(t){var e=t.chatId;return o("WAWebHistorySyncOnDemandAction").successHistorySyncOd(e)},errorHistorySyncOd:function(t){var e=t.chatId;return o("WAWebHistorySyncOnDemandAction").errorHistorySyncOd(e)},hasMsgsInCollection:function(t){var e=t.msgKeys;return e.map(function(e){return!!o("WAWebMsgCollection").MsgCollection.get(e)})},deleteAssociatedBotCarouselMsgs:function(t){var e=t.msgKeys;e.forEach(function(e){var t=o("WAWebMsgCollection").MsgCollection.get(e);t&&(t.delete(),o("WAWebMsgCollection").MsgCollection.remove(t))})},removePlaceholder:function(t){var e=t.msg;return o("WAWebUpdateMessageUIAction").removePlaceholder(e)},updateReplyCount:function(t){var e=t.replyCountMap;return o("WAWebUpdateReplyApi").updateReplyCount(e)},updateMsgModelHostedBizEncStateMismatchFlagToTrue:function(t){var e=t.msgId,n=o("WAWebMsgCollection").MsgCollection.get(e);n!=null&&(n.hostedBizEncStateMismatch=!0)},updateViewModeForMsgs:function(t){var e=t.msgIdsViewModeMap;e.forEach(function(e,t){var n=o("WAWebMsgCollection").MsgCollection.get(t);n!=null&&n.set({viewMode:e})})},detachAssociatedMsgsForever:function(t){var e=t.msgIds;e.forEach(function(e){var t=o("WAWebMsgCollection").MsgCollection.get(e);t!=null&&t.detachAssociatedMsg()})},addGalaxyDisableCTAMessageId:function(t){var e=t.messageId;o("WAWebGalaxyDisableCTACollection").GalaxyDisableCTACollection.addMessageId(e)}};l.MsgBridgeApi=e}),98);
__d("WAWebMsgInfoBridgeApi",["WAWebMsgCollection","WAWebMsgInfoAction","WAWebMsgInfoCollection"],(function(t,n,r,o,a,i,l){var e={updateMsgInfo:function(t){var e=t.updates;for(var n of e){var r,a=n.msgKey,i=n.ack,l=n.participant,s=n.ts,u=(r=o("WAWebMsgCollection").MsgCollection.get(a))!=null?r:o("WAWebMsgCollection").MsgCollection.getByEditMsgKey(a);if(u!=null){var c=o("WAWebMsgInfoCollection").MsgInfoCollection.get(u.id);c!=null&&o("WAWebMsgInfoAction").updateMsgInfo(c,i,l,s)}}}};l.MsgInfoBridgeApi=e}),98);
__d("WAWebMutePopup.react",["fbt","WAWebConfirmPopup.react","WAWebEmojiText.react","WAWebModalManager","WAWebMuteExpirations","WAWebRadio.react","WAWebText.react","WAWebUserPrefsGeneral","react","useWAWebModelValues"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.useEffect,p=c.useState;function _(){o("WAWebModalManager").ModalManager.close()}function f(e){var t=e.onMute,n=e.children,r=o("useWAWebModelValues").useModelValues(e.mute,["id","expiration","callExpiration"]),a=p(null),i=a[0],l=a[1],u=function(t){l(t)},c=function(){return i!=null&&i!==0?i:o("WAWebUserPrefsGeneral").getLastChatMuteDuration()||o("WAWebMuteExpirations").getDefaultMuteDuration()},f=function(){o("WAWebModalManager").ModalManager.close();var n=c();o("WAWebUserPrefsGeneral").setLastChatMuteDuration(n),t(o("WAWebMuteExpirations").calculateMuteExpiration(n),n,e.entryPoint==null?0:e.entryPoint)};m(function(){r.expiration!=null&&r.expiration!==0&&r.callExpiration!=null&&r.callExpiration!==0&&_()},[r.callExpiration,r.expiration,e]);var g=e.onCancel||_,h=c(),y=d.jsx(o("WAWebRadio.react").RadioGroup,{name:"ractionMuteDuration",theme:o("WAWebRadio.react").RadioWithLabelThemeEnum.LARGE,checkedValue:h,options:o("WAWebMuteExpirations").ALL_MUTE_DURATIONS.map(function(e){var t=e.getLabel,n=e.duration,r=e.radioId;return{value:n,label:t(),testid:r,onChange:function(){return u(n)}}})});return d.jsxs(o("WAWebConfirmPopup.react").ConfirmPopup,{title:d.jsx(o("WAWebEmojiText.react").EmojiText,{text:e.title}),okText:s._(/*BTDS*/"Mute"),onOK:f,onCancel:g,testid:void 0,children:[n!=null&&d.jsx(o("WAWebText.react").WAWebTextMuted,{paddingBottom:12,children:n}),y]})}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),226);
__d("WAWebNavBarItem.react",["$InternalEnum","WAWebAppRootInteractionContext.react","WAWebFlex.react","WAWebInteractionTracePolicy","WAWebPopoverContext.react","WAWebTabOrder","WAWebTooltip.react","WAWebUISpacing","WAWebUnstyledButtonStyles","WDSFocusStateStyles","WDSTooltip.react","cr:23442","react","stylex","useMergeRefs","useWAWebABPropConfigValue"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.useMemo,p=c.useRef,_=n("$InternalEnum")({Counter:"counter",Dot:"dot"}),f={container:{width:"x100vrsf",height:"x1vqgdyp",color:"xhslqc4",borderStartStartRadius:"x1ekkm8c",borderStartEndRadius:"x1143rjc",borderEndEndRadius:"xum4auv",borderEndStartRadius:"xj21bgg",":hover_cursor":"x1277o0a",":hover_backgroundColor":"x13i9f1t",$$css:!0},circularButton:{borderStartStartRadius:"xt8t1vi",borderStartEndRadius:"x1xc408v",borderEndEndRadius:"x129tdwq",borderEndStartRadius:"x15urzxu",$$css:!0},fullWidth:{width:"xh8yej3",$$css:!0},active:{color:"x14ug900",backgroundColor:"xzs022t",$$css:!0},inlineActivityIndicatorContainer:{position:"x1n2onr6",$$css:!0},inlineActivityIndicator:{position:"x10l6tqk",$$css:!0},counterIndicator:{insetInlineStart:"xxcbqqu",left:null,right:null,bottom:"x1oozmrk",$$css:!0},dotIndicator:{insetInlineStart:"x138ruz1",left:null,right:null,bottom:"xjifam0",$$css:!0}};function g(e){var t=e.ref,n=e.children,a=e.testid,i=e.xstyle,l=e.disabled,u=e.onClick,c=e.isActive,m=e["aria-label"];return d.jsx("button",babelHelpers.extends({"aria-pressed":c,"aria-label":m,onClick:u,tabIndex:-1,ref:t,"data-testid":void 0,"data-navbar-item":!0,"data-navbar-item-selected":c},(s||(s=r("stylex"))).props([r("WAWebUnstyledButtonStyles").button,o("WAWebUISpacing").uiPadding.all0,o("WDSFocusStateStyles").WDSFocusStateStyles.genericFocus,l===!0&&r("WAWebUnstyledButtonStyles").disabled,f.circularButton,i]),{children:n}))}g.displayName=g.name+" [from "+i.id+"]";function h(e){var t=e.ariaLabel,a=e.dotIndicatorPositionXstyle,i=e.icon,l=e.inlineActivityIndicator,u=e.inlineActivityIndicatorType,c=e.isActive,h=e.isTooltipDisabled,y=h===void 0?!1:h,C=e.keyboardShortcutAction,b=e.onClick,v=e.ref,S=e.shouldHoldInteractionManually,R=S===void 0?!1:S,L=e.spacingXstyle,E=L===void 0?o("WAWebUISpacing").uiPadding.all8:L,k=e.testid,I=e.title,T=e.tracePolicy,D=o("WAWebAppRootInteractionContext.react").useInteractionWithAppRootContext(T!=null?T:r("WAWebInteractionTracePolicy").DEFAULT,R,!0),x=D.startInteraction,$=function(t){t.preventDefault(),!c&&T&&x(),b==null||b(t)},P=p(null),N=r("useMergeRefs")(P,v),M=n("cr:23442")(),w=M[0],A=M[1],F=r("useMergeRefs")(w,P),O=o("useWAWebABPropConfigValue").useABPropConfigValue("wds_web_tooltip"),B=m(function(){return d.jsx("div",{children:i})},[i]),W=l&&d.jsx(o("WAWebFlex.react").FlexItem,{className:(s||(s=r("stylex")))([f.inlineActivityIndicator,u===_.Counter?f.counterIndicator:f.dotIndicator,a]),children:l}),q=d.jsx(g,{testid:void 0,"aria-label":t!=null?t:I,onClick:$,ref:N,dataTab:o("WAWebTabOrder").TAB_ORDER.CHATLIST_HEADER,xstyle:[f.fullWidth,E],isActive:c,children:d.jsx(o("WAWebFlex.react").FlexRow,{align:"center",xstyle:f.fullWidth,children:d.jsxs(o("WAWebFlex.react").FlexRow,{grow:1,align:"center",xstyle:f.inlineActivityIndicatorContainer,children:[B,W]})})});return d.jsx(o("WAWebFlex.react").FlexRow,{ref:F,xstyle:[f.container,o("WAWebUISpacing").uiMargin.vert2,c&&f.active],children:O?d.jsx(r("WDSTooltip.react"),{label:I,delayTooltipMs:50,position:"end",shortcut:C,disabled:y,children:q}):d.jsxs(d.Fragment,{children:[q,!y&&d.jsx(o("WAWebPopoverContext.react").WAWebPopoverController,{targetRef:P,popover:d.jsx(o("WAWebTooltip.react").WAWebHoverTooltip,{targetRef:"context",alignment:o("WAWebTooltip.react").PopoverAlignment.Center,position:o("WAWebTooltip.react").PopoverPosition.End,enableEnterTransition:!1,children:I})})]})})}h.displayName=h.name+" [from "+i.id+"]",l.InlineActivityIndicatorType=_,l.NavBarItem=h}),98);
__d("WAWebNoteBridgeApi",["WAWebNoteAction"],(function(t,n,r,o,a,i,l){var e={updateNoteJidAction:function(t){var e=t.oldJid,n=t.newJid;o("WAWebNoteAction").updateNoteJidAction(e,n)}};l.NoteBridgeApi=e}),98);
__d("WAWebNuxBridgeApi",["WAWebNuxAction"],(function(t,n,r,o,a,i,l){var e={resetNux:function(t){var e=t.key;return o("WAWebNuxAction").resetNux(e)}};l.NuxBridgeApi=e}),98);
__d("WAWebPaymentInfoSyncBridgeApi",["WAWebPaymentInfo"],(function(t,n,r,o,a,i,l){var e={setCPIInfo:function(t){var e=t.cpiInfo;o("WAWebPaymentInfo").PaymentInfo.setCPIInfo(e)}};l.PaymentInfoSyncBridgeApi=e}),98);
__d("WAWebPerformanceObserver",["WAWebLongAnimationFrameObserver","WAWebLongTaskObserver","WAWebNoop"],(function(t,n,r,o,a,i,l){function e(e){var t=e.longtask,n=e.longAnimationFrame,a=[],i=null,l=null;if(t.enabled&&(i=new(o("WAWebLongTaskObserver")).WAWebLongTaskObserver,i.isSupported()&&a.push("longtask")),n.enabled&&(l=new(o("WAWebLongAnimationFrameObserver")).WAWebLongAnimationFrameObserver,l.isSupported()&&a.push("long-animation-frame")),a.length===0)return r("WAWebNoop");var s=new window.PerformanceObserver(function(e){if(i&&a.includes("longtask")&&i.handle(e.getEntriesByType("longtask")),l&&a.includes("long-animation-frame")){var t=e.getEntriesByType("long-animation-frame");l.handle(t)}});return s.observe({entryTypes:a}),i&&i.documentVisibilityObserver.observe(),function(){s.disconnect()}}l.initPerformanceObserver=e}),98);
__d("WAWebPipYoutubeVideoPlayer.scss",["cx"],(function(t,n,r,o,a,i,l,s){var e={fullscreen:"_ah_a",container:"_ah_b",youtubeContainer:"_ah_c",redesign:"_ah_d",strippedVideoControls:"_ah_e",opacityTransition:"_ah_f",dimmed:"_ah_g"},u=e;l.default=u}),98);
__d("WAWebYoutube.react",["Promise","WAWebNoop","WAWebTimeSpentLoggingNavigation","asyncToGeneratorRuntime","lodash","react","youtube-player"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=o("react")),d=s||(s=r("react")),m=c.useCallback,p=c.useEffect,_=c.useRef;function f(e,t){var n,r;if(e.videoId!==t.videoId)return!0;var o=((n=e.opts)==null?void 0:n.playerVars)||{},a=((r=t.opts)==null?void 0:r.playerVars)||{};return o.start!==a.start||o.end!==a.end}function g(e){return babelHelpers.extends({},e,{playerVars:babelHelpers.extends({},e==null?void 0:e.playerVars,{autoplay:0,start:0,end:0})})}function h(e,t){return!r("lodash").isEqual(g(e==null?void 0:e.opts),g(t==null?void 0:t.opts))}function y(e,t){return e.id===t.id||e.className===t.className}var C={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};function b(t){var a=t.onReady,i=a===void 0?r("WAWebNoop"):a,l=t.onError,s=l===void 0?r("WAWebNoop"):l,u=t.onStateChange,c=u===void 0?r("WAWebNoop"):u,g=t.onEnd,b=g===void 0?r("WAWebNoop"):g,v=t.onPlay,S=v===void 0?r("WAWebNoop"):v,R=t.onPause,L=R===void 0?r("WAWebNoop"):R,E=t.onPlaybackRateChange,k=E===void 0?r("WAWebNoop"):E,I=t.onPlaybackQualityChange,T=I===void 0?r("WAWebNoop"):I,D=t.opts,x=D===void 0?{playerVars:{}}:D,$=t.videoId,P=t.id,N=P===void 0?null:P,M=t.className,w=M===void 0?null:M,A=t.containerClassName,F=A===void 0?"":A,O=_(null),B=_(null),W=_([]),q=_(t),U=m(function(e){return i(e)},[i]),V=m(function(e){return s(e)},[s]),H=m(function(e){switch(c(e),e.data){case C.ENDED:b(e);break;case C.PLAYING:S(e);break;case C.PAUSED:L(e);break;default:return}},[b,L,S,c]),G=m(function(e){return k(e)},[k]),z=m(function(e){return T(e)},[T]),j=m(function(){var e,t,n,o,a=babelHelpers.extends({},x,{videoId:$});B.current=r("youtube-player")(O.current,a),W.current.push(B.current.on("ready",U),(e=B.current)==null?void 0:e.on("error",V),(t=B.current)==null?void 0:t.on("stateChange",H),(n=B.current)==null?void 0:n.on("playbackRateChange",G),(o=B.current)==null?void 0:o.on("playbackQualityChange",z))},[V,z,G,U,H,x,$]);p(function(){return j(),function(){var e;W.current.filter(Boolean).forEach(function(e){var t;(t=B.current)==null||t.off(e)}),(e=B.current)==null||e.destroy()}},[]);var K=m(function(){var t,r;return(t=(r=B.current)==null?void 0:r.destroy().then(j))!=null?t:(e||(e=n("Promise"))).resolve()},[j]),Q=m(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e,t=yield(e=B.current)==null?void 0:e.getIframe();N?t==null||t.setAttribute("id",N):t==null||t.removeAttribute("id"),w?t==null||t.setAttribute("class",w):t==null||t.removeAttribute("class")}),[w,N]),X=m(function(){var e;if($==null){var t;(t=B.current)==null||t.stopVideo();return}var n=!1,r,o;"playerVars"in x&&(n=x.playerVars.autoplay===1,"start"in x.playerVars&&(r=x.playerVars.start),"end"in x.playerVars&&(o=x.playerVars.end));var a={videoId:$,startSeconds:r,endSeconds:o};if(n){var i;(i=B.current)==null||i.loadVideoById(a);return}(e=B.current)==null||e.cueVideoById(a)},[x,$]);return p(function(){var e=q.current;y(e,t)&&Q(),h(e,t)&&K(),f(e,t)&&X(),q.current=t},[t,K,Q,X]),o("WAWebTimeSpentLoggingNavigation").useTsNavigation({surface:"youtube-player"}),d.jsx("span",{className:F,children:d.jsx("div",{id:N,className:w,ref:O})})}b.displayName=b.name+" [from "+i.id+"]",l.YouTube=b}),98);
__d("WAWebPipYoutubeVideoTag.react",["WAWebABProps","WAWebDebounce","WAWebPttAudioChannels","WAWebUserPrefsGeneral","WAWebYoutube.react","lodash","react","useLazyRef","useWAWebInterval","useWAWebOnUnmount","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u,c=u||(u=o("react")),d=s||(s=r("react")),m=c.useEffect,p=c.useImperativeHandle,_=c.useRef,f=r("WAWebDebounce")(function(e){o("WAWebUserPrefsGeneral").setMediaVolumeSetting(e)},500),g=r("WAWebDebounce")(function(e){o("WAWebUserPrefsGeneral").setMediaMutedSetting(e)},500),h={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},y={width:"100%",height:"100%",playerVars:{cc_load_policy:1,iv_load_policy:3,controls:0,playsinline:1,rel:0,modestbranding:0,autoplay:0}},C="https://whatsapp.com";function b(t){var n,a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=_(null),s=_(null),u=_(0),c=_(0),b=r("useLazyRef")(function(){return Symbol("audio-channel")}),v=_(null),S=(n=r("useWAWebStableCallback"))(function(){var e;(e=l.current)==null||e.playVideo()}),R=n(function(){var e;(e=l.current)==null||e.pauseVideo()}),L=n(function(e){var t;(t=l.current)==null||t.seekTo(e,!0)}),E=n(function(){var e,t;return(e=(t=l.current)==null?void 0:t.getCurrentTime())!=null?e:0}),k=n(function(){var e,t;return((e=(t=l.current)==null?void 0:t.getVolume())!=null?e:0)*.01}),I=n(function(){var e,t;return(e=(t=l.current)==null?void 0:t.getDuration())!=null?e:0}),T=n(function(){var e,t;return(e=(t=l.current)==null?void 0:t.isMuted())!=null?e:!1}),D=function(){var e=l.current;if(e){var t=e.getCurrentTime();t!==u.current&&(u.current=t,i.onTimeUpdate(t));var n=e.getVideoLoadedFraction();if(n!==c.current){c.current=n;var r=s.current?s.current.duration*n:0;i.onProgress([[0,r]])}var o=s.current;if(o){var a=e.getVolume()*.01,d=e.isMuted();(a!==o.volume||d!==o.muted)&&(s.current=babelHelpers.extends({},o,{volume:a,muted:d}),i.onVolumeChange({volume:a,muted:d}))}}},x=r("useWAWebInterval")(D,250),$=x[0],P=function(){if(typeof i.startTime=="number"){var e;(e=l.current)==null||e.seekTo(i.startTime,!0)}},N=n(function(e){var t=l.current;t&&(e?t.mute():t.unMute(),g(e))}),M=n(function(e){l.current&&(l.current.setVolume(e*100),f(e))}),w=function(t){l.current=t.target;var e=l.current,n=o("WAWebUserPrefsGeneral").getMediaVolumeSettings(),r=n.volume,a=n.muted,c=e.getDuration(),d=r!=null?r:e.getVolume()*.01,m=a!=null?a:e.isMuted(),p=e.getIframe().getBoundingClientRect(),_=p.width,f=p.height;s.current={duration:c,volume:d,muted:m,videoWidth:_,videoHeight:f},i.onLoadedMetadata(s.current),u.current=e.getCurrentTime(),$(),i.startTime!=null&&P(),r!=null&&M(r),a!=null&&N(a)},A=function(t){v.current=o("WAWebPttAudioChannels").MainAudioChannel.claim(b.current,R),i.onPlaying()},F=function(t){v.current==null||v.current(),i.onPause()},O=function(t){i.onEnded()},B=function(t){t.target.getPlayerState()!==h.PLAYING&&i.onPause()};m(function(){P()},[i.startTime]),r("useWAWebOnUnmount")(function(){v.current==null||v.current()}),p(a,function(){return{play:S,pause:R,setCurrentTime:L,getCurrentTime:E,setVolume:M,setMuted:N,getVolume:k,getDuration:I,getMuted:T}},[S,R,L,E,M,N,k,I,T]);var W=i.counterAbuseData,q=r("lodash").merge({},y,{playerVars:{autoplay:i.autoPlay?1:0,widget_referrer:C,origin:window.location.origin}},W!=null&&o("WAWebABProps").getABPropConfigValue("web_youtube_rcat_consumption_enabled")?{playerVars:{rct:W.counterAbuseToken,rctn:W.nonce}}:{});return d.jsx(o("WAWebYoutube.react").YouTube,{videoId:i.youtubeVideoId,opts:q,onReady:w,onPlay:A,onPause:F,onEnd:O,onError:i.onEnded,onStateChange:B})}b.displayName=b.name+" [from "+i.id+"]",l.default=b}),98);
__d("WAWebPipYoutubeVideoPlayer.react",["WAWebDomFullscreen","WAWebPipCloseButton.react","WAWebPipFullscreenToggleButton.react","WAWebPipShade.react","WAWebPipSharedVideoPlayer.react","WAWebPipVideoRefControls.react","WAWebPipYoutubeVideoPlayer.scss","WAWebPipYoutubeVideoTag.react","WAWebUA","WAWebVelocityTransitionGroup","lodash","react","useWAWebDebouncedCallback","useWAWebListener","useWAWebPrevious","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useEffect,m=u.useRef,p=u.useState;function _(e){var t=e.isFullscreenMode,n=e.isVideoPlaying,a=e.mouseDownCoorRef,i=e.mouseMoveRecently,l=e.onClose,s=e.onExposeIframeInPiP,u=e.onFullScreenToggle,d=e.ref,m=e.videoMetadata,p=e.videoRef,_=function(t){if(p.current){var e=t;m&&t>=m.duration-1&&m.duration>1&&(e=m.duration-1),p.current.setCurrentTime(e)}},f=null;if(m){var g,h="x1ey2m1c x78zum5 xvt47uu xbudbmw xexx8yu x5zjp28 x18d9i69 x162tt16 x10l6tqk xtijo5x x1hc1fzr x13dflua x19991ni xwji4o3";f=c.jsx("div",{ref:d,style:(g={},g[r("WAWebPipYoutubeVideoPlayer.scss").dimmed]=!i,g),children:c.jsx(o("WAWebPipVideoRefControls.react").VideoRefControls,{refVideo:p.current,videoMetadata:m,isFullscreenMode:t,isVideoPlaying:n,handleSetCurrentTimeByControls:_,controlsClassName:t?h:void 0,onFullscreenToggle:u,onClose:l,newPiPStyle:!0})}),t||(f=c.jsx("div",{ref:d,className:"x5yr21d x10l6tqk xh8yej3",onMouseDown:function(t){a.current={x:t.clientX,y:t.clientY}},onMouseUp:function(t){var e=t.clientX,n=t.clientY,r=a.current,o=r?r.x:void 0,i=r?r.y:void 0;o!=null&&i!=null&&Math.abs(e-o)+Math.abs(n-i)<4&&s(!0)},children:f}))}return f}_.displayName=_.name+" [from "+i.id+"]";function f(e){var t,n,a=e.onSetFullscreenToggleCallback,i=e.onRefSet,l=e.onVideoEnded,s=e.onError,u=e.startTime,f=e.onVideoMetadataChange,g=e.onClose,h=m(null),y=m(null),C=m(!1),b=m(null),v=p(void 0),S=v[0],R=v[1],L=p(!1),E=L[0],k=L[1],I=p(!1),T=I[0],D=I[1],x=p(!1),$=x[0],P=x[1],N=p(!1),M=N[0],w=N[1],A=p(!1),F=A[0],O=A[1],B=r("useWAWebPrevious")(E),W=r("useWAWebPrevious")(S);o("useWAWebListener").useListener(r("WAWebDomFullscreen"),"fullscreen_change",function(){r("WAWebDomFullscreen").isFullscreenMode()&&r("WAWebDomFullscreen").getFullscreenElement()===h.current?w(!0):r("WAWebDomFullscreen").isFullscreenMode()||w(!1)});var q=function(t){t.stopPropagation(),M?r("WAWebDomFullscreen").exitFullscreen():r("WAWebDomFullscreen").requestFullscreen(h.current)},U=r("useWAWebDebouncedCallback")(function(){P(!1)},o("WAWebPipSharedVideoPlayer.react").FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT);d(function(){a==null||a(q)},[]);var V=r("useWAWebStableCallback")(function(e){y.current=e,e!=null&&(i==null||i(e))}),H=function(){l&&l(),k(!1)},G=function(){s&&s()},z=function(){var e,t,n=(e=(t=y.current)==null?void 0:t.getCurrentTime())!=null?e:null;R(function(e){return e&&n!=null?babelHelpers.extends({},e,{currentTime:n}):e}),k(!1),C.current=!0},j=function(){var e,t,n=(e=(t=y.current)==null?void 0:t.getCurrentTime())!=null?e:null;R(function(e){return e&&n!=null?babelHelpers.extends({},e,{currentTime:n}):e}),k(!0),C.current=!0},K=function(t){var e=u!=null?u:0;R({duration:t.duration,currentTime:e,volume:t.volume,muted:t.muted,bufferedTime:0})},Q=function(t){R(function(e){return e&&babelHelpers.extends({},e,{volume:t.volume,muted:t.muted})})},X=function(t){if(C.current){C.current=!1;return}R(function(e){return e&&babelHelpers.extends({},e,{currentTime:t})})},Y=function(t){var e=t[0],n=e[1];R(function(e){return e&&babelHelpers.extends({},e,{bufferedTime:n})})};d(function(){(B!==E||!r("lodash").isEqual(W,S))&&(f==null||f(S,E))},[E,B,f,S,W]);var J=e.exposeIframeInPiP||F||M?null:c.jsx("div",{className:"x1ktv7sr x142x0oa xv7zg05 x12dgle5 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x166i9x0 x1gex1yb x1n7ce0x xqz8djb x5yr21d x1o0tod x10l6tqk x13vifvy xh8yej3"}),Z=c.jsxs("div",{className:"x10l6tqk x13vifvy xtijo5x x1ey2m1c x1o0tod",style:(t={},t[r("WAWebPipYoutubeVideoPlayer.scss").fullscreen]=M,t),children:[J,c.jsx(r("WAWebPipYoutubeVideoTag.react"),{ref:V,youtubeVideoId:e.youtubeVideoId,startTime:e.startTime,onEnded:H,onError:G,onLoadedMetadata:K,onPause:z,onPlaying:j,onProgress:Y,onTimeUpdate:X,onVolumeChange:Q,autoPlay:e.autoPlay,counterAbuseData:e.counterAbuseData})]}),ee=e.disablePiPControls!==!0||M?c.jsx(_,{videoMetadata:S,videoRef:y,mouseDownCoorRef:b,mouseMoveRecently:$,isVideoPlaying:E,isFullscreenMode:M,onFullScreenToggle:q,onClose:g,onExposeIframeInPiP:O}):null,te;o("WAWebUA").UA.isSafari||(te=c.jsx(r("WAWebPipFullscreenToggleButton.react"),{isFullscreenMode:M,onClick:q}));var ne=c.jsx(r("WAWebPipShade.react"),{theme:"full-rounded"}),re=M?c.jsxs(c.Fragment,{children:[Z,ee]}):c.jsxs(c.Fragment,{children:[Z,c.jsx(r("WAWebVelocityTransitionGroup"),{transitionName:"fade-fast",children:T&&$&&!F&&e.disablePiPControls!==!0?[ne,ee,te,c.jsx(r("WAWebPipCloseButton.react"),{isFullscreenMode:M,onClick:function(n){n.stopPropagation(),e.onClose()}},"close")]:null})]});return c.jsx("div",{ref:h,className:"xums3t4 x5yr21d xh8yej3",style:(n={},n[r("WAWebPipYoutubeVideoPlayer.scss").fullscreen]=M,n[r("WAWebPipYoutubeVideoPlayer.scss").redesign]=!0,n),onMouseEnter:function(t){if(F){if(o("WAWebUA").UA.isGecko&&T)return;O(!1)}D(!0)},onMouseLeave:function(t){D(!1)},onMouseDown:function(t){M&&t.stopPropagation()},onMouseMove:function(t){T||D(!0),$||P(!0),U()},children:re},"elementsWrapped")}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);
__d("WAWebPrimaryFeaturesBridgeApi",["WAWebPrimaryFeaturesModel"],(function(t,n,r,o,a,i,l){var e={setPrimaryFeatures:function(t){var e=t.primaryFeatures;o("WAWebPrimaryFeaturesModel").PrimaryFeatures.setPrimaryFeatures(e)}};l.PrimaryFeaturesBridgeApi=e}),98);
__d("WAWebPrivacyBridgeApi",["WAWebUserDisclosureCollection","WAWebUserDisclosureModel"],(function(t,n,r,o,a,i,l){var e={updateUserDisclosures:function(t){var e=t.userDisclosures,n=[];e.map(function(e){var t=new(r("WAWebUserDisclosureModel"))({id:e.id,accepted:e.accepted,lastUpdated:new Date});n.push(t)}),o("WAWebUserDisclosureCollection").UserDisclosureCollection.add(n,{merge:!0})}};l.PrivacyBridgeApi=e}),98);
__d("WAWebProfilePicThumbBridgeApi",["WAWebProfilePicThumbCollection"],(function(t,n,r,o,a,i,l){var e={removeProfilePicThumb:function(t){var e=t.wid,n=o("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.gadd(e);n.set({tag:void 0,eurl:void 0,previewEurl:void 0,previewDirectPath:void 0,fullDirectPath:void 0,filehash:void 0})},markProfilePicStale:function(t){var e=t.profilePicThumbWid,n=o("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.get(e);n&&n.markStale()}};l.ProfilePicThumbBridgeApi=e}),98);
__d("WAWebReachoutTimelockUnrestrictedModalLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","WAWebLoadingModal.react","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebReachoutTimelockUnrestrictedModal.react").__setRef("WAWebReachoutTimelockUnrestrictedModalLoadable").load();return e.ReachoutTimelockUnrestrictedModal}),"ReachoutTimelockUnrestrictedModal"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(r("WAWebLoadingModal.react"),{error:!!t.error})}});l.ReachoutTimelockUnrestrictedModalLoadable=c}),98);
__d("WAWebReachoutTimelockBridgeApi",["WAWebCmd","WAWebContactCollection","WAWebModalManager","WAWebReachoutTimelockUnrestrictedModalLoadable","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u={reachoutTimelockEnforcementLifted:function(t){var e=t.shouldPresentRestrictionsLiftedModal;e&&o("WAWebModalManager").ModalManager.open(s.jsx(o("WAWebReachoutTimelockUnrestrictedModalLoadable").ReachoutTimelockUnrestrictedModalLoadable,{})),o("WAWebCmd").Cmd.reachoutTimelockStateChange(),o("WAWebContactCollection").ContactCollection.forEach(function(e){e.set("canSendMsgWhileTimelocked",!0)})},reachoutTimelockEnforcementSet:function(){o("WAWebCmd").Cmd.reachoutTimelockStateChange()}};l.ReachoutTimelockBridgeApi=u}),98);
__d("WAWebReactionsFrontendUtils",["WAWebReactionsCollection"],(function(t,n,r,o,a,i,l){function e(e){return e.map(function(e){return!!o("WAWebReactionsCollection").ReactionsCollection.getSenderByMsgKey(e)})}l.hasReactionsInCollection=e}),98);
__d("WAWebUpdateOrphanReactionsMsgAction",["WALogger","WAWebReactionsCollection"],(function(t,n,r,o,a,i,l){var e;function s(t){t.forEach(function(t){var n=o("WAWebReactionsCollection").ReactionsCollection.get(t.parentMsgKey);n?o("WAWebReactionsCollection").ReactionsCollection.addOrUpdateReaction(t):o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["actions:checkUpdateForOrphanReactions Reaction Model does not exist for this parentMsg"])))})}l.checkUpdateForOrphanReactions=s}),98);
__d("WAWebReactionsBridgeApi",["WAWebReactionsFrontendUtils","WAWebUpdateLastAddOnPreviewChatAction","WAWebUpdateOrphanReactionsMsgAction"],(function(t,n,r,o,a,i,l){var e={checkUpdateForOrphanReactions:function(t){var e=t.updatedRecords;o("WAWebUpdateOrphanReactionsMsgAction").checkUpdateForOrphanReactions(e)},deleteModelsForLastAddOnPreview:function(t){var e=t.messagesIds;return o("WAWebUpdateLastAddOnPreviewChatAction").deleteModelsForLastAddOnPreview(e)},hasReactionsInCollection:function(t){var e=t.msgKeys;return o("WAWebReactionsFrontendUtils").hasReactionsInCollection(e)}};l.ReactionsBridgeApi=e}),98);
__d("WAWebResendGroupMsgMainThreadOnly",["WAWebCreateSendMsgRecord","WAWebGroupMsgSendUtils","WAWebOutgoingMessage","WAWebResendGroupMsg","WAWebSendMsgMetricReporter","WAWebSendMsgTypes","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,o,a,i,l,u){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i,l,s,u,c){var d=l.map(function(e){return o("WAWebWidFactory").createWid(e)}),m=yield o("WAWebCreateSendMsgRecord").createMsgRecord(e,t,n);if(m==null)throw r("err")("resendUserGroupMsgJob failed to deserialize msg from db");var p=yield o("WAWebGroupMsgSendUtils").getParticipantRecord(a),_=yield o("WAWebGroupMsgSendUtils").getGroupData(a.toString(),p,m),f=m.type===o("WAWebSendMsgTypes").SendMessageRecordType.Message?o("WAWebSendMsgMetricReporter").createMsgModelMetricReporter(m.data):o("WAWebSendMsgMetricReporter").createAddonMetricReporter(m.data);f.sendReporter=f.createSendReporter({isResend:!0,originalMessage:m.type==="message"?m.data:void 0});var g=o("WAWebOutgoingMessage").createOutgoingMessageProtobuf(o("WAWebOutgoingMessage").OutgoingMessageOriginType.ChatResend,m);return o("WAWebResendGroupMsg").resendGroupMsg({isDirect:i,msgRecord:m,msgProtobuf:g,groupData:_,ackTime:u,oldList:d,phash:s,metricReporter:f,serverAddressingMode:c})}),s.apply(this,arguments)}l.resendGroupMsgMainThreadOnly=e}),98);
__d("WAWebResendUserMsgMainThreadOnly",["WAWebCreateSendMsgRecord","WAWebOutgoingMessage","WAWebResendUserMsg","WAWebSendMsgMetricReporter","WAWebSendMsgTypes","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,o){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i){var l=a.map(function(e){return o("WAWebWidFactory").createWid(e)}),s=yield o("WAWebCreateSendMsgRecord").createMsgRecord(e,t,n);if(s==null)throw r("err")("resendUserMsgJob failed to deserialize msg from db");var u=s.type===o("WAWebSendMsgTypes").SendMessageRecordType.Message?o("WAWebSendMsgMetricReporter").createMsgModelMetricReporter(s.data):o("WAWebSendMsgMetricReporter").createAddonMetricReporter(s.data);u.sendReporter=u.createSendReporter({isResend:!0,originalMessage:s.type==="message"?s.data:void 0});var c=o("WAWebOutgoingMessage").createOutgoingMessageProtobuf(o("WAWebOutgoingMessage").OutgoingMessageOriginType.ChatResend,s);return o("WAWebResendUserMsg").resendUserMsg(s,c,l,i,u)}),s.apply(this,arguments)}l.resendUserMsgMainThreadOnly=e}),98);
__d("WAWebVerifiedBusinessNameCopyPnDataToLidRows",["WALogger","WAWebBizGatingUtils","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(!(!o("WAWebBizGatingUtils").isLidMigrationForVnameEnabled()||o("WAWebUserPrefsKeys").UserPrefs.VerifiedBusinessNameLidTableMigrationComplete)){var a=!1;yield o("WAWebModelStorageUtils").getStorage().lock(["verified-business-name"],(function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=n[0];try{o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["copyVerifiedNamePnDataToLidRows: start migration"])));var i=t.map(function(e){var t,n,r,a,i,l;if(e==null)return null;var s=o("WAWebWidFactory").createUserWidOrThrow(e==null?void 0:e.id);if(s.isLid())return null;var u=o("WAWebLidMigrationUtils").toPn(s),c=o("WAWebLidMigrationUtils").toLid(s);return c==null||(u==null?void 0:u.user)==null?null:{id:c.toString(),name:(t=e.name)!=null?t:e.name,isApi:(n=e.isApi)!=null?n:e.isApi,isSmb:(r=e.isSmb)!=null?r:e.isSmb,level:(a=e.level)!=null?a:e.level,privacyMode:(i=e.privacyMode)!=null?i:e.privacyMode,serial:(l=e.serial)!=null?l:e.serial}}).filter(Boolean);yield r.bulkCreateOrMerge(i),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["copyVerifiedNamePnDataToLidRows: end migration"]))),a=!0}catch(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["copyVerifiedNamePnDataToLidRows: error ",""])),e).sendLogs("verified-business-name-lid-migration"),a=!1}});return function(e){return r.apply(this,arguments)}})()),r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.VerifiedBusinessNameLidTableMigrationComplete,a)}}),d.apply(this,arguments)}l.copyVerifiedNamePnDataToLidRows=c}),98);
__d("WAWebRestoreBusinessInfo",["WALogger","WAWebApiBusinessProfile","WAWebBusinessProfileCollection","WAWebBusinessProfileCopyPnDataToLidRows","WAWebBusinessProfileTypes","WAWebChatCollection","WAWebSchemaBusinessProfile","WAWebSchemaVerifiedBusinessName","WAWebVerifiedBusinessNameCopyPnDataToLidRows","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("WAWebSchemaVerifiedBusinessName").getVerifiedBusinessNameTable().all();yield o("WAWebVerifiedBusinessNameCopyPnDataToLidRows").copyVerifiedNamePnDataToLidRows(t),t.forEach(function(t){var n;try{n=o("WAWebWidFactory").createUserWidOrThrow(t.id)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["restore-business-info: invalid wid"]))).sendLogs("restore-business-info: invalid wid");return}var r=o("WAWebChatCollection").ChatCollection.get(n);if(r){var a={isBusiness:!0,isEnterprise:t.isApi,verifiedName:t.name,verifiedLevel:c(t.level),privacyMode:t.privacyMode};r.contact.set(a)}});var n=yield o("WAWebSchemaBusinessProfile").getBusinessProfileTable().all();yield o("WAWebBusinessProfileCopyPnDataToLidRows").copyBusinessProfilePnDataToLidRows(n),n.forEach(function(e){var t=o("WAWebApiBusinessProfile").businessProfileFromDbRow(e);o("WAWebBusinessProfileCollection").BusinessProfileCollection.gadd(babelHelpers.extends({},t,{dataSource:"db"}))})}),u.apply(this,arguments)}function c(e){switch(e){case"unknown":return o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.UNKNOWN;case"low":return o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.LOW;case"high":return o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH}return o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.UNKNOWN}l.restoreBusinessInfo=s}),98);
__d("WAWebRestoreChatsAndMessages",["Promise","WAJobOrchestratorTypes","WALogger","WATimeUtils","WAWebABProps","WAWebApiChat","WAWebApiHydrateWidsUtil","WAWebBackendApi","WAWebChatCollection","WAWebChatComparator","WAWebChatGetters","WAWebChatMsgsCollection","WAWebDBAddOnProviders","WAWebDBMessageSerialization","WAWebDBMessageStoreUtils","WAWebDBMessageUtils","WAWebDbEncryptionKey","WAWebEventsWaitForOfflineDeliveryEnd","WAWebModelStorageInitialize","WAWebMsgCollection","WAWebMsgKey","WAWebNewsletterCollection","WAWebNewsletterGatingUtils","WAWebOrchestratorNonPersistedJob","WAWebPerformanceUtils","WAWebPromiseQueue","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebRestoreBusinessInfo","WAWebSchemaMessage","WAWebThreadMetadata","WAWebThreadMetadataUtil","WAWebWamOfflineResumeReporter","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T=20,D=5,x=100;function $(e,t){return e.reduce(function(e,n){var r,a=o("WAWebApiHydrateWidsUtil").hydrateWids(babelHelpers.extends({},n,{pendingInitialLoading:!0,isReadOnly:(r=n.isReadOnly)!=null?r:!1})),i=o("WAWebThreadMetadataUtil").getOfflineMetaPreviewForChat({chatTimestamp:t==null?void 0:t.chatTimestamp,chatId:a.id,accountLid:a.accountLid});return i!=null&&(a.previewT=i),a.id.isNewsletter()?e.newsletters.push(a):e.chats.push(a),e},{chats:[],newsletters:[]})}function P(){return N.apply(this,arguments)}function N(){return N=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreChatsAndMessages_start"),yield o("WAWebDbEncryptionKey").DbEncKeyStore.waitForFinalDbMsgEncKey(),o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] load DbEncKeyStore key"]))),o("WAWebModelStorageInitialize").initializeWithoutGKs().then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreChats_start"),o("WALogger").DEV(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] start load all chats"]))),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMGetChats_start");var e=yield o("WAWebApiChat").getAllChatsDeserialized();o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMGetChats_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMPopulateMatCache_start"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMPopulateMatCache_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMFilterChats_start");var t=o("WAWebThreadMetadata").getOfflineThreadMetaPreview(),n=$(e,t),a=n.chats,i=n.newsletters;o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineChatThreadCount(e.length),o("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] complete load all chats from storage"]))),a.sort(r("WAWebChatComparator")),o("WAWebChatCollection").ChatCollection.add(a,{merge:!0}),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMFilterChats_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreChats_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreChatsAndMessagesFirstChunk_start");var l=o("WAWebABProps").getABPropConfigValue("web_init_chat_batch_size")||x;o("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,{int:{web_init_chat_batch_size:l}}),o("WAWebNewsletterGatingUtils").isNewsletterEnabled()&&(i.sort(r("WAWebChatComparator")),r("WAWebNewsletterCollection")==null||r("WAWebNewsletterCollection").add(i,{merge:!0}),M(i,l)),o("WALogger").DEV(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] complete add all chats to collection"])));var s=yield M(a,l);return o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreChatsAndMessagesFirstChunk_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMUpdateDuplicatedLidThread_start"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMUpdateDuplicatedLidThread_end"),s})).then(o("WAWebRestoreBusinessInfo").restoreBusinessInfo).then(function(){o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreChatsAndMessages_end")}).catch(function(e){throw o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["restoreChatsAndMessages: failed with error: ",""])),e),e})}),N.apply(this,arguments)}function M(t,a){for(var i=(I||(I=n("Promise"))).resolve(),l=new(o("WAWebPromiseQueue")).PromiseQueue,d=function(m){var d=t.slice(m,m+a),p=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreChatsAndMessagesChunked start load "," - ",""])),m,m+a);var t=self.performance.now();m===0&&o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMChatMetadata_start");var n=yield w(d);m===0&&o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMChatMetadata_end"),o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] updateKeyMetadataForChats: ",", finish chat "," - ",""])),o("WAWebPerformanceUtils").getElapsedTimeMs(t),m,m+a),m===0&&o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMRestoreMessages_start"),yield A(n),m===0&&o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RCMRestoreMessages_end"),o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] restoreMessagesForChats: ",", finish chat "," - ",""])),o("WAWebPerformanceUtils").getElapsedTimeMs(t),m,m+a);var i=[];n.forEach(function(e){var t,n=e.chat,a=o("WAWebNewsletterGatingUtils").isNewsletterEnabled!=null&&o("WAWebNewsletterGatingUtils").isNewsletterEnabled()?(t=o("WAWebChatCollection").ChatCollection.get(n.id))!=null?t:r("WAWebNewsletterCollection")==null?void 0:r("WAWebNewsletterCollection").get(n.id):o("WAWebChatCollection").ChatCollection.get(n.id);a&&(a.set({pendingInitialLoading:!1}),o("WAWebChatGetters").getIsGroup(a)&&i.push(String(n.id)))}),yield o("WAWebBackendApi").frontendSendAndReceive("restoreGroupParticipantsForChats",{chatIds:i}),o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreChatsAndMessagesChunked ",", finish load "," - ",""])),o("WAWebPerformanceUtils").getElapsedTimeMs(t),m,m+a)});return function(){return t.apply(this,arguments)}})();m===0?i=l.enqueue(function(){return o("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("initialChatLoad",p,{priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted()}):l.enqueue(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield o("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd(),o("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("initialChatLoad",p).waitUntilCompleted()}))},m=0;m<t.length;m+=a)d(m);return i}function w(e){return(I||(I=n("Promise"))).all(e.map(function(e){var t=F(e);return o("WAWebDBMessageStoreUtils").getKeyMsgsFromChatHistory(e,t).then(function(n){var r=n.anchor,o=n.previewMsg,a=n.lastReceivedKey,i=babelHelpers.extends({},e,{unreadMsgAnchorId:t?r:void 0});return{chat:i,previewMsg:o,lastReceivedKey:a}})}))}function A(e){var t=O(e),r=t.tasks,o=t.lastMessageKeys;return r.push(G(o)),(I||(I=n("Promise"))).all(r)}function F(e){return e.t!=null&&o("WATimeUtils").happenedWithin(o("WATimeUtils").castToUnixTime(e.t),o("WATimeUtils").DAY_SECONDS)||e.pin!=null&&e.pin>0}function O(e){var t=[],n=[];return e.forEach(function(e){var a=e.chat,i=e.previewMsg,l=e.lastReceivedKey;if(F(a)||i&&i.id!==l){var s=self.performance.now();t.push(B(a,i).then(function(){if(o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] restoreMessagesForChat, id: ",", ",""])),a.id,o("WAWebPerformanceUtils").getElapsedTimeMs(s)),a.unreadMsgAnchorId){var e=r("WAWebMsgKey").fromString(a.unreadMsgAnchorId),t=o("WAWebMsgCollection").MsgCollection.get(e);if(!t){o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Unread anchor message is not in message collection."]))).devConsole("anchor id: "+a.unreadMsgAnchorId);return}var n=o("WAWebChatCollection").ChatCollection.get(o("WAWebWidFactory").createWidFromWidLike(a.id));n&&(n.unreadMsgAnchor=t)}}))}else n.push(String(l))}),{tasks:t,lastMessageKeys:n}}function B(e,t){return W.apply(this,arguments)}function W(){return W=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(!F(e)||e.unreadCount===0)return q(e,t);if(e.unreadCount>=T)return yield q(e,t),V(e);o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["restoreMessagesForChat: restoring last "," messages."])),e.unreadCount+D);var n=[];if(t){var r=o("WAWebDBMessageSerialization").messageFromDbRow(t),a=o("WAWebDBAddOnProviders").getAddOnProviderForFutureproofMsg(r);a!=null&&a.canRenderInUi(r)&&n.push(t.id.toString())}var i=yield o("WAWebDBMessageStoreUtils").queryChatVisibleMessageHelper(e.id+"_/",e.id+"_g",{reverse:!0},e.unreadCount+D,n);yield o("WAWebMsgCollection").MsgCollection.processMultipleMessages(o("WAWebWidFactory").createWidFromWidLike(e.id),i.map(function(e){return o("WAWebDBMessageSerialization").messageFromDbRow(e)}).reverse(),{pendingMsgsDone:!0,resume:!1,add:"last",isHistory:!0},"restoreMessagesForChat")}),W.apply(this,arguments)}function q(e,t){return U.apply(this,arguments)}function U(){return U=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,r=[];if(t!=null&&t.internalId!=null){var a=t.internalId,i=o("WAWebDBMessageSerialization").messageFromDbRow(t),l=o("WAWebDBAddOnProviders").getAddOnProviderForFutureproofMsg(i);t&&l!=null&&l.canRenderInUi(i)&&r.push(t.id.toString()),n=yield o("WAWebDBMessageStoreUtils").queryChatVisibleMessageHelper(a,e.id+"_g",{lowerInclusive:!0},void 0,r)}else{var s=1;n=yield o("WAWebDBMessageStoreUtils").queryChatVisibleMessageHelper(e.id+"_/",e.id+"_g",{reverse:!0},s)}o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["processPreviewMessageInChat: restoring "," message."])),n.length),o("WALogger").DEV(S||(S=babelHelpers.taggedTemplateLiteralLoose(["additional data: chat ",""])),e.id),o("WAWebMsgCollection").MsgCollection.processMultipleMessages(o("WAWebWidFactory").createWidFromWidLike(e.id),n.map(function(e){return o("WAWebDBMessageSerialization").messageFromDbRow(e,function(e){e.invis=!0})}),{pendingMsgsDone:!1,resume:!1,add:"last",isHistory:!0},"processPreviewMessageInChat")}),U.apply(this,arguments)}function V(e){return H.apply(this,arguments)}function H(){return H=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!e.unreadMsgAnchorId)return o("WALogger").WARN(R||(R=babelHelpers.taggedTemplateLiteralLoose(["unreadMsgAnchorId is not defined"]))),o("WALogger").DEV(L||(L=babelHelpers.taggedTemplateLiteralLoose(["chat: ",""])),e.id),(I||(I=n("Promise"))).resolve();yield o("WAWebSchemaMessage").getMessageTable().equals(["id"],e.unreadMsgAnchorId).then(function(t){if(t.length===0){o("WALogger").WARN(E||(E=babelHelpers.taggedTemplateLiteralLoose(["Unread anchor message does not exist in message table"]))),o("WALogger").DEV(k||(k=babelHelpers.taggedTemplateLiteralLoose(["anchor id: ",""])),e.unreadMsgAnchorId||"");return}var a=o("WAWebDBMessageUtils").getInChatMsgId(t[0].internalId||""),i=z(e,a,D),l=j(e,a,D),s=(I||(I=n("Promise"))).all([i,l]).then(function(e){var t=e[0],n=e[1];return[].concat(t,n)});return s.then(function(t){var n=t.length-D;if(!(n<0)){var a=t[t.length-D].id,i=t.map(function(e){return o("WAWebDBMessageSerialization").messageFromDbRow(e,function(e){e.invis=!0})});return o("WAWebMsgCollection").MsgCollection.processMultipleMessages(o("WAWebWidFactory").createWidFromWidLike(e.id),i,{pendingMsgsDone:!0,resume:!1,add:"unread",isHistory:!0,firstUnreadKey:r("WAWebMsgKey").fromString(a)},"processUnreadMessage",new(o("WAWebChatMsgsCollection")).ChatMsgsCollection)}})})}),H.apply(this,arguments)}function G(e){var t=self.performance.now();return o("WAWebSchemaMessage").getMessageTable().bulkGet(e).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){yield(I||(I=n("Promise"))).all(r.map(function(e){if(!e)return(I||(I=n("Promise"))).resolve();var t=o("WAWebDBMessageSerialization").messageFromDbRow(e,function(e){e.invis=!0});return o("WAWebMsgCollection").MsgCollection.processMultipleMessages(t.id.remote,[t],{pendingMsgsDone:!1,resume:!1,add:"last",isHistory:!0},"loadLastMessagesFromDb")})),o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] loadLastMessagesFromDB, ",", load "," messages"])),o("WAWebPerformanceUtils").getElapsedTimeMs(t),e.length)});return function(e){return r.apply(this,arguments)}})()).catch(function(e){throw o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["loadLastMessagesFromDB: failed with error: ",""])),e),e})}function z(e,t,n){var r={lowerInclusive:!0,upperInclusive:!1},a=o("WAWebDBMessageUtils").beginningOfChat(o("WAWebWidFactory").createWid(e.id)),i=o("WAWebDBMessageUtils").craftInternalId(e.id,t);return o("WAWebDBMessageStoreUtils").queryChatVisibleMessageHelper(a,i,babelHelpers.extends({},r,{reverse:!0}),D).then(function(e){return e.reverse()})}function j(e,t,n){var r={lowerInclusive:!0,upperInclusive:!1};return o("WAWebDBMessageStoreUtils").queryChatVisibleMessageHelper(o("WAWebDBMessageUtils").craftInternalId(e.id,t),o("WAWebDBMessageUtils").endOfChat(o("WAWebWidFactory").createWid(e.id)),r,D)}l.restoreChatsAndMessages=P}),98);
__d("WAWebRestoreGroupsAndContacts",["Promise","WALogger","WAWebApiContact","WAWebApiHydrateWidsUtil","WAWebChatCollection","WAWebContactCollection","WAWebGroupMetadataCollection","WAWebGroupQueryBridge","WAWebLidAwareContactsDB","WAWebModelStorageInitialize","WAWebPerformanceUtils","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebSchemaGroupMetadata","WAWebWamMemoryStat","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d;function m(){return o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreGroupsAndContacts_start"),o("WAWebModelStorageInitialize").initializeWithoutGKs().then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] restoreGroupsAndContacts: start"])));var t=self.performance.now();o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreContactsReadByLid_start");var a=r("WAWebLidAwareContactsDB").all().then((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] restoreContactsPromise: got "," contacts from db"])),o("WAWebWamMemoryStat").roundIntForMetrics(e.length)),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"WarmupAllLidMappings_start"),yield o("WAWebApiContact").warmUpAllLidPnMappings(e),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"WarmupAllLidMappings_end"),o("WAWebContactCollection").ContactCollection.add(e.map(o("WAWebApiHydrateWidsUtil").hydrateWids),{silent:!0,merge:!0}),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreContactsReadByLid_end"),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] restoreContactsPromise: restored "," contacts, took ",""])),o("WAWebWamMemoryStat").roundIntForMetrics(e.length),o("WAWebPerformanceUtils").getElapsedTimeMs(t)),e});return function(t){return e.apply(this,arguments)}})());o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreGroups_start");var i=o("WAWebSchemaGroupMetadata").getGroupMetadataTable().all().then(function(e){r("WAWebGroupMetadataCollection").add(e.map(o("WAWebApiHydrateWidsUtil").hydrateWids),{merge:!0}),e.forEach(function(e){var t=o("WAWebWidFactory").createWidFromWidLike(e.id);e.isParentGroup===!0&&o("WAWebChatCollection").ChatCollection.gadd({id:t,isReadOnly:!1}),o("WAWebGroupQueryBridge").updateSubject(t,e.subject)}),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage] restoreGroupMetadataPromise: restored "," groups, took ",""])),o("WAWebWamMemoryStat").roundIntForMetrics(e.length),o("WAWebPerformanceUtils").getElapsedTimeMs(t)),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreGroups_end")});return(d||(d=n("Promise"))).all([a,i])})).then(function(){o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreGroupsAndContacts_end")})}l.restoreGroupsAndContacts=m}),98);
__d("WAWebRestoreProfilePictures",["WALogger","WAWebApiHydrateWidsUtil","WAWebPerformanceUtils","WAWebProfilePicThumbCollection","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebSchemaProfilePicThumb","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=self.performance.now();o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreProfilePictures_start");var n=yield o("WAWebSchemaProfilePicThumb").getProfilePicThumbTable().all(),r=[],a=[];n.forEach(function(e){var t=o("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.get(e.id);t!=null||o("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.isProfilePicRefreshNeeded(e.timestamp)?a.push(e.id):r.push(e)}),a.length>0&&o("WAWebSchemaProfilePicThumb").getProfilePicThumbTable().bulkRemove(a);var i=r.map(function(e){return babelHelpers.extends({},o("WAWebApiHydrateWidsUtil").hydrateWids(e),{stale:!1,eurlStale:!1})});o("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.add(i,{silent:!0,merge:!1}),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"RestoreProfilePictures_end"),o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreProfilePics: ",", restore "," picture urls"])),o("WAWebPerformanceUtils").getElapsedTimeMs(t),i.length)}),u.apply(this,arguments)}l.restoreProfilePictures=s}),98);
__d("WAWebSetArchiveChatAction",["fbt","Promise","WAAbortError","WALogger","WAWebActionToast.react","WAWebChatArchiveBridge","WAWebMiscErrors","WAWebNoop","WAWebStateUtils","WAWebToastManager","react"],(function(t,n,r,o,a,i,l,s){var e,u,c,d=c||(c=r("react"));function m(e,t,n){return p(o("WAWebStateUtils").unproxy(e),t,n)}function p(t,a,i,l){if(l===void 0&&(l=o("WAWebActionToast.react").genId()),t.archive===a)return(u||(u=n("Promise"))).reject(new(o("WAWebMiscErrors")).ActionError);var c=t.promises;if(c.setArchive)return c.setArchive.promise;var m=t.getLastMsgKeyForAction(),_=new AbortController,f=_.signal,g=o("WAWebChatArchiveBridge").sendConversationArchive(t.id,a,m),h=a?new(o("WAWebActionToast.react")).ActionType(s._(/*BTDS*/"Archiving chat")):new(o("WAWebActionToast.react")).ActionType(s._(/*BTDS*/"Unarchiving chat")),y=g.then(function(e){if(f.aborted)throw new(o("WAAbortError")).AbortError;var n;if(e.status===200)return n=a?s._(/*BTDS*/"Chat archived"):s._(/*BTDS*/"Chat unarchived"),new(o("WAWebActionToast.react")).ActionType(n,{actionText:s._(/*BTDS*/"Undo"),actionHandler:function(){return p(t,!a,i,l)}});if(e.status>=400)return a?new(o("WAWebActionToast.react")).ActionType(s._(/*BTDS*/"Couldn't archive chat.")):new(o("WAWebActionToast.react")).ActionType(s._(/*BTDS*/"Couldn't unarchive chat."))}).catch(o("WAAbortError").catchAbort(r("WAWebNoop"))).catch(function(n){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["models:chat:setArchive dropped"]))).devConsole(n);var r=a?s._(/*BTDS*/"Couldn't archive chat."):s._(/*BTDS*/"Couldn't unarchive chat.");return new(o("WAWebActionToast.react")).ActionType(r,{actionText:s._(/*BTDS*/"Try again."),actionHandler:function(){return p(t,a,i,l)}})});i&&o("WAWebToastManager").ToastManager.open(d.jsx(o("WAWebActionToast.react").ActionToast,{id:l,initialAction:h,pendingAction:y}));var C=g.then(function(e){e.status===200&&(t.archive=a,a&&(t.pin=void 0))}).finally(function(){delete c.setArchive}),b={promise:C,abortController:_,archive:a};return c.setArchive=b,C}l.setArchive=m}),226);
__d("WAWebSocketBridgeApi",["WAWebCmd","WAWebCurrentUser","WAWebEnvironment","WAWebSocketModel"],(function(t,n,r,o,a,i,l){var e={socketLogout:function(t){var e=t.reason;r("WAWebEnvironment").isWindows&&o("WAWebCurrentUser").isEmployee()?o("WAWebCmd").Cmd.unexpectedLogoutModal(e):o("WAWebSocketModel").Socket.logout(e)},addStartingLogoutListener:function(t){o("WAWebCmd").Cmd.on("starting_logout",t)},removeStartingLogoutListener:function(t){o("WAWebCmd").Cmd.off("starting_logout",t)}};l.SocketBridgeApi=e}),98);
__d("WAWebStatusBridgeApi",["WAWebStatusCollection"],(function(t,n,r,o,a,i,l){var e={handleStatusUpdate:function(t){var e=t.rawMsg,n=t.isMsgUpdate;return o("WAWebStatusCollection").StatusCollection.handleUpdate(e,n)},handleReadStatus:function(t){var e=t.msgKeys;for(var n of e){var r=n.participant,a=r&&o("WAWebStatusCollection").StatusCollection.get(r);a&&a.handleReadStatus(n)}}};l.StatusBridgeApi=e}),98);
__d("WAWebSyncdBridgeApi",["WAWebSyncdDbCallbacksApi","WAWebSyncdKeyCallbacksApi","WAWebSyncdOrphan","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e={checkOrphanMutations:function(t){var e=t.msgIds,n=t.chatIds;return o("WAWebSyncdOrphan").checkOrphanMutations(e,n)},handleSyncdFatal:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return o("WAWebSyncdDbCallbacksApi").handleSyncdFatal()});function t(){return e.apply(this,arguments)}return t})(),getDeviceFingerprint:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return o("WAWebSyncdKeyCallbacksApi").getDeviceFingerprint()});function t(){return e.apply(this,arguments)}return t})()};l.SyncdBridgeApi=e}),98);
__d("WAWebTextStatusBridgeApi",["WAWebTextStatusCollection","WAWebUserPrefsMeUser","WAWebWidFactory"],(function(t,n,r,o,a,i,l){var e={setMyStatus:function(t){var e=t.status,n=o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow();o("WAWebTextStatusCollection").TextStatusCollection.assertGet(o("WAWebWidFactory").asUserWidOrThrow(n)).status=e!=null?e:o("WAWebTextStatusCollection").getDefaultTextStatus()}};l.TextStatusBridgeApi=e}),98);
__d("WAWebUnreadMentionMetadataBridgeApi",["WAWebChatCollection","WAWebGroupUnreadMessageType","WAWebMsgGetters","WAWebUnreadMentionModel"],(function(t,n,r,o,a,i,l){var e={processAndGetUnreadMentionsInfo:function(t){var e=t.filteredMsgs,n=new Map,r=new Map;return e.forEach(function(e){if(o("WAWebMsgGetters").getIsImportantMessage(e)){var t=e.id.remote.toString(),a=0;if(r.has(t)){var u;a=(u=r.get(t))!=null?u:0}else{var i,l,s=o("WAWebChatCollection").ChatCollection.get(t);a=(i=s==null||(l=s.groupMetadata)==null?void 0:l.unreadMentionMetadata.pendingUnreadMentionCount)!=null?i:0,r.set(t,a)}if(a>0){r.set(t,a-1);var c={id:e.id.toString(),timestamp:e.t};if(n.has(t)){var d;(d=n.get(t))==null||d.push(c)}else n.set(t,[c])}}}),{unreadMentionsToAdd:n,pendingUnreadMentionsMap:r}},getChatIdsNeedToBeDeletedFromUnreadMentionInfo:function(t){var e=t.unreadMentionsToAdd,n=t.pendingUnreadMentionsMap,a=[];return e.forEach(function(e,t){var i,l,s=o("WAWebChatCollection").ChatCollection.get(t),u=(i=n.get(t))!=null?i:0,c=s==null||(l=s.groupMetadata)==null?void 0:l.unreadMentionMetadata;if((c==null?void 0:c.pendingUnreadMentionCount)===0||s!=null&&s.hasChatBeenOpened){a.push(t);return}if(c&&c.pendingUnreadMentionCount>0){c.pendingUnreadMentionCount=u;var d=e.map(function(e){return new(r("WAWebUnreadMentionModel"))({id:e.id.toString(),timestamp:e.timestamp})});c.addUnreadMentions(d,o("WAWebGroupUnreadMessageType").UnreadMessageType.HISTORYC_SYNC_CHUNK)}}),a},updateUnreadMentionMetadataByAdding:function(t){var e,n=t.chatId,a=t.newUnreadMentions,i=t.pendingUnreadMentionCount,l=o("WAWebChatCollection").ChatCollection.get(n),s=l==null||(e=l.groupMetadata)==null?void 0:e.unreadMentionMetadata,u=a.map(function(e){return new(r("WAWebUnreadMentionModel"))({id:e.id.toString(),timestamp:e.timestamp})});s&&s.pendingUnreadMentionCount>0&&(s.pendingUnreadMentionCount=i,s.addUnreadMentions(u,o("WAWebGroupUnreadMessageType").UnreadMessageType.HISTORYC_SYNC_CHUNK))}};l.UnreadMentionMetadataBridgeApi=e}),98);
__d("WAWebVerifiedNameBridgeApi",["WAWebBizCreateBizStateChangeNotificationMsgsAction"],(function(t,n,r,o,a,i,l){var e={generateAndUpdatePrivacySystemMessages:function(t){var e=t.wid,n=t.previousState,r=t.currentState,a=t.shouldRunMATonWid;return o("WAWebBizCreateBizStateChangeNotificationMsgsAction").createBizStateChangeNotificationMsgs(e,n,r,a)}};l.VerifiedNameBridgeApiType=e}),98);
__d("WAWebVoipActionWriteCallLogOfferNotice",["WATimeUtils","WAWebCallLogUtils","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","WAWebViewMode.flow","WAWebVoipActionWriteCallLogImpl","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.callCreatorWid,n=e.callOutcome,a=e.offerTime,i=e.isVideo,l=e.silenceReason,s=e.isGroup,u=e.groupJid,c=e.callId,d=e.isOffline,m=yield o("WAWebCallLogUtils").getCallLogTargetDetails({callCreatorWid:t,callId:c,groupJid:u}),p=m.msgKeyId,_=m.fromMe,f=m.callCreatorUserWid,g=m.chatId,h=d===!0||a==null||!o("WATimeUtils").sameDay(o("WATimeUtils").castToUnixTime(a),o("WATimeUtils").unixTime()),y,C={type:o("WAWebMsgType").MSG_TYPE.CALL_LOG,viewMode:h?o("WAWebViewMode.flow").ViewModeType.CALL_LOG_OFFLINE_RESUME:o("WAWebViewMode.flow").ViewModeType.VISIBLE,kind:o("WAWebMsgType").MsgKind.CallLog,from:f,callOutcome:n,callSilenceReason:l,isVideoCall:i,callCreator:t,t:a!=null?a:o("WATimeUtils").unixTime()},b={type:o("WAWebMsgType").MSG_TYPE.UNKNOWN,viewMode:o("WAWebViewMode.flow").ViewModeType.VISIBLE,kind:o("WAWebMsgType").MsgKind.Unknown,from:f,futureproofType:o("WAWebMsgType").MSG_TYPE.CALL_LOG,t:a!=null?a:o("WATimeUtils").unixTime()},v=s&&u?u:g;s&&c!=null?u&&(l==="vc_wave_all"?y=babelHelpers.extends({id:new(r("WAWebMsgKey"))({remote:v,fromMe:_,id:p,participant:t}),to:u,author:t},b):y=babelHelpers.extends({id:new(r("WAWebMsgKey"))({remote:g,fromMe:_,id:p}),to:u,author:t},C)):l==="vc_wave_all"?y=babelHelpers.extends({id:new(r("WAWebMsgKey"))({remote:v,fromMe:_,id:p}),to:o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow()},b):y=babelHelpers.extends({id:new(r("WAWebMsgKey"))({remote:g,fromMe:_,id:p}),to:o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow()},C),y!=null&&(yield o("WAWebVoipActionWriteCallLogImpl").writeVoipCallLogMessageImpl(v,y,d===!0))}),s.apply(this,arguments)}l.generateCallLogOfferNotice=e}),98);
__d("WAWebVoipActionWebHandleIncomingSignalingMessage",["WALogger","WAWebCallCollection","WAWebCallLogMsgData.flow","WAWebVoipActionWriteCallLogOfferNotice","WAWebVoipSignalingEnums","WAWebVoipWaCallEnums"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=o("WAWebVoipSignalingEnums").TYPE_NAME[t.type];o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(['voip:handleIncomingSignalingMsg: type: "','" msg: '])),a).devConsole(t);var i=r("WAWebCallCollection").processIncomingCall(t.call_id,t.peer_jid,{isVideo:t.isVideoCall,offerTime:t.t,isSilenced:!!t.silence_reason,offerReceivedWhileOffline:t.is_offline,groupWid:t.group_jid});if(!i){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["voip:voip_common_disabled: Received signaling msg type "," but could not find call for call ID"])),t.type).devConsole(t.call_id);return}switch(t.type){case o("WAWebVoipSignalingEnums").TYPE.OFFER:if(t.t!=null&&(i.offerTime=t.t),i.isVideo=!!t.isVideoCall,i.setState(o("WAWebVoipWaCallEnums").CallState.ReceivedCall),i.isVoiceChat=t.silence_reason==="vc_init"||t.silence_reason==="vc_wave_all",i.silenceReason=t.silence_reason,t.silence_reason==="vc_wave_all"){var l=i.isGroup?{isGroup:!0,groupJid:i.groupJid}:{isGroup:!1};o("WAWebVoipActionWriteCallLogOfferNotice").generateCallLogOfferNotice(babelHelpers.extends({callCreatorWid:t.peer_jid,offerTime:i.offerTime,isVideo:i.isVideo,silenceReason:t.silence_reason,callId:t.call_id,isOffline:t.is_offline,callOutcome:o("WAWebCallLogMsgData.flow").CallOutcome.Missed},l))}break;case o("WAWebVoipSignalingEnums").TYPE.TERMINATE:{if(i.isVoiceChat){var u;t.silence_reason=(u=i.silenceReason)!=null?u:""}i.setState(o("WAWebVoipWaCallEnums").CallState.CallStateEnding);var c=n.maybeAttrString("reason"),d=c==="group_call_ended",m=d?{isGroup:!0,groupJid:i.groupJid}:{isGroup:!1},p;switch(c){case"group_call_ended":case"timeout":case void 0:case null:p=o("WAWebCallLogMsgData.flow").CallOutcome.Missed;break;case"accepted_elsewhere":p=o("WAWebCallLogMsgData.flow").CallOutcome.AcceptedElsewhere;break;case"rejected_elsewhere":p=o("WAWebCallLogMsgData.flow").CallOutcome.Rejected;break}p&&o("WAWebVoipActionWriteCallLogOfferNotice").generateCallLogOfferNotice(babelHelpers.extends({callCreatorWid:t.call_creator,offerTime:i.offerTime,isVideo:i.isVideo,silenceReason:t.silence_reason,callId:t.call_id,isOffline:t.is_offline,callOutcome:p},m));break}}}l.handleVoipWebIncomingSignalingMessageAction=u}),98);
__d("WAWebVoipActionWriteCallLogCallStateChanged",["WALogger","WATimeUtils","WAWebCallLogMsgData.flow","WAWebCallLogUtils","WAWebMsgCollection","WAWebMsgKey","WAWebMsgType","WAWebVoipActionWriteCallLogImpl","asyncToGeneratorRuntime","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{var n,a;if(!r("isStringNullOrEmpty")(t.linkToken)){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["voip: skipping call log for call link, token: ",""])),t.linkToken);return}if(t.creatorJid==null){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["voip: skipping call log, creator jid is null"])));return}var i=yield o("WAWebCallLogUtils").getCallLogTargetDetails({callCreatorWid:t.creatorJid,callId:t.callId,groupJid:t.groupJid,participants:t.participants.map(function(e){return e.jid})}),l=i.msgKeyId,d=i.fromMe,m=i.callCreatorUserWid,p=i.chatId,_=i.participant,f=i.viewMode;if(t.creatorDeviceJid==null){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["voip: skipping call log, creator device jid is null"])));return}var g=t.creatorDeviceJid,h=new(r("WAWebMsgKey"))({remote:p,participant:_,fromMe:d,id:l}),y=o("WAWebMsgCollection").MsgCollection.get(h),C={id:h,type:o("WAWebMsgType").MSG_TYPE.CALL_LOG,kind:o("WAWebMsgType").MsgKind.CallLog,viewMode:f,callOutcome:(function(e,n){return e==null||e===o("WAWebCallLogMsgData.flow").CallOutcome.Unknown?o("WAWebCallLogUtils").getCallOutcomeFromCallState(t.callState):(n=y==null?void 0:y.callOutcome)!=null?n:o("WAWebCallLogUtils").getCallOutcomeFromCallState(t.callState)})(y==null?void 0:y.callOutcome),isVideoCall:t.videoEnabled,callCreator:g,from:m,to:p,t:(n=y==null?void 0:y.t)!=null?n:o("WATimeUtils").unixTime(),callDuration:(a=y==null?void 0:y.callDuration)!=null?a:0,callParticipants:t.participants.map(function(e){return{participant:e.jid,outcome:e.state}})};return o("WAWebVoipActionWriteCallLogImpl").writeVoipCallLogMessageImpl(p,C,!1)}catch(e){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["voip: writeCallLog: callStateChanged: ",""])),e).tags("voip").devConsole(e).sendLogs("voip: writeCallLog: callStateChanged")}}),m.apply(this,arguments)}l.generateCallLogFromCallStateChangedEvent=d}),98);
__d("WAWebVoipActionWriteCallLogEventCallEnding",["WALogger","WAWebCallLogUtils","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","WAWebViewMode.flow","WAWebVoipActionWriteCallLogImpl","WAWebVoipOngoingCallCollection","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{var n=t.peerJid,a=t.fromMe,i=t.groupJid,l=t.callId,s=t.callLinkToken,u=t.isCallLink,c=t.startTime,d=t.connectTime,m=t.result,p=t.videoCall,_=t.participantEntries,f=t.callCreatorJid,g=o("WAWebVoipOngoingCallCollection").WAWebVoipOngoingCallCollection.getByCallId(l),h=f!=null?f:a?o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow():n,y=yield o("WAWebCallLogUtils").getCallLogTargetDetails({callCreatorWid:h,peerWid:n,callId:l,groupJid:i,participants:_.map(function(e){return e.jid}).filter(Boolean)}),C=y.msgKeyId,b=y.callCreatorUserWid,v=y.chatId,S=y.participant;if(g!=null){var R=babelHelpers.extends({},g.toJSON(),{callDuration:d==null?g.callDuration:d,finalCallOutcome:o("WAWebCallLogUtils").getCallOutcomeFromCallResultNative(m)});yield o("WAWebVoipActionWriteCallLogImpl").writeVoipCallLogMessageImpl(v,R,!1)}else{if(i!=null)return;var L={id:new(r("WAWebMsgKey"))({remote:v,participant:S,fromMe:a,id:C}),type:o("WAWebMsgType").MSG_TYPE.CALL_LOG,kind:o("WAWebMsgType").MsgKind.CallLog,viewMode:o("WAWebViewMode.flow").ViewModeType.VISIBLE,callOutcome:o("WAWebCallLogUtils").getCallOutcomeFromCallResultNative(m),isVideoCall:p!=null?p:!1,callCreator:h,callDuration:d==null?void 0:d,from:b,t:c,callParticipants:_.map(function(e){return{participant:e.jid,outcome:e.result}}),to:v,isCallLink:u!=null?u:!1,callLinkToken:s!=null?s:void 0,finalCallOutcome:o("WAWebCallLogUtils").getCallOutcomeFromCallResultNative(m)};yield o("WAWebVoipActionWriteCallLogImpl").writeVoipCallLogMessageImpl(v,L,!1)}}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["generateCallLogFromCallSyncRecord: failed to generate call log message from syncd: ",""])),t).tags("nexus-voip").devConsole(t).sendLogs("generate-call-log-message-syncd-failed")}}),u.apply(this,arguments)}l.generateCallLogFromNativeCallEndingEvent=s}),98);
__d("WAWebVoipActionWriteCallLogEventCallMissed",["WALogger","WATimeUtils","WAWebCallLogMsgData.flow","WAWebCallLogUtils","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","WAWebVoipActionWriteCallLogImpl","WAWebVoipOngoingCallCollection","WAWebVoipWaCallEnums","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{var n=t.CallId,a=t.PeerUserJid,i=t.GroupJid,l=t.IsVideoCall,u=t.CallParticipantInfos,c=t.TimeElapsedSinceCallOffer,d=a!=null?o("WAWebUserPrefsMeUser").isMeAccount(a):!1,m=d?o("WAWebCallLogMsgData.flow").CallOutcome.Completed:o("WAWebCallLogMsgData.flow").CallOutcome.Missed,p=o("WAWebVoipOngoingCallCollection").WAWebVoipOngoingCallCollection.getByCallId(n),_,f;if(p!=null)_=babelHelpers.extends({},p.toJSON(),{callOutcome:m,isVideoCall:l}),f=_.to,o("WAWebVoipOngoingCallCollection").WAWebVoipOngoingCallCollection.remove(_.id);else if(a!=null){var g=yield o("WAWebCallLogUtils").getCallLogTargetDetails({callId:n,peerWid:a,groupJid:i,callCreatorWid:a}),h=g.msgKeyId,y=g.participant,C=g.viewMode,b=g.chatId;f=b,_={id:new(r("WAWebMsgKey"))({remote:f,participant:y,fromMe:d,id:h}),type:o("WAWebMsgType").MSG_TYPE.CALL_LOG,kind:"callLog",callOutcome:m,isVideoCall:l,callParticipants:u!=null&&u.length>0?u.map(function(e){return{participant:e.jid,outcome:e.result}}):[{participant:a,outcome:o("WAWebVoipWaCallEnums").CallParticipantState.Terminated}],to:f,from:a,t:o("WATimeUtils").castToUnixTime(c!=null?(Date.now()-c)/1e3:Date.now()/1e3),viewMode:C}}else{o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["generateCallLogFromEventCallMissed: Cannot create call log entry without PeerUserJid"]))).tags("nexus-voip").sendLogs("generate-call-log-event=call-missed-no-peer");return}yield o("WAWebVoipActionWriteCallLogImpl").writeVoipCallLogMessageImpl(f,_,!1)}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["generateCallLogFromEventCallMissed: failed to generate call log message for call missed event: ",""])),e).tags("nexus-voip").devConsole(e).sendLogs("generate-call-log-event=call-missed")}}),c.apply(this,arguments)}l.generateCallLogFromEventCallMissed=u}),98);
__d("WAWebVoipActionWriteCallLogEventGroupInfoChanged",["WALogger","WAWebCallLogMsgData.flow","WAWebVoipActionWriteCallLogImpl","WAWebVoipCallLogWriteMutex","WAWebVoipOngoingCallCollection","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield o("WAWebVoipCallLogWriteMutex").WACallLogWriteMutex.acquire();try{var a,i=t.CallId,l=t.CallParticipants,s=o("WAWebVoipOngoingCallCollection").WAWebVoipOngoingCallCollection.getByCallId(i);if(s==null)throw r("err")("generateCallLogFromEventGroupInfoChanged: Expected to find existing ongoing call");var u=babelHelpers.extends({},s.toJSON(),{callOutcome:o("WAWebCallLogMsgData.flow").CallOutcome.Ongoing,callParticipants:(a=l==null?void 0:l.map(function(e){return{participant:e.participant,outcome:e.outcome}}))!=null?a:s.callParticipants}),c=u.to,d=yield o("WAWebVoipActionWriteCallLogImpl").writeVoipCallLogMessageImpl(c,u,!1);d&&o("WAWebVoipOngoingCallCollection").WAWebVoipOngoingCallCollection.add(d,{merge:!0})}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["generateCallLogFromEventGroupInfoChanged: failed to generate call log message for group info changed event: ",""])),t).tags("nexus-voip").devConsole(t).sendLogs("generate-call-log-event-group-info-changed-failed")}finally{n.release()}}),u.apply(this,arguments)}l.generateCallLogFromEventGroupInfoChanged=s}),98);
__d("WAWebVoipActionWriteCallLogEventUpdate1to1",["WALogger","WATimeUtils","WAWebCallLogMsgData.flow","WAWebCallLogUtils","WAWebMsgKey","WAWebMsgType","WAWebUserPrefsMeUser","WAWebVoipActionWriteCallLogImpl","WAWebVoipWaCallEnums","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e===o("WAWebVoipWaCallEnums").CallLogResult.AcceptedElsewhere?o("WAWebCallLogMsgData.flow").CallOutcome.AcceptedElsewhere:e===o("WAWebVoipWaCallEnums").CallLogResult.Rejected||e===o("WAWebVoipWaCallEnums").CallLogResult.Unavailable||e===o("WAWebVoipWaCallEnums").CallLogResult.Canceled||e===o("WAWebVoipWaCallEnums").CallLogResult.Missed?o("WAWebCallLogMsgData.flow").CallOutcome.Missed:e===o("WAWebVoipWaCallEnums").CallLogResult.Failed?o("WAWebCallLogMsgData.flow").CallOutcome.Failed:o("WAWebCallLogMsgData.flow").CallOutcome.Completed}function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{var n=t.CallId,a=t.Result,i=t.PeerJid,l=o("WAWebUserPrefsMeUser").isMeAccount(i),u=yield o("WAWebCallLogUtils").getCallLogTargetDetails({callId:n,peerWid:i,groupJid:null,callCreatorWid:i}),c=u.msgKeyId,d=u.participant,m=u.viewMode,p=u.chatId,_=s(a),f={id:new(r("WAWebMsgKey"))({remote:p,participant:d,fromMe:l,id:c}),type:o("WAWebMsgType").MSG_TYPE.CALL_LOG,kind:"callLog",callOutcome:_,isVideoCall:!1,to:p,from:i,t:o("WATimeUtils").castToUnixTime(Date.now()/1e3),viewMode:m};yield o("WAWebVoipActionWriteCallLogImpl").writeVoipCallLogMessageImpl(p,f,!1)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["generateCallLogFromEventUpdate1to1: failed to generate call log message for update 1to1 call event: ",""])),t).tags("nexus-voip").devConsole(t).sendLogs("generate-call-log-event=update-1to1")}}),c.apply(this,arguments)}l.generateCallLogFromEventUpdate1to1=u}),98);
__d("WAWebVoipUiManager",["WALogger","WAWebCallCollection","WAWebPipController","WAWebVoipUiPopoutWindowPortalContainer.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=!1;function p(){m||(r("WAWebCallCollection").on("change:activeCall",f),m=!0)}function _(){r("WAWebCallCollection").off("change:activeCall",f),m=!1}function f(){r("WAWebCallCollection").activeCall==null?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["voip: Active call ended, closing windows"]))),r("WAWebPipController").closePiP(),h({callEnded:!0}),_()):r("WAWebCallCollection").activeCall.msg?(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["voip: Active call changed, opening PiP window"]))),r("WAWebPipController").openVoipUiPiP(r("WAWebCallCollection").activeCall.msg)):(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["voip: Active call changed, but msg not ready. Waiting to open PiP window"]))),r("WAWebCallCollection").activeCall.on("change:msg",f))}function g(){var e,t=(e=r("WAWebCallCollection").activeCall)==null?void 0:e.msg;if(!t){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["voip: UI manager: Open popout window called without active call log msg"])));return}o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["voip: UI manager: Opening popout window"]))),o("WAWebVoipUiPopoutWindowPortalContainer.react").WAWebVoipUiPopoutWindowEventEmitter.trigger("setPopoutWindowProps",t)}function h(e){o("WAWebVoipUiPopoutWindowPortalContainer.react").WAWebVoipUiPopoutWindowEventEmitter.trigger("closePopoutWindow",e)}l.setupVoipActiveCallChangeListener=p,l.openVoipUiPopoutWindow=g,l.closeVoipUiPopoutWindow=h}),98);
__d("WAWebVoipWebLoadable",["JSResourceForInteraction","WALogger","WAWebLazyLoadedRetriable","WAWebVoipPersistentFS","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u=null,c=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(u!=null)return u;var e=yield r("JSResourceForInteraction")("WAWebVoipWebWasmLoader").__setRef("WAWebVoipWebLoadable").load();return u=d(e),u}),"voipWebWasmLoader");function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield t();try{yield o("WAWebVoipPersistentFS").initPersistentFS(n),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["voip: [IDBFS] Initialized persistent FS successfully at ",""])),o("WAWebVoipPersistentFS").getVoipPersistentDirectoryPath())}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["voip: [IDBFS] Failed to initialize persistent FS: ",""])),e)}return n}),m.apply(this,arguments)}l.requireVoip=c}),98);
__d("WAWebVoipWebBridgeApi",["WALogger","WAWebCallCollection","WAWebCallLogUtils","WAWebCallModel","WAWebChatCollection","WAWebEnvironment","WAWebUserPrefsMeUser","WAWebVoipAcquireMediaStream","WAWebVoipActionRequestOpenChat","WAWebVoipActionWebHandleIncomingSignalingMessage","WAWebVoipActionWriteCallLogCallStateChanged","WAWebVoipActionWriteCallLogEventCallEnding","WAWebVoipActionWriteCallLogEventCallMissed","WAWebVoipActionWriteCallLogEventGroupInfoChanged","WAWebVoipActionWriteCallLogEventUpdate1to1","WAWebVoipActionWriteCallLogEventUpdateJoinable","WAWebVoipActionWriteCallLogOfferNotice","WAWebVoipGatingUtils","WAWebVoipStartCall","WAWebVoipUiManager","WAWebVoipWaCallEnums","WAWebVoipWebLoadable","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v={initializeVoipWasm:function(){if(!o("WAWebVoipGatingUtils").isCallingEnabled())throw r("err")("VoipWebBridgeApi: VoipWebWasm should not be loaded");return o("WAWebVoipWebLoadable").requireVoip()},handleVoipWebIncomingSignalingMessageAction:function(t){var e=t.msg,n=t.voipNode;return o("WAWebVoipActionWebHandleIncomingSignalingMessage").handleVoipWebIncomingSignalingMessageAction(e,n)},startVoipCallByWid:function(t){var e=t.peerJid,n=t.isVideo;return o("WAWebVoipStartCall").startWAWebVoipCall(e,n)},generateCallLog:function(t){var e=t.props;return o("WAWebVoipActionWriteCallLogOfferNotice").generateCallLogOfferNotice(e)},generateCallLogOfferNotice:function(t){return o("WAWebVoipActionWriteCallLogOfferNotice").generateCallLogOfferNotice(t)},generateCallLogFromNativeCallEndingEvent:function(t){var e=t.callEndingData;return o("WAWebVoipActionWriteCallLogEventCallEnding").generateCallLogFromNativeCallEndingEvent(e)},generateCallLogFromEventUpdateJoinable:function(t){var e=t.joinableCallLogData;return o("WAWebVoipActionWriteCallLogEventUpdateJoinable").generateCallLogFromEventUpdateJoinable(e)},generateCallLogFromEventCallMissed:function(t){var e=t.callMissedData;return o("WAWebVoipActionWriteCallLogEventCallMissed").generateCallLogFromEventCallMissed(e)},generateCallLogFromEventUpdate1to1:function(t){var e=t.call1to1LogData;return o("WAWebVoipActionWriteCallLogEventUpdate1to1").generateCallLogFromEventUpdate1to1(e)},generateCallLogFromEventGroupInfoChanged:function(t){var e=t.groupInfoChangedData;return o("WAWebVoipActionWriteCallLogEventGroupInfoChanged").generateCallLogFromEventGroupInfoChanged(e)},requestOpenChat:function(t){var e=t.chatJid,n=o("WAWebWidFactory").createWid(e);return o("WAWebVoipActionRequestOpenChat").requestOpenChat(n)},getTcToken:(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.wid;try{var r=yield o("WAWebCallLogUtils").get1x1CallLidOrPnDestination({callDestinationWid:n}),a=o("WAWebChatCollection").ChatCollection.get(r);return a==null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["voip: getTcToken: chat not found, chat domain: ",""])),n.server),{tcToken:a==null?void 0:a.tcToken}}catch(e){return o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["voip: getTcToken: get1x1CallLidOrPnDestination failed, error: ",""])),e),{tcToken:null}}});function r(e){return t.apply(this,arguments)}return r})(),setCallState:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=e.callState,a=e.callInfo;if(r("WAWebEnvironment").isWindows||o("WAWebVoipUiManager").setupVoipActiveCallChangeListener(),r("WAWebCallCollection").activeCall==null){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["voip: Creating new call model for call state"]))).devConsole(n);var i=new(r("WAWebCallModel"));i.id=a.callId,i.peerJid=a.peerJid,i.isVideo=a.videoEnabled,i.isGroup=a.isGroupCall,i.groupJid=a.groupJid,i.outgoing=a.isCaller,a.isGroupCall&&a.participants&&(i.groupCallParticipants=a.participants.map(function(e){return e.jid})),a.videoEnabled?(i.selfVideoState=o("WAWebVoipWaCallEnums").VideoState.Enabled,i.peerVideoState=o("WAWebVoipWaCallEnums").VideoState.Enabled):(i.selfVideoState=o("WAWebVoipWaCallEnums").VideoState.Disabled,i.peerVideoState=o("WAWebVoipWaCallEnums").VideoState.Disabled),r("WAWebCallCollection").setActiveCall(i)}o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["voip: Setting call state to ",""])),n),(t=r("WAWebCallCollection").activeCall)==null||t.setState(n),r("WAWebCallCollection").setIsInConnectedCall(n===o("WAWebVoipWaCallEnums").CallState.CallActive||n===o("WAWebVoipWaCallEnums").CallState.ConnectedLonely),(n===o("WAWebVoipWaCallEnums").CallState.CallStateEnding||n===o("WAWebVoipWaCallEnums").CallState.None)&&(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["voip: Call ended, clearing active call model"]))),r("WAWebCallCollection").setActiveCall(null),r("WAWebCallCollection").setIsInConnectedCall(!1));var l=yield o("WAWebVoipActionWriteCallLogCallStateChanged").generateCallLogFromCallStateChangedEvent(a);l&&r("WAWebCallCollection").activeCall&&(r("WAWebCallCollection").activeCall.msg=l)});function t(t){return e.apply(this,arguments)}return t})(),handleVideoStateChange:function(t){var e=t.videoStateData;o("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["voip: [A/V switch] Video state change event received at frontend:\n      videoState: ",",\n      isSelf: ",",\n      callMediaStateChanged: ",""])),e.videoState,e.isSelf,e.callMediaStateChanged);var n=r("WAWebCallCollection").activeCall;if(!n){o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["voip: [A/V switch] handleVideoStateChange: No active call, ignoring\n        video state change"])));return}var a=e.isSelf!=null&&e.isSelf;if(a?n.selfVideoState=e.videoState:(n.peerVideoState=e.videoState,e.userJid&&(n.peerVideoJid=e.userJid)),e.callMediaStateChanged===!0){var i=n.shouldShowVideoUI();o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["voip: [A/V switch] Call media state changed,\n        shouldShowVideo: ",""])),i),n.set("isVideo",i)}n.trigger("change:videoState")},voipAcquireMediaStream:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebVoipAcquireMediaStream").acquireVoipMediaStream(e);return t});function t(t){return e.apply(this,arguments)}return t})(),handleMuteStateChange:function(t){var e=t.callInfo;o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["voip: Mute state change received, callInfo: ",""])),e);var n=r("WAWebCallCollection").activeCall;if(!n){o("WALogger").DEV(g||(g=babelHelpers.taggedTemplateLiteralLoose(["voip: micMuteStateChange: No active call, ignoring\n        mic state change"])));return}var a=!1,i=!1;if(e.participants)for(var l of e.participants)o("WAWebUserPrefsMeUser").isMeAccount(l.jid)?a=l.isMuted:!e.isGroupCall&&l.jid.equals(n.peerJid)&&(i=l.isMuted);n.selfMicMuted=a,n.peerMicMuted=i,o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["voip: Updated mute states - selfMuted: ",", peerMuted: ",""])),a,i),n.trigger("change:selfMicMuted"),n.trigger("change:peerMicMuted")},handleGroupInfoChangedGroupCall:function(t){var e,n,a,i,l=t.groupInfoChangedPayload;o("WALogger").DEV(y||(y=babelHelpers.taggedTemplateLiteralLoose(["voip: Group Info received, callInfo: ",""])),l);var s=r("WAWebCallCollection").activeCall;if(!s){o("WALogger").DEV(C||(C=babelHelpers.taggedTemplateLiteralLoose(["voip: groupInfoChange: No active call, ignoring\n        group info change"])));return}s.groupCallParticipants=(e=l.CallParticipants)==null?void 0:e.map(function(e){return e.participant}),s.groupCallParticipantsConnected=(n=l.CallParticipants)==null?void 0:n.filter(function(e){return e.outcome===o("WAWebVoipWaCallEnums").CallParticipantState.Connected}).map(function(e){return e.participant});var u=(a=(i=s.groupCallParticipantsConnected)==null?void 0:i.map(function(e){return e.toLogString()}).join(", "))!=null?a:[];o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["voip: Group call connected participants: ",""])),u),s.trigger("change:groupCallParticipantsConnected")}};l.VoipWebBridgeApi=v}),98);
__d("WAWebWamBridgeApi",["WAWebEphemeralKeepInChatWamUtils","WAWebOTPLoggingHelper"],(function(t,n,r,o,a,i,l){var e={logTieBreakIgnoredKicWam:function(t){var e=t.keepInChatMessage;return o("WAWebEphemeralKeepInChatWamUtils").logTieBreakIgnoredKic(e)},logOTPMessageReceivedActions:function(t){var e=t.msgData;o("WAWebOTPLoggingHelper").logOTPMessageReceived(e)},logOTPMessageReadActions:function(t){var e=t.msgRow;o("WAWebOTPLoggingHelper").logOTPMessageRead(e)}};l.WamBridgeApi=e}),98);
__d("WAWebSetFrontendHandlerApi",["WAWebAbPropsBridgeApi","WAWebAddOnsBridgeApi","WAWebBizAiBridgeApi","WAWebBlocklistBridgeApi","WAWebBusinessProfileBridgeApi","WAWebCTWABridgeApi","WAWebChatBridgeApi","WAWebClockBridgeApi","WAWebContactBridgeApi","WAWebCustomPaymentMethodsSyncBridgeApi","WAWebDebugBridgeApi","WAWebDeviceSwitchingBridgeApi","WAWebGroupBridgeApi","WAWebGroupHistoryBridgeApi","WAWebGroupMetadataBridgeApi","WAWebHistorySyncApi","WAWebIdentityBridgeApi","WAWebIndividualNewChatMessageCappingBridgeApi","WAWebL10nHelpersBridgeApi","WAWebLabelsBridgeApi","WAWebMemberLabelBridgeApi","WAWebMemoryInfoBridgeApi","WAWebMsgBridgeApi","WAWebMsgInfoBridgeApi","WAWebNewsletterBridgeApi","WAWebNoteBridgeApi","WAWebNuxBridgeApi","WAWebPaymentInfoSyncBridgeApi","WAWebPrimaryFeaturesBridgeApi","WAWebPrivacyBridgeApi","WAWebProfilePicThumbBridgeApi","WAWebReachoutTimelockBridgeApi","WAWebReactionsBridgeApi","WAWebSocketBridgeApi","WAWebStatusBridgeApi","WAWebSyncdBridgeApi","WAWebTextStatusBridgeApi","WAWebThreadBridgeApi","WAWebUnreadMentionMetadataBridgeApi","WAWebVerifiedNameBridgeApi","WAWebVoipWebBridgeApi","WAWebWamBridgeApi"],(function(t,n,r,o,a,i,l){function e(e){e.setHandlers("event",babelHelpers.extends({},o("WAWebMsgBridgeApi").MsgBridgeApi,o("WAWebLabelsBridgeApi").LabelsBridgeApi,o("WAWebMemberLabelBridgeApi").MemberLabelBridgeApi,o("WAWebContactBridgeApi").ContactBridgeApi,o("WAWebChatBridgeApi").ChatBridgeApi,o("WAWebClockBridgeApi").ClockBridgeApi,o("WAWebCTWABridgeApi").CTWABridgeApi,o("WAWebStatusBridgeApi").StatusBridgeApi,o("WAWebNuxBridgeApi").NuxBridgeApi,o("WAWebTextStatusBridgeApi").TextStatusBridgeApi,o("WAWebMsgInfoBridgeApi").MsgInfoBridgeApi,o("WAWebGroupBridgeApi").GroupBridgeApi,o("WAWebGroupHistoryBridgeApi").GroupHistoryBridgeApi,o("WAWebHistorySyncApi").HistorySyncBridgeApi,o("WAWebIdentityBridgeApi").IdentityBridgeApi,o("WAWebSocketBridgeApi").SocketBridgeApi,o("WAWebAbPropsBridgeApi").AbPropsBridgeApi,o("WAWebWamBridgeApi").WamBridgeApi,o("WAWebReactionsBridgeApi").ReactionsBridgeApi,o("WAWebAddOnsBridgeApi").AddOnsBridgeApi,o("WAWebGroupMetadataBridgeApi").GroupMetadataBridgeApi,o("WAWebNewsletterBridgeApi").NewsletterBridgeApi,o("WAWebPrimaryFeaturesBridgeApi").PrimaryFeaturesBridgeApi,o("WAWebProfilePicThumbBridgeApi").ProfilePicThumbBridgeApi,o("WAWebDeviceSwitchingBridgeApi").DeviceSwitchingBridgeApi,o("WAWebPrivacyBridgeApi").PrivacyBridgeApi,o("WAWebPaymentInfoSyncBridgeApi").PaymentInfoSyncBridgeApi,o("WAWebCustomPaymentMethodsSyncBridgeApi").CustomPaymentMethodsSyncBridgeApi,o("WAWebUnreadMentionMetadataBridgeApi").UnreadMentionMetadataBridgeApi,o("WAWebL10nHelpersBridgeApi").L10nHelpersBridgeApi,o("WAWebNoteBridgeApi").NoteBridgeApi,o("WAWebBizAiBridgeApi").BizAiBridgeApi,o("WAWebVoipWebBridgeApi").VoipWebBridgeApi,o("WAWebVerifiedNameBridgeApi").VerifiedNameBridgeApiType,o("WAWebMemoryInfoBridgeApi").MemoryInfoBridgeApi,o("WAWebSyncdBridgeApi").SyncdBridgeApi,o("WAWebDebugBridgeApi").DebugBridgeApi,o("WAWebReachoutTimelockBridgeApi").ReachoutTimelockBridgeApi,o("WAWebBusinessProfileBridgeApi").BusinessProfileBridgeApi,o("WAWebBlocklistBridgeApi").BlocklistBridgeApi,o("WAWebIndividualNewChatMessageCappingBridgeApi").IndividualNewChatMessageCappingBridgeApi,o("WAWebThreadBridgeApi").ThreadBridgeApi))}l.setFrontendHandlers=e}),98);
__d("WAWebUpdateMsgBizPrivacyStatusAction",["WALogger","WAWebPrivacyModeSystemMsg","WAWebProtobufsWeb.pb","WAWebSchemaMessage","WAWebWid","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a;if(r("WAWebWid").isUser(t.id.remote)&&!(t.id.remote.isBot()||(a=t.invokedBotWid)!=null&&a.isBot())){var i=t.privacyModeWhenSent;if(!(i==null&&n==null)&&!(i!=null&&n!=null&&i.privacyModeTs>=n.privacyModeTs)){var l=o("WAWebPrivacyModeSystemMsg").getReducedPrivacyMode(n),s=o("WAWebPrivacyModeSystemMsg").getReducedPrivacyMode(i);if(l!==s){if(t.bizPrivacyStatus!=null){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["msg.bizPrivacyStatus exist already, we can not assign a new value anymore"])));return}var u=c(l);t.bizPrivacyStatus=u,yield o("WAWebSchemaMessage").getMessageTable().merge(t.id.toString(),{bizPrivacyStatus:u})}}}}),u.apply(this,arguments)}function c(e){switch(e){case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE:return o("WAWebProtobufsWeb.pb").WebMessageInfo$BizPrivacyStatus.E2EE;case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.BSP:return o("WAWebProtobufsWeb.pb").WebMessageInfo$BizPrivacyStatus.BSP;case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.FB:case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.HOSTED_GROUP:return o("WAWebProtobufsWeb.pb").WebMessageInfo$BizPrivacyStatus.FB}}l.default=s}),98);
__d("WAWebWorkerSafeBridgeApi",["JSResourceForInteraction","Promise","WALogger","WATaskScheduler","WAWebCTWASuggestionInitFromStorage","WAWebChatCollection","WAWebContactCollection","WAWebEphemeralityResolver","WAWebFetchAdEntryPointsConfiguration","WAWebFetchQuickPromotions","WAWebFtsClient","WAWebGetNewChatMessageCappingInfoJob","WAWebGetOrQueryUsyncInfoContactAction","WAWebGroupCreationKeyDistribution","WAWebHandleHistorySyncNotification","WAWebJobLoadQuickPromotions","WAWebKeyManagementHandleKeyRequestApi","WAWebKeyManagementHandleKeyShareApi","WAWebKeyManagementSendKeyShareApi","WAWebMsgCollection","WAWebNonMessageDataRequestHandler","WAWebOptOutListCollection","WAWebPaymentNotificationHandler","WAWebPrivacyMode_WORKER_INCOMPATIBLE","WAWebProfilePicThumbCollection","WAWebResendGroupMsgMainThreadOnly","WAWebResendUserMsgMainThreadOnly","WAWebRestoreChatsAndMessages","WAWebRestoreGroupsAndContacts","WAWebRestoreProfilePictures","WAWebSyncContactJob","WAWebSyncdOrphan","WAWebTasksTaskType","WAWebTosCountryGating","WAWebTosGating","WAWebUpdateMsgBizPrivacyStatusAction","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u=r("JSResourceForInteraction")("WAWebOptOutSyncJob").__setRef("WAWebWorkerSafeBridgeApi"),c={setProfilePicThumb:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.wid,n=o("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.gadd(t);yield o("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.update(n.id)});function t(t){return e.apply(this,arguments)}return t})(),getPrivacyMode:function(t){var e=t.id;return o("WAWebPrivacyMode_WORKER_INCOMPATIBLE").getPrivacyModeFromModel(e)},updateBizPrivacyStatus:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgIds,a=e.privacyMode;yield(s||(s=n("Promise"))).all(t.map(function(e){return o("WAWebMsgCollection").MsgCollection.get(e)}).filter(Boolean).map(function(e){return r("WAWebUpdateMsgBizPrivacyStatusAction")(e,a)}))});function t(t){return e.apply(this,arguments)}return t})(),getChatPrivacyInfoOnNewMsg:function(t){var e=t.chatId,n=o("WAWebChatCollection").ChatCollection.get(e);return{verifiedLevel:n==null?void 0:n.contact.verifiedLevel,privacyMode:o("WAWebPrivacyMode_WORKER_INCOMPATIBLE").getPrivacyModeFromModel(e)}},getContactData:function(n){var t=n.ids;return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getContactData"]))),new Map(t.map(function(e){var t=o("WAWebContactCollection").ContactCollection.get(e),n=o("WAWebEphemeralityResolver").getEphemeralDurationForUser(t);return[e.toJid(),{ephemeralDuration:n,shouldBlockByCountry:function(){return t==null?!1:o("WAWebTosCountryGating").shouldBlockByCountry(t)},shouldBlockByTos:function(){return t==null?!1:o("WAWebTosGating").shouldBlockByTos(t)}}]}))},getBizBotData:function(t){var e=t.chatIds;return new Map(e.map(function(e){var t=o("WAWebChatCollection").ChatCollection.get(e);return[e.toJid(),{bizBotSystemMsgType:t==null?void 0:t.bizBotSystemMsgType}]}))},handleHistorySyncNotification:function(t){var e=t.historySyncMetaData,n=t.from,r=t.externalId;return o("WAWebHandleHistorySyncNotification").handleHistorySyncNotification(e,n,r)},handleAppStateSyncKeyShare:function(t){var e=t.keyShare,n=t.from;return o("WAWebKeyManagementHandleKeyShareApi").handleAppStateSyncKeyShare(e,n)},sendAppStateSyncKeyShare:function(t){var e=t.keyShare;return o("WAWebKeyManagementSendKeyShareApi").sendAppStateSyncKeyShare(e)},restoreChatsAndMessages:function(){return o("WAWebRestoreChatsAndMessages").restoreChatsAndMessages()},restoreGroupsAndContacts:function(){return o("WAWebRestoreGroupsAndContacts").restoreGroupsAndContacts()},restoreProfilePictures:function(){return o("WAWebRestoreProfilePictures").restoreProfilePictures()},processAllOrphanPaymentNotifications:function(){return o("WAWebPaymentNotificationHandler").processAllOrphanPaymentNotifications()},handleAppStateSyncKeyRequest:function(t){var e=t.keyRequest,n=t.from;return o("WAWebKeyManagementHandleKeyRequestApi").handleAppStateSyncKeyRequest(e,n)},handlePeerDataOperationRequestResponse:function(t){var e=t.stanzaId,n=t.response;return o("WAWebNonMessageDataRequestHandler").handlePeerDataOperationRequestResponse(e,n)},handlePeerDataOperationRequest:function(t){var e=t.stanzaId,n=t.request;return o("WAWebNonMessageDataRequestHandler").handlePeerDataOperationRequest(e,n)},getFtsClientInstance:function(){return o("WAWebFtsClient").ftsClient},getOrQueryUsyncInfo:function(t){var e=t.wid;return o("WAWebGetOrQueryUsyncInfoContactAction").getOrQueryUsyncInfo(e)},maybeSendKeyDistributionMsgToNewGroup:function(t){var e=t.groupId;return o("WAWebGroupCreationKeyDistribution").maybeSendKeyDistributionMsgToNewGroup(e)},processOrphanPaymentNotifications:function(t){var e=t.msgs;return o("WAWebPaymentNotificationHandler").processOrphanPaymentNotifications(e)},processLastMsgs:function(t){var e=t.chatId,r=t.msgObjs,a=t.meta,i=t.processMessagesOrigin,l=t.chatMsgsCollection,u=t.preserveOrder,c=o("WAWebChatCollection").ChatCollection.get(e);return c&&c.msgs.length===0&&!c.pendingInitialLoading?o("WAWebMsgCollection").MsgCollection.processMultipleMessages(e,r,a,i,l,u):(s||(s=n("Promise"))).resolve([])},loadQuickPromotions:function(t){var e=t.trigger;return o("WAWebJobLoadQuickPromotions").loadQuickPromotions(e)},fetchQuickPromotionsNow:function(){o("WAWebFetchQuickPromotions").fetchQuickPromotions().then(function(){o("WATaskScheduler").rescheduleNow(o("WAWebTasksTaskType").TaskType.FETCH_QUICK_PROMOTIONS)})},fetchAdEntryPointsConfiguration:function(t){var e=t.trigger;return o("WAWebFetchAdEntryPointsConfiguration").fetchAdEntryPointsConfiguration(e)},restoreCTWASuggestions:function(){return o("WAWebCTWASuggestionInitFromStorage").restoreCTWASuggestions()},restoreNewMessageCappingData:function(){return o("WAWebGetNewChatMessageCappingInfoJob").fetchOrUpdateCapStatus()},resendUserMsg:function(t){var e=t.msgId,n=t.msgType,r=t.msgRecordType,a=t.excludeList,i=t.ackTime;return o("WAWebResendUserMsgMainThreadOnly").resendUserMsgMainThreadOnly(e,n,r,a,i)},resendGroupMsg:function(t){var e=t.msgId,n=t.msgType,r=t.msgRecordType,a=t.groupId,i=t.isDirect,l=t.oldList,s=t.phash,u=t.ackTime,c=t.serverAddressingMode;return o("WAWebResendGroupMsgMainThreadOnly").resendGroupMsgMainThreadOnly(e,n,r,a,i,l,s,u,c)},updateOptOutList:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield u.load(),t=e.updateOptOutList;return t()});function t(){return e.apply(this,arguments)}return t})(),updateOptOutListCollection:function(t){var e=t.wids;o("WAWebOptOutListCollection").OptOutListCollection.replaceAllWith(e)},updateOptOutListModelInCollection:o("WAWebOptOutListCollection").OptOutListCollection.updateOptOutListInCollectionAndDb,syncContactListJob:function(t){var e=t.contactIds,n=t.shouldSyncDevice,r=t.mode;return o("WAWebSyncContactJob").syncContactListJob(e,n,r)},checkOrphanFavoriteStickers:function(){return o("WAWebSyncdOrphan").checkOrphanFavoriteStickers()}};l.WorkerSafeBridgeApi=c}),98);
__d("WAWebSetWorkerSafeHandlerApi",["WAWebWorkerSafeBridgeApi"],(function(t,n,r,o,a,i,l){function e(e){e.setHandlers("workerSafeEvent",babelHelpers.extends({},o("WAWebWorkerSafeBridgeApi").WorkerSafeBridgeApi))}l.setWorkerSafeHandlers=e}),98);
__d("WAWebSupportChatConfirmationModal.react",["WAWebConfirmPopup.react","WAWebFbtCommon","WAWebFlex.react","WAWebModalManager","WAWebSupportChatStrings","WAWebText.react","react","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react"));function u(){return r("vulture")("9C-DsaSYRcXkjvxqRntOoMsyfe4="),s.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{okText:r("WAWebFbtCommon")("OK"),onOK:function(){return o("WAWebModalManager").ModalManager.close()},children:s.jsx(o("WAWebFlex.react").FlexColumn,{children:s.jsx(o("WAWebText.react").WAWebTextSmall,{children:o("WAWebSupportChatStrings").SupportChatConfirmationModalText()})})})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("WAWebSupportChatUtils",["WALogger","WAWebABPropsSaga","WAWebDrawerManager","WAWebHandleSingleMsg","WAWebModalManager","WAWebOpenChatFlow.react","WAWebSagaSystemMsg","WAWebSupportAIInfoNuxLoadable","WAWebSupportAiSessionWamEvent","WAWebSupportChatConfirmationModal.react","WAWebWamEnumSupportAiEventType","WAWebWidFactory","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){var e,s,u,c,d=c||(c=r("react"));function m(){new(o("WAWebSupportAiSessionWamEvent")).SupportAiSessionWamEvent({supportAiEventType:o("WAWebWamEnumSupportAiEventType").SUPPORT_AI_EVENT_TYPE.SUPPORT_AI_SCREEN_SHOWN_ON_THE_CHAT}).commit(),o("WAWebModalManager").ModalManager.open(d.jsx(o("WAWebSupportAIInfoNuxLoadable").SupportAIInfoNuxLoadable,{}),{transition:"modal-flow"})}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a=o("WAWebWidFactory").createWid(t);o("WAWebModalManager").ModalManager.open(d.jsx(o("WAWebOpenChatFlow.react").OpenChatFlow,{targetId:{targetId:a},onSuccess:function(r){var t=r.chat,a=r.created;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["openSupportChat: successfully opened support chat"]))),o("WAWebDrawerManager").DrawerManager.closeDrawerLeft(),n&&!a&&!o("WAWebABPropsSaga").getIsSagaProtobufSystemMessageEnabled()&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["openSupportChat: existing chat, adding system message"]))),o("WAWebHandleSingleMsg").handleSingleMsg({chatId:t.id,newMsg:o("WAWebSagaSystemMsg").genSagaInitSystemMsg(t.id),handleSingleMsgOrigin:"openSupportChat"}))},msgText:null,customError:d.jsx("div",{children:d.jsx(r("WAWebSupportChatConfirmationModal.react"),{})}),onError:function(t){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["InAppSupport: Error opening support chat: ",""])),t)}}),{transition:"modal-flow"})}),_.apply(this,arguments)}l.openSupportAINux=m,l.openSupportChat=p}),98);
__d("WAWebTosModal.react",["fbt","WAWebConfirmPopup.react","WAWebConnModel","WAWebModalManager","WAWebSocketModel","react","useWAWebListener","vulture"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(){o("WAWebConnModel").Conn.tos===0&&o("WAWebModalManager").ModalManager.close()}function d(){o("WAWebModalManager").ModalManager.close(),o("WAWebSocketModel").Socket.logout()}function m(){r("vulture")("UMdYUIwyehMo2AUhvNcxP-OqK3E=");var e,t,n;switch(o("useWAWebListener").useListener(o("WAWebConnModel").Conn,"change:tos",c),o("WAWebConnModel").Conn.tos){default:case 1:e=s._(/*BTDS*/"WhatsApp is updating our Terms and Privacy Policy to reflect new features and comply with the new European Union data protection laws. Open WhatsApp on your phone to read our Terms and Privacy Policy and learn more about the choices you have."),t=s._(/*BTDS*/"OK, got it"),n=function(){return o("WAWebModalManager").ModalManager.close()};break;case 2:e=s._(/*BTDS*/"WhatsApp is updating our Terms and Privacy Policy to reflect new features and comply with the new European Union data protection laws. Open WhatsApp on your phone to read our Terms and Privacy Policy and learn more about the choices you have."),t=s._(/*BTDS*/"Log out"),n=d;break}return u.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{onOK:n,okText:t,children:e})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("WAWebUiRefreshNuxBgIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox","innerStyles"],s,u,c=s||(s=r("react")),d="ui-refresh-nux-bg";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=t.innerStyles,p=babelHelpers.objectWithoutPropertiesLoose(t,e),_;if(s){var f=s.x,g=f===void 0?0:f,h=s.y,y=h===void 0?0:h,C=s.width,b=C===void 0?0:C,v=s.height,S=v===void 0?0:v;_=[g,y,b,S].join(" ")}var R=228,L=500;return(a!=null||i!=null)&&(R=a,L=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},p,{children:c.jsxs("svg",{viewBox:_!=null?_:"0 0 500 228",height:R,width:L,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsxs("g",{clipPath:"url(#a)",children:[c.jsx("path",{d:"M-37.344 35.81C10.399 61.373 68.804 81.177 134.014 92.459c.587-1.417.055-3.23-1.596-3.93L-182.833-87.834l90.704-76L148.486 27.869c2.454 2.138 6.079-.614 4.679-3.552l-34.124-71.638 476.706-24.744-18.674 78.014-192.367 82.58c-1.692.718-2.208 2.603-1.55 4.034 70.751-12.043 134.222-33.9 185.114-62.159 0 56.558 15.703 115.204 26.6 145.627 23.836 66.548 25.971 72.508-202.597 26.372 2.049 6.677-4.107 13.187-11.017 11.275l-111.772-30.923c-37.116-2.404-168.762 12.682-168.762 12.682-98.186 14.583-135.399 20.109-146.903 5.454z",fill:"#E6FFDA",className:u(m==null?void 0:m.splash)}),c.jsxs("g",{clipPath:"url(#b)",children:[c.jsx("path",{d:"M302.398 105.275c-6.76-14.14-1.3-31.25 12.629-38.802 14.387-7.8 32.376-2.452 40.164 11.935 7.367 13.594 2.996 30.395-9.632 38.79l-35.274 17.147z",fill:"#AFE966",stroke:"#111B21",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M348.997 74.186c1.844 9.509-4.817 18.807-14.882 20.763-10.066 1.956-19.723-4.172-21.568-13.681m5.255-4.408c-.446-2.537.706-4.853 2.587-5.187s3.764 1.449 4.21 3.987m11.24-1.993c-.446-2.538.706-4.853 2.588-5.188s3.763 1.449 4.209 3.987",stroke:"#111B21",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"m276.135 125.11-52.761 6.705m33.623 12.912-31.344 3.55",stroke:"#111B21",strokeWidth:1.5,strokeLinecap:"round"}),c.jsx("path",{d:"m228.753 86.668 106.562 17.193c5.112.825 8.615 5.645 7.791 10.746l-13.282 82.326c-.773 4.788-5.325 8.068-10.124 7.293l-107.126-17.284z",fill:"#fff",stroke:"#111B21",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"m226.646 142.812-7.294 45.208-42.421-6.844c-4.799-.775-8.091-5.304-7.316-10.108l13.369-82.857c.773-4.789 5.309-8.07 10.123-7.294l42.421 6.844z",fill:"#25D366",stroke:"#111B21",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"m188.894 127.764 29.969 4.835z",fill:"#25D366"}),c.jsx("path",{d:"m188.894 127.764 29.969 4.835",stroke:"#111B21",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"m190.798 115.96 29.969 4.836z",fill:"#25D366"}),c.jsx("path",{d:"m190.798 115.96 29.969 4.836",stroke:"#111B21",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.jsxs("mask",{id:"c",maskUnits:"userSpaceOnUse",x:240.737,y:104.233,width:83.218,height:80.734,fill:"#000",children:[c.jsx("path",{fill:"#fff",d:"M240.737 104.233h83.218v80.734h-83.218z"}),c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M312.346 128.868c4.233 7.73 5.22 16.656 2.774 25.143-5.052 17.505-23.324 27.654-40.735 22.618l-.011-.002a32.8 32.8 0 0 1-13.985-8.232l-16.64-1.164 7.842-14.43a33.1 33.1 0 0 1 .354-17.095c5.052-17.506 23.324-27.655 40.736-22.618 8.446 2.451 15.426 8.055 19.665 15.78m-55.174 22.594.866 3.353-4.296 7.032 8.431.175 2.248 2.203a27 27 0 0 0 3.72 3.072 27 27 0 0 0 7.787 3.672c14.316 4.133 29.331-4.154 33.469-18.469 2.002-6.935 1.187-14.238-2.299-20.56-2.072-3.753-4.88-6.866-8.359-9.245a27.1 27.1 0 0 0-7.815-3.676c-14.316-4.127-29.331 4.155-33.469 18.469a26.97 26.97 0 0 0-.283 13.974"})]}),c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M312.346 128.868c4.233 7.73 5.22 16.656 2.774 25.143-5.052 17.505-23.324 27.654-40.735 22.618l-.011-.002a32.8 32.8 0 0 1-13.985-8.232l-16.64-1.164 7.842-14.43a33.1 33.1 0 0 1 .354-17.095c5.052-17.506 23.324-27.655 40.736-22.618 8.446 2.451 15.426 8.055 19.665 15.78m-55.174 22.594.866 3.353-4.296 7.032 8.431.175 2.248 2.203a27 27 0 0 0 3.72 3.072 27 27 0 0 0 7.787 3.672c14.316 4.133 29.331-4.154 33.469-18.469 2.002-6.935 1.187-14.238-2.299-20.56-2.072-3.753-4.88-6.866-8.359-9.245a27.1 27.1 0 0 0-7.815-3.676c-14.316-4.127-29.331 4.155-33.469 18.469a26.97 26.97 0 0 0-.283 13.974",fill:"#25D366"}),c.jsx("path",{d:"m257.298 154.69-.001.006 1.481.239.001-.006zm57.822-.679 1.441.416v-.001zm-2.774-25.143 1.316-.721-.001-.001zm-37.961 47.761.417-1.441-.088-.026-.09-.014zm-.011-.002-.417 1.441.087.025.091.015zm-13.985-8.232 1.057-1.065-.396-.393-.556-.039zm-16.64-1.164-1.318-.717a1.5 1.5 0 0 0 1.213 2.213zm7.842-14.43 1.318.717.277-.51-.138-.564zm.354-17.095 1.442.416zm40.736-22.618.418-1.441h-.002zm-34.643 41.727 1.28.782.331-.542-.159-.615zm-.866-3.353-1.456.361.001.007.002.008zm-3.43 10.385-1.28-.782-1.361 2.227 2.609.054zm8.431.175 1.05-1.071-.425-.416-.594-.013zm2.248 2.203 1.056-1.065-.006-.006zm3.72 3.072.848-1.237h-.001zm7.787 3.672.416-1.441zm33.469-18.469 1.441.417v-.001zm-2.299-20.56 1.313-.725zm-8.359-9.245-.848 1.238.002.001zm-7.815-3.676.416-1.441zm-33.469 18.469 1.441.418v-.001zm59.106 16.938c2.556-8.866 1.524-18.201-2.899-26.279l-2.631 1.441c4.042 7.382 4.984 15.901 2.648 24.007zm-42.593 23.643c18.215 5.27 37.314-5.348 42.593-23.642l-2.882-.832c-4.824 16.717-22.27 26.397-38.877 21.593zm.167.039.011.001.478-2.961-.011-.002zm-14.803-8.649a34.3 34.3 0 0 0 14.625 8.609l.834-2.882a31.3 31.3 0 0 1-13.345-7.856zm-15.688-.732 16.64 1.164.21-2.993-16.641-1.164zm6.629-16.642-7.842 14.429 2.636 1.433 7.842-14.429zm.231-16.795a34.6 34.6 0 0 0-.369 17.869l2.913-.715a31.6 31.6 0 0 1 .339-16.322zm42.593-23.643c-18.215-5.269-37.313 5.348-42.593 23.643l2.883.832c4.824-16.717 22.269-26.397 38.877-21.593zm20.564 16.499c-4.43-8.073-11.733-13.936-20.562-16.499l-.836 2.881c8.062 2.34 14.72 7.684 18.768 15.061zM259.49 154.44l-.866-3.353-2.905.751.866 3.352zm-4.468 8.189 4.296-7.032-2.56-1.564-4.296 7.032zm7.182-2.107-8.431-.175-.063 2.999 8.432.176zm3.267 2.632-2.248-2.203-2.1 2.143 2.248 2.202zm3.517 2.906a25.4 25.4 0 0 1-3.511-2.9l-2.112 2.13a28 28 0 0 0 3.929 3.245zm7.356 3.468a25.4 25.4 0 0 1-7.355-3.468l-1.696 2.475a28.5 28.5 0 0 0 8.22 3.876zm31.612-17.445c-3.908 13.52-18.092 21.348-31.612 17.445l-.832 2.883c15.112 4.362 30.958-4.384 35.326-19.494zm-2.172-19.419c3.294 5.973 4.064 12.867 2.172 19.42l2.882.832c2.113-7.316 1.251-15.03-2.427-21.701zm-7.891-8.73c3.28 2.242 5.93 5.178 7.892 8.731l2.626-1.45c-2.183-3.952-5.148-7.244-8.825-9.758zm-7.385-3.474a25.6 25.6 0 0 1 7.383 3.473l1.696-2.475a28.6 28.6 0 0 0-8.247-3.88zm-31.612 17.445c3.908-13.519 18.091-21.343 31.613-17.445l.831-2.882c-15.112-4.357-30.957 4.383-35.326 19.494zm-.268 13.197a25.46 25.46 0 0 1 .268-13.196l-2.881-.835a28.45 28.45 0 0 0-.299 14.752z",fill:"#111B21",mask:"url(#c)"}),c.jsx("path",{d:"M289.831 161.805s-4.73-.25-8.99-3.92c-3.58-2.94-6.27-6.87-8.19-11.06-1.81-3.98-3.77-9.07-2.49-13.47 1.09-3.76 4.73-5.92 4.79-5.95 1.41-.86 2.9-.48 4.36.02 0 0 .02 0 .04.01 1.25.32 1.63 1.45 1.82 2.59.24 1.49.9 7.1.03 8.16-.83 1-2.31 1.23-3.09 2.29 0 0 0 .01-.01.02v.03c-.24 1.7 3.15 6.7 3.15 6.7 1.25 1.85 4.56 5.38 4.82 5.42.02 0 3.34-2.84 4.78-2.83 1.04 0 6.2 4.82 6.3 4.97 1.17 1.66-.25 4.02-1.48 5.21-1.5 1.45-3.8 1.93-5.82 1.82z",fill:"#25D366",stroke:"#111B21",strokeWidth:1.5}),c.jsx("path",{d:"M341.656 197.07c1.461 1.892 4.948 6.389 6.438 8.31a1.15 1.15 0 0 0 1.603.213l5.741-4.289c.533-.398.624-1.16.196-1.67-1.583-1.888-5.13-6.135-6.619-8.027a.56.56 0 0 1 .298-.887c3.729-1.067 7.997-2.563 11.493-3.69.996-.321 1.124-1.71.194-2.19l-34.702-17.911a.868.868 0 0 0-1.252.926l6.937 38.23c.184 1.013 1.496 1.297 2.077.447 2.016-2.95 3.545-5.258 6.673-9.453a.58.58 0 0 1 .923-.009Z",fill:"#FCF5EB",stroke:"#111B21",strokeWidth:1.5,strokeMiterlimit:10}),c.jsx("path",{d:"M377.209 156.196c.737.136.929 1.18.288 1.568-2.973 1.804-4.127 3.464-4.76 6.892-.136.738-1.18.929-1.568.289-1.804-2.974-3.464-4.128-6.892-4.761-.737-.136-.929-1.179-.288-1.568 2.973-1.804 4.127-3.464 4.76-6.892.136-.737 1.179-.929 1.568-.288 1.804 2.973 3.464 4.127 6.892 4.76M215.394 63.933c.565.492.227 1.507-.521 1.56-2.365.17-3.748.855-5.307 2.648-.492.565-1.507.227-1.561-.52-.168-2.366-.854-3.749-2.647-5.308-.566-.492-.227-1.507.521-1.56 2.365-.17 3.747-.855 5.307-2.648.492-.566 1.507-.227 1.561.52.168 2.366.854 3.749 2.647 5.308m-71.188 78.098c.749-.03 1.199.941.692 1.493-1.605 1.745-2.141 3.192-2.046 5.567.03.749-.941 1.199-1.492.691-1.746-1.605-3.193-2.14-5.567-2.045-.749.03-1.199-.941-.692-1.493 1.605-1.745 2.141-3.193 2.046-5.567-.03-.749.941-1.199 1.492-.692 1.746 1.606 3.193 2.141 5.567 2.046",fill:"#FCF5EB",stroke:"#111B21",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("mask",{id:"d",fill:"#fff",children:c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m124.923 90.754 7.488-3.904 3.565 6.838-7.489 3.904a3.856 3.856 0 0 0-1.536 5.381l7.118 12.202a3.86 3.86 0 0 0 3.907 1.848l29.391-3.903a7.71 7.71 0 0 1 7.628 3.4l7.097 13.194-6.452 4.221-7.097-13.194-29.391 3.903a11.57 11.57 0 0 1-11.72-5.545l-7.118-12.202c-3.375-5.707-1.271-13.077 4.609-16.143"})}),c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m124.923 90.754 7.488-3.904 3.565 6.838-7.489 3.904a3.856 3.856 0 0 0-1.536 5.381l7.118 12.202a3.86 3.86 0 0 0 3.907 1.848l29.391-3.903a7.71 7.71 0 0 1 7.628 3.4l7.097 13.194-6.452 4.221-7.097-13.194-29.391 3.903a11.57 11.57 0 0 1-11.72-5.545l-7.118-12.202c-3.375-5.707-1.271-13.077 4.609-16.143",fill:"#fff"}),c.jsx("path",{d:"m132.411 86.85 1.33-.693-.694-1.33-1.33.693zm-7.488 3.904.693 1.33zm11.053 2.934.693 1.33 1.33-.694-.693-1.33zm-7.489 3.904.694 1.33zm-1.536 5.381 1.296-.756-.005-.008zm7.118 12.202-1.295.756.004.007zm3.907 1.848-.198-1.487-.015.002-.016.002zm29.391-3.903.197 1.487.016-.002.016-.002zm7.628 3.4 1.321-.711-.03-.057-.035-.054zm7.097 13.194.821 1.255 1.152-.753-.652-1.213zm-6.452 4.221-1.322.711.775 1.439 1.368-.895zm-7.097-13.194 1.321-.711a1.5 1.5 0 0 0-1.519-.776zm-29.391 3.903-.198-1.487-.015.002-.016.002zm-11.72-5.545-1.296.756.005.008zm-7.118-12.202 1.296-.756-.005-.007zm11.403-21.377-7.488 3.904 1.387 2.66 7.488-3.904zm5.589 7.474-3.565-6.837-2.66 1.387 3.564 6.837zm-8.125 5.928 7.488-3.904-1.387-2.66-7.488 3.904zm-.939 3.287a2.356 2.356 0 0 1 .939-3.287l-1.387-2.66a5.355 5.355 0 0 0-2.134 7.474zm7.123 12.21-7.118-12.202-2.591 1.511 7.118 12.203zm2.382 1.121a2.36 2.36 0 0 1-2.387-1.129l-2.582 1.527a5.35 5.35 0 0 0 5.427 2.567zm29.422-3.907-29.391 3.903.395 2.974 29.391-3.903zm9.082 4.065a9.21 9.21 0 0 0-9.113-4.06l.458 2.965a6.21 6.21 0 0 1 6.144 2.738zm7.162 13.305-7.097-13.194-2.642 1.421 7.097 13.194zm-6.952 6.187 6.452-4.221-1.642-2.51-6.453 4.221zm-9.239-13.739 7.096 13.195 2.643-1.421-7.097-13.195zm-27.873 4.679 29.391-3.902-.395-2.974-29.391 3.903zm-13.208-6.267a13.07 13.07 0 0 0 13.239 6.263l-.457-2.965a10.065 10.065 0 0 1-10.2-4.825zm-7.123-12.21 7.118 12.202 2.592-1.511-7.118-12.203zm5.211-18.229c-6.642 3.463-9.019 11.789-5.206 18.237l2.582-1.527c-2.937-4.967-1.106-11.382 4.011-14.05z",fill:"#111B21",mask:"url(#d)"}),c.jsx("path",{d:"M126.912 96.963c-2.383-4.955-.298-10.903 4.656-13.285l43.302-20.826c4.955-2.382 10.903-.298 13.285 4.657l4.161 8.65c2.383 4.955.298 10.903-4.656 13.286l-43.302 20.825c-4.955 2.383-10.903.298-13.285-4.656z",fill:"#FCF5EB",stroke:"#111B21",strokeWidth:1.5}),c.jsx("path",{d:"m174.926 74.762.734.156-.734-.156c-1.385 6.512-8.778 9.716-14.477 6.273-1.931-1.167-4.263.725-3.519 2.855l5.427 15.535a6.194 6.194 0 0 1-10.566 6.06l-6.639-7.798c-3.165-3.718-9.184-2.508-10.666 2.144l-.84 2.634a2.65 2.65 0 0 1-2.771 1.836l-.259-.024a.35.35 0 0 1-.28-.194l-3.424-7.12c-2.383-4.955-.298-10.903 4.656-13.285l43.302-20.826c4.955-2.382 10.903-.298 13.285 4.657l3.425 7.12a.35.35 0 0 1-.023.34l-.143.217a2.65 2.65 0 0 1-3.164 1.018l-9.904-3.791a2.472 2.472 0 0 0-3.302 1.794z",fill:"#25D366",stroke:"#111B21",strokeWidth:1.5}),c.jsx("path",{d:"M172.361 119.84a6.685 6.685 0 0 1 8.787 2.862l11.8 21.974a6.685 6.685 0 0 1-11.778 6.325l-11.801-21.974a6.686 6.686 0 0 1 2.992-9.187Z",fill:"#E6FFDA",stroke:"#111B21",strokeWidth:1.5}),c.jsx("path",{d:"M185.974 145.141a1.525 1.525 0 1 1 1.323 2.751 1.526 1.526 0 1 1-1.323-2.751",fill:"#111B21"})]})]}),c.jsxs("defs",{children:[c.jsx("clipPath",{id:"a",children:c.jsx("path",{fill:"#fff",d:"M0 .5h500v227H0z"})}),c.jsx("clipPath",{id:"b",children:c.jsx("path",{fill:"#fff",d:"M98 56h304v152H98z"})})]})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.UiRefreshNuxBgIcon=m}),98);
__d("WAWebUiRefreshNuxModal.react",["fbt","WAWebConfirmPopup.react","WAWebFbtCommon","WAWebFlex.react","WAWebModal.react","WAWebModalManager","WAWebNoop","WAWebText.react","WAWebThemeContext","WAWebUiRefreshNuxBgIcon.react","react","useWAWebFocusOnMount","useWAWebListener","vulture"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={container:{width:"xvue9z",backgroundColor:"x16w0wmm",$$css:!0},headerContainer:{paddingTop:"x109j2v6",paddingInlineEnd:"x2vl965",paddingBottom:"x1hhzuzn",paddingInlineStart:"xe2zdcy",$$css:!0},headerText:{fontSize:"x1603h9y",fontStyle:"x1j61x8r",fontWeight:"x1s688f",lineHeight:"xgif2c7",$$css:!0},descriptionContainer:{paddingTop:"xexx8yu",paddingInlineEnd:"x5zjp28",paddingBottom:"x1l90r2v",paddingInlineStart:"x162tt16",$$css:!0},descriptionText:{fontSize:"x1f6kntn",textAlign:"x1yc453h",lineHeight:"x1o2sk6j",$$css:!0},buttonContainer:{paddingTop:"x1h678fw",paddingInlineEnd:"xcldk2z",paddingBottom:"xv6tirj",paddingInlineStart:"x1phvje8",backgroundColor:"x16w0wmm",$$css:!0},splashLight:{fill:"x1sryxtu",$$css:!0},splashDark:{fill:"x1wlj4pe",$$css:!0}},d=function(){return s._(/*BTDS*/"A fresh look for WhatsApp Web")},m=function(){return s._(/*BTDS*/"We've made some improvements to how WhatsApp Web looks, including updated colors to make things easier to read, new icons, illustrations, and more.")};function p(e){r("vulture")("nh0Ga39Et6QLYzjnbTw_VSjtmwc=");var t=o("WAWebThemeContext").useIsDarkTheme(),n=r("useWAWebFocusOnMount")(),a=function(){o("WAWebModalManager").ModalManager.close()};return o("useWAWebListener").useListener(o("WAWebModalManager").ModalManager,"close_modal",function(){e.onOkOrDismiss()}),u.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{ref:n,onOK:a,okText:r("WAWebFbtCommon")("Continue"),onOverlayClick:r("WAWebNoop"),type:o("WAWebModal.react").ModalTheme.Auto,buttonGroupStyle:c.buttonContainer,testid:void 0,children:u.jsxs(o("WAWebFlex.react").FlexColumn,{xstyle:c.container,children:[u.jsx(o("WAWebFlex.react").FlexRow,{children:u.jsx(o("WAWebUiRefreshNuxBgIcon.react").UiRefreshNuxBgIcon,{innerStyles:{splash:t?c.splashDark:c.splashLight}})}),u.jsx(o("WAWebFlex.react").FlexRow,{align:"center",alignSelf:"stretch",justify:"center",xstyle:c.headerContainer,children:u.jsx(o("WAWebText.react").WAWebTextLargeRefreshed,{xstyle:c.headerText,children:d()})}),u.jsx(o("WAWebFlex.react").FlexRow,{xstyle:c.descriptionContainer,children:u.jsx(o("WAWebText.react").WAWebTextMutedRefreshed,{xstyle:c.descriptionText,children:m()})})]})})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);
__d("WAWebUnreadActivityIndicator.react",["react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u="x1fal1dg-B";function c(e){var t=e.pulse,n=t===void 0?!1:t,r=e.ref;return s.jsx("span",babelHelpers.extends({ref:r,"data-testid":void 0},{0:{className:"x1rg5ohu x11inojt x16suv20 xo5v014 x1pse0pq x2b8uid x16dsc37 xyp3urf xyi3aci xwf5gio x1p453bz x1suzm8a"},1:{className:"x1rg5ohu x11inojt x16suv20 xo5v014 x1pse0pq x2b8uid x16dsc37 xyp3urf xyi3aci xwf5gio x1p453bz x1suzm8a xnyknk1 x1c74tu6 xa4qsjk"}}[!!n<<0]))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("WAWebVoipUiLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebVoipUi.react").__setRef("WAWebVoipUiLoadable").load();return e}),"WAWebVoipUiLoadable"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(s.Fragment,{})}});l.requireBundle=u,l.WAWebVoipUiLoadable=c}),98);
__d("useWAWebNewsletterIsSuspended",["useWAWebEventTargetValue","useWAWebModelValues"],(function(t,n,r,o,a,i,l){function e(e){var t=o("useWAWebModelValues").useModelValues(e,["newsletterMetadata"]),n=r("useWAWebEventTargetValue")(t.newsletterMetadata,["change:suspended"],function(){var e;return((e=t.newsletterMetadata)==null?void 0:e.suspended)===!0});return n}l.useNewsletterIsSuspended=e}),98);
__d("useWAWebNoop",[],(function(t,n,r,o,a,i){"use strict";function e(){}i.default=e}),66);